{"version":3,"sources":["webpack:///./components/widgets/icons/fa_next_icon.tsx","webpack:///./components/widgets/icons/fa_previous_icon.tsx","webpack:///./node_modules/mattermost-redux/selectors/entities/integrations.js","webpack:///./node_modules/mattermost-redux/selectors/entities/bots.js","webpack:///./node_modules/mattermost-redux/actions/bots.js","webpack:///./images/bot_default_icon.png","webpack:///./images/incoming_webhook.jpg","webpack:///./images/oauth_icon.png","webpack:///./images/outgoing_webhook.jpg","webpack:///./images/slash_command_icon.jpg","webpack:///./components/widgets/icons/fa_search_icon.jsx","webpack:///./components/backstage/components/backstage_list.jsx","webpack:///./components/integrations/bots/bot.jsx","webpack:///./components/integrations/bots/bots.jsx","webpack:///./components/integrations/bots/index.js","webpack:///./components/backstage/components/backstage_header.jsx","webpack:///./components/integrations/bots/add_bot/add_bot.jsx","webpack:///./components/integrations/bots/add_bot/index.js","webpack:///./components/integrations/integration_option.jsx","webpack:///./components/integrations/integrations.jsx","webpack:///./components/integrations/index.js","webpack:///./components/permissions_gates/any_team_permission_gate/any_team_permission_gate.jsx","webpack:///./components/permissions_gates/any_team_permission_gate/index.js","webpack:///./components/delete_modal_trigger.jsx","webpack:///./components/emoji/delete_emoji_modal.jsx","webpack:///./components/emoji/emoji_list_item/emoji_list_item.jsx","webpack:///./components/emoji/emoji_list_item/index.js","webpack:///./components/emoji/emoji_list/emoji_list.jsx","webpack:///./components/emoji/emoji_list/index.js","webpack:///./components/emoji/emoji_page.jsx","webpack:///./components/emoji/index.js","webpack:///./components/emoji/add_emoji/add_emoji.jsx","webpack:///./components/emoji/add_emoji/index.js","webpack:///./actions/integration_actions.jsx","webpack:///./components/copy_text.tsx","webpack:///./components/integrations/delete_integration.jsx","webpack:///./components/integrations/installed_incoming_webhook.jsx","webpack:///./components/integrations/installed_incoming_webhooks/installed_incoming_webhooks.jsx","webpack:///./components/integrations/installed_incoming_webhooks/index.js","webpack:///./components/channel_select/channel_select.jsx","webpack:///./components/channel_select/index.js","webpack:///./components/integrations/abstract_incoming_webhook.jsx","webpack:///./components/integrations/add_incoming_webhook/add_incoming_webhook.jsx","webpack:///./components/integrations/add_incoming_webhook/index.js","webpack:///./components/integrations/edit_incoming_webhook/edit_incoming_webhook.jsx","webpack:///./components/integrations/edit_incoming_webhook/index.js","webpack:///./components/integrations/installed_outgoing_webhook.jsx","webpack:///./components/integrations/installed_outgoing_webhooks/installed_outgoing_webhooks.jsx","webpack:///./components/integrations/installed_outgoing_webhooks/index.js","webpack:///./components/integrations/abstract_outgoing_webhook.jsx","webpack:///./components/integrations/add_outgoing_webhook/add_outgoing_webhook.jsx","webpack:///./components/integrations/add_outgoing_webhook/index.js","webpack:///./components/integrations/edit_outgoing_webhook/edit_outgoing_webhook.jsx","webpack:///./components/integrations/edit_outgoing_webhook/index.js","webpack:///./components/integrations/installed_oauth_app/installed_oauth_app.jsx","webpack:///./components/integrations/installed_oauth_app/index.js","webpack:///./components/integrations/installed_oauth_apps/installed_oauth_apps.jsx","webpack:///./components/integrations/installed_oauth_apps/index.js","webpack:///./components/integrations/abstract_oauth_app.jsx","webpack:///./components/integrations/add_oauth_app/add_oauth_app.jsx","webpack:///./components/integrations/add_oauth_app/index.js","webpack:///./components/integrations/edit_oauth_app/edit_oauth_app.jsx","webpack:///./components/integrations/edit_oauth_app/index.js","webpack:///./components/integrations/installed_command.jsx","webpack:///./components/integrations/installed_commands/installed_commands.jsx","webpack:///./components/integrations/installed_commands/index.js","webpack:///./components/integrations/abstract_command.jsx","webpack:///./components/integrations/add_command/add_command.jsx","webpack:///./components/integrations/add_command/index.js","webpack:///./components/integrations/edit_command/edit_command.jsx","webpack:///./components/integrations/edit_command/index.js","webpack:///./components/integrations/confirm_integration/confirm_integration.jsx","webpack:///./components/integrations/confirm_integration/index.js","webpack:///./components/integrations/commands_container/commands_container.jsx","webpack:///./components/integrations/commands_container/index.js","webpack:///./components/backstage/components/backstage_category.jsx","webpack:///./components/backstage/components/backstage_section.jsx","webpack:///./components/backstage/components/backstage_sidebar.jsx","webpack:///./components/backstage/components/backstage_navbar.jsx","webpack:///./components/backstage/backstage_controller.jsx","webpack:///./components/backstage/index.js"],"names":["NextIcon","React","PureComponent","render","className","this","props","additionalClassName","title","id","t","defaultMessage","PreviousIcon","Object","defineProperty","exports","value","tslib_1","reselect_1","teams_1","getOutgoingHooks","state","entities","integrations","outgoingHooks","getCommands","commands","getSystemCommands","systemCommands","getIncomingHooks","incomingHooks","getOAuthApps","oauthApps","getOutgoingHooksInCurrentTeam","createSelector","getCurrentTeamId","teamId","hooks","values","filter","o","team_id","getAllCommands","__assign","getAutocompleteCommandsList","currentTeamId","command","auto_complete","sort","a","b","display_name","localeCompare","getBotAccounts","bots","accounts","client_1","action_types_1","helpers_1","createBot","bot","bindClientFunc","clientFunc","Client4","onSuccess","BotTypes","RECEIVED_BOT_ACCOUNT","params","patchBot","botUserId","botPatch","loadBot","getBot","loadBots","page","perPage","getBotsIncludeDeleted","RECEIVED_BOT_ACCOUNTS","disableBot","enableBot","assignBot","newOwnerId","module","SearchIcon","BackstageList","Component","constructor","super","e","setState","target","toLowerCase","children","loading","hasChildren","Children","map","child","cloneElement","length","emptyTextSearch","searchTerm","emptyText","addLink","addText","to","type","addButtonId","header","placeholder","searchPlaceholder","onChange","updateFilter","style","search","helpText","PropTypes","oneOfType","node","func","isRequired","string","bool","Utils","flexGrow","flexShrink","matchesFilter","owner","username","description","displayName","ownerUsername","indexOf","Bot","actions","user_id","enableUserAccessToken","disableUserAccessToken","confirmingId","revokeUserAccessToken","closeConfirm","creatingTokenState","token","assign","async","preventDefault","error","data","createUserAccessToken","message","tokenList","options","accessTokens","forEach","activeLink","disabledText","disableClass","is_active","name","href","onClick","push","key","confirmRevokeToken","openCreateToken","team","delete_at","onSubmit","handleCreateToken","autoFocus","maxLength","handleUpdateDescription","btnClass","savingMessage","saving","closeCreateToken","imageURL","user","last_picture_update","alt","src","confirmButtonText","show","onConfirm","revokeTokenConfirmed","onCancel","object","shape","Bots","owners","users","match","enabledBots","botToJSX","disabledBots","EnabledSection","DisabledSection","hasDisabled","componentDidMount","Constants","Integrations","START_PAGE_NUM","PAGE_SIZE","then","result","promises","getUser","owner_id","getUserAccessTokensForUser","Promise","all","botsToDisplay","Fragment","createBots","botAccounts","rel","siteURL","getSiteURL","connect","getConfig","EnableBotAccountCreation","botValues","reduce","UserSelectors","admin","userAccessTokensByUser","dispatch","bindActionCreators","BackstageHeader","index","AddBot","role","postAll","checked","postChannels","files","pictureFile","previewBlob","URL","createObjectURL","reader","FileReader","onload","e2","orientation","FileUtils","orientationStyles","image","readAsArrayBuffer","BotDefaultIcon","roles","General","SYSTEM_USER_ROLE","SYSTEM_ADMIN_ROLE","SYSTEM_POST_ALL_ROLE","SYSTEM_POST_ALL_PUBLIC_ROLE","rolesResult","updateUserRoles","adding","AcceptedProfileImageTypes","includes","size","maxFileSize","trim","uploadProfileImage","setDefaultProfileImage","updateRoles","browserHistory","usernameError","tokenResult","UserUtils","subtitle","buttonText","buttonActiveText","removeImageIcon","delayShow","OVERLAY_TIME_DELAY","placement","overlay","Tooltip","setDefault","imageStyles","handleSubmit","htmlFor","updateUsername","accept","updatePicture","updateDisplayName","updateDescription","disabled","editingUserHasManageSystem","updateRole","updatePostAll","updatePostChannels","errors","spinning","spinningText","number","ownProps","config","botId","URLSearchParams","location","get","parseInt","MaxFileSize","haveISystemPermission","permission","Permissions","MANAGE_SYSTEM","IntegrationOption","link","currentSiteName","siteName","document","enableIncomingWebhooks","enableOutgoingWebhooks","enableCommands","enableOAuthServiceProvider","updateTitle","permissions","MANAGE_INCOMING_WEBHOOKS","IncomingWebhookIcon","MANAGE_OUTGOING_WEBHOOKS","OutgoingWebhookIcon","MANAGE_SLASH_COMMANDS","SlashCommandIcon","MANAGE_OAUTH","OAuthIcon","BotAccountsIcon","appDirectory","SiteName","EnableIncomingWebhooks","EnableOutgoingWebhooks","EnableCommands","EnableOAuthServiceProvider","AnyTeamPermissionGate","hasPermission","invert","arrayOf","teams","getMyTeams","haveITeamPermission","DeleteModalTrigger","showDeleteModal","onDelete","KeyCodes","ENTER","handleConfirm","TypeError","handleOpenModal","triggerTitle","modalTitle","modalMessage","modalConfirmButton","handleCancel","onKeyDown","handleKeyDown","DeleteEmoji","EmojiListItem","emoji","deleteCustomEmoji","creatorUsername","creatorDisplayName","deleteButton","creator_id","currentUserId","DELETE_EMOJIS","handleDelete","DELETE_OTHERS_EMOJIS","backgroundImage","getCustomEmojiImageUrl","currentTeam","emojis","customEmoji","emojiId","creator","getDisplayNameByUser","getCurrentUserId","getCurrentTeam","EmojiList","next","nextLoading","getCustomEmojis","Emoji","SORT_BY_NAME","missingPages","scrollToTop","term","clearTimeout","searchTimeout","setTimeout","searchEmojis","searchCustomEmojis","em","newSearchEmojis","splice","EMOJI_PER_PAGE","nextButton","previousButton","colSpan","emojiIds","deleteFromSearch","pageStart","pageEnd","slice","buttonContents","extraClasses","nextPage","previousPage","onSearchChange","getCustomEmojiIdsSortedByName","EmojiPage","teamDisplayName","loadRolesIfNeeded","componentDidUpdate","prevProps","CREATE_EMOJIS","teamName","general","AddEmoji","emojiMap","startsWith","endsWith","substring","test","hasSystemEmoji","createCustomEmoji","imageUrl","readAsDataURL","filename","preview","updateName","multiple","updateImage","localizeMessage","router","getEmojiMap","loadIncomingHooksAndProfilesForTeam","IntegrationActions","getState","profilesToLoad","i","hook","list","keys","getProfilesByIds","loadOutgoingHooksAndProfilesForTeam","loadCommandsAndProfilesForTeam","loadOAuthAppsAndProfiles","apps","app","CopyText","copyToClipboard","queryCommandSupported","tooltip","idMessage","copyText","DeleteIntegration","messageId","incomingWebhook","channel","channel_id","propTypes","InstalledIncomingWebhook","canChange","incomingWebhookId","url","createAt","create_at","InstalledIncomingWebhooks","removeIncomingHook","displayNameA","channelA","channels","displayNameB","incomingWebhooks","incomingWebhookCompare","canManageOthersWebhooks","deleteIncomingWebhook","buildYourOwn","array","MANAGE_OTHERS_INCOMING_WEBHOOKS","getAllChannels","getUsers","Actions","ChannelSelect","selectOpen","selectPrivate","selectDm","channelName","OPEN_CHANNEL","PRIVATE_CHANNEL","DM_CHANNEL","getMyChannelsSorted","getMyChannels","getCurrentUserLocale","locale","sortChannelsByTypeAndDisplayName","bind","AbstractIncomingWebhook","channelId","channelLocked","channel_locked","iconURL","icon_url","serverError","clientError","action","getStateFromHook","initialHook","headerToRender","footerToRender","footer","updateChannelId","updateChannelLocked","enablePostUsernameOverride","enablePostIconOverride","updateIconURL","HEADER","FOOTER","LOADING","AddIncomingWebhook","createIncomingHook","addIncomingHook","EnablePostUsernameOverride","EnablePostIconOverride","EditIncomingWebhook","newHook","submitHook","updateIncomingHook","showConfirmModal","getIncomingHook","hookId","editIncomingHook","outgoingWebhook","trigger_words","triggerWords","triggerWord","InstalledOutgoingWebhook","onRegenToken","makeDisplayName","join","urls","callback_urls","triggerWhen","trigger_when","handleRegenToken","contentType","content_type","InstalledOutgoingWebhooks","regenOutgoingHookToken","removeOutgoingHook","channelB","outgoingWebhooks","outgoingWebhookCompare","regenOutgoingWebhookToken","MANAGE_OTHERS_OUTGOING_WEBHOOKS","AbstractOutgoingWebhook","callbackUrls","split","callbackUrl","renderExtra","updateContentType","rows","updateTriggerWords","updateTriggerWhen","updateCallbackUrls","AddOutgoingWebhook","createOutgoingHook","addOutgoingHook","EditOutgoingWebhook","triggerWordsSame","every","v","callbackUrlsSame","handleConfirmModal","updateOutgoingHook","confirmButton","confirmTitle","confirmMessage","confirmModalDismissed","getOutgoingHook","editOutgoingHook","oauthApp","InstalledOAuthApp","clientSecret","client_secret","onRegenerateSecret","handleShowClientSecret","creatorName","isTrusted","showHide","is_trusted","handleHideClientSecret","regen","handleRegenerate","icon","clientId","InstalledOAuthApps","deleteOAuthApp","oauthAppCompare","regenOAuthAppSecret","nameA","nameB","canManageOauth","oauthApplications","AbstractOAuthApp","homepage","has_icon","Boolean","refs","Image","imageLoaded","getStateFromApp","initialApp","trusted","updateTrusted","updateHomepage","ref","updateIconUrl","AddOAuthApp","addOAuthApp","addOAuthAppRequest","EditOAuthApp","newApp","submitOAuthApp","editOAuthApp","getOAuthApp","oauthAppId","trigger","InstalledCommand","auto_complete_hint","commandToken","InstalledCommands","regenCommandToken","deleteCommand","commandCompare","canManageOthersSlashCommands","MANAGE_OTHERS_SLASH_COMMANDS","AbstractCommand","method","iconUrl","autocomplete","autocompleteHint","autocompleteDescription","auto_complete_desc","substr","MIN_TRIGGER_LENGTH","MAX_TRIGGER_LENGTH","min","max","getStateFromCommand","initialCommand","updateAutocompleteHint","updateAutocompleteDescription","updateTrigger","updateUrl","updateMethod","updateAutocomplete","AddCommand","addCommand","EditCommand","newCommand","originalCommand","submitCommand","editCommand","getCustomTeamCommands","commandId","ConfirmIntegration","window","addEventListener","handleKeyPress","componentWillUnmount","removeEventListener","headerText","tokenText","incomingHook","outgoingHook","COMMAND","INCOMING_WEBHOOK","incomingHookToken","OUTGOING_WEBHOOK","outgoingHookToken","OAUTH_APP","oauthAppToken","oauthAppSecret","secret","BOT","replace","ErrorPageTypes","PAGE_NOT_FOUND","botToken","botname","CommandRoute","component","extraProps","rest","CommandsContainer","exact","path","BackstageCategory","parentLink","element","activeClassName","BackstageSection","subsection","getLink","clonedChildren","BackstageSidebar","enableCustomEmoji","canCreateOrDeleteCustomEmoji","canManageIntegrations","renderCustomEmoji","renderIntegrations","BackstageNavbar","BackstageRoute","BackstageController","listRef","scrollTop","pluggableName","setListRef","AddIncomingWehook","InstalledOauthApps","AddOauthApp","EditOauthApp","withRouter","getCurrentUser","EnableCustomEmoji","canManageTeamIntegrations","canManageSystemBots","MANAGE_BOTS","MANAGE_OTHERS_BOTS"],"mappings":"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","file":"7.1bfb35d1ed222535a0e4.js","sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport LocalizedIcon from 'components/localized_icon';\n\nimport {t} from 'utils/i18n';\n\ntype Props = {\n    additionalClassName: string | null;\n}\n\nexport default class NextIcon extends React.PureComponent<Props> {\n    public static defaultProps: Props = {\n        additionalClassName: null,\n    };\n\n    public render(): JSX.Element {\n        const className = 'fa fa-1x fa-angle-right' + (this.props.additionalClassName ? ' ' + this.props.additionalClassName : '');\n        return (\n            <LocalizedIcon\n                className={className}\n                title={{id: t('generic_icons.next'), defaultMessage: 'Next Icon'}}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport LocalizedIcon from 'components/localized_icon';\n\nimport {t} from 'utils/i18n';\n\ntype Props = {\n    additionalClassName: string | null;\n}\n\nexport default class PreviousIcon extends React.PureComponent<Props> {\n    public static defaultProps: Props = {\n        additionalClassName: null,\n    };\n\n    public render(): JSX.Element {\n        const className = 'fa fa-1x fa-angle-left' + (this.props.additionalClassName ? ' ' + this.props.additionalClassName : '');\n        return (\n            <LocalizedIcon\n                className={className}\n                title={{id: t('generic_icons.previous'), defaultMessage: 'Previous Icon'}}\n            />\n        );\n    }\n}\n","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar reselect_1 = require(\"reselect\");\nvar teams_1 = require(\"./teams\");\nfunction getIncomingHooks(state) {\n    return state.entities.integrations.incomingHooks;\n}\nexports.getIncomingHooks = getIncomingHooks;\nfunction getOutgoingHooks(state) {\n    return state.entities.integrations.outgoingHooks;\n}\nexports.getOutgoingHooks = getOutgoingHooks;\nfunction getCommands(state) {\n    return state.entities.integrations.commands;\n}\nexports.getCommands = getCommands;\nfunction getOAuthApps(state) {\n    return state.entities.integrations.oauthApps;\n}\nexports.getOAuthApps = getOAuthApps;\nfunction getSystemCommands(state) {\n    return state.entities.integrations.systemCommands;\n}\nexports.getSystemCommands = getSystemCommands;\n/**\n * get outgoing hooks in current team\n */\nexports.getOutgoingHooksInCurrentTeam = reselect_1.createSelector(teams_1.getCurrentTeamId, getOutgoingHooks, function (teamId, hooks) {\n    return Object.values(hooks).filter(function (o) { return o.team_id === teamId; });\n});\nexports.getAllCommands = reselect_1.createSelector(getCommands, getSystemCommands, function (commands, systemCommands) {\n    return tslib_1.__assign(tslib_1.__assign({}, commands), systemCommands);\n});\nexports.getAutocompleteCommandsList = reselect_1.createSelector(exports.getAllCommands, teams_1.getCurrentTeamId, function (commands, currentTeamId) {\n    return Object.values(commands).filter(function (command) {\n        return command && (!command.team_id || command.team_id === currentTeamId) && command.auto_complete;\n    }).sort(function (a, b) { return a.display_name.localeCompare(b.display_name); });\n});\n//# sourceMappingURL=integrations.js.map","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getBotAccounts(state) {\n    return state.entities.bots.accounts;\n}\nexports.getBotAccounts = getBotAccounts;\n//# sourceMappingURL=bots.js.map","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar client_1 = require(\"../client\");\nvar action_types_1 = require(\"../action_types\");\nvar helpers_1 = require(\"./helpers\");\nvar BOTS_PER_PAGE_DEFAULT = 20;\nfunction createBot(bot) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.createBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            bot,\n        ],\n    });\n}\nexports.createBot = createBot;\nfunction patchBot(botUserId, botPatch) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.patchBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n            botPatch,\n        ],\n    });\n}\nexports.patchBot = patchBot;\nfunction loadBot(botUserId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.getBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\nexports.loadBot = loadBot;\nfunction loadBots(page, perPage) {\n    if (page === void 0) { page = 0; }\n    if (perPage === void 0) { perPage = BOTS_PER_PAGE_DEFAULT; }\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.getBotsIncludeDeleted,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNTS,\n        params: [\n            page,\n            perPage,\n        ],\n    });\n}\nexports.loadBots = loadBots;\nfunction disableBot(botUserId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.disableBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\nexports.disableBot = disableBot;\nfunction enableBot(botUserId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.enableBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\nexports.enableBot = enableBot;\nfunction assignBot(botUserId, newOwnerId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.assignBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n            newOwnerId,\n        ],\n    });\n}\nexports.assignBot = assignBot;\n//# sourceMappingURL=bots.js.map","module.exports = __webpack_public_path__ + \"files/28bca753280d57721ab26bcbe0ec3ca5.png\";","module.exports = __webpack_public_path__ + \"files/fd69f7891f867c2aa14011da92b728ac.jpg\";","module.exports = __webpack_public_path__ + \"files/e18dcc703feb7046e3b49f91eeebb0e2.png\";","module.exports = __webpack_public_path__ + \"files/2aa264fb1956b8be41f2047d428a1a1e.jpg\";","module.exports = __webpack_public_path__ + \"files/d184fcdb23c1e24bfd7132950ceb4f68.jpg\";","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport {FormattedMessage} from 'react-intl';\n\nexport default class SearchIcon extends React.PureComponent {\n    render() {\n        return (\n            <FormattedMessage\n                id='generic_icons.search'\n                defaultMessage='Search Icon'\n            >\n                {(title) => (\n                    <i\n                        className='fa fa-search'\n                        title={title}\n                    />\n                )}\n            </FormattedMessage>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport * as Utils from 'utils/utils.jsx';\nimport LoadingScreen from 'components/loading_screen';\nimport SearchIcon from 'components/widgets/icons/fa_search_icon';\n\nexport default class BackstageList extends React.Component {\n    static propTypes = {\n        children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n        header: PropTypes.node.isRequired,\n        addLink: PropTypes.string,\n        addText: PropTypes.node,\n        addButtonId: PropTypes.string,\n        emptyText: PropTypes.node,\n        emptyTextSearch: PropTypes.node,\n        helpText: PropTypes.node,\n        loading: PropTypes.bool.isRequired,\n        searchPlaceholder: PropTypes.string,\n    }\n\n    static defaultProps = {\n        searchPlaceholder: Utils.localizeMessage('backstage_list.search', 'Search'),\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            filter: '',\n        };\n    }\n\n    updateFilter = (e) => {\n        this.setState({\n            filter: e.target.value,\n        });\n    }\n\n    render() {\n        const filter = this.state.filter.toLowerCase();\n\n        let children;\n        if (this.props.loading) {\n            children = <LoadingScreen/>;\n        } else {\n            children = this.props.children;\n            let hasChildren = true;\n            if (typeof children === 'function') {\n                [children, hasChildren] = children(filter);\n            }\n            children = React.Children.map(children, (child) => {\n                return React.cloneElement(child, {filter});\n            });\n            if (children.length === 0 || !hasChildren) {\n                if (!filter) {\n                    if (this.props.emptyText) {\n                        children = (\n                            <div className='backstage-list__item backstage-list__empty'>\n                                {this.props.emptyText}\n                            </div>\n                        );\n                    }\n                } else if (this.props.emptyTextSearch) {\n                    children = (\n                        <div\n                            className='backstage-list__item backstage-list__empty'\n                            id='emptySearchResultsMessage'\n                        >\n                            {React.cloneElement(this.props.emptyTextSearch, {values: {searchTerm: filter}})}\n                        </div>\n                    );\n                }\n            }\n        }\n\n        let addLink = null;\n\n        if (this.props.addLink && this.props.addText) {\n            addLink = (\n                <Link\n                    className='add-link'\n                    to={this.props.addLink}\n                >\n                    <button\n                        type='button'\n                        className='btn btn-primary'\n                        id={this.props.addButtonId}\n                    >\n                        <span>\n                            {this.props.addText}\n                        </span>\n                    </button>\n                </Link>\n            );\n        }\n\n        return (\n            <div className='backstage-content'>\n                <div className='backstage-header'>\n                    <h1>\n                        {this.props.header}\n                    </h1>\n                    {addLink}\n                </div>\n                <div className='backstage-filters'>\n                    <div className='backstage-filter__search'>\n                        <SearchIcon/>\n                        <input\n                            type='search'\n                            className='form-control'\n                            placeholder={this.props.searchPlaceholder}\n                            value={this.state.filter}\n                            onChange={this.updateFilter}\n                            style={style.search}\n                            id='searchInput'\n                        />\n                    </div>\n                </div>\n                <span className='backstage-list__help'>\n                    {this.props.helpText}\n                </span>\n                <div className='backstage-list'>\n                    {children}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst style = {\n    search: {flexGrow: 0, flexShrink: 0},\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\n\nimport {FormattedMessage} from 'react-intl';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport Markdown from 'components/markdown';\nimport SaveButton from 'components/save_button';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\nimport * as Utils from 'utils/utils.jsx';\n\nexport function matchesFilter(bot, filter, owner) {\n    if (!filter) {\n        return true;\n    }\n    const username = bot.username || '';\n    const description = bot.description || '';\n    const displayName = bot.display_name || '';\n\n    let ownerUsername = 'plugin';\n    if (owner && owner.username) {\n        ownerUsername = owner.username;\n    }\n    return !(username.toLowerCase().indexOf(filter) === -1 &&\n        displayName.toLowerCase().indexOf(filter) === -1 &&\n        description.toLowerCase().indexOf(filter) === -1 &&\n        ownerUsername.toLowerCase().indexOf(filter) === -1);\n}\n\nexport default class Bot extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Bot that we are displaying\n        */\n        bot: PropTypes.object.isRequired,\n\n        /**\n        * Owner of the bot we are displaying\n        */\n        owner: PropTypes.object,\n\n        /**\n        * User of the bot we are displaying\n        */\n        user: PropTypes.object,\n\n        /**\n        * The access tokens of the bot user\n        */\n        accessTokens: PropTypes.object.isRequired,\n\n        /**\n        * String used for filtering bot items\n        */\n        filter: PropTypes.string,\n\n        actions: PropTypes.shape({\n\n            /**\n            * Disable a bot\n            */\n            disableBot: PropTypes.func.isRequired,\n\n            /**\n            * Enable a bot\n            */\n            enableBot: PropTypes.func.isRequired,\n\n            /**\n            * Access token managment\n            */\n            createUserAccessToken: PropTypes.func.isRequired,\n            revokeUserAccessToken: PropTypes.func.isRequired,\n            enableUserAccessToken: PropTypes.func.isRequired,\n            disableUserAccessToken: PropTypes.func.isRequired,\n        }),\n\n        /**\n        *  Only used for routing since backstage is team based.\n        */\n        team: PropTypes.object.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            confirmingId: '',\n            creatingTokenState: 'CLOSED',\n            token: {},\n            error: '',\n        };\n    }\n\n    enableBot = () => {\n        this.props.actions.enableBot(this.props.bot.user_id);\n    }\n\n    disableBot = () => {\n        this.props.actions.disableBot(this.props.bot.user_id);\n    }\n\n    enableUserAccessToken = (id) => {\n        this.props.actions.enableUserAccessToken(id);\n    }\n\n    disableUserAccessToken = (id) => {\n        this.props.actions.disableUserAccessToken(id);\n    }\n\n    confirmRevokeToken = (id) => {\n        this.setState({confirmingId: id});\n    }\n\n    revokeTokenConfirmed = () => {\n        this.props.actions.revokeUserAccessToken(this.state.confirmingId);\n        this.closeConfirm();\n    }\n\n    closeConfirm = () => {\n        this.setState({confirmingId: ''});\n    }\n\n    openCreateToken = () => {\n        this.setState({\n            creatingTokenState: 'OPEN',\n            token: {\n                description: '',\n            },\n        });\n    }\n\n    closeCreateToken = () => {\n        this.setState({\n            creatingTokenState: 'CLOSED',\n            token: {\n                description: '',\n            },\n        });\n    }\n\n    handleUpdateDescription = (e) => {\n        this.setState({\n            token: Object.assign({}, this.state.token, {description: e.target.value}),\n        });\n    }\n\n    handleCreateToken = async (e) => {\n        e.preventDefault();\n\n        if (this.state.token.description === '') {\n            this.setState({error: (\n                <FormattedMessage\n                    id='bot.token.error.description'\n                    defaultMessage='Please enter a description.'\n                />\n            )});\n            return;\n        }\n\n        const {data, error} = await this.props.actions.createUserAccessToken(this.props.bot.user_id, this.state.token.description);\n        if (data) {\n            this.setState({creatingTokenState: 'CREATED', token: data});\n        } else if (error) {\n            this.setState({error: error.message});\n        }\n    }\n\n    render() {\n        const username = this.props.bot.username || '';\n        const description = this.props.bot.description || '';\n        const displayName = this.props.bot.display_name || '';\n\n        let ownerUsername = 'plugin';\n        if (this.props.owner && this.props.owner.username) {\n            ownerUsername = this.props.owner.username;\n        }\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n        if (!matchesFilter(this.props.bot, filter, this.props.owner)) {\n            return null;\n        }\n\n        const tokenList = [];\n        Object.values(this.props.accessTokens).forEach((token) => {\n            let activeLink;\n            let disableClass = '';\n            let disabledText;\n\n            if (token.is_active) {\n                activeLink = (\n                    <a\n                        name={token.id + '_deactivate'}\n                        href='#'\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.disableUserAccessToken(token.id);\n                        }}\n                    >\n                        <FormattedMessage\n                            id='user.settings.tokens.deactivate'\n                            defaultMessage='Disable'\n                        />\n                    </a>);\n            } else {\n                disableClass = 'light';\n                disabledText = (\n                    <span className='mr-2 light'>\n                        <FormattedMessage\n                            id='user.settings.tokens.deactivatedWarning'\n                            defaultMessage='(Disabled)'\n                        />\n                    </span>\n                );\n                activeLink = (\n                    <a\n                        name={token.id + '_activate'}\n                        href='#'\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.enableUserAccessToken(token.id);\n                        }}\n                    >\n                        <FormattedMessage\n                            id='user.settings.tokens.activate'\n                            defaultMessage='Enable'\n                        />\n                    </a>\n                );\n            }\n\n            tokenList.push(\n                <div\n                    key={token.id}\n                    className='bot-list__item'\n                >\n                    <div className='item-details__row d-flex justify-content-between'>\n                        <div className={disableClass}>\n                            <div className='whitespace--nowrap overflow--ellipsis'>\n                                <b>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.tokenDesc'\n                                        defaultMessage='Token Description: '\n                                    />\n                                </b>\n                                {token.description}\n                            </div>\n                            <div className='setting-box__token-id whitespace--nowrap overflow--ellipsis'>\n                                <b>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.tokenId'\n                                        defaultMessage='Token ID: '\n                                    />\n                                </b>\n                                {token.id}\n                            </div>\n                        </div>\n                        <div>\n                            {disabledText}\n                            {activeLink}\n                            {' - '}\n                            <a\n                                name={token.id + '_delete'}\n                                href='#'\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    this.confirmRevokeToken(token.id);\n                                }}\n                            >\n                                <FormattedMessage\n                                    id='user.settings.tokens.delete'\n                                    defaultMessage='Delete'\n                                />\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            );\n        });\n\n        let options;\n        if (ownerUsername !== 'plugin') {\n            options = (\n                <div className='item-actions'>\n                    <button\n                        id='createToken'\n                        className='style--none color--link'\n                        onClick={this.openCreateToken}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.create_token'\n                            defaultMessage='Create New Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/bots/edit?id=${this.props.bot.user_id}`}>\n                        <FormattedMessage\n                            id='bots.manage.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <button\n                        className='style--none color--link'\n                        onClick={this.disableBot}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.disable'\n                            defaultMessage='Disable'\n                        />\n                    </button>\n                </div>\n            );\n        }\n        if (this.props.bot.delete_at !== 0) {\n            options = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.enableBot}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.enable'\n                            defaultMessage='Enable'\n                        />\n                    </button>\n                </div>\n            );\n        }\n\n        if (this.state.creatingTokenState === 'OPEN') {\n            tokenList.push(\n                <div\n                    key={'create'}\n                    className='bot-list__item'\n                >\n                    <div key={'create'}>\n                        <form\n                            className='form-horizontal'\n                            onSubmit={this.handleCreateToken}\n                        >\n                            <div className='row'>\n                                <label className='col-sm-auto control-label'>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.name'\n                                        defaultMessage='Token Description: '\n                                    />\n                                </label>\n                                <div className='col-sm-4'>\n                                    <input\n                                        autoFocus={true}\n                                        className='form-control form-sm'\n                                        type='text'\n                                        maxLength={64}\n                                        value={this.state.token.description}\n                                        onChange={this.handleUpdateDescription}\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <div className='pt-2 pb-2'>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.nameHelp'\n                                        defaultMessage='Enter a description for your token to remember what it does.'\n                                    />\n                                </div>\n                                <label\n                                    id='clientError'\n                                    className='has-error is-empty'\n                                >\n                                    {this.state.error}\n                                </label>\n                                <div className='mt-2'>\n                                    <SaveButton\n                                        btnClass='btn-sm btn-primary'\n                                        savingMessage={\n                                            <FormattedMessage\n                                                id='user.settings.tokens.save'\n                                                defaultMessage='Save'\n                                            />\n                                        }\n                                        saving={false}\n                                    />\n                                    <button\n                                        className='btn btn-sm btn-link'\n                                        onClick={this.closeCreateToken}\n                                    >\n                                        <FormattedMessage\n                                            id='user.settings.tokens.cancel'\n                                            defaultMessage='Cancel'\n                                        />\n                                    </button>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            );\n        } else if (this.state.creatingTokenState === 'CREATED') {\n            tokenList.push(\n                <div\n                    key={'created'}\n                    className='bot-list__item alert alert-warning'\n                >\n                    <div className='mb-2'>\n                        <WarningIcon additionalClassName='mr-2'/>\n                        <FormattedMessage\n                            id='user.settings.tokens.copy'\n                            defaultMessage=\"Please copy the access token below. You won't be able to see it again!\"\n                        />\n                    </div>\n                    <div className='whitespace--nowrap overflow--ellipsis'>\n                        <FormattedMessage\n                            id='user.settings.tokens.name'\n                            defaultMessage='Token Description: '\n                        />\n                        {this.state.token.description}\n                    </div>\n                    <div className='whitespace--nowrap overflow--ellipsis'>\n                        <FormattedMessage\n                            id='user.settings.tokens.id'\n                            defaultMessage='Token ID: '\n                        />\n                        {this.state.token.id}\n                    </div>\n                    <strong className='word-break--all'>\n                        <FormattedMessage\n                            id='user.settings.tokens.token'\n                            defaultMessage='Access Token: '\n                        />\n                        {this.state.token.token}\n                    </strong>\n                    <div className='mt-2'>\n                        <button\n                            className='btn btn-sm btn-primary'\n                            onClick={this.closeCreateToken}\n                        >\n                            <FormattedMessage\n                                id='bot.create_token.close'\n                                defaultMessage='Close'\n                            />\n                        </button>\n                    </div>\n                </div>\n            );\n        }\n\n        const imageURL = Utils.imageURLForUser(this.props.user.id, this.props.user.last_picture_update);\n\n        return (\n            <div className='backstage-list__item'>\n                <div className={'bot-list-img-container'}>\n                    <img\n                        className={'bot-list-img'}\n                        alt={'bot image'}\n                        src={imageURL}\n                    />\n                </div>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName + ' (@' + username + ')'}\n                        </strong>\n                        {options}\n                    </div>\n                    <div className='bot-details__description'>\n                        <Markdown message={description}/>\n                    </div>\n                    <div className='light small'>\n                        <FormattedMessage\n                            id='bots.managed_by'\n                            defaultMessage='Managed by '\n                        />\n                        {ownerUsername}\n                    </div>\n                    <div className='bot-list is-empty'>\n                        {tokenList}\n                    </div>\n                </div>\n                <ConfirmModal\n                    title={\n                        <FormattedMessage\n                            id='bots.token.delete'\n                            defaultMessage='Delete Token'\n                        />\n                    }\n                    message={\n                        <FormattedMessage\n                            id='bots.token.confirm_text'\n                            defaultMessage='Are you sure you want to delete the token?'\n                        />\n                    }\n                    confirmButtonText={\n                        <FormattedMessage\n                            id='bots.token.confirm'\n                            defaultMessage='Delete'\n                        />\n                    }\n                    show={this.state.confirmingId !== ''}\n                    onConfirm={this.revokeTokenConfirmed}\n                    onCancel={this.closeConfirm}\n                />\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {getSiteURL} from 'utils/url';\n\nimport * as Utils from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport Constants from 'utils/constants';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport Bot, {matchesFilter} from './bot.jsx';\n\nexport default class Bots extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Map from botUserId to bot.\n        */\n        bots: PropTypes.object.isRequired,\n\n        /**\n        *  Map from botUserId to accessTokens.\n        */\n        accessTokens: PropTypes.object.isRequired,\n\n        /**\n        *  Map from botUserId to owner.\n        */\n        owners: PropTypes.object.isRequired,\n\n        /**\n        *  Map from botUserId to user.\n        */\n        users: PropTypes.object.isRequired,\n\n        createBots: PropTypes.bool,\n\n        actions: PropTypes.shape({\n\n            /**\n            * Ensure we have bot accounts\n            */\n            loadBots: PropTypes.func.isRequired,\n\n            /**\n            * Load access tokens for bot accounts\n            */\n            getUserAccessTokensForUser: PropTypes.func.isRequired,\n\n            /**\n            * Access token managment\n            */\n            createUserAccessToken: PropTypes.func.isRequired,\n            revokeUserAccessToken: PropTypes.func.isRequired,\n            enableUserAccessToken: PropTypes.func.isRequired,\n            disableUserAccessToken: PropTypes.func.isRequired,\n\n            /**\n            * Load owner of bot account\n            */\n            getUser: PropTypes.func.isRequired,\n\n            /**\n            * Disable a bot\n            */\n            disableBot: PropTypes.func.isRequired,\n\n            /**\n            * Enable a bot\n            */\n            enableBot: PropTypes.func.isRequired,\n        }),\n\n        /**\n        *  Only used for routing since backstage is team based.\n        */\n        team: PropTypes.object.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        this.props.actions.loadBots(\n            Constants.Integrations.START_PAGE_NUM,\n            Constants.Integrations.PAGE_SIZE\n        ).then(\n            (result) => {\n                if (result.data) {\n                    const promises = [];\n\n                    for (const bot of result.data) {\n                        // We don't need to wait for this and we need to accept failure in the case where bot.owner_id is a plugin id\n                        this.props.actions.getUser(bot.owner_id);\n\n                        // We want to wait for these.\n                        promises.push(this.props.actions.getUser(bot.user_id));\n                        promises.push(this.props.actions.getUserAccessTokensForUser(bot.user_id));\n                    }\n\n                    Promise.all(promises).then(() => {\n                        this.setState({loading: false});\n                    });\n                }\n            }\n        );\n    }\n\n    DisabledSection(props) {\n        if (!props.hasDisabled) {\n            return null;\n        }\n        const botsToDisplay = React.Children.map(props.disabledBots, (child) => {\n            return React.cloneElement(child, {filter: props.filter});\n        });\n        return (\n            <React.Fragment>\n                <div className='bot-disabled'>\n                    <FormattedMessage\n                        id='bots.disabled'\n                        defaultMessage='Disabled'\n                    />\n                </div>\n                <div className='bot-list__disabled'>\n                    {botsToDisplay}\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    EnabledSection(props) {\n        const botsToDisplay = React.Children.map(props.enabledBots, (child) => {\n            return React.cloneElement(child, {filter: props.filter});\n        });\n        return (\n            <div>\n                {botsToDisplay}\n            </div>\n        );\n    }\n\n    botToJSX = (bot) => {\n        return (\n            <Bot\n                key={bot.user_id}\n                bot={bot}\n                owner={this.props.owners[bot.user_id]}\n                user={this.props.users[bot.user_id]}\n                accessTokens={this.props.accessTokens[bot.user_id] || {}}\n                actions={this.props.actions}\n                team={this.props.team}\n            />\n        );\n    };\n\n    bots = (filter) => {\n        const bots = Object.values(this.props.bots).sort((a, b) => a.username.localeCompare(b.username));\n        const match = (bot) => matchesFilter(bot, filter, this.props.owners[bot.user_id]);\n        const enabledBots = bots.filter((bot) => bot.delete_at === 0).filter(match).map(this.botToJSX);\n        const disabledBots = bots.filter((bot) => bot.delete_at > 0).filter(match).map(this.botToJSX);\n        const sections = (\n            <div key='sections'>\n                <this.EnabledSection\n                    enabledBots={enabledBots}\n                />\n                <this.DisabledSection\n                    hasDisabled={disabledBots.length > 0}\n                    disabledBots={disabledBots}\n                />\n            </div>\n        );\n\n        return [sections, enabledBots.length > 0 || disabledBots.length > 0];\n    }\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='bots.manage.header'\n                        defaultMessage='Bot Accounts'\n                    />\n                }\n                addText={this.props.createBots &&\n                    <FormattedMessage\n                        id='bots.manage.add'\n                        defaultMessage='Add Bot Account'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/bots/add'}\n                addButtonId='addBotAccount'\n                emptyText={\n                    <FormattedMessage\n                        id='bots.manage.empty'\n                        defaultMessage='No bot accounts found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='bots.manage.emptySearch'\n                        defaultMessage='No bot accounts match **{searchTerm}**'\n                    />\n                }\n                helpText={\n                    <React.Fragment>\n                        <FormattedMessage\n                            id='bots.manage.help1'\n                            defaultMessage='Use {botAccounts} to integrate with Mattermost through plugins or the API. Bot accounts are available to everyone on your server. '\n                            values={{\n                                botAccounts: (\n                                    <a\n                                        target='_blank'\n                                        rel='noopener noreferrer'\n                                        href='https://mattermost.com/pl/default-bot-accounts'\n                                    >\n                                        <FormattedMessage\n                                            id='bots.manage.bot_accounts'\n                                            defaultMessage='Bot Accounts'\n                                        />\n                                    </a>\n                                ),\n                            }}\n                        />\n                        <FormattedMarkdownMessage\n                            id='bots.manage.help2'\n                            defaultMessage={'Enable bot account creation in the [System Console]({siteURL}/admin_console/integrations/bot_accounts).'}\n                            values={{\n                                siteURL: getSiteURL(),\n                            }}\n                        />\n                    </React.Fragment>\n                }\n                searchPlaceholder={Utils.localizeMessage('bots.manage.search', 'Search Bot Accounts')}\n                loading={this.state.loading}\n            >\n                {this.bots}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {loadBots, disableBot, enableBot} from 'mattermost-redux/actions/bots';\nimport {createUserAccessToken, revokeUserAccessToken, enableUserAccessToken, disableUserAccessToken, getUserAccessTokensForUser, getUser} from 'mattermost-redux/actions/users';\nimport * as UserSelectors from 'mattermost-redux/selectors/entities/users';\n\nimport Bots from './bots.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const createBots = config.EnableBotAccountCreation === 'true';\n    const bots = getBotAccounts(state);\n    const botValues = Object.values(bots);\n    const owners = botValues.\n        reduce((result, bot) => {\n            result[bot.user_id] = UserSelectors.getUser(state, bot.owner_id);\n            return result;\n        }, {});\n    const users = botValues.\n        reduce((result, bot) => {\n            result[bot.user_id] = UserSelectors.getUser(state, bot.user_id);\n            return result;\n        }, {});\n\n    return {\n        createBots,\n        bots,\n        accessTokens: state.entities.admin.userAccessTokensByUser,\n        owners,\n        users,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadBots,\n            getUserAccessTokensForUser,\n            createUserAccessToken,\n            revokeUserAccessToken,\n            enableUserAccessToken,\n            disableUserAccessToken,\n            getUser,\n            disableBot,\n            enableBot,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Bots);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport LocalizedIcon from 'components/localized_icon';\n\nimport {t} from 'utils/i18n';\n\nexport default class BackstageHeader extends React.Component {\n    static propTypes = {\n        children: PropTypes.node,\n    };\n\n    render() {\n        const children = [];\n\n        React.Children.forEach(this.props.children, (child, index) => {\n            if (index !== 0) {\n                children.push(\n                    <span\n                        key={'divider' + index}\n                        className='backstage-header__divider'\n                    >\n                        <LocalizedIcon\n                            className='fa fa-angle-right'\n                            title={{id: t('generic_icons.breadcrumb'), defaultMessage: 'Breadcrumb Icon'}}\n                        />\n                    </span>\n                );\n            }\n\n            children.push(child);\n        });\n\n        return (\n            <div className='backstage-header'>\n                <h1>\n                    {children}\n                </h1>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport {FormattedMessage} from 'react-intl';\nimport {Tooltip} from 'react-bootstrap';\n\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\nimport {General} from 'mattermost-redux/constants';\n\nimport BotDefaultIcon from 'images/bot_default_icon.png';\n\nimport {browserHistory} from 'utils/browser_history';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport OverlayTrigger from 'components/overlay_trigger';\nimport SpinnerButton from 'components/spinner_button';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message.jsx';\nimport FormError from 'components/form_error';\nimport {AcceptedProfileImageTypes, Constants} from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\nimport * as FileUtils from 'utils/file_utils.jsx';\n\nconst roleOptionSystemAdmin = 'System Admin';\nconst roleOptionMember = 'Member';\n\nexport default class AddBot extends React.Component {\n    static propTypes = {\n\n        /**\n        *  Only used for routing since backstage is team based.\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        *  Bot to edit (if editing)\n        */\n        bot: PropTypes.object,\n\n        /**\n        *  Bot user\n        */\n        user: PropTypes.object,\n\n        /**\n        *  Roles of the bot to edit (if editing)\n        */\n        roles: PropTypes.string,\n\n        /**\n        * Maximum upload file size (for bot account profile picture)\n        */\n        maxFileSize: PropTypes.number.isRequired,\n\n        /**\n         * Editing user has the MANAGE_SYSTEM permission\n        */\n        editingUserHasManageSystem: PropTypes.bool.isRequired,\n\n        /**\n        * Bot to edit\n        */\n        actions: PropTypes.shape({\n\n            /**\n            * Creates a new bot account.\n            */\n            createBot: PropTypes.func.isRequired,\n\n            /**\n            * Patches an existing bot account.\n            */\n            patchBot: PropTypes.func.isRequired,\n\n            /**\n            * Uploads a user profile image\n            */\n            uploadProfileImage: PropTypes.func.isRequired,\n\n            /**\n            * Set profile image to default\n            */\n            setDefaultProfileImage: PropTypes.func.isRequired,\n\n            /**\n            * For creating default access token\n            */\n            createUserAccessToken: PropTypes.func.isRequired,\n\n            /**\n            * For creating setting bot to system admin or special posting permissions\n            */\n            updateUserRoles: PropTypes.func.isRequired,\n        }),\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            error: '',\n            username: '',\n            displayName: '',\n            description: '',\n            adding: false,\n            image: BotDefaultIcon,\n            role: roleOptionMember,\n            postAll: false,\n            postChannels: false,\n        };\n\n        if (this.props.bot) {\n            this.state.username = this.props.bot.username;\n            this.state.displayName = this.props.bot.display_name;\n            this.state.description = this.props.bot.description;\n            this.state.role = UserUtils.isSystemAdmin(this.props.roles || '') ? roleOptionSystemAdmin : roleOptionMember;\n            this.state.postAll = UserUtils.hasPostAllRole(this.props.roles || '');\n            this.state.postChannels = UserUtils.hasPostAllPublicRole(this.props.roles || '');\n        }\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateRole = (e) => {\n        this.setState({\n            role: e.target.value,\n        });\n    }\n\n    updatePostAll = (e) => {\n        this.setState({\n            postAll: e.target.checked,\n        });\n    }\n\n    updatePostChannels = (e) => {\n        this.setState({\n            postChannels: e.target.checked,\n        });\n    }\n\n    updatePicture = (e) => {\n        if (e.target.files && e.target.files[0]) {\n            const pictureFile = e.target.files[0];\n            this.previewBlob = URL.createObjectURL(pictureFile);\n\n            var reader = new FileReader();\n            reader.onload = (e2) => {\n                const orientation = FileUtils.getExifOrientation(e2.target.result);\n                const orientationStyles = FileUtils.getOrientationStyles(orientation);\n\n                this.setState({\n                    image: this.previewBlob,\n                    orientationStyles,\n                });\n            };\n            reader.readAsArrayBuffer(pictureFile);\n            e.target.value = null;\n            this.setState({pictureFile});\n        } else {\n            this.setState({pictureFile: null, image: null});\n        }\n    }\n\n    setDefault = () => {\n        this.setState({pictureFile: 'default', image: BotDefaultIcon});\n    }\n\n    updateRoles = async (data) => {\n        let roles = General.SYSTEM_USER_ROLE;\n\n        if (this.state.role === roleOptionSystemAdmin) {\n            roles += ' ' + General.SYSTEM_ADMIN_ROLE;\n        } else if (this.state.postAll) {\n            roles += ' ' + General.SYSTEM_POST_ALL_ROLE;\n        } else if (this.state.postChannels) {\n            roles += ' ' + General.SYSTEM_POST_ALL_PUBLIC_ROLE;\n        }\n\n        const rolesResult = await this.props.actions.updateUserRoles(data.user_id, roles);\n        if (rolesResult) {\n            return rolesResult.error;\n        }\n\n        return null;\n    }\n\n    handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (this.state.adding) {\n            return;\n        }\n\n        if (!this.state.username || this.state.username.length < 3) {\n            this.setState({\n                error: (\n                    <FormattedMessage\n                        id='bots.manage.add.invalid_username'\n                        defaultMessage='Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                    />\n                ),\n            });\n            return;\n        }\n\n        if (this.state.pictureFile) {\n            if (!AcceptedProfileImageTypes.includes(this.state.pictureFile.type)) {\n                this.setState({\n                    error: (\n                        <FormattedMessage\n                            id='user.settings.general.validImage'\n                            defaultMessage='Only BMP, JPG or PNG images may be used for profile pictures'\n                        />\n                    ),\n                });\n            } else if (this.state.pictureFile.size > this.props.maxFileSize) {\n                this.setState({\n                    error: (\n                        <FormattedMessage\n                            id='user.settings.general.imageTooLarge'\n                            defaultMessage='Unable to upload profile image. File is too large.'\n                        />\n                    ),\n                });\n            }\n        }\n\n        this.setState({\n            adding: true,\n            error: '',\n        });\n\n        const bot = {\n            username: this.state.username.toLowerCase().trim(),\n            display_name: this.state.displayName,\n            description: this.state.description,\n        };\n\n        let data;\n        let error;\n        if (this.props.bot) {\n            const result = await this.props.actions.patchBot(this.props.bot.user_id, bot);\n            if (result) {\n                data = result.data;\n                error = result.error;\n            } else {\n                error = Utils.localizeMessage('bot.edit_failed', 'Failed to edit bot');\n            }\n\n            if (!error) {\n                if (this.state.pictureFile && this.state.pictureFile !== 'default') {\n                    const imageResult = await this.props.actions.uploadProfileImage(data.user_id, this.state.pictureFile);\n                    error = imageResult.error;\n                } else if (this.state.pictureFile && this.state.pictureFile === 'default') {\n                    await this.props.actions.setDefaultProfileImage(data.user_id);\n                }\n            }\n\n            if (!error && data) {\n                error = this.updateRoles(data);\n            }\n\n            if (data) {\n                browserHistory.push(`/${this.props.team.name}/integrations/bots`);\n                return;\n            }\n        } else {\n            const usernameError = Utils.isValidBotUsername(bot.username);\n            if (usernameError) {\n                this.setState({\n                    adding: false,\n                    error: usernameError,\n                });\n                return;\n            }\n\n            const result = await this.props.actions.createBot(bot);\n            if (result) {\n                data = result.data;\n                error = result.error;\n            } else {\n                error = Utils.localizeMessage('bot.create_failed', 'Failed to create bot');\n            }\n\n            let token = '';\n            if (!error) {\n                if (this.state.pictureFile && this.state.pictureFile !== 'default') {\n                    await this.props.actions.uploadProfileImage(data.user_id, this.state.pictureFile);\n                } else {\n                    await this.props.actions.setDefaultProfileImage(data.user_id);\n                }\n                const tokenResult = await this.props.actions.createUserAccessToken(data.user_id,\n                    Utils.localizeMessage('bot.token.default.description', 'Default Token')\n                );\n\n                // On error just skip the confirmation because we have a bot without a token.\n                if (!tokenResult || tokenResult.error) {\n                    browserHistory.push(`/${this.props.team.name}/integrations/bots`);\n                    return;\n                }\n\n                token = tokenResult.data.token;\n            }\n\n            if (!error && data) {\n                error = this.updateRoles(data);\n            }\n\n            if (data) {\n                browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=bots&id=${data.user_id}&token=${token}`);\n                return;\n            }\n        }\n\n        this.setState({\n            adding: false,\n        });\n\n        if (error) {\n            this.setState({\n                error: error.message,\n            });\n        }\n    }\n\n    render() {\n        let subtitle = (\n            <FormattedMessage\n                id='bots.manage.add'\n                defaultMessage='Add'\n            />\n        );\n        let buttonText = (\n            <FormattedMessage\n                id='bots.manage.add.create'\n                defaultMessage='Create Bot Account'\n            />\n        );\n        let buttonActiveText = (\n            <FormattedMessage\n                id='bots.manage.add.creating'\n                defaultMessage='Creating...'\n            />\n        );\n\n        // If we are editing\n        if (this.props.bot) {\n            subtitle = (\n                <FormattedMessage\n                    id='bots.manage.edit'\n                    defaultMessage='Edit'\n                />\n            );\n            buttonText = (\n                <FormattedMessage\n                    id='bots.manage.edit.title'\n                    defaultMessage='Update'\n                />\n            );\n            buttonActiveText = (\n                <FormattedMessage\n                    id='bots.manage.edit.editing'\n                    defaultMessage='Updating...'\n                />\n            );\n        }\n\n        let imageURL = '';\n        let removeImageIcon = (\n            <OverlayTrigger\n                delayShow={Constants.OVERLAY_TIME_DELAY}\n                placement='right'\n                overlay={(\n                    <Tooltip id='removeIcon'>\n                        <FormattedMessage\n                            id='bot.remove_profile_picture'\n                            defaultMessage='Remove Bot Icon'\n                        />\n                    </Tooltip>\n                )}\n            >\n                <a\n                    className={'bot-profile__remove'}\n                    onClick={this.setDefault}\n                >\n                    <span>{'×'}</span>\n                </a>\n            </OverlayTrigger>\n        );\n        let imageStyles = null;\n        if (this.props.bot && !this.state.pictureFile) {\n            if (this.props.user) {\n                imageURL = Utils.imageURLForUser(this.props.user.id, this.props.user.last_picture_update);\n            } else {\n                imageURL = Utils.imageURLForUser(this.props.bot.user_id);\n            }\n        } else {\n            imageURL = this.state.image;\n            imageStyles = this.state.orientationStyles;\n            if (this.state.image === BotDefaultIcon) {\n                removeImageIcon = null;\n            }\n        }\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/bots`}>\n                        <FormattedMessage\n                            id='bots.manage.header'\n                            defaultMessage='Bot Accounts'\n                        />\n                    </Link>\n                    {subtitle}\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='username'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.username'\n                                    defaultMessage='Username'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='username'\n                                    type='text'\n                                    maxLength='22'\n                                    className='form-control'\n                                    value={this.state.username}\n                                    onChange={this.updateUsername}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.username.help'\n                                        defaultMessage='You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='boticon'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.icon'\n                                    defaultMessage='Bot Icon'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <div className={'bot-img-container'}>\n                                    <img\n                                        className={'bot-img'}\n                                        alt={'bot image'}\n                                        src={imageURL}\n                                        style={imageStyles}\n                                    />\n                                    {removeImageIcon}\n                                </div>\n                                <div\n                                    className='btn btn-sm btn-primary btn-file sel-btn'\n                                >\n                                    <FormattedMessage\n                                        id='bots.image.upload'\n                                        defaultMessage='Upload Image'\n                                    />\n                                    <input\n                                        accept='.jpg,.png,.bmp'\n                                        type='file'\n                                        onChange={this.updatePicture}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.displayName'\n                                    defaultMessage='Display Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.display_name.help'\n                                        defaultMessage={'(Optional) You can choose to display your bot\\'s full name rather than its username.'}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.description.help'\n                                        defaultMessage='(Optional) Let others know what this bot does.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='role'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.role'\n                                    defaultMessage='Role'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.role}\n                                    disabled={!this.props.editingUserHasManageSystem}\n                                    onChange={this.updateRole}\n                                >\n                                    <option\n                                        value={roleOptionMember}\n                                    >\n                                        {Utils.localizeMessage('bot.add.role.member', 'Member')}\n                                    </option>\n                                    <option\n                                        value={roleOptionSystemAdmin}\n                                    >\n                                        {Utils.localizeMessage('bot.add.role.admin', 'System Admin')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.role.help'\n                                        defaultMessage='Choose what role the bot should have.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='row bot-profile__section'>\n                            <div className='col-md-5 col-sm-8 col-sm-offset-4'>\n                                <FormattedMarkdownMessage\n                                    id='admin.manage_roles.additionalRoles'\n                                    defaultMessage='Select additional permissions for the account. [Read more about roles and permissions](!https://about.mattermost.com/default-permissions).'\n                                />\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='postAll'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.post_all'\n                                    defaultMessage='post:all'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <div className='checkbox no-padding'>\n                                    <label htmlFor='postAll'>\n                                        <input\n                                            id='postAll'\n                                            type='checkbox'\n                                            checked={this.state.postAll || this.state.role === roleOptionSystemAdmin}\n                                            onChange={this.updatePostAll}\n                                            disabled={!this.props.editingUserHasManageSystem || this.state.role === roleOptionSystemAdmin}\n                                        />\n                                        <FormattedMessage\n                                            id='bot.add.post_all.enabled'\n                                            defaultMessage='Enabled'\n                                        />\n                                    </label>\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.post_all.help'\n                                        defaultMessage='Bot will have access to post to all Mattermost channels including direct messages.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='postChannels'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.post_channels'\n                                    defaultMessage='post:channels'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <div className='checkbox no-padding'>\n                                    <label htmlFor='postChannels'>\n                                        <input\n                                            id='postChannels'\n                                            type='checkbox'\n                                            checked={this.state.postChannels || this.state.role === roleOptionSystemAdmin || this.state.postAll}\n                                            onChange={this.updatePostChannels}\n                                            disabled={!this.props.editingUserHasManageSystem || this.state.role === roleOptionSystemAdmin || this.state.postAll}\n                                        />\n                                        <FormattedMessage\n                                            id='bot.add.post_channels.enabled'\n                                            defaultMessage='Enabled'\n                                        />\n                                    </label>\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.post_channels.help'\n                                        defaultMessage='Bot will have access to post to all Mattermost public channels.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.state.error]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/bots`}\n                            >\n                                <FormattedMessage\n                                    id='bots.manage.add.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.adding}\n                                spinningText={buttonActiveText}\n                                onClick={this.handleSubmit}\n                                id='saveBot'\n                            >\n                                {buttonText}\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {updateUserRoles, uploadProfileImage, setDefaultProfileImage, createUserAccessToken} from 'mattermost-redux/actions/users';\nimport {createBot, patchBot} from 'mattermost-redux/actions/bots';\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport AddBot from './add_bot.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const botId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const bots = getBotAccounts(state);\n    const bot = bots ? bots[botId] : null;\n    const user = bot ? getUser(state, bot.user_id) : null;\n    const roles = user ? user.roles : null;\n    return {\n        maxFileSize: parseInt(config.MaxFileSize, 10),\n        bot,\n        roles,\n        editingUserHasManageSystem: haveISystemPermission(state, {permission: Permissions.MANAGE_SYSTEM}),\n        user,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createBot,\n            patchBot,\n            uploadProfileImage,\n            setDefaultProfileImage,\n            createUserAccessToken,\n            updateUserRoles,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddBot);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nexport default class IntegrationOption extends React.Component {\n    static get propTypes() {\n        return {\n            image: PropTypes.string.isRequired,\n            title: PropTypes.node.isRequired,\n            description: PropTypes.node.isRequired,\n            link: PropTypes.string.isRequired,\n        };\n    }\n\n    render() {\n        const {image, title, description, link} = this.props;\n\n        return (\n            <Link\n                to={link}\n                className='integration-option'\n            >\n                <img\n                    alt={'integration image'}\n                    className='integration-option__image'\n                    src={image}\n                />\n                <div className='integration-option__title'>\n                    {title}\n                </div>\n                <div className='integration-option__description'>\n                    {description}\n                </div>\n            </Link>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport BotAccountsIcon from 'images/bot_default_icon.png';\n\nimport * as Utils from 'utils/utils.jsx';\nimport IncomingWebhookIcon from 'images/incoming_webhook.jpg';\nimport OAuthIcon from 'images/oauth_icon.png';\nimport OutgoingWebhookIcon from 'images/outgoing_webhook.jpg';\nimport SlashCommandIcon from 'images/slash_command_icon.jpg';\n\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\nimport TeamPermissionGate from 'components/permissions_gates/team_permission_gate';\n\nimport IntegrationOption from './integration_option.jsx';\n\nexport default class Integrations extends React.Component {\n    static get propTypes() {\n        return {\n            team: PropTypes.object,\n            user: PropTypes.object,\n            siteName: PropTypes.string,\n            enableIncomingWebhooks: PropTypes.bool,\n            enableOutgoingWebhooks: PropTypes.bool,\n            enableCommands: PropTypes.bool,\n            enableOAuthServiceProvider: PropTypes.bool,\n        };\n    }\n\n    componentDidMount() {\n        this.updateTitle();\n    }\n\n    updateTitle = () => {\n        const currentSiteName = this.props.siteName || '';\n        document.title = Utils.localizeMessage('admin.sidebar.integrations', 'Integrations') + ' - ' + this.props.team.display_name + ' ' + currentSiteName;\n    }\n\n    render() {\n        const options = [];\n\n        if (this.props.enableIncomingWebhooks) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_INCOMING_WEBHOOKS]}\n                    key='incomingWebhookPermission'\n                >\n                    <IntegrationOption\n                        key='incomingWebhook'\n                        image={IncomingWebhookIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.incomingWebhook.title'\n                                defaultMessage='Incoming Webhooks'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.incomingWebhook.description'\n                                defaultMessage='Incoming webhooks allow external integrations to send messages'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/incoming_webhooks'}\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        if (this.props.enableOutgoingWebhooks) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_OUTGOING_WEBHOOKS]}\n                    key='outgoingWebhookPermission'\n                >\n                    <IntegrationOption\n                        key='outgoingWebhook'\n                        image={OutgoingWebhookIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.outgoingWebhook.title'\n                                defaultMessage='Outgoing Webhooks'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.outgoingWebhook.description'\n                                defaultMessage='Outgoing webhooks allow external integrations to receive and respond to messages'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/outgoing_webhooks'}\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        if (this.props.enableCommands) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_SLASH_COMMANDS]}\n                    key='commandPermission'\n                >\n                    <IntegrationOption\n                        key='command'\n                        image={SlashCommandIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.command.title'\n                                defaultMessage='Slash Commands'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.command.description'\n                                defaultMessage='Slash commands send events to an external integration'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/commands'}\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        if (this.props.enableOAuthServiceProvider) {\n            options.push(\n                <SystemPermissionGate\n                    permissions={[Permissions.MANAGE_OAUTH]}\n                    key='oauth2AppsPermission'\n                >\n                    <IntegrationOption\n                        key='oauth2Apps'\n                        image={OAuthIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.oauthApps.title'\n                                defaultMessage='OAuth 2.0 Applications'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.oauthApps.description'\n                                defaultMessage='Auth 2.0 allows external applications to make authorized requests to the Mattermost API'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/oauth2-apps'}\n                    />\n                </SystemPermissionGate>\n            );\n        }\n\n        options.push(\n            <SystemPermissionGate\n                permissions={['manage_bots']}\n                key='botsPermissions'\n            >\n                <IntegrationOption\n                    image={BotAccountsIcon}\n                    title={\n                        <FormattedMessage\n                            id='bots.manage.header'\n                            defaultMessage='Bot Accounts'\n                        />\n                    }\n                    description={\n                        <FormattedMessage\n                            id='bots.manage.description'\n                            defaultMessage='Use bot accounts to integrate with Mattermost through plugins or the API'\n                        />\n                    }\n                    link={'/' + this.props.team.name + '/integrations/bots'}\n                />\n            </SystemPermissionGate>\n        );\n\n        return (\n            <div className='backstage-content row'>\n                <div className='backstage-header'>\n                    <h1>\n                        <FormattedMessage\n                            id='integrations.header'\n                            defaultMessage='Integrations'\n                        />\n                    </h1>\n                </div>\n                <div className='backstage-list__help'>\n                    <FormattedMessage\n                        id='integrations.help'\n                        defaultMessage='Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.'\n                        values={{\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='integrations.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                </div>\n                <div className='integrations-list d-flex flex-wrap'>\n                    {options}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport Integrations from './integrations.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const siteName = config.SiteName;\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enableCommands = config.EnableCommands === 'true';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        siteName,\n        enableIncomingWebhooks,\n        enableOutgoingWebhooks,\n        enableCommands,\n        enableOAuthServiceProvider,\n    };\n}\n\nexport default connect(mapStateToProps)(Integrations);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nexport default class AnyTeamPermissionGate extends React.Component {\n    static defaultProps = {\n        invert: false,\n    }\n\n    static propTypes = {\n\n        /**\n         * Permissions enough to pass the gate (binary OR)\n         */\n        permissions: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n        /**\n         * Has permission\n         */\n        hasPermission: PropTypes.bool.isRequired,\n\n        /**\n         * Invert the permission (used for else)\n         */\n        invert: PropTypes.bool.isRequired,\n\n        /**\n         * Content protected by the permissions gate\n         */\n        children: PropTypes.node.isRequired,\n    };\n\n    render() {\n        if (this.props.hasPermission && !this.props.invert) {\n            return this.props.children;\n        }\n        if (!this.props.hasPermission && this.props.invert) {\n            return this.props.children;\n        }\n        return null;\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getMyTeams} from 'mattermost-redux/selectors/entities/teams';\n\nimport AnyTeamPermissionGate from './any_team_permission_gate.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const teams = getMyTeams(state);\n    for (const team of teams) {\n        for (const permission of ownProps.permissions) {\n            if (haveITeamPermission(state, {team: team.id, permission})) {\n                return {hasPermission: true};\n            }\n        }\n    }\n\n    return {hasPermission: false};\n}\n\nexport default connect(mapStateToProps)(AnyTeamPermissionGate);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\n\nimport ConfirmModal from './confirm_modal';\n\nexport default class DeleteModalTrigger extends React.PureComponent {\n    static propTypes = {\n        onDelete: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n        if (this.constructor === DeleteModalTrigger) {\n            throw new TypeError('Can not construct abstract class.');\n        }\n\n        this.state = {\n            showDeleteModal: false,\n        };\n    }\n\n    handleOpenModal = (e) => {\n        e.preventDefault();\n\n        this.setState({\n            showDeleteModal: true,\n        });\n    }\n\n    handleConfirm = () => {\n        this.props.onDelete();\n    }\n\n    handleCancel = () => {\n        this.setState({\n            showDeleteModal: false,\n        });\n    }\n\n    handleKeyDown = (e) => {\n        if (Utils.isKeyPressed(e, Constants.KeyCodes.ENTER)) {\n            this.handleConfirm(e);\n        }\n    }\n\n    render() {\n        return (\n            <span>\n                <button\n                    className='color--link style--none'\n                    onClick={this.handleOpenModal}\n                >\n                    { this.triggerTitle }\n                </button>\n                <ConfirmModal\n                    show={this.state.showDeleteModal}\n                    title={this.modalTitle}\n                    message={this.modalMessage}\n                    confirmButtonText={this.modalConfirmButton}\n                    onConfirm={this.handleConfirm}\n                    onCancel={this.handleCancel}\n                    onKeyDown={this.handleKeyDown}\n                />\n            </span>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport DeleteModalTrigger from 'components/delete_modal_trigger.jsx';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\n\nexport default class DeleteEmoji extends DeleteModalTrigger {\n    static propTypes = {\n        onDelete: PropTypes.func.isRequired,\n    }\n\n    get triggerTitle() {\n        return (\n            <FormattedMessage\n                id='emoji_list.delete'\n                defaultMessage='Delete'\n            />\n        );\n    }\n\n    get modalTitle() {\n        return (\n            <FormattedMessage\n                id='emoji_list.delete.confirm.title'\n                defaultMessage='Delete Custom Emoji'\n            />\n        );\n    }\n\n    get modalMessage() {\n        return (\n            <div className='alert alert-warning'>\n                <WarningIcon additionalClassName='mr-1'/>\n                <FormattedMessage\n                    id='emoji_list.delete.confirm.msg'\n                    defaultMessage='This action permanently deletes the custom emoji. Are you sure you want to delete it?'\n                />\n            </div>\n        );\n    }\n\n    get modalConfirmButton() {\n        return (\n            <FormattedMessage\n                id='emoji_list.delete.confirm.button'\n                defaultMessage='Delete'\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Permissions from 'mattermost-redux/constants/permissions';\nimport {Client4} from 'mattermost-redux/client';\n\nimport DeleteEmoji from 'components/emoji/delete_emoji_modal.jsx';\nimport AnyTeamPermissionGate from 'components/permissions_gates/any_team_permission_gate';\n\nexport default class EmojiListItem extends React.Component {\n    static propTypes = {\n        emoji: PropTypes.object.isRequired,\n        currentUserId: PropTypes.string.isRequired,\n        creatorDisplayName: PropTypes.string.isRequired,\n        creatorUsername: PropTypes.string,\n        currentTeam: PropTypes.object,\n        onDelete: PropTypes.func,\n        actions: PropTypes.shape({\n            deleteCustomEmoji: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    static defaultProps = {\n        emoji: {},\n        currentUserId: '',\n        currentTeam: {},\n        creatorDisplayName: '',\n    }\n\n    handleDelete = () => {\n        if (this.props.onDelete) {\n            this.props.onDelete(this.props.emoji.id);\n        }\n\n        this.props.actions.deleteCustomEmoji(this.props.emoji.id);\n    }\n\n    render() {\n        const emoji = this.props.emoji;\n        const creatorUsername = this.props.creatorUsername;\n        let creatorDisplayName = this.props.creatorDisplayName;\n\n        if (creatorUsername && creatorUsername !== creatorDisplayName) {\n            creatorDisplayName += ' (@' + creatorUsername + ')';\n        }\n\n        let deleteButton = null;\n        if (emoji.creator_id === this.props.currentUserId) {\n            deleteButton = (\n                <AnyTeamPermissionGate permissions={[Permissions.DELETE_EMOJIS]}>\n                    <DeleteEmoji onDelete={this.handleDelete}/>\n                </AnyTeamPermissionGate>\n            );\n        } else {\n            deleteButton = (\n                <AnyTeamPermissionGate permissions={[Permissions.DELETE_EMOJIS]}>\n                    <AnyTeamPermissionGate permissions={[Permissions.DELETE_OTHERS_EMOJIS]}>\n                        <DeleteEmoji onDelete={this.handleDelete}/>\n                    </AnyTeamPermissionGate>\n                </AnyTeamPermissionGate>\n            );\n        }\n\n        return (\n            <tr className='backstage-list__item'>\n                <td className='emoji-list__name'>\n                    {':' + emoji.name + ':'}\n                </td>\n                <td className='emoji-list__image'>\n                    <span\n                        className='emoticon'\n                        style={{backgroundImage: 'url(' + Client4.getCustomEmojiImageUrl(emoji.id) + ')'}}\n                    />\n                </td>\n                <td className='emoji-list__creator'>\n                    {creatorDisplayName}\n                </td>\n                <td className='emoji-list-item_actions'>\n                    {deleteButton}\n                </td>\n            </tr>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {getUser, getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\n\nimport {deleteCustomEmoji} from 'mattermost-redux/actions/emojis';\n\nimport {getDisplayNameByUser} from 'utils/utils.jsx';\n\nimport EmojiListItem from './emoji_list_item.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const emoji = state.entities.emojis.customEmoji[ownProps.emojiId];\n    const creator = getUser(state, emoji.creator_id);\n\n    return {\n        emoji,\n        creatorDisplayName: getDisplayNameByUser(state, creator),\n        creatorUsername: creator ? creator.username : '',\n        currentUserId: getCurrentUserId(state),\n        currentTeam: getCurrentTeam(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            deleteCustomEmoji,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiListItem);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\n\nimport {Emoji} from 'mattermost-redux/constants';\n\nimport LoadingScreen from 'components/loading_screen';\nimport SaveButton from 'components/save_button';\nimport EmojiListItem from 'components/emoji/emoji_list_item';\nimport NextIcon from 'components/widgets/icons/fa_next_icon';\nimport PreviousIcon from 'components/widgets/icons/fa_previous_icon';\nimport SearchIcon from 'components/widgets/icons/fa_search_icon';\nimport LocalizedInput from 'components/localized_input/localized_input';\n\nimport {t} from 'utils/i18n.jsx';\n\nconst EMOJI_PER_PAGE = 50;\nconst EMOJI_SEARCH_DELAY_MILLISECONDS = 200;\n\nexport default class EmojiList extends React.Component {\n    static propTypes = {\n\n        /**\n         * Custom emojis on the system.\n         */\n        emojiIds: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n        /**\n         * Function to scroll list to top.\n         */\n        scrollToTop: PropTypes.func.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n             * Get pages of custom emojis.\n             */\n            getCustomEmojis: PropTypes.func.isRequired,\n\n            /**\n             * Search custom emojis.\n             */\n            searchCustomEmojis: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.searchTimeout = null;\n\n        this.state = {\n            loading: true,\n            page: 0,\n            nextLoading: false,\n            searchEmojis: null,\n            missingPages: true,\n        };\n    }\n\n    componentDidMount() {\n        this.props.actions.getCustomEmojis(0, EMOJI_PER_PAGE + 1, Emoji.SORT_BY_NAME, true).then(({data}) => {\n            this.setState({loading: false});\n            if (data && data.length < EMOJI_PER_PAGE) {\n                this.setState({missingPages: false});\n            }\n        });\n    }\n\n    nextPage = (e) => {\n        if (e) {\n            e.preventDefault();\n        }\n\n        const next = this.state.page + 1;\n        this.setState({nextLoading: true});\n        this.props.actions.getCustomEmojis(next, EMOJI_PER_PAGE, Emoji.SORT_BY_NAME, true).then(({data}) => {\n            this.setState({page: next, nextLoading: false});\n            if (data && data.length < EMOJI_PER_PAGE) {\n                this.setState({missingPages: false});\n            }\n\n            this.props.scrollToTop();\n        });\n    }\n\n    previousPage = (e) => {\n        if (e) {\n            e.preventDefault();\n        }\n\n        this.setState({page: this.state.page - 1, nextLoading: false});\n        this.props.scrollToTop();\n    }\n\n    onSearchChange = (e) => {\n        if (!e || !e.target) {\n            return;\n        }\n\n        const term = e.target.value || '';\n\n        clearTimeout(this.searchTimeout);\n\n        this.searchTimeout = setTimeout(async () => {\n            if (term.trim() === '') {\n                this.setState({searchEmojis: null, page: 0});\n                return;\n            }\n\n            this.setState({loading: true});\n\n            const {data} = await this.props.actions.searchCustomEmojis(term, {}, true);\n\n            if (data) {\n                this.setState({searchEmojis: data.map((em) => em.id), loading: false});\n            } else {\n                this.setState({searchEmojis: [], loading: false});\n            }\n        }, EMOJI_SEARCH_DELAY_MILLISECONDS);\n    }\n\n    deleteFromSearch = (emojiId) => {\n        if (!this.state.searchEmojis) {\n            return;\n        }\n\n        const index = this.state.searchEmojis.indexOf(emojiId);\n\n        if (index < 0) {\n            return;\n        }\n\n        const newSearchEmojis = [...this.state.searchEmojis];\n        newSearchEmojis.splice(index, 1);\n        this.setState({searchEmojis: newSearchEmojis});\n    }\n\n    render() {\n        const searchEmojis = this.state.searchEmojis;\n        const emojis = [];\n        let nextButton;\n        let previousButton;\n\n        if (this.state.loading) {\n            emojis.push(\n                <tr\n                    key='loading'\n                    className='backstage-list__item backstage-list__empty'\n                >\n                    <td colSpan='4'>\n                        <LoadingScreen key='loading'/>\n                    </td>\n                </tr>\n            );\n        } else if (this.props.emojiIds.length === 0 || (searchEmojis && searchEmojis.length === 0)) {\n            emojis.push(\n                <tr\n                    key='empty'\n                    className='backstage-list__item backstage-list__empty'\n                >\n                    <td colSpan='4'>\n                        <FormattedMessage\n                            id='emoji_list.empty'\n                            defaultMessage='No custom emoji found'\n                        />\n                    </td>\n                </tr>\n            );\n        } else if (searchEmojis) {\n            searchEmojis.forEach((emojiId) => {\n                emojis.push(\n                    <EmojiListItem\n                        key={'emoji_search_item' + emojiId}\n                        emojiId={emojiId}\n                        onDelete={this.deleteFromSearch}\n                    />\n                );\n            });\n        } else {\n            const pageStart = this.state.page * EMOJI_PER_PAGE;\n            const pageEnd = pageStart + EMOJI_PER_PAGE;\n            const emojisToDisplay = this.props.emojiIds.slice(pageStart, pageEnd);\n\n            emojisToDisplay.forEach((emojiId) => {\n                emojis.push(\n                    <EmojiListItem\n                        key={'emoji_list_item' + emojiId}\n                        emojiId={emojiId}\n                    />\n                );\n            });\n\n            if (this.state.missingPages) {\n                const buttonContents = (\n                    <span>\n                        <FormattedMessage\n                            id='filtered_user_list.next'\n                            defaultMessage='Next'\n                        />\n                        <NextIcon additionalClassName='ml-2'/>\n                    </span>\n                );\n\n                nextButton = (\n                    <SaveButton\n                        btnClass='btn-link'\n                        extraClasses='pull-right'\n                        onClick={this.nextPage}\n                        saving={this.state.nextLoading}\n                        disabled={this.state.nextLoading}\n                        defaultMessage={buttonContents}\n                        savingMessage={buttonContents}\n                    />\n                );\n            }\n\n            if (this.state.page > 0) {\n                previousButton = (\n                    <button\n                        className='btn btn-link'\n                        onClick={this.previousPage}\n                    >\n                        <PreviousIcon additionalClassName='mr-2'/>\n                        <FormattedMessage\n                            id='filtered_user_list.prev'\n                            defaultMessage='Previous'\n                        />\n                    </button>\n                );\n            }\n        }\n\n        return (\n            <div>\n                <div className='backstage-filters'>\n                    <div className='backstage-filter__search'>\n                        <SearchIcon/>\n                        <LocalizedInput\n                            type='search'\n                            className='form-control'\n                            placeholder={{id: t('emoji_list.search'), defaultMessage: 'Search Custom Emoji'}}\n                            onChange={this.onSearchChange}\n                            style={style.search}\n                        />\n                    </div>\n                </div>\n                <span className='backstage-list__help'>\n                    <p>\n                        <FormattedMessage\n                            id='emoji_list.help'\n                            defaultMessage=\"Custom emoji are available to everyone on your server. Type ':' followed by two characters in a message box to bring up the emoji selection menu.\"\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='emoji_list.help2'\n                            defaultMessage=\"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'.\"\n                        />\n                    </p>\n                </span>\n                <div className='backstage-list'>\n                    <table className='emoji-list__table'>\n                        <thead>\n                            <tr className='backstage-list__item emoji-list__table-header'>\n                                <th className='emoji-list__name'>\n                                    <FormattedMessage\n                                        id='emoji_list.name'\n                                        defaultMessage='Name'\n                                    />\n                                </th>\n                                <th className='emoji-list__image'>\n                                    <FormattedMessage\n                                        id='emoji_list.image'\n                                        defaultMessage='Image'\n                                    />\n                                </th>\n                                <th className='emoji-list__creator'>\n                                    <FormattedMessage\n                                        id='emoji_list.creator'\n                                        defaultMessage='Creator'\n                                    />\n                                </th>\n                                <th className='emoji-list_actions'>\n                                    <FormattedMessage\n                                        id='emoji_list.actions'\n                                        defaultMessage='Actions'\n                                    />\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {emojis}\n                        </tbody>\n                    </table>\n                </div>\n                <div className='filter-controls pt-3'>\n                    {previousButton}\n                    {nextButton}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst style = {\n    search: {flexGrow: 0, flexShrink: 0},\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {getCustomEmojiIdsSortedByName} from 'mattermost-redux/selectors/entities/emojis';\n\nimport {getCustomEmojis, searchCustomEmojis} from 'mattermost-redux/actions/emojis';\n\nimport EmojiList from './emoji_list.jsx';\n\nfunction mapStateToProps(state) {\n    return {\n        emojiIds: getCustomEmojiIdsSortedByName(state) || [],\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            getCustomEmojis,\n            searchCustomEmojis,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiList);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport Permissions from 'mattermost-redux/constants/permissions';\n\nimport * as Utils from 'utils/utils.jsx';\nimport AnyTeamPermissionGate from 'components/permissions_gates/any_team_permission_gate';\n\nimport EmojiList from './emoji_list';\n\nexport default class EmojiPage extends React.Component {\n    static propTypes = {\n        teamId: PropTypes.string.isRequired,\n        teamName: PropTypes.string.isRequired,\n        teamDisplayName: PropTypes.string.isRequired,\n        siteName: PropTypes.string,\n        scrollToTop: PropTypes.func.isRequired,\n        actions: PropTypes.shape({\n            loadRolesIfNeeded: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    static defaultProps = {\n        teamName: '',\n        teamDisplayName: '',\n        siteName: '',\n    }\n\n    componentDidMount() {\n        this.updateTitle();\n        this.props.actions.loadRolesIfNeeded(['system_admin', 'team_admin', 'system_user', 'team_user']);\n    }\n\n    updateTitle = () => {\n        document.title = Utils.localizeMessage('custom_emoji.header', 'Custom Emoji') + ' - ' + this.props.teamDisplayName + ' ' + this.props.siteName;\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.siteName !== prevProps.siteName) {\n            this.updateTitle();\n        }\n    }\n\n    render() {\n        return (\n            <div className='backstage-content emoji-list'>\n                <div className='backstage-header'>\n                    <h1>\n                        <FormattedMessage\n                            id='emoji_list.header'\n                            defaultMessage='Custom Emoji'\n                        />\n                    </h1>\n                    <AnyTeamPermissionGate permissions={[Permissions.CREATE_EMOJIS]}>\n                        <Link\n                            className='add-link'\n                            to={'/' + this.props.teamName + '/emoji/add'}\n                        >\n                            <button\n                                type='button'\n                                className='btn btn-primary'\n                            >\n                                <FormattedMessage\n                                    id='emoji_list.add'\n                                    defaultMessage='Add Custom Emoji'\n                                />\n                            </button>\n                        </Link>\n                    </AnyTeamPermissionGate>\n                </div>\n                <EmojiList scrollToTop={this.props.scrollToTop}/>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\nimport {loadRolesIfNeeded} from 'mattermost-redux/actions/roles';\n\nimport EmojiPage from './emoji_page.jsx';\n\nfunction mapStateToProps(state) {\n    const team = getCurrentTeam(state) || {};\n\n    return {\n        teamId: team.id,\n        teamName: team.name,\n        teamDisplayName: team.display_name,\n        siteName: state.entities.general.config.SiteName,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadRolesIfNeeded,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiPage);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport {browserHistory} from 'utils/browser_history';\nimport {localizeMessage} from 'utils/utils.jsx';\n\nexport default class AddEmoji extends React.Component {\n    static propTypes = {\n        actions: PropTypes.shape({\n            createCustomEmoji: PropTypes.func.isRequired,\n        }).isRequired,\n        emojiMap: PropTypes.object.isRequired,\n        team: PropTypes.object,\n        user: PropTypes.object,\n    };\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '',\n            image: null,\n            imageUrl: '',\n            saving: false,\n            error: null,\n        };\n    }\n\n    handleSubmit = async (e) => {\n        const {actions, emojiMap, user, team} = this.props;\n        const {image, name, saving} = this.state;\n\n        e.preventDefault();\n\n        if (saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            error: null,\n        });\n\n        const emoji = {\n            creator_id: user.id,\n            name: name.trim().toLowerCase(),\n        };\n\n        // trim surrounding colons if the user accidentally included them in the name\n        if (emoji.name.startsWith(':') && emoji.name.endsWith(':')) {\n            emoji.name = emoji.name.substring(1, emoji.name.length - 1);\n        }\n\n        if (!emoji.name) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameRequired'\n                        defaultMessage='A name is required for the emoji'\n                    />\n                ),\n            });\n\n            return;\n        } else if ((/[^a-z0-9_-]/).test(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameInvalid'\n                        defaultMessage=\"An emoji's name can only contain lowercase letters, numbers, and the symbols '-' and '_'.\"\n                    />\n                ),\n            });\n\n            return;\n        } else if (emojiMap.hasSystemEmoji(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameTaken'\n                        defaultMessage='This name is already in use by a system emoji. Please choose another name.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!image) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.imageRequired'\n                        defaultMessage='An image is required for the emoji'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const {error} = await actions.createCustomEmoji(emoji, image);\n        if (error) {\n            this.setState({\n                saving: false,\n                error: error.message,\n            });\n            return;\n        }\n\n        browserHistory.push('/' + team.name + '/emoji');\n    };\n\n    updateName = (e) => {\n        this.setState({\n            name: e.target.value,\n        });\n    };\n\n    updateImage = (e) => {\n        if (e.target.files.length === 0) {\n            this.setState({\n                image: null,\n                imageUrl: '',\n            });\n\n            return;\n        }\n\n        const image = e.target.files[0];\n\n        const reader = new FileReader();\n        reader.onload = () => {\n            this.setState({\n                image,\n                imageUrl: reader.result,\n            });\n        };\n        reader.readAsDataURL(image);\n    };\n\n    render() {\n        let filename = null;\n        if (this.state.image) {\n            filename = (\n                <span className='add-emoji__filename'>\n                    {this.state.image.name}\n                </span>\n            );\n        }\n\n        let preview = null;\n        if (this.state.imageUrl) {\n            preview = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='preview'\n                    >\n                        <FormattedMessage\n                            id='add_emoji.preview'\n                            defaultMessage='Preview'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8 add-emoji__preview'>\n                        <FormattedMessage\n                            id='add_emoji.preview.sentence'\n                            defaultMessage='This is a sentence with {image} in it.'\n                            values={{\n                                image: (\n                                    <span\n                                        className='emoticon'\n                                        style={{backgroundImage: 'url(' + this.state.imageUrl + ')'}}\n                                    />\n                                ),\n                            }}\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/emoji'}>\n                        <FormattedMessage\n                            id='emoji_list.header'\n                            defaultMessage='Custom Emoji'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id='add_emoji.header'\n                        defaultMessage='Add'\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='name'\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.name'\n                                    defaultMessage='Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='name'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.name}\n                                    onChange={this.updateName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_emoji.name.help'\n                                        defaultMessage=\"Name your emoji. The name can be up to 64 characters, and can contain lowercase letters, numbers, and the symbols '-' and '_'.\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='image'\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.image'\n                                    defaultMessage='Image'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <div>\n                                    <div className='add-emoji__upload'>\n                                        <button className='btn btn-primary'>\n                                            <FormattedMessage\n                                                id='add_emoji.image.button'\n                                                defaultMessage='Select'\n                                            />\n                                        </button>\n                                        <input\n                                            id='select-emoji'\n                                            type='file'\n                                            accept='.jpg,.png,.gif'\n                                            multiple={false}\n                                            onChange={this.updateImage}\n                                        />\n                                    </div>\n                                    {filename}\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_emoji.image.help'\n                                            defaultMessage='Specify a .gif, .png, or .jpg file of up to 64 KB for your emoji. The dimensions can be up to 128 pixels by 128 pixels.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        {preview}\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                error={this.state.error}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={'/' + this.props.team.name + '/emoji'}\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage('add_emoji.saving', 'Saving...')}\n                                onClick={this.handleSubmit}\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.save'\n                                    defaultMessage='Save'\n                                />\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\n\nimport {createCustomEmoji} from 'mattermost-redux/actions/emojis';\n\nimport {getEmojiMap} from 'selectors/emojis';\n\nimport AddEmoji from './add_emoji.jsx';\n\nfunction mapStateToProps(state) {\n    return {\n        emojiMap: getEmojiMap(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createCustomEmoji,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddEmoji);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport request from 'superagent';\nimport * as IntegrationActions from 'mattermost-redux/actions/integrations';\nimport {getProfilesByIds} from 'mattermost-redux/actions/users';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\n\nconst DEFAULT_PAGE_SIZE = 100;\n\nexport function loadIncomingHooksAndProfilesForTeam(teamId, page = 0, perPage = DEFAULT_PAGE_SIZE) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getIncomingHooks(teamId, page, perPage));\n        if (data) {\n            dispatch(loadProfilesForIncomingHooks(data));\n        }\n    };\n}\n\nexport function loadProfilesForIncomingHooks(hooks) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < hooks.length; i++) {\n            const hook = hooks[i];\n            if (!getUser(state, hook.user_id)) {\n                profilesToLoad[hook.user_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function loadOutgoingHooksAndProfilesForTeam(teamId, page = 0, perPage = DEFAULT_PAGE_SIZE) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getOutgoingHooks('', teamId, page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOutgoingHooks(data));\n        }\n    };\n}\n\nexport function loadProfilesForOutgoingHooks(hooks) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < hooks.length; i++) {\n            const hook = hooks[i];\n            if (!getUser(state, hook.creator_id)) {\n                profilesToLoad[hook.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function loadCommandsAndProfilesForTeam(teamId) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getCustomTeamCommands(teamId));\n        if (data) {\n            dispatch(loadProfilesForCommands(data));\n        }\n    };\n}\n\nexport function loadProfilesForCommands(commands) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < commands.length; i++) {\n            const command = commands[i];\n            if (!getUser(state, command.creator_id)) {\n                profilesToLoad[command.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function loadOAuthAppsAndProfiles(page = 0, perPage = DEFAULT_PAGE_SIZE) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getOAuthApps(page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOAuthApps(data));\n        }\n    };\n}\n\nexport function loadProfilesForOAuthApps(apps) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < apps.length; i++) {\n            const app = apps[i];\n            if (!getUser(state, app.creator_id)) {\n                profilesToLoad[app.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function getYoutubeVideoInfo(googleKey, videoId, success, error) {\n    request.get('https://www.googleapis.com/youtube/v3/videos').\n        query({part: 'snippet', id: videoId, key: googleKey}).\n        end((err, res) => {\n            if (err) {\n                return error(err);\n            }\n\n            if (!res.body) {\n                console.error('Missing response body for getYoutubeVideoInfo'); // eslint-disable-line no-console\n            }\n\n            return success(res.body);\n        });\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Tooltip} from 'react-bootstrap';\n\nimport OverlayTrigger from 'components/overlay_trigger';\n\nimport Constants from 'utils/constants';\nimport {copyToClipboard} from 'utils/utils.jsx';\n\ntype Props = {\n    value: string;\n    defaultMessage: string;\n    idMessage: string;\n};\n\nexport default class CopyText extends React.PureComponent<Props, {}> {\n    public static defaultProps = {\n        defaultMessage: 'Copy',\n        idMessage: 'integrations.copy',\n    };\n\n    private copyText = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>): void => {\n        e.preventDefault();\n        copyToClipboard(this.props.value);\n    };\n\n    public render() {\n        if (!document.queryCommandSupported('copy')) {\n            return null;\n        }\n\n        const tooltip = (\n            <Tooltip id='copy'>\n                <FormattedMessage\n                    id={this.props.idMessage}\n                    defaultMessage={this.props.defaultMessage}\n                />\n            </Tooltip>\n        );\n\n        return (\n            <OverlayTrigger\n                delayShow={Constants.OVERLAY_TIME_DELAY}\n                placement='top'\n                overlay={tooltip}\n            >\n                <a\n                    href='#'\n                    className='fa fa-copy ml-2'\n                    onClick={this.copyText}\n                />\n            </OverlayTrigger>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport DeleteModalTrigger from 'components/delete_modal_trigger.jsx';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\n\nexport default class DeleteIntegration extends DeleteModalTrigger {\n    get triggerTitle() {\n        return (\n            <FormattedMessage\n                id='installed_integrations.delete'\n                defaultMessage='Delete'\n            />\n        );\n    }\n\n    get modalTitle() {\n        return (\n            <FormattedMessage\n                id='integrations.delete.confirm.title'\n                defaultMessage='Delete Integration'\n            />\n        );\n    }\n\n    get modalMessage() {\n        return (\n            <div className='alert alert-warning'>\n                <WarningIcon additionalClassName='mr-1'/>\n                <FormattedMessage\n                    id={this.props.messageId}\n                    defaultMessage='This action permanently deletes the integration and breaks any integrations using it. Are you sure you want to delete it?'\n                />\n            </div>\n        );\n    }\n\n    get modalConfirmButton() {\n        return (\n            <FormattedMessage\n                id='integrations.delete.confirm.button'\n                defaultMessage='Delete'\n            />\n        );\n    }\n}\n\nDeleteIntegration.propTypes = {\n    messageId: PropTypes.string.isRequired,\n    onDelete: PropTypes.func.isRequired,\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {getSiteURL} from 'utils/url';\nimport {t} from 'utils/i18n';\n\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegration from './delete_integration.jsx';\n\nexport function matchesFilter(incomingWebhook, channel, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    if (incomingWebhook.display_name.toLowerCase().indexOf(filter) !== -1 ||\n        incomingWebhook.description.toLowerCase().indexOf(filter) !== -1) {\n        return true;\n    }\n\n    if (incomingWebhook.channel_id) {\n        if (channel && channel.name.toLowerCase().indexOf(filter) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport default class InstalledIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * Data used for showing webhook details\n        */\n        incomingWebhook: PropTypes.object.isRequired,\n\n        /**\n        * Function to call when webhook delete button is pressed\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * String used for filtering webhook item\n        */\n        filter: PropTypes.string,\n\n        /**\n        * Data used for showing created by details\n        */\n        creator: PropTypes.object.isRequired,\n\n        /**\n        *  Set to show available actions on webhook\n        */\n        canChange: PropTypes.bool.isRequired,\n\n        /**\n        *  Data used in routing of webhook for modifications\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        *  Data used for filtering of webhook based on filter prop\n        */\n        channel: PropTypes.object,\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.incomingWebhook);\n    }\n\n    render() {\n        const incomingWebhook = this.props.incomingWebhook;\n        const channel = this.props.channel;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n\n        if (!matchesFilter(incomingWebhook, channel, filter)) {\n            return null;\n        }\n\n        let displayName;\n        if (incomingWebhook.display_name) {\n            displayName = incomingWebhook.display_name;\n        } else if (channel) {\n            displayName = channel.display_name;\n        } else {\n            displayName = (\n                <FormattedMessage\n                    id='installed_incoming_webhooks.unknown_channel'\n                    defaultMessage='A Private Webhook'\n                />\n            );\n        }\n\n        let description = null;\n        if (incomingWebhook.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {incomingWebhook.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <Link to={`/${this.props.team.name}/integrations/incoming_webhooks/edit?id=${incomingWebhook.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegration\n                        messageId={t('installed_incoming_webhooks.delete.confirm')}\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        const incomingWebhookId = getSiteURL() + '/hooks/' + incomingWebhook.id;\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName}\n                        </strong>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__url word-break--all'>\n                            <FormattedMessage\n                                id='installed_integrations.url'\n                                defaultMessage='URL: {url}'\n                                values={{\n                                    url: incomingWebhookId,\n                                }}\n                            />\n                            <span>\n                                <CopyText\n                                    value={incomingWebhookId}\n                                />\n                            </span>\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: incomingWebhook.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledIncomingWebhook, {matchesFilter} from 'components/integrations/installed_incoming_webhook.jsx';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledIncomingWebhooks extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Data used in passing down as props for webhook modifications\n        */\n        team: PropTypes.object,\n\n        /**\n        * Data used for checking if webhook is created by current user\n        */\n        user: PropTypes.object,\n\n        /**\n        *  Data used for checking modification privileges\n        */\n        canManageOthersWebhooks: PropTypes.bool,\n\n        /**\n        * Data used in passing down as props for showing webhook details\n        */\n        incomingWebhooks: PropTypes.array,\n\n        /**\n        * Data used in sorting for displaying list and as props channel details\n        */\n        channels: PropTypes.object,\n\n        /**\n        *  Data used in passing down as props for webhook -created by label\n        */\n        users: PropTypes.object,\n\n        /**\n        *  Data used in passing as argument for loading webhooks\n        */\n\n        teamId: PropTypes.string,\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call for removing incomingWebhook\n            */\n            removeIncomingHook: PropTypes.func,\n\n            /**\n            * The function to call for incomingWebhook List and for the status of api\n            */\n            loadIncomingHooksAndProfilesForTeam: PropTypes.func,\n        }),\n\n        /**\n        * Whether or not incoming webhooks are enabled.\n        */\n        enableIncomingWebhooks: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableIncomingWebhooks) {\n            this.props.actions.loadIncomingHooksAndProfilesForTeam(\n                this.props.teamId,\n                Constants.Integrations.START_PAGE_NUM,\n                Constants.Integrations.PAGE_SIZE\n            ).then(\n                () => this.setState({loading: false})\n            );\n        }\n    }\n\n    deleteIncomingWebhook = (incomingWebhook) => {\n        this.props.actions.removeIncomingHook(incomingWebhook.id);\n    }\n\n    incomingWebhookCompare = (a, b) => {\n        let displayNameA = a.display_name;\n        if (!displayNameA) {\n            const channelA = this.props.channels[a.channel_id];\n            if (channelA) {\n                displayNameA = channelA.display_name;\n            } else {\n                displayNameA = Utils.localizeMessage('installed_incoming_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n\n        const displayNameB = b.display_name;\n\n        return displayNameA.localeCompare(displayNameB);\n    }\n\n    incomingWebhooks = (filter) => this.props.incomingWebhooks.\n        sort(this.incomingWebhookCompare).\n        filter((incomingWebhook) => matchesFilter(incomingWebhook, this.props.channels[incomingWebhook.channel_id], filter)).\n        map((incomingWebhook) => {\n            const canChange = this.props.canManageOthersWebhooks || this.props.user.id === incomingWebhook.user_id;\n            const channel = this.props.channels[incomingWebhook.channel_id];\n            return (\n                <InstalledIncomingWebhook\n                    key={incomingWebhook.id}\n                    incomingWebhook={incomingWebhook}\n                    onDelete={this.deleteIncomingWebhook}\n                    creator={this.props.users[incomingWebhook.user_id] || {}}\n                    canChange={canChange}\n                    team={this.props.team}\n                    channel={channel}\n                />\n            );\n        });\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.header'\n                        defaultMessage='Installed Incoming Webhooks'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.add'\n                        defaultMessage='Add Incoming Webhook'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/incoming_webhooks/add'}\n                addButtonId='addIncomingWebhook'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.empty'\n                        defaultMessage='No incoming webhooks found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_incoming_webhooks.emptySearch'\n                        defaultMessage='No incoming webhooks match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.help'\n                        defaultMessage='Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='http://docs.mattermost.com/developer/webhooks-incoming.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_incoming_webhooks.help.buildYourOwn'\n                                        defaultMessage='Build Your Own'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_incoming_webhooks.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_incoming_webhooks.search', 'Search Incoming Webhooks')}\n                loading={this.state.loading}\n            >\n                {(filter) => {\n                    const children = this.incomingWebhooks(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport * as Actions from 'mattermost-redux/actions/integrations';\nimport {getAllChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getIncomingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {loadIncomingHooksAndProfilesForTeam} from 'actions/integration_actions';\n\nimport InstalledIncomingWebhooks from './installed_incoming_webhooks.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const teamId = getCurrentTeamId(state);\n    const canManageOthersWebhooks = haveITeamPermission(state, {team: teamId, permission: Permissions.MANAGE_OTHERS_INCOMING_WEBHOOKS});\n    const incomingHooks = getIncomingHooks(state);\n    const incomingWebhooks = Object.keys(incomingHooks).\n        map((key) => incomingHooks[key]).\n        filter((incomingWebhook) => incomingWebhook.team_id === teamId);\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n\n    return {\n        incomingWebhooks,\n        channels: getAllChannels(state),\n        users: getUsers(state),\n        teamId,\n        canManageOthersWebhooks,\n        enableIncomingWebhooks,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadIncomingHooksAndProfilesForTeam,\n            removeIncomingHook: Actions.removeIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledIncomingWebhooks);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\n\nexport default class ChannelSelect extends React.PureComponent {\n    static get propTypes() {\n        return {\n            channels: PropTypes.array.isRequired,\n            onChange: PropTypes.func,\n            value: PropTypes.string,\n            selectOpen: PropTypes.bool.isRequired,\n            selectPrivate: PropTypes.bool.isRequired,\n            selectDm: PropTypes.bool.isRequired,\n        };\n    }\n\n    static get defaultProps() {\n        return {\n            selectOpen: false,\n            selectPrivate: false,\n            selectDm: false,\n        };\n    }\n\n    render() {\n        const options = [\n            <option\n                key=''\n                value=''\n            >\n                {Utils.localizeMessage('channel_select.placeholder', '--- Select a channel ---')}\n            </option>,\n        ];\n\n        this.props.channels.forEach((channel) => {\n            const channelName = channel.display_name || channel.name;\n            if (channel.type === Constants.OPEN_CHANNEL && this.props.selectOpen) {\n                options.push(\n                    <option\n                        key={channel.id}\n                        value={channel.id}\n                    >\n                        {channelName}\n                    </option>\n                );\n            } else if (channel.type === Constants.PRIVATE_CHANNEL && this.props.selectPrivate) {\n                options.push(\n                    <option\n                        key={channel.id}\n                        value={channel.id}\n                    >\n                        {channelName}\n                    </option>\n                );\n            } else if (channel.type === Constants.DM_CHANNEL && this.props.selectDm) {\n                options.push(\n                    <option\n                        key={channel.id}\n                        value={channel.id}\n                    >\n                        {channelName}\n                    </option>\n                );\n            }\n        });\n\n        return (\n            <select\n                className='form-control'\n                value={this.props.value}\n                onChange={this.props.onChange}\n                id='channelSelect'\n            >\n                {options}\n            </select>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {createSelector} from 'reselect';\n\nimport {getMyChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getCurrentUserLocale} from 'mattermost-redux/selectors/entities/i18n';\nimport {sortChannelsByTypeAndDisplayName} from 'mattermost-redux/utils/channel_utils';\n\nimport ChannelSelect from './channel_select.jsx';\n\nconst getMyChannelsSorted = createSelector(\n    getMyChannels,\n    getCurrentUserLocale,\n    (channels, locale) => {\n        return [...channels].sort(sortChannelsByTypeAndDisplayName.bind(null, locale));\n    }\n);\n\nfunction mapStateToProps(state) {\n    return {\n        channels: getMyChannelsSorted(state),\n    };\n}\n\nexport default connect(mapStateToProps)(ChannelSelect);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport ChannelSelect from 'components/channel_select';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport {localizeMessage} from 'utils/utils.jsx';\n\nexport default class AbstractIncomingWebhook extends React.Component {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The header text to render, has id and defaultMessage\n        */\n        header: PropTypes.object.isRequired,\n\n        /**\n        * The footer text to render, has id and defaultMessage\n        */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n        * The server error text after a failed action\n        */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n        * The hook used to set the initial state\n        */\n        initialHook: PropTypes.object,\n\n        /**\n        * Whether to allow configuration of the default post username.\n        */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post icon.\n        */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n\n        /**\n        * The async function to run when the action button is pressed\n        */\n        action: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = this.getStateFromHook(this.props.initialHook || {});\n    }\n\n    getStateFromHook = (hook) => {\n        return {\n            displayName: hook.display_name || '',\n            description: hook.description || '',\n            channelId: hook.channel_id || '',\n            channelLocked: hook.channel_locked || false,\n            username: hook.username || '',\n            iconURL: hook.icon_url || '',\n            saving: false,\n            serverError: '',\n            clientError: null,\n        };\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            serverError: '',\n            clientError: '',\n        });\n\n        if (!this.state.channelId) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_incoming_webhook.channelRequired'\n                        defaultMessage='A valid channel is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const hook = {\n            channel_id: this.state.channelId,\n            channel_locked: this.state.channelLocked,\n            display_name: this.state.displayName,\n            description: this.state.description,\n            username: this.state.username,\n            icon_url: this.state.iconURL,\n        };\n\n        this.props.action(hook).then(() => this.setState({saving: false}));\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateChannelId = (e) => {\n        this.setState({\n            channelId: e.target.value,\n        });\n    }\n\n    updateChannelLocked = (e) => {\n        this.setState({\n            channelLocked: e.target.checked,\n        });\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateIconURL = (e) => {\n        this.setState({\n            iconURL: e.target.value,\n        });\n    }\n\n    render() {\n        var headerToRender = this.props.header;\n        var footerToRender = this.props.footer;\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/incoming_webhooks`}>\n                        <FormattedMessage\n                            id='installed_incoming_webhooks.header'\n                            defaultMessage='Incoming Webhooks'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the webhook settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='500'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.description.help'\n                                        defaultMessage='Describe your incoming webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelId'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.channel'\n                                    defaultMessage='Channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <ChannelSelect\n                                    id='channelId'\n                                    value={this.state.channelId}\n                                    onChange={this.updateChannelId}\n                                    selectOpen={true}\n                                    selectPrivate={true}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.channel.help'\n                                        defaultMessage='This is the default public or private channel that receives the webhook payloads.  When setting up the webhook, you must belong to the private channel.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelLocked'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.channelLocked'\n                                    defaultMessage='Lock to this channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <input\n                                    id='channelLocked'\n                                    type='checkbox'\n                                    checked={this.state.channelLocked}\n                                    onChange={this.updateChannelLocked}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.channelLocked.help'\n                                        defaultMessage='If set, the incoming webhook can post only to the selected channel.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        { this.props.enablePostUsernameOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='username'\n                                >\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.username'\n                                        defaultMessage='Username'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='username'\n                                        type='text'\n                                        maxLength='22'\n                                        className='form-control'\n                                        value={this.state.username}\n                                        onChange={this.updateUsername}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_incoming_webhook.username.help'\n                                            defaultMessage='Specify the username this integration will post as. Usernames can be up to 22 characters, and can contain lowercase letters, numbers and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, the name specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        { this.props.enablePostIconOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='iconURL'\n                                >\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.icon_url'\n                                        defaultMessage='Profile Picture'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='iconURL'\n                                        type='text'\n                                        maxLength='1024'\n                                        className='form-control'\n                                        value={this.state.iconURL}\n                                        onChange={this.updateIconURL}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_incoming_webhook.icon_url.help'\n                                            defaultMessage='Enter the URL of a .png or .jpg file for the profile picture of this integration when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/incoming_webhooks`}\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveWebhook'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractIncomingWebhook from 'components/integrations/abstract_incoming_webhook.jsx';\n\nconst HEADER = {id: t('integrations.add'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('add_incoming_webhook.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('add_incoming_webhook.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post username.\n        */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post icon.\n        */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to add a new incoming webhook\n            */\n            createIncomingHook: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addIncomingHook = async (hook) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.createIncomingHook(hook);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=incoming_webhooks&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractIncomingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n                action={this.addIncomingHook}\n                serverError={this.state.serverError}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {createIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport AddIncomingWebhook from './add_incoming_webhook.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n\n    return {\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractIncomingWebhook from 'components/integrations/abstract_incoming_webhook.jsx';\nimport LoadingScreen from 'components/loading_screen';\n\nconst HEADER = {id: t('integrations.edit'), defaultMessage: 'Edit'};\nconst FOOTER = {id: t('update_incoming_webhook.update'), defaultMessage: 'Update'};\nconst LOADING = {id: t('update_incoming_webhook.updating'), defaultMessage: 'Updating...'};\n\nexport default class EditIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The incoming webhook to edit\n        */\n        hook: PropTypes.object,\n\n        /**\n        * The id of the incoming webhook to edit\n        */\n        hookId: PropTypes.string.isRequired,\n\n        /**\n        * Whether or not incoming webhooks are enabled.\n        */\n        enableIncomingWebhooks: PropTypes.bool.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post username.\n        */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post icon.\n        */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to update an incoming webhook\n            */\n            updateIncomingHook: PropTypes.func.isRequired,\n\n            /**\n            * The function to call to get an incoming webhook\n            */\n            getIncomingHook: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableIncomingWebhooks) {\n            this.props.actions.getIncomingHook(this.props.hookId);\n        }\n    }\n\n    editIncomingHook = async (hook) => {\n        this.newHook = hook;\n\n        if (this.props.hook.id) {\n            hook.id = this.props.hook.id;\n        }\n\n        if (this.props.hook.token) {\n            hook.token = this.props.hook.token;\n        }\n\n        await this.submitHook();\n    }\n\n    submitHook = async () => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.updateIncomingHook(this.newHook);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/incoming_webhooks`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractIncomingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n                action={this.editIncomingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getIncomingHook, updateIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditIncomingWebhook from './edit_incoming_webhook.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n    const hookId = (new URLSearchParams(ownProps.location.search)).get('id');\n\n    return {\n        hookId,\n        hook: state.entities.integrations.incomingHooks[hookId],\n        enableIncomingWebhooks,\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            updateIncomingHook,\n            getIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {t} from 'utils/i18n';\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegration from './delete_integration.jsx';\n\nexport function matchesFilter(outgoingWebhook, channel, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    const {\n        display_name: displayName,\n        description,\n        trigger_words: triggerWords,\n    } = outgoingWebhook;\n\n    if (\n        (displayName && displayName.toLowerCase().indexOf(filter) !== -1) ||\n        (description && description.toLowerCase().indexOf(filter) !== -1)\n    ) {\n        return true;\n    }\n\n    if (triggerWords) {\n        for (const triggerWord of triggerWords) {\n            if (triggerWord.toLowerCase().indexOf(filter) !== -1) {\n                return true;\n            }\n        }\n    }\n\n    if (channel && channel.name) {\n        if (channel.name.toLowerCase().indexOf(filter) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport default class InstalledOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * Data used for showing webhook details\n        */\n        outgoingWebhook: PropTypes.object.isRequired,\n\n        /**\n        * Function used for webhook token regeneration\n        */\n        onRegenToken: PropTypes.func.isRequired,\n\n        /**\n        * Function to call when webhook delete button is pressed\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * String used for filtering webhook item\n        */\n        filter: PropTypes.string,\n\n        /**\n        * Data used for showing created by details\n        */\n        creator: PropTypes.object.isRequired,\n\n        /**\n        *  Set to show available actions on webhook\n        */\n        canChange: PropTypes.bool.isRequired,\n\n        /**\n        *  Data used in routing of webhook for modifications\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        *  Data used for filtering of webhooks based in filter prop\n        */\n        channel: PropTypes.object,\n    }\n\n    handleRegenToken = (e) => {\n        e.preventDefault();\n\n        this.props.onRegenToken(this.props.outgoingWebhook);\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.outgoingWebhook);\n    }\n\n    makeDisplayName(outgoingWebhook, channel) {\n        if (outgoingWebhook.display_name) {\n            return outgoingWebhook.display_name;\n        } else if (channel) {\n            return channel.display_name;\n        }\n        return (\n            <FormattedMessage\n                id='installed_outgoing_webhooks.unknown_channel'\n                defaultMessage='A Private Webhook'\n            />\n        );\n    }\n\n    render() {\n        const outgoingWebhook = this.props.outgoingWebhook;\n        const channel = this.props.channel;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n        const triggerWordsFull = 0;\n        const triggerWordsStartsWith = 1;\n\n        if (outgoingWebhook && !matchesFilter(outgoingWebhook, channel, filter)) {\n            return null;\n        }\n\n        const displayName = this.makeDisplayName(outgoingWebhook, channel);\n\n        let description = null;\n        if (outgoingWebhook.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {outgoingWebhook.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let triggerWords = null;\n        if (outgoingWebhook.trigger_words && outgoingWebhook.trigger_words.length > 0) {\n            triggerWords = (\n                <div className='item-details__row'>\n                    <span className='item-details__trigger-words'>\n                        <FormattedMessage\n                            id='installed_integrations.triggerWords'\n                            defaultMessage='Trigger Words: {triggerWords}'\n                            values={{\n                                triggerWords: outgoingWebhook.trigger_words.join(', '),\n                            }}\n                        />\n                    </span>\n                </div>\n            );\n        }\n\n        const urls = (\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.callback_urls'\n                        defaultMessage='Callback URLs: {urls}'\n                        values={{\n                            urls: outgoingWebhook.callback_urls.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n        );\n\n        let triggerWhen;\n        if (outgoingWebhook.trigger_when === triggerWordsFull) {\n            triggerWhen = (\n                <FormattedMessage\n                    id='add_outgoing_webhook.triggerWordsTriggerWhenFullWord'\n                    defaultMessage='First word matches a trigger word exactly'\n                />\n            );\n        } else if (outgoingWebhook.trigger_when === triggerWordsStartsWith) {\n            triggerWhen = (\n                <FormattedMessage\n                    id='add_outgoing_webhook.triggerWordsTriggerWhenStartsWith'\n                    defaultMessage='First word starts with a trigger word'\n                />\n            );\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.handleRegenToken}\n                    >\n                        <FormattedMessage\n                            id='installed_integrations.regenToken'\n                            defaultMessage='Regen Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/outgoing_webhooks/edit?id=${outgoingWebhook.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegration\n                        messageId={t('installed_outgoing_webhooks.delete.confirm')}\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName}\n                        </strong>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__content_type'>\n                            <FormattedMessage\n                                id='installed_integrations.content_type'\n                                defaultMessage='Content-Type: {contentType}'\n                                values={{\n                                    contentType: outgoingWebhook.content_type || 'application/x-www-form-urlencoded',\n                                }}\n                            />\n                        </span>\n                    </div>\n                    {triggerWords}\n                    <div className='item-details__row'>\n                        <span className='item-details__trigger-when'>\n                            <FormattedMessage\n                                id='installed_integrations.triggerWhen'\n                                defaultMessage='Trigger When: {triggerWhen}'\n                                values={{\n                                    triggerWhen,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_integrations.token'\n                                defaultMessage='Token: {token}'\n                                values={{\n                                    token: outgoingWebhook.token,\n                                }}\n                            />\n                            <CopyText\n                                value={outgoingWebhook.token}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: outgoingWebhook.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    {urls}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport * as Utils from 'utils/utils.jsx';\nimport Constants from 'utils/constants';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledOutgoingWebhook, {matchesFilter} from 'components/integrations/installed_outgoing_webhook.jsx';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledOutgoingWebhooks extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Data used in passing down as props for webhook modifications\n        */\n        team: PropTypes.object,\n\n        /**\n        * Data used for checking if webhook is created by current user\n        */\n        user: PropTypes.object,\n\n        /**\n        *  Data used for checking modification privileges\n        */\n        canManageOthersWebhooks: PropTypes.bool,\n\n        /**\n        * Data used in passing down as props for showing webhook details\n        */\n        outgoingWebhooks: PropTypes.array,\n\n        /**\n        * Data used in sorting for displaying list and as props channel details\n        */\n        channels: PropTypes.object,\n\n        /**\n        *  Data used in passing down as props for webhook -created by label\n        */\n        users: PropTypes.object,\n\n        /**\n        *  Data used in passing as argument for loading webhooks\n        */\n        teamId: PropTypes.string,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call for removing outgoingWebhook\n            */\n            removeOutgoingHook: PropTypes.func,\n\n            /**\n            * The function to call for outgoingWebhook List and for the status of api\n            */\n            loadOutgoingHooksAndProfilesForTeam: PropTypes.func,\n\n            /**\n            * The function to call for regeneration of webhook token\n            */\n            regenOutgoingHookToken: PropTypes.func,\n        }),\n\n        /**\n        * Whether or not outgoing webhooks are enabled.\n        */\n        enableOutgoingWebhooks: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOutgoingWebhooks) {\n            this.props.actions.loadOutgoingHooksAndProfilesForTeam(\n                this.props.teamId,\n                Constants.Integrations.START_PAGE_NUM,\n                Constants.Integrations.PAGE_SIZE\n            ).then(\n                () => this.setState({loading: false})\n            );\n        }\n    }\n\n    regenOutgoingWebhookToken = (outgoingWebhook) => {\n        this.props.actions.regenOutgoingHookToken(outgoingWebhook.id);\n    }\n\n    removeOutgoingHook = (outgoingWebhook) => {\n        this.props.actions.removeOutgoingHook(outgoingWebhook.id);\n    }\n\n    outgoingWebhookCompare = (a, b) => {\n        let displayNameA = a.display_name;\n        if (!displayNameA) {\n            const channelA = this.props.channels[a.channel_id];\n            if (channelA) {\n                displayNameA = channelA.display_name;\n            } else {\n                displayNameA = Utils.localizeMessage('installed_outgoing_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n\n        let displayNameB = b.display_name;\n        if (!displayNameB) {\n            const channelB = this.props.channels[b.channel_id];\n            if (channelB) {\n                displayNameB = channelB.display_name;\n            } else {\n                displayNameB = Utils.localizeMessage('installed_outgoing_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n        return displayNameA.localeCompare(displayNameB);\n    }\n\n    outgoingWebhooks = (filter) => this.props.outgoingWebhooks.\n        sort(this.outgoingWebhookCompare).\n        filter((outgoingWebhook) => matchesFilter(outgoingWebhook, this.props.channels[outgoingWebhook.channel_id], filter)).\n        map((outgoingWebhook) => {\n            const canChange = this.props.canManageOthersWebhooks || this.props.user.id === outgoingWebhook.creator_id;\n            const channel = this.props.channels[outgoingWebhook.channel_id];\n            return (\n                <InstalledOutgoingWebhook\n                    key={outgoingWebhook.id}\n                    outgoingWebhook={outgoingWebhook}\n                    onRegenToken={this.regenOutgoingWebhookToken}\n                    onDelete={this.removeOutgoingHook}\n                    creator={this.props.users[outgoingWebhook.creator_id] || {}}\n                    canChange={canChange}\n                    team={this.props.team}\n                    channel={channel}\n                />\n            );\n        });\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.header'\n                        defaultMessage='Installed Outgoing Webhooks'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.add'\n                        defaultMessage='Add Outgoing Webhook'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/outgoing_webhooks/add'}\n                addButtonId='addOutgoingWebhook'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.empty'\n                        defaultMessage='No outgoing webhooks found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_outgoing_webhooks.emptySearch'\n                        defaultMessage='No outgoing webhooks match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.help'\n                        defaultMessage='Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='http://docs.mattermost.com/developer/webhooks-outgoing.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_outgoing_webhooks.help.buildYourOwn'\n                                        defaultMessage='Build your own'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_outgoing_webhooks.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_outgoing_webhooks.search', 'Search Outgoing Webhooks')}\n                loading={this.state.loading}\n            >\n                {(filter) => {\n                    const children = this.outgoingWebhooks(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport * as Actions from 'mattermost-redux/actions/integrations';\nimport {getOutgoingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\nimport {getAllChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {loadOutgoingHooksAndProfilesForTeam} from 'actions/integration_actions';\n\nimport InstalledOutgoingWebhook from './installed_outgoing_webhooks.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const teamId = getCurrentTeamId(state);\n    const canManageOthersWebhooks = haveITeamPermission(state, {team: teamId, permission: Permissions.MANAGE_OTHERS_OUTGOING_WEBHOOKS});\n    const outgoingHooks = getOutgoingHooks(state);\n    const outgoingWebhooks = Object.keys(outgoingHooks).\n        map((key) => outgoingHooks[key]).\n        filter((outgoingWebhook) => outgoingWebhook.team_id === teamId);\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n\n    return {\n        outgoingWebhooks,\n        channels: getAllChannels(state),\n        users: getUsers(state),\n        teamId,\n        canManageOthersWebhooks,\n        enableOutgoingWebhooks,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadOutgoingHooksAndProfilesForTeam,\n            removeOutgoingHook: Actions.removeOutgoingHook,\n            regenOutgoingHookToken: Actions.regenOutgoingHookToken,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {localizeMessage} from 'utils/utils.jsx';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport ChannelSelect from 'components/channel_select';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\n\nexport default class AbstractOutgoingWebhook extends React.Component {\n    static propTypes = {\n\n        /**\n         * The current team\n         */\n        team: PropTypes.object.isRequired,\n\n        /**\n         * The header text to render, has id and defaultMessage\n         */\n        header: PropTypes.object.isRequired,\n\n        /**\n         * The footer text to render, has id and defaultMessage\n         */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n         * Any extra component/node to render\n         */\n        renderExtra: PropTypes.node.isRequired,\n\n        /**\n         * The server error text after a failed action\n         */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n         * The hook used to set the initial state\n         */\n        initialHook: PropTypes.object,\n\n        /**\n         * The async function to run when the action button is pressed\n         */\n        action: PropTypes.func.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post username.\n         */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post icon.\n         */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = this.getStateFromHook(this.props.initialHook || {});\n    }\n\n    getStateFromHook = (hook) => {\n        let triggerWords = '';\n        if (hook.trigger_words) {\n            let i = 0;\n            for (i = 0; i < hook.trigger_words.length; i++) {\n                triggerWords += hook.trigger_words[i] + '\\n';\n            }\n        }\n\n        let callbackUrls = '';\n        if (hook.callback_urls) {\n            let i = 0;\n            for (i = 0; i < hook.callback_urls.length; i++) {\n                callbackUrls += hook.callback_urls[i] + '\\n';\n            }\n        }\n\n        return {\n            displayName: hook.display_name || '',\n            description: hook.description || '',\n            contentType: hook.content_type || 'application/x-www-form-urlencoded',\n            channelId: hook.channel_id || '',\n            triggerWords,\n            triggerWhen: hook.trigger_when || 0,\n            callbackUrls,\n            saving: false,\n            clientError: null,\n            username: hook.username || '',\n            iconURL: hook.icon_url || '',\n        };\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        const triggerWords = [];\n        if (this.state.triggerWords) {\n            for (let triggerWord of this.state.triggerWords.split('\\n')) {\n                triggerWord = triggerWord.trim();\n\n                if (triggerWord.length > 0) {\n                    triggerWords.push(triggerWord);\n                }\n            }\n        }\n\n        if (!this.state.channelId && triggerWords.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_outgoing_webhook.triggerWordsOrChannelRequired'\n                        defaultMessage='A valid channel or a list of trigger words is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const callbackUrls = [];\n        for (let callbackUrl of this.state.callbackUrls.split('\\n')) {\n            callbackUrl = callbackUrl.trim();\n\n            if (callbackUrl.length > 0) {\n                callbackUrls.push(callbackUrl);\n            }\n        }\n\n        if (callbackUrls.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_outgoing_webhook.callbackUrlsRequired'\n                        defaultMessage='One or more callback URLs are required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const hook = {\n            team_id: this.props.team.id,\n            channel_id: this.state.channelId,\n            trigger_words: triggerWords,\n            trigger_when: parseInt(this.state.triggerWhen, 10),\n            callback_urls: callbackUrls,\n            display_name: this.state.displayName,\n            content_type: this.state.contentType,\n            description: this.state.description,\n            username: this.state.username,\n            icon_url: this.state.iconURL,\n        };\n\n        this.props.action(hook).then(() => this.setState({saving: false}));\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateContentType = (e) => {\n        this.setState({\n            contentType: e.target.value,\n        });\n    }\n\n    updateChannelId = (e) => {\n        this.setState({\n            channelId: e.target.value,\n        });\n    }\n\n    updateTriggerWords = (e) => {\n        this.setState({\n            triggerWords: e.target.value,\n        });\n    }\n\n    updateTriggerWhen = (e) => {\n        this.setState({\n            triggerWhen: e.target.value,\n        });\n    }\n\n    updateCallbackUrls = (e) => {\n        this.setState({\n            callbackUrls: e.target.value,\n        });\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateIconURL = (e) => {\n        this.setState({\n            iconURL: e.target.value,\n        });\n    }\n\n    render() {\n        const contentTypeOption1 = 'application/x-www-form-urlencoded';\n        const contentTypeOption2 = 'application/json';\n\n        var headerToRender = this.props.header;\n        var footerToRender = this.props.footer;\n        var renderExtra = this.props.renderExtra;\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/outgoing_webhooks`}>\n                        <FormattedMessage\n                            id='installed_outgoing_webhooks.header'\n                            defaultMessage='Outgoing Webhooks'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the webhook settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='500'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.description.help'\n                                        defaultMessage='Describe your outgoing webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='contentType'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.content_Type'\n                                    defaultMessage='Content Type'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.contentType}\n                                    onChange={this.updateContentType}\n                                >\n                                    <option\n                                        value={contentTypeOption1}\n                                    >\n                                        {contentTypeOption1}\n                                    </option>\n                                    <option\n                                        value={contentTypeOption2}\n                                    >\n                                        {contentTypeOption2}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help1'\n                                        defaultMessage='Specify the content type by which to send the request.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help2'\n                                        defaultMessage='For the server to encode the parameters in a URL format in the request body, select application/x-www-form-urlencoded.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help3'\n                                        defaultMessage='For the server to format the request body as JSON, select application/json.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelId'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.channel'\n                                    defaultMessage='Channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <ChannelSelect\n                                    id='channelId'\n                                    value={this.state.channelId}\n                                    onChange={this.updateChannelId}\n                                    selectOpen={true}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.channel.help'\n                                        defaultMessage='This field is optional if you specify at least one trigger word. Specify the public channel that delivers the payload to the webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='triggerWords'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.triggerWords'\n                                    defaultMessage='Trigger Words (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='triggerWords'\n                                    rows='3'\n                                    maxLength='1000'\n                                    className='form-control'\n                                    value={this.state.triggerWords}\n                                    onChange={this.updateTriggerWords}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.triggerWords.help'\n                                        defaultMessage='Specify the trigger words that send an HTTP POST request to your application.  The trigger can be for the channel, the outgoing webhook, or both. If you select only Channel, trigger words are optional. If you select both, the message must match both values.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='triggerWords'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.triggerWordsTriggerWhen'\n                                    defaultMessage='Trigger When'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.triggerWhen}\n                                    onChange={this.updateTriggerWhen}\n                                >\n                                    <option\n                                        value='0'\n                                    >\n                                        {localizeMessage('add_outgoing_webhook.triggerWordsTriggerWhenFullWord', 'First word matches a trigger word exactly')}\n                                    </option>\n                                    <option\n                                        value='1'\n                                    >\n                                        {localizeMessage('add_outgoing_webhook.triggerWordsTriggerWhenStartsWith', 'First word starts with a trigger word')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.triggerWordsTriggerWhen.help'\n                                        defaultMessage='Specify when to trigger the outgoing webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='callbackUrls'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.callbackUrls'\n                                    defaultMessage='Callback URLs (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='callbackUrls'\n                                    rows='3'\n                                    maxLength='1000'\n                                    className='form-control'\n                                    value={this.state.callbackUrls}\n                                    onChange={this.updateCallbackUrls}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.callbackUrls.help'\n                                        defaultMessage='Specify the URL that the messages will be sent to. If the URL is private, add it as a {link}.'\n                                        values={{\n                                            link: (\n                                                <a\n                                                    href='https://about.mattermost.com/default-allow-internal-connections-settings-documentation/'\n                                                    target='_blank'\n                                                    rel='noopener noreferrer'\n                                                >\n                                                    <FormattedMessage\n                                                        id='add_outgoing_webhook.callbackUrls.helpLinkText'\n                                                        defaultMessage='trusted internal connection'\n                                                    />\n                                                </a>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        {this.props.enablePostUsernameOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='username'\n                                >\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.username'\n                                        defaultMessage='Username'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='username'\n                                        type='text'\n                                        maxLength='22'\n                                        className='form-control'\n                                        value={this.state.username}\n                                        onChange={this.updateUsername}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_outgoing_webhook.username.help'\n                                            defaultMessage='Specify the username this integration will post as. Usernames can be up to 22 characters, and contain lowercase letters, numbers and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, the name specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        {this.props.enablePostIconOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='iconURL'\n                                >\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.icon_url'\n                                        defaultMessage='Profile Picture'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='iconURL'\n                                        type='text'\n                                        maxLength='1024'\n                                        className='form-control'\n                                        value={this.state.iconURL}\n                                        onChange={this.updateIconURL}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_outgoing_webhook.icon_url.help'\n                                            defaultMessage='Enter the URL of a .png or .jpg file for this integration to use as the profile picture when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/outgoing_webhooks`}\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveWebhook'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractOutgoingWebhook from 'components/integrations/abstract_outgoing_webhook.jsx';\n\nconst HEADER = {id: t('integrations.add'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('add_outgoing_webhook.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('add_outgoing_webhook.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * The current team\n         */\n        team: PropTypes.object.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n             * The function to call to add a new outgoing webhook\n             */\n            createOutgoingHook: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n         * Whether to allow configuration of the default post username.\n         */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post icon.\n         */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addOutgoingHook = async (hook) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.createOutgoingHook(hook);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=outgoing_webhooks&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractOutgoingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={''}\n                action={this.addOutgoingHook}\n                serverError={this.state.serverError}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {createOutgoingHook} from 'mattermost-redux/actions/integrations';\n\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport AddOutgoingWebhook from './add_outgoing_webhook.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n    return {\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createOutgoingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {browserHistory} from 'utils/browser_history';\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractOutgoingWebhook from 'components/integrations/abstract_outgoing_webhook.jsx';\nimport LoadingScreen from 'components/loading_screen';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_outgoing_webhook.update', defaultMessage: 'Update'};\nconst LOADING = {id: 'update_outgoing_webhook.updating', defaultMessage: 'Updating...'};\n\nexport default class EditOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * The current team\n         */\n        team: PropTypes.object.isRequired,\n\n        /**\n         * The outgoing webhook to edit\n         */\n        hook: PropTypes.object,\n\n        /**\n         * The id of the outgoing webhook to edit\n         */\n        hookId: PropTypes.string.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n             * The function to call to update an outgoing webhook\n             */\n            updateOutgoingHook: PropTypes.func.isRequired,\n\n            /**\n             * The function to call to get an outgoing webhook\n             */\n            getOutgoingHook: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not outgoing webhooks are enabled.\n        */\n        enableOutgoingWebhooks: PropTypes.bool,\n\n        /**\n         * Whether to allow configuration of the default post username.\n         */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post icon.\n         */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOutgoingWebhooks) {\n            this.props.actions.getOutgoingHook(this.props.hookId);\n        }\n    }\n\n    editOutgoingHook = async (hook) => {\n        this.newHook = hook;\n\n        if (this.props.hook.id) {\n            hook.id = this.props.hook.id;\n        }\n\n        if (this.props.hook.token) {\n            hook.token = this.props.hook.token;\n        }\n\n        const triggerWordsSame = (this.props.hook.trigger_words.length === hook.trigger_words.length) &&\n            this.props.hook.trigger_words.every((v, i) => v === hook.trigger_words[i]);\n\n        const callbackUrlsSame = (this.props.hook.callback_urls.length === hook.callback_urls.length) &&\n            this.props.hook.callback_urls.every((v, i) => v === hook.callback_urls[i]);\n\n        if (this.props.hook.content_type !== hook.content_type ||\n            !triggerWordsSame || !callbackUrlsSame) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitHook();\n        }\n    }\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitHook = async () => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.updateOutgoingHook(this.newHook);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/outgoing_webhooks`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_outgoing_webhook.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_outgoing_webhook.confirm'\n                defaultMessage='Edit Outgoing Webhook'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_outgoing_webhook.question'\n                defaultMessage='Your changes may break the existing outgoing webhook. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitHook}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render() {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOutgoingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editOutgoingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getOutgoingHook, updateOutgoingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditOutgoingWebhook from './edit_outgoing_webhook.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const hookId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n\n    return {\n        hookId,\n        hook: state.entities.integrations.outgoingHooks[hookId],\n        enableOutgoingWebhooks,\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            updateOutgoingHook,\n            getOutgoingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport * as Utils from 'utils/utils.jsx';\nimport {t} from 'utils/i18n';\nimport FormError from 'components/form_error';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message.jsx';\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegration from '../delete_integration.jsx';\n\nconst FAKE_SECRET = '***************';\n\nexport function matchesFilter(oauthApp, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    return oauthApp.name.toLowerCase().indexOf(filter) !== -1;\n}\n\nexport default class InstalledOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        /**\n        * The oauthApp data\n        */\n        oauthApp: PropTypes.object.isRequired,\n\n        creatorName: PropTypes.string.isRequired,\n\n        /**\n        * The function to call when Regenerate Secret link is clicked\n        */\n        onRegenerateSecret: PropTypes.func.isRequired,\n\n        /**\n        * The function to call when Delete link is clicked\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * Set to filter OAuthApp\n        */\n        filter: PropTypes.string,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            clientSecret: FAKE_SECRET,\n        };\n    }\n\n    handleShowClientSecret = (e) => {\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n        this.setState({clientSecret: this.props.oauthApp.client_secret});\n    }\n\n    handleHideClientSecret = (e) => {\n        e.preventDefault();\n        this.setState({clientSecret: FAKE_SECRET});\n    }\n\n    handleRegenerate = (e) => {\n        e.preventDefault();\n        this.props.onRegenerateSecret(this.props.oauthApp.id).then(\n            ({error}) => {\n                if (error) {\n                    this.setState({error: error.message});\n                } else {\n                    this.setState({error: null});\n                    this.handleShowClientSecret();\n                }\n            }\n        );\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.oauthApp);\n    }\n\n    render() {\n        const {oauthApp, creatorName} = this.props;\n        let error;\n\n        if (this.state.error) {\n            error = (\n                <FormError\n                    error={this.state.error}\n                />\n            );\n        }\n\n        if (!matchesFilter(oauthApp, this.props.filter)) {\n            return null;\n        }\n\n        let name;\n        if (oauthApp.name) {\n            name = oauthApp.name;\n        } else {\n            name = (\n                <FormattedMessage\n                    id='installed_integrations.unnamed_oauth_app'\n                    defaultMessage='Unnamed OAuth 2.0 Application'\n                />\n            );\n        }\n\n        let description;\n        if (oauthApp.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {oauthApp.description}\n                    </span>\n                </div>\n            );\n        }\n\n        const urls = (\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.callback_urls'\n                        defaultMessage='Callback URLs: {urls}'\n                        values={{\n                            urls: oauthApp.callback_urls.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n        );\n\n        let isTrusted;\n        if (oauthApp.is_trusted) {\n            isTrusted = Utils.localizeMessage('installed_oauth_apps.trusted.yes', 'Yes');\n        } else {\n            isTrusted = Utils.localizeMessage('installed_oauth_apps.trusted.no', 'No');\n        }\n\n        let showHide;\n        let clientSecret;\n        if (this.state.clientSecret === FAKE_SECRET) {\n            showHide = (\n                <button\n                    id='showSecretButton'\n                    className='style--none color--link'\n                    onClick={this.handleShowClientSecret}\n                >\n                    <FormattedMessage\n                        id='installed_integrations.showSecret'\n                        defaultMessage='Show Secret'\n                    />\n                </button>\n            );\n            clientSecret = (\n                <span className='item-details__token'>\n                    <FormattedMessage\n                        id='installed_integrations.client_secret'\n                        defaultMessage='Client Secret: **{clientSecret}**'\n                        values={{\n                            clientSecret: this.state.clientSecret,\n                        }}\n                    />\n                </span>\n            );\n        } else {\n            showHide = (\n                <button\n                    id='hideSecretButton'\n                    className='style--none color--link'\n                    onClick={this.handleHideClientSecret}\n                >\n                    <FormattedMessage\n                        id='installed_integrations.hideSecret'\n                        defaultMessage='Hide Secret'\n                    />\n                </button>\n            );\n            clientSecret = (\n                <span className='item-details__token'>\n                    <FormattedMarkdownMessage\n                        id='installed_integrations.client_secret'\n                        defaultMessage='Client Secret: **{clientSecret}**'\n                        values={{\n                            clientSecret: this.state.clientSecret,\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_secret'\n                        defaultMessage='Copy Client Secret'\n                        value={this.state.clientSecret}\n                    />\n                </span>\n            );\n        }\n\n        const regen = (\n            <button\n                id='regenerateSecretButton'\n                className='style--none color--link'\n                onClick={this.handleRegenerate}\n            >\n                <FormattedMessage\n                    id='installed_integrations.regenSecret'\n                    defaultMessage='Regenerate Secret'\n                />\n            </button>\n        );\n\n        let icon;\n        if (oauthApp.icon_url) {\n            icon = (\n                <div className='integration__icon integration-list__icon'>\n                    <img\n                        alt={'get app screenshot'}\n                        src={oauthApp.icon_url}\n                    />\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-list__item'>\n                {icon}\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {name}\n                        </strong>\n                        <div className='item-actions'>\n                            {showHide}\n                            {' - '}\n                            {regen}\n                            {' - '}\n                            <Link to={`/${this.props.team.name}/integrations/oauth2-apps/edit?id=${oauthApp.id}`}>\n                                <FormattedMessage\n                                    id='installed_integrations.edit'\n                                    defaultMessage='Edit'\n                                />\n                            </Link>\n                            {' - '}\n                            <DeleteIntegration\n                                messageId={t('installed_oauth_apps.delete.confirm')}\n                                onDelete={this.handleDelete}\n                            />\n                        </div>\n                    </div>\n                    {error}\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__url word-break--all'>\n                            <FormattedMarkdownMessage\n                                id='installed_oauth_apps.is_trusted'\n                                defaultMessage='Is Trusted: **{isTrusted}**'\n                                values={{\n                                    isTrusted,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMarkdownMessage\n                                id='installed_integrations.client_id'\n                                defaultMessage='Client ID: **{clientId}**'\n                                values={{\n                                    clientId: oauthApp.id,\n                                }}\n                            />\n                            <CopyText\n                                idMessage='integrations.copy_client_id'\n                                defaultMessage='Copy Client Id'\n                                value={oauthApp.id}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        {clientSecret}\n                    </div>\n                    {urls}\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: creatorName,\n                                    createAt: oauthApp.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\n\nimport {getDisplayNameByUser} from 'utils/utils';\n\nimport InstalledOAuthApp from './installed_oauth_app.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const oauthApp = ownProps.oauthApp || {};\n    return {\n        creatorName: getDisplayNameByUser(state, getUser(state, oauthApp.creator_id)),\n    };\n}\n\nexport default connect(mapStateToProps)(InstalledOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {localizeMessage} from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledOAuthApp from '../installed_oauth_app';\nimport {matchesFilter} from '../installed_oauth_app/installed_oauth_app';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledOAuthApps extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        /**\n        * The oauthApps data\n        */\n        oauthApps: PropTypes.object,\n\n        /**\n        * Set if user can manage oath\n        */\n        canManageOauth: PropTypes.bool,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to fetch OAuth apps\n            */\n            loadOAuthAppsAndProfiles: PropTypes.func.isRequired,\n\n            /**\n            * The function to call when Regenerate Secret link is clicked\n            */\n            regenOAuthAppSecret: PropTypes.func.isRequired,\n\n            /**\n            * The function to call when Delete link is clicked\n            */\n            deleteOAuthApp: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not OAuth applications are enabled.\n        */\n        enableOAuthServiceProvider: PropTypes.bool,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOAuthServiceProvider) {\n            this.props.actions.loadOAuthAppsAndProfiles().then(\n                () => this.setState({loading: false})\n            );\n        }\n    }\n\n    deleteOAuthApp = (app) => {\n        if (app && app.id) {\n            this.props.actions.deleteOAuthApp(app.id);\n        }\n    }\n\n    oauthAppCompare(a, b) {\n        let nameA = a.name;\n        if (!nameA) {\n            nameA = localizeMessage('installed_integrations.unnamed_oauth_app', 'Unnamed OAuth 2.0 Application');\n        }\n\n        let nameB = b.name;\n        if (!nameB) {\n            nameB = localizeMessage('installed_integrations.unnamed_oauth_app', 'Unnamed OAuth 2.0 Application');\n        }\n\n        return nameA.localeCompare(nameB);\n    }\n\n    oauthApps = (filter) => Object.values(this.props.oauthApps).\n        filter((app) => matchesFilter(app, filter)).\n        sort(this.oauthAppCompare).\n        map((app) => {\n            return (\n                <InstalledOAuthApp\n                    key={app.id}\n                    team={this.props.team}\n                    oauthApp={app}\n                    onRegenerateSecret={this.props.actions.regenOAuthAppSecret}\n                    onDelete={this.deleteOAuthApp}\n                />\n            );\n        });\n\n    render() {\n        const integrationsEnabled = this.props.enableOAuthServiceProvider && this.props.canManageOauth;\n        let props;\n        if (integrationsEnabled) {\n            props = {\n                addLink: '/' + this.props.team.name + '/integrations/oauth2-apps/add',\n                addText: localizeMessage('installed_oauth_apps.add', 'Add OAuth 2.0 Application'),\n                addButtonId: 'addOauthApp',\n            };\n        }\n\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_oauth_apps.header'\n                        defaultMessage='OAuth 2.0 Applications'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_oauth_apps.help'\n                        defaultMessage='Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.'\n                        values={{\n                            oauthApplications: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://docs.mattermost.com/developer/oauth-2-0-applications.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_oauth_apps.help.oauthApplications'\n                                        defaultMessage='OAuth 2.0 applications'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_oauth_apps.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                emptyText={\n                    <FormattedMessage\n                        id='installed_oauth_apps.empty'\n                        defaultMessage='No OAuth 2.0 Applications found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_oauth_apps.emptySearch'\n                        defaultMessage='No OAuth 2.0 Applications match {searchTerm}'\n                    />\n                }\n                searchPlaceholder={localizeMessage('installed_oauth_apps.search', 'Search OAuth 2.0 Applications')}\n                loading={this.state.loading}\n                {...props}\n            >\n                {(filter) => {\n                    const children = this.oauthApps(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport * as Actions from 'mattermost-redux/actions/integrations';\nimport {getOAuthApps} from 'mattermost-redux/selectors/entities/integrations';\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {loadOAuthAppsAndProfiles} from 'actions/integration_actions';\n\nimport InstalledOAuthApps from './installed_oauth_apps.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        canManageOauth: haveISystemPermission(state, {permission: Permissions.MANAGE_OAUTH}),\n        oauthApps: getOAuthApps(state),\n        enableOAuthServiceProvider,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadOAuthAppsAndProfiles,\n            regenOAuthAppSecret: Actions.regenOAuthAppSecret,\n            deleteOAuthApp: Actions.deleteOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledOAuthApps);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport {localizeMessage} from 'utils/utils.jsx';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\n\nexport default class AbstractOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The header text to render, has id and defaultMessage\n        */\n        header: PropTypes.object.isRequired,\n\n        /**\n        * The footer text to render, has id and defaultMessage\n        */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n         * Any extra component/node to render\n         */\n        renderExtra: PropTypes.node.isRequired,\n\n        /**\n        * The server error text after a failed action\n        */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n        * The OAuthApp used to set the initial state\n        */\n        initialApp: PropTypes.object,\n\n        /**\n        * The async function to run when the action button is pressed\n        */\n        action: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.image = new Image();\n        this.image.onload = this.imageLoaded;\n        this.state = this.getStateFromApp(this.props.initialApp || {});\n    }\n\n    getStateFromApp = (app) => {\n        return {\n            name: app.name || '',\n            description: app.description || '',\n            homepage: app.homepage || '',\n            icon_url: app.icon_url || '',\n            callbackUrls: app.callback_urls ? app.callback_urls.join('\\n') : '',\n            is_trusted: app.is_trusted || false,\n            has_icon: Boolean(app.icon_url),\n            saving: false,\n            clientError: null,\n        };\n    }\n\n    imageLoaded = () => {\n        this.setState({\n            has_icon: true,\n            icon_url: this.refs.icon_url.value,\n        });\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        if (!this.state.name) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.nameRequired'\n                        defaultMessage='Name for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!this.state.description) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.descriptionRequired'\n                        defaultMessage='Description for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!this.state.homepage) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.homepageRequired'\n                        defaultMessage='Homepage for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const callbackUrls = [];\n        for (let callbackUrl of this.state.callbackUrls.split('\\n')) {\n            callbackUrl = callbackUrl.trim();\n\n            if (callbackUrl.length > 0) {\n                callbackUrls.push(callbackUrl);\n            }\n        }\n\n        if (callbackUrls.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.callbackUrlsRequired'\n                        defaultMessage='One or more callback URLs are required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const app = {\n            name: this.state.name,\n            callback_urls: callbackUrls,\n            homepage: this.state.homepage,\n            description: this.state.description,\n            is_trusted: this.state.is_trusted,\n            icon_url: this.state.icon_url,\n        };\n\n        this.props.action(app).then(() => this.setState({saving: false}));\n    }\n\n    updateName = (e) => {\n        this.setState({\n            name: e.target.value,\n        });\n    }\n\n    updateTrusted = (e) => {\n        this.setState({\n            is_trusted: e.target.value === 'true',\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateHomepage = (e) => {\n        this.setState({\n            homepage: e.target.value,\n        });\n    }\n\n    updateIconUrl = (e) => {\n        this.setState({\n            has_icon: false,\n            icon_url: e.target.value,\n        });\n        this.image.src = e.target.value;\n    }\n\n    updateCallbackUrls = (e) => {\n        this.setState({\n            callbackUrls: e.target.value,\n        });\n    }\n\n    render() {\n        const headerToRender = this.props.header;\n        const footerToRender = this.props.footer;\n        const renderExtra = this.props.renderExtra;\n\n        let icon;\n        if (this.state.has_icon) {\n            icon = (\n                <div className='integration__icon'>\n                    <img\n                        alt={'integration icon'}\n                        src={this.state.icon_url}\n                    />\n                </div>\n            );\n        }\n\n        const trusted = (\n            <SystemPermissionGate permissions={[Permissions.MANAGE_SYSTEM]}>\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='is_trusted'\n                    >\n                        <FormattedMessage\n                            id='installed_oauth_apps.trusted'\n                            defaultMessage='Is Trusted'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <label className='radio-inline'>\n                            <input\n                                type='radio'\n                                value='true'\n                                name='is_trusted'\n                                checked={this.state.is_trusted}\n                                onChange={this.updateTrusted}\n                            />\n                            <FormattedMessage\n                                id='installed_oauth_apps.trusted.yes'\n                                defaultMessage='Yes'\n                            />\n                        </label>\n                        <label className='radio-inline'>\n                            <input\n                                type='radio'\n                                value='false'\n                                name='is_trusted'\n                                checked={!this.state.is_trusted}\n                                onChange={this.updateTrusted}\n                            />\n                            <FormattedMessage\n                                id='installed_oauth_apps.trusted.no'\n                                defaultMessage='No'\n                            />\n                        </label>\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_oauth_app.trusted.help'\n                                defaultMessage='If true, the OAuth 2.0 application is considered trusted by the Mattermost server and does not require the user to accept authorization. If false, a window opens to ask the user to accept or deny the authorization.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            </SystemPermissionGate>\n        );\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/oauth2-apps`}>\n                        <FormattedMessage\n                            id='installed_oauth_apps.header'\n                            defaultMessage='Installed OAuth2 Apps'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    {icon}\n                    <form className='form-horizontal'>\n                        {trusted}\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='name'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.name'\n                                    defaultMessage='Display Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='name'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.name}\n                                    onChange={this.updateName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.name.help'\n                                        defaultMessage='Specify the display name, of up to 64 characters, for your OAuth 2.0 application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='512'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.description.help'\n                                        defaultMessage='Describe your OAuth 2.0 application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='homepage'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.homepage'\n                                    defaultMessage='Homepage'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='homepage'\n                                    type='url'\n                                    maxLength='256'\n                                    className='form-control'\n                                    value={this.state.homepage}\n                                    onChange={this.updateHomepage}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.homepage.help'\n                                        defaultMessage='This is the URL for the homepage of the OAuth 2.0 application. Depending on your server configuration, use HTTP or HTTPS in the URL.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='icon_url'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.iconUrl'\n                                    defaultMessage='Icon URL'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='icon_url'\n                                    ref='icon_url'\n                                    type='url'\n                                    maxLength='512'\n                                    className='form-control'\n                                    value={this.state.icon_url}\n                                    onChange={this.updateIconUrl}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.icon.help'\n                                        defaultMessage='(Optional) The URL of the image used for your OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='callbackUrls'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.callbackUrls'\n                                    defaultMessage='Callback URLs (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='callbackUrls'\n                                    rows='3'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.callbackUrls}\n                                    onChange={this.updateCallbackUrls}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.callbackUrls.help'\n                                        defaultMessage='The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/oauth2-apps`}\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveOauthApp'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractOAuthApp from '../abstract_oauth_app.jsx';\n\nconst HEADER = {id: t('add_oauth_app.header'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('installed_oauth_apps.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('installed_oauth_apps.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        /**\n        * The request state for addOAuthApp action. Contains status and error\n        */\n        addOAuthAppRequest: PropTypes.object.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to add new OAuthApp\n            */\n            addOAuthApp: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addOAuthApp = async (app) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.addOAuthApp(app);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=oauth2-apps&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractOAuthApp\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={''}\n                action={this.addOAuthApp}\n                serverError={this.state.serverError}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {addOAuthApp} from 'mattermost-redux/actions/integrations';\n\nimport AddOAuthApp from './add_oauth_app.jsx';\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            addOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(AddOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\n\nimport {browserHistory} from 'utils/browser_history';\nimport LoadingScreen from 'components/loading_screen';\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractOAuthApp from '../abstract_oauth_app.jsx';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_incoming_webhook.update', defaultMessage: 'Update'};\nconst LOADING = {id: 'update_incoming_webhook.updating', defaultMessage: 'Updating...'};\n\nexport default class EditOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The id of the OAuthApp to edit\n        */\n        oauthAppId: PropTypes.string.isRequired,\n\n        /**\n        * The OAuthApp data\n        */\n        oauthApp: PropTypes.object,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to get OAuthApp\n            */\n            getOAuthApp: PropTypes.func.isRequired,\n\n            /**\n            * The function to call to edit OAuthApp\n            */\n            editOAuthApp: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not OAuth applications are enabled.\n        */\n        enableOAuthServiceProvider: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOAuthServiceProvider) {\n            this.props.actions.getOAuthApp(this.props.oauthAppId);\n        }\n    }\n\n    editOAuthApp = async (app) => {\n        this.newApp = app;\n\n        if (this.props.oauthApp.id) {\n            app.id = this.props.oauthApp.id;\n        }\n\n        if (this.props.oauthApp.token) {\n            app.token = this.props.oauthApp.token;\n        }\n\n        const callbackUrlsSame = (this.props.oauthApp.callback_urls.length === app.callback_urls.length) &&\n            this.props.oauthApp.callback_urls.every((v, i) => v === app.callback_urls[i]);\n\n        if (callbackUrlsSame === false) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitOAuthApp();\n        }\n    }\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitOAuthApp = async () => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.editOAuthApp(this.newApp);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/oauth2-apps`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_oauth_app.confirm'\n                defaultMessage='Edit OAuth 2.0 application'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_oauth_app.question'\n                defaultMessage='Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitOAuthApp}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render() {\n        if (!this.props.oauthApp) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOAuthApp\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editOAuthApp}\n                serverError={this.state.serverError}\n                initialApp={this.props.oauthApp}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getOAuthApp, editOAuthApp} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditOAuthApp from './edit_oauth_app.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const oauthAppId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        oauthAppId,\n        oauthApp: state.entities.integrations.oauthApps[oauthAppId],\n        enableOAuthServiceProvider,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            getOAuthApp,\n            editOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {t} from 'utils/i18n';\nimport CopyText from '../copy_text';\n\nimport DeleteIntegration from './delete_integration.jsx';\n\nexport function matchesFilter(command, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    return command.display_name.toLowerCase().indexOf(filter) !== -1 ||\n        command.description.toLowerCase().indexOf(filter) !== -1 ||\n        command.trigger.toLowerCase().indexOf(filter) !== -1;\n}\n\nexport default class InstalledCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * Installed slash command to display\n        */\n        command: PropTypes.object.isRequired,\n\n        /**\n        * The function to call when Regenerate Token link is clicked\n        */\n        onRegenToken: PropTypes.func.isRequired,\n\n        /**\n        * The function to call when Delete link is clicked\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * Set to filter command, comes from BackstageList\n        */\n        filter: PropTypes.string,\n\n        /**\n        * The creator user data\n        */\n        creator: PropTypes.object.isRequired,\n\n        /**\n        * Set to show edit link\n        */\n        canChange: PropTypes.bool.isRequired,\n    }\n\n    handleRegenToken = (e) => {\n        e.preventDefault();\n\n        this.props.onRegenToken(this.props.command);\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.command);\n    }\n\n    render() {\n        const command = this.props.command;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n\n        if (!matchesFilter(command, filter)) {\n            return null;\n        }\n\n        let name;\n\n        if (command.display_name) {\n            name = command.display_name;\n        } else {\n            name = (\n                <FormattedMessage\n                    id='installed_commands.unnamed_command'\n                    defaultMessage='Unnamed Slash Command'\n                />\n            );\n        }\n\n        let description = null;\n        if (command.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {command.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let trigger = '- /' + command.trigger;\n        if (command.auto_complete && command.auto_complete_hint) {\n            trigger += ' ' + command.auto_complete_hint;\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.handleRegenToken}\n                    >\n                        <FormattedMessage\n                            id='installed_integrations.regenToken'\n                            defaultMessage='Regenerate Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/commands/edit?id=${command.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegration\n                        messageId={t('installed_commands.delete.confirm')}\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        const commandToken = command.token;\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <div>\n                            <strong className='item-details__name'>\n                                {name}\n                            </strong>\n                            <span className='item-details__trigger'>\n                                {trigger}\n                            </span>\n                        </div>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_integrations.token'\n                                defaultMessage='Token: {token}'\n                                values={{\n                                    token: commandToken,\n                                }}\n                            />\n                            <CopyText\n                                value={commandToken}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: command.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport * as Utils from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledCommand, {matchesFilter} from '../installed_command.jsx';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledCommands extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team object\n        */\n        team: PropTypes.object,\n\n        /**\n        * The user object\n        */\n        user: PropTypes.object,\n\n        /**\n        * The users collection\n        */\n        users: PropTypes.object,\n\n        /**\n        * Installed slash commands to display\n        */\n        commands: PropTypes.array,\n\n        /**\n        * Set whether to show the loading... animation or not\n        */\n        loading: PropTypes.bool,\n\n        /**\n        * Set to allow changes to installed slash commands\n        */\n        canManageOthersSlashCommands: PropTypes.bool,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call when Regenerate Token link is clicked\n            */\n            regenCommandToken: PropTypes.func.isRequired,\n\n            /**\n            * The function to call when Delete link is clicked\n            */\n            deleteCommand: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    regenCommandToken = (command) => {\n        this.props.actions.regenCommandToken(command.id);\n    }\n\n    deleteCommand = (command) => {\n        this.props.actions.deleteCommand(command.id);\n    }\n\n    commandCompare(a, b) {\n        let nameA = a.display_name;\n        if (!nameA) {\n            nameA = Utils.localizeMessage('installed_commands.unnamed_command', 'Unnamed Slash Command');\n        }\n\n        let nameB = b.display_name;\n        if (!nameB) {\n            nameB = Utils.localizeMessage('installed_commands.unnamed_command', 'Unnamed Slash Command');\n        }\n\n        return nameA.localeCompare(nameB);\n    }\n\n    render() {\n        const commands = (filter) => this.props.commands.\n            filter((command) => command.team_id === this.props.team.id).\n            filter((command) => matchesFilter(command, filter)).\n            sort(this.commandCompare).map((command) => {\n                const canChange = this.props.canManageOthersSlashCommands || this.props.user.id === command.creator_id;\n\n                return (\n                    <InstalledCommand\n                        key={command.id}\n                        team={this.props.team}\n                        command={command}\n                        onRegenToken={this.regenCommandToken}\n                        onDelete={this.deleteCommand}\n                        creator={this.props.users[command.creator_id] || {}}\n                        canChange={canChange}\n                    />\n                );\n            });\n\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_commands.header'\n                        defaultMessage='Installed Slash Commands'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_commands.add'\n                        defaultMessage='Add Slash Command'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/commands/add'}\n                addButtonId='addSlashCommand'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_commands.empty'\n                        defaultMessage='No slash commands found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_commands.emptySearch'\n                        defaultMessage='No slash commands match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_commands.help'\n                        defaultMessage='Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='http://docs.mattermost.com/developer/slash-commands.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_commands.help.buildYourOwn'\n                                        defaultMessage='Build Your Own'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_commands.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_commands.search', 'Search Slash Commands')}\n                loading={this.props.loading}\n            >\n                {(filter) => {\n                    const children = commands(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {deleteCommand, regenCommandToken} from 'mattermost-redux/actions/integrations';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport InstalledCommands from './installed_commands.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const canManageOthersSlashCommands = haveITeamPermission(state, {team: ownProps.team.id, permission: Permissions.MANAGE_OTHERS_SLASH_COMMANDS});\n\n    return {\n        canManageOthersSlashCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            regenCommandToken,\n            deleteCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledCommands);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport LocalizedInput from 'components/localized_input/localized_input';\n\nimport {t} from 'utils/i18n.jsx';\n\nconst REQUEST_POST = 'P';\nconst REQUEST_GET = 'G';\n\nexport default class AbstractCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The header text to render, has id and defaultMessage\n        */\n        header: PropTypes.object.isRequired,\n\n        /**\n        * The footer text to render, has id and defaultMessage\n        */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n         * Any extra component/node to render\n         */\n        renderExtra: PropTypes.node.isRequired,\n\n        /**\n        * The server error text after a failed action\n        */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n        * The Command used to set the initial state\n        */\n        initialCommand: PropTypes.object,\n\n        /**\n        * The async function to run when the action button is pressed\n        */\n        action: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = this.getStateFromCommand(this.props.initialCommand || {});\n    }\n\n    getStateFromCommand = (command) => {\n        return {\n            displayName: command.display_name || '',\n            description: command.description || '',\n            trigger: command.trigger || '',\n            url: command.url || '',\n            method: command.method || REQUEST_POST,\n            username: command.username || '',\n            iconUrl: command.icon_url || '',\n            autocomplete: command.auto_complete || false,\n            autocompleteHint: command.auto_complete_hint || '',\n            autocompleteDescription: command.auto_complete_desc || '',\n            saving: false,\n            clientError: null,\n        };\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        let triggerWord = this.state.trigger.trim().toLowerCase();\n        if (triggerWord.indexOf('/') === 0) {\n            triggerWord = triggerWord.substr(1);\n        }\n\n        const command = {\n            display_name: this.state.displayName,\n            description: this.state.description,\n            trigger: triggerWord,\n            url: this.state.url.trim(),\n            method: this.state.method,\n            username: this.state.username,\n            icon_url: this.state.iconUrl,\n            auto_complete: this.state.autocomplete,\n            team_id: this.props.team.id,\n        };\n\n        if (command.auto_complete) {\n            command.auto_complete_desc = this.state.autocompleteDescription;\n            command.auto_complete_hint = this.state.autocompleteHint;\n        }\n\n        if (!command.trigger) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerRequired'\n                        defaultMessage='A trigger word is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (command.trigger.indexOf('/') === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidSlash'\n                        defaultMessage='A trigger word cannot begin with a /'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (command.trigger.indexOf(' ') !== -1) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidSpace'\n                        defaultMessage='A trigger word must not contain spaces'\n                    />\n                ),\n            });\n            return;\n        }\n\n        if (command.trigger.length < Constants.MIN_TRIGGER_LENGTH ||\n            command.trigger.length > Constants.MAX_TRIGGER_LENGTH) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidLength'\n                        defaultMessage='A trigger word must contain between {min} and {max} characters'\n                        values={{\n                            min: Constants.MIN_TRIGGER_LENGTH,\n                            max: Constants.MAX_TRIGGER_LENGTH,\n                        }}\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!command.url) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.urlRequired'\n                        defaultMessage='A request URL is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        this.props.action(command).then(() => this.setState({saving: false}));\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateTrigger = (e) => {\n        this.setState({\n            trigger: e.target.value,\n        });\n    }\n\n    updateUrl = (e) => {\n        this.setState({\n            url: e.target.value,\n        });\n    }\n\n    updateMethod = (e) => {\n        this.setState({\n            method: e.target.value,\n        });\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateIconUrl = (e) => {\n        this.setState({\n            iconUrl: e.target.value,\n        });\n    }\n\n    updateAutocomplete = (e) => {\n        this.setState({\n            autocomplete: e.target.checked,\n        });\n    }\n\n    updateAutocompleteHint = (e) => {\n        this.setState({\n            autocompleteHint: e.target.value,\n        });\n    }\n\n    updateAutocompleteDescription = (e) => {\n        this.setState({\n            autocompleteDescription: e.target.value,\n        });\n    }\n\n    render() {\n        let autocompleteHint = null;\n        let autocompleteDescription = null;\n\n        if (this.state.autocomplete) {\n            autocompleteHint = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='autocompleteHint'\n                    >\n                        <FormattedMessage\n                            id='add_command.autocompleteHint'\n                            defaultMessage='Autocomplete Hint'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <LocalizedInput\n                            id='autocompleteHint'\n                            type='text'\n                            maxLength='1024'\n                            className='form-control'\n                            value={this.state.autocompleteHint}\n                            onChange={this.updateAutocompleteHint}\n                            placeholder={{id: t('add_command.autocompleteHint.placeholder'), defaultMessage: 'Example: [Patient Name]'}}\n                        />\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_command.autocompleteHint.help'\n                                defaultMessage='(Optional) Specify the arguments associated with your slash command. These are displayed as help on the autocomplete list.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            );\n\n            autocompleteDescription = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='autocompleteDescription'\n                    >\n                        <FormattedMessage\n                            id='add_command.autocompleteDescription'\n                            defaultMessage='Autocomplete Description'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <LocalizedInput\n                            id='description'\n                            type='text'\n                            maxLength='128'\n                            className='form-control'\n                            value={this.state.autocompleteDescription}\n                            onChange={this.updateAutocompleteDescription}\n                            placeholder={{id: t('add_command.autocompleteDescription.placeholder'), defaultMessage: 'Example: \"Returns search results for patient records\"'}}\n                        />\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_command.autocompleteDescription.help'\n                                defaultMessage='(Optional) Describe your slash command for the autocomplete list.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/integrations/commands'}>\n                        <FormattedMessage\n                            id='installed_command.header'\n                            defaultMessage='Slash Commands'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={this.props.header.id}\n                        defaultMessage={this.props.header.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_command.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the slash command settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_command.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='128'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.description.help'\n                                        defaultMessage='Describe your incoming webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='trigger'\n                            >\n                                <FormattedMessage\n                                    id='add_command.trigger'\n                                    defaultMessage='Command Trigger Word'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='trigger'\n                                    type='text'\n                                    maxLength={Constants.MAX_TRIGGER_LENGTH}\n                                    className='form-control'\n                                    value={this.state.trigger}\n                                    onChange={this.updateTrigger}\n                                    placeholder={{id: t('add_command.trigger.placeholder'), defaultMessage: 'Command trigger e.g. \"hello\" not including the slash'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.help'\n                                        defaultMessage='Specify a trigger word that is not a built-in command, does not contain spaces, and does not begin with the slash character.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.helpExamples'\n                                        defaultMessage='Examples: client, employee, patient, weather'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.helpReserved'\n                                        defaultMessage='Reserved: {link}'\n                                        values={{\n                                            link: (\n                                                <a\n                                                    href='https://docs.mattermost.com/help/messaging/executing-commands.html#built-in-commands'\n                                                    target='_blank'\n                                                    rel='noopener noreferrer'\n                                                >\n                                                    <FormattedMessage\n                                                        id='add_command.trigger.helpReservedLinkText'\n                                                        defaultMessage='See built-in slash commands'\n                                                    />\n                                                </a>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='url'\n                            >\n                                <FormattedMessage\n                                    id='add_command.url'\n                                    defaultMessage='Request URL'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='url'\n                                    type='text'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.url}\n                                    onChange={this.updateUrl}\n                                    placeholder={{id: t('add_command.url.placeholder'), defaultMessage: 'Must start with http:// or https://'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.url.help'\n                                        defaultMessage='Specify the callback URL to receive the HTTP POST or GET event request when the slash command is run.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='method'\n                            >\n                                <FormattedMessage\n                                    id='add_command.method'\n                                    defaultMessage='Request Method'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    id='method'\n                                    className='form-control'\n                                    value={this.state.method}\n                                    onChange={this.updateMethod}\n                                >\n                                    <option value={REQUEST_POST}>\n                                        {Utils.localizeMessage('add_command.method.post', 'POST')}\n                                    </option>\n                                    <option value={REQUEST_GET}>\n                                        {Utils.localizeMessage('add_command.method.get', 'GET')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.method.help'\n                                        defaultMessage='Specify the type of request, either POST or GET, sent to the endpoint that Mattermost hits to reach your application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='username'\n                            >\n                                <FormattedMessage\n                                    id='add_command.username'\n                                    defaultMessage='Response Username'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='username'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.username}\n                                    onChange={this.updateUsername}\n                                    placeholder={{id: t('add_command.username.placeholder'), defaultMessage: 'Username'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.username.help'\n                                        defaultMessage='(Optional) Specify the name to use when posting responses for this slash command. Usernames can be up to 22 characters, and contain lowercase letters, numbers, and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, your Mattermost username is used.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='iconUrl'\n                            >\n                                <FormattedMessage\n                                    id='add_command.iconUrl'\n                                    defaultMessage='Response Icon'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='iconUrl'\n                                    type='text'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.iconUrl}\n                                    onChange={this.updateIconUrl}\n                                    placeholder={{id: t('add_command.iconUrl.placeholder'), defaultMessage: 'https://www.example.com/myicon.png'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.iconUrl.help'\n                                        defaultMessage='(Optional) Enter the URL of a .png or .jpg file to use as the icon when posting responses to this slash command. The file must be at least 128 pixels by 128 pixels. If left blank, your profile picture is used.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='autocomplete'\n                            >\n                                <FormattedMessage\n                                    id='add_command.autocomplete'\n                                    defaultMessage='Autocomplete'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <input\n                                    id='autocomplete'\n                                    type='checkbox'\n                                    checked={this.state.autocomplete}\n                                    onChange={this.updateAutocomplete}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.autocomplete.help'\n                                        defaultMessage='(Optional) Show your slash command on the autocomplete list when someone types \"/\" in the input box.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        {autocompleteHint}\n                        {autocompleteDescription}\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={'/' + this.props.team.name + '/integrations/commands'}\n                            >\n                                <FormattedMessage\n                                    id='add_command.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={Utils.localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveCommand'\n                            >\n                                <FormattedMessage\n                                    id={this.props.footer.id}\n                                    defaultMessage={this.props.footer.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {this.props.renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractCommand from '../abstract_command.jsx';\n\nconst HEADER = {id: t('integrations.add'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('add_command.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('add_command.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to add new command\n            */\n            addCommand: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addCommand = async (command) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.addCommand(command);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/commands/confirm?type=commands&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractCommand\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={''}\n                action={this.addCommand}\n                serverError={this.state.serverError}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {addCommand} from 'mattermost-redux/actions/integrations';\n\nimport AddCommand from './add_command.jsx';\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            addCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(AddCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport LoadingScreen from 'components/loading_screen';\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractCommand from '../abstract_command.jsx';\n\nconst HEADER = {id: t('integrations.edit'), defaultMessage: 'Edit'};\nconst FOOTER = {id: t('edit_command.update'), defaultMessage: 'Update'};\nconst LOADING = {id: t('edit_command.updating'), defaultMessage: 'Updating...'};\n\nexport default class EditCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The id of the command to edit\n        */\n        commandId: PropTypes.string.isRequired,\n\n        /**\n        * Installed slash commands to display\n        */\n        commands: PropTypes.object,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to fetch team commands\n            */\n            getCustomTeamCommands: PropTypes.func.isRequired,\n\n            /**\n            * The function to call to edit command\n            */\n            editCommand: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not commands are enabled.\n        */\n        enableCommands: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            originalCommand: null,\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableCommands) {\n            this.props.actions.getCustomTeamCommands(this.props.team.id).then(\n                () => {\n                    this.setState({\n                        originalCommand: Object.values(this.props.commands).filter((command) => command.id === this.props.commandId)[0],\n                    });\n                }\n            );\n        }\n    }\n\n    editCommand = async (command) => {\n        this.newCommand = command;\n\n        if (this.state.originalCommand.id) {\n            command.id = this.state.originalCommand.id;\n        }\n\n        if (this.state.originalCommand.url !== this.newCommand.url ||\n            this.state.originalCommand.trigger !== this.newCommand.trigger ||\n            this.state.originalCommand.method !== this.newCommand.method) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitCommand();\n        }\n    }\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitCommand = async () => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.editCommand(this.newCommand);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/commands`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_command.confirm'\n                defaultMessage='Edit Slash Command'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_command.question'\n                defaultMessage='Your changes may break the existing slash command. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitCommand}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render() {\n        if (!this.state.originalCommand) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractCommand\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editCommand}\n                serverError={this.state.serverError}\n                initialCommand={this.state.originalCommand}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {editCommand, getCustomTeamCommands} from 'mattermost-redux/actions/integrations';\nimport {getCommands} from 'mattermost-redux/selectors/entities/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditCommand from './edit_command.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const commandId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableCommands = config.EnableCommands === 'true';\n\n    return {\n        commandId,\n        commands: getCommands(state),\n        enableCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            getCustomTeamCommands,\n            editCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {Constants, ErrorPageTypes} from 'utils/constants.jsx';\nimport CopyText from 'components/copy_text';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport {getSiteURL} from 'utils/url';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class ConfirmIntegration extends React.Component {\n    static get propTypes() {\n        return {\n            team: PropTypes.object,\n            location: PropTypes.object,\n            commands: PropTypes.object,\n            oauthApps: PropTypes.object,\n            incomingHooks: PropTypes.object,\n            outgoingHooks: PropTypes.object,\n            bots: PropTypes.object,\n        };\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            type: (new URLSearchParams(this.props.location.search)).get('type'),\n            id: (new URLSearchParams(this.props.location.search)).get('id'),\n        };\n    }\n\n    componentDidMount() {\n        window.addEventListener('keypress', this.handleKeyPress);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('keypress', this.handleKeyPress);\n    }\n\n    handleKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            browserHistory.push('/' + this.props.team.name + '/integrations/' + this.state.type);\n        }\n    }\n\n    render() {\n        let headerText = null;\n        let helpText = null;\n        let tokenText = null;\n\n        const command = this.props.commands[this.state.id];\n        const incomingHook = this.props.incomingHooks[this.state.id];\n        const outgoingHook = this.props.outgoingHooks[this.state.id];\n        const oauthApp = this.props.oauthApps[this.state.id];\n        const bot = this.props.bots[this.state.id];\n\n        if (this.state.type === Constants.Integrations.COMMAND && command) {\n            const commandToken = command.token;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_commands.header'}\n                    defaultMessage='Slash Commands'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='add_command.doneHelp'\n                        defaultMessage='Your slash command is set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (details at [Slash Commands](!https://docs.mattermost.com/developer/slash-commands.html)).'\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_command.token'\n                        defaultMessage='**Token**: {token}'\n                        values={{\n                            token: commandToken,\n                        }}\n                    />\n                    <CopyText\n                        value={commandToken}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.INCOMING_WEBHOOK && incomingHook) {\n            const incomingHookToken = getSiteURL() + '/hooks/' + incomingHook.id;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_incoming_webhooks.header'}\n                    defaultMessage='Incoming Webhooks'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='add_incoming_webhook.doneHelp'\n                        defaultMessage='Your incoming webhook is set up. Please send data to the following URL (details at [Incoming Webhooks](!https://docs.mattermost.com/developer/webhooks-incoming.html)).'\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_incoming_webhook.url'\n                        defaultMessage='**URL**: {url}'\n                        values={{\n                            url: '`' + incomingHookToken + '`',\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_secret'\n                        defaultMessage='Copy Client Secret'\n                        value={incomingHookToken}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.OUTGOING_WEBHOOK && outgoingHook) {\n            const outgoingHookToken = outgoingHook.token;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_outgoing_webhooks.header'}\n                    defaultMessage='Outgoing Webhooks'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.doneHelp'\n                        defaultMessage='Your outgoing webhook is set up. The following token will be sent in the outgoing payload. Please use it to verify that the request came from your Mattermost team (details at [Outgoing Webhooks](!https://docs.mattermost.com/developer/webhooks-outgoing.html)).'\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.token'\n                        defaultMessage='**Token**: {token}'\n                        values={{\n                            token: outgoingHookToken,\n                        }}\n                    />\n                    <CopyText\n                        value={outgoingHookToken}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.OAUTH_APP && oauthApp) {\n            const oauthAppToken = oauthApp.id;\n            const oauthAppSecret = oauthApp.client_secret;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_oauth_apps.header'}\n                    defaultMessage='OAuth 2.0 Applications'\n                />\n            );\n\n            helpText = [];\n            helpText.push(\n                <p key='add_oauth_app.doneHelp'>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.doneHelp'\n                        defaultMessage='Your OAuth 2.0 application is set up. Please use the following Client ID and Client Secret when requesting authorization for your application (details at [oAuth 2 Applications](!https://docs.mattermost.com/developer/oauth-2-0-applications.html)).'\n                    />\n                </p>\n            );\n            helpText.push(\n                <p key='add_oauth_app.clientId'>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.clientId'\n                        defaultMessage='**Client ID**: {id}'\n                        values={{\n                            id: oauthAppToken,\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_id'\n                        defaultMessage='Copy Client Id'\n                        value={oauthAppToken}\n                    />\n                    <br/>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.clientSecret'\n                        defaultMessage='**Client Secret**: {secret}'\n                        values={{\n                            secret: oauthAppSecret,\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_secret'\n                        defaultMessage='Copy Client Secret'\n                        value={oauthAppSecret}\n                    />\n                </p>\n            );\n\n            helpText.push(\n                <p key='add_oauth_app.doneUrlHelp'>\n                    <FormattedMessage\n                        id='add_oauth_app.doneUrlHelp'\n                        defaultMessage='Here are your authorized redirect URLs.'\n                    />\n                </p>\n            );\n\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.url'\n                        defaultMessage='**URL(s)**: {url}'\n                        values={{\n                            url: oauthApp.callback_urls.join(', '),\n                        }}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.BOT && bot) {\n            const botToken = (new URLSearchParams(this.props.location.search)).get('token');\n\n            headerText = (\n                <FormattedMessage\n                    id='bots.manage.header'\n                    defaultMessage='Bot Accounts'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='bots.manage.created.text'\n                        defaultMessage='Your bot account **{botname}** has been created successfully. Please use the following access token to connect to the bot (see [documentation](https://mattermost.com/pl/default-bot-accounts) for further details).'\n                        values={{\n                            botname: bot.display_name || bot.username,\n                        }}\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.token'\n                        defaultMessage='**Token**: {token}'\n                        values={{\n                            token: botToken,\n                        }}\n                    />\n                    <CopyText\n                        value={botToken}\n                    />\n                    <br/>\n                    <br/>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.token.message'\n                        defaultMessage='Make sure to add this bot account to teams and channels you want it to interact in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.'\n                    />\n                </p>\n            );\n        } else {\n            browserHistory.replace(`/error?type=${ErrorPageTypes.PAGE_NOT_FOUND}`);\n            return '';\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/integrations/' + this.state.type}>\n                        {headerText}\n                    </Link>\n                    <FormattedMessage\n                        id='integrations.add'\n                        defaultMessage='Add'\n                    />\n                </BackstageHeader>\n                <div className='backstage-form backstage-form__confirmation'>\n                    <h4\n                        className='backstage-form__title'\n                        id='formTitle'\n                    >\n                        <FormattedMessage\n                            id='integrations.successful'\n                            defaultMessage='Setup Successful'\n                        />\n                    </h4>\n                    {helpText}\n                    {tokenText}\n                    <div className='backstage-form__footer'>\n                        <Link\n                            className='btn btn-primary'\n                            type='submit'\n                            to={'/' + this.props.team.name + '/integrations/' + this.state.type}\n                            id='doneButton'\n                        >\n                            <FormattedMessage\n                                id='integrations.done'\n                                defaultMessage='Done'\n                            />\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {getCommands, getOAuthApps, getIncomingHooks, getOutgoingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\n\nimport ConfirmIntegration from './confirm_integration.jsx';\n\nfunction mapStateToProps(state) {\n    return {\n        commands: getCommands(state),\n        oauthApps: getOAuthApps(state),\n        incomingHooks: getIncomingHooks(state),\n        outgoingHooks: getOutgoingHooks(state),\n        bots: getBotAccounts(state),\n    };\n}\n\nexport default connect(mapStateToProps)(ConfirmIntegration);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom';\n\nimport InstalledCommands from 'components/integrations/installed_commands';\nimport AddCommand from 'components/integrations/add_command';\nimport EditCommand from 'components/integrations/edit_command';\nimport ConfirmIntegration from 'components/integrations/confirm_integration';\n\nconst CommandRoute = ({component: Component, extraProps, ...rest}) => ( //eslint-disable-line react/prop-types\n    <Route\n        {...rest}\n        render={(props) => (\n            <Component\n                {...extraProps}\n                {...props}\n            />\n        )}\n    />\n);\n\nexport default class CommandsContainer extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data needed to pass into child components\n        */\n        team: PropTypes.object,\n\n        /**\n        * The user data needed to pass into child components\n        */\n        user: PropTypes.object,\n\n        /**\n        * The users collection\n        */\n        users: PropTypes.object,\n\n        /**\n        * Installed slash commands to display\n        */\n        commands: PropTypes.array,\n\n        /**\n        * Object from react-router\n        */\n        match: PropTypes.shape({\n            url: PropTypes.string.isRequired,\n        }).isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to fetch team commands\n            */\n            loadCommandsAndProfilesForTeam: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not commands are enabled.\n        */\n        enableCommands: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableCommands) {\n            this.props.actions.loadCommandsAndProfilesForTeam(this.props.team.id).then(\n                () => this.setState({loading: false})\n            );\n        }\n    }\n\n    render() {\n        const extraProps = {\n            loading: this.state.loading,\n            commands: this.props.commands || [],\n            users: this.props.users,\n            team: this.props.team,\n            user: this.props.user,\n        };\n        return (\n            <div>\n                <Switch>\n                    <Route\n                        exact={true}\n                        path={`${this.props.match.url}/`}\n                        render={() => (<Redirect to={`${this.props.match.url}/installed`}/>)}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/installed`}\n                        component={InstalledCommands}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/add`}\n                        component={AddCommand}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/edit`}\n                        component={EditCommand}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/confirm`}\n                        component={ConfirmIntegration}\n                    />\n                </Switch>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getCommands} from 'mattermost-redux/selectors/entities/integrations';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {loadCommandsAndProfilesForTeam} from 'actions/integration_actions';\n\nimport CommandsContainer from './commands_container.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enableCommands = config.EnableCommands === 'true';\n\n    return {\n        commands: Object.values(getCommands(state)),\n        users: getUsers(state),\n        enableCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadCommandsAndProfilesForTeam,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommandsContainer);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Route, NavLink} from 'react-router-dom';\n\nexport default class BackstageCategory extends React.Component {\n    static get propTypes() {\n        return {\n            name: PropTypes.string.isRequired,\n            title: PropTypes.node.isRequired,\n            icon: PropTypes.string.isRequired,\n            parentLink: PropTypes.string,\n            children: PropTypes.arrayOf(PropTypes.element),\n        };\n    }\n\n    static get defaultProps() {\n        return {\n            parentLink: '',\n            children: [],\n        };\n    }\n\n    static get contextTypes() {\n        return {\n            router: PropTypes.object.isRequired,\n        };\n    }\n\n    render() {\n        const {name, title, icon, parentLink, children} = this.props;\n\n        const link = parentLink + '/' + name;\n\n        return (\n            <li className='backstage-sidebar__category'>\n                <NavLink\n                    to={link}\n                    className='category-title'\n                    activeClassName='category-title--active'\n                >\n                    <i className={'fa ' + icon}/>\n                    <span className='category-title__text'>\n                        {title}\n                    </span>\n                </NavLink>\n                {\n                    children && children.length > 0 &&\n                    <Route\n                        path={link}\n                        render={() => (\n                            <ul className='sections'>\n                                {\n                                    React.Children.map(children, (child) => {\n                                        if (!child) {\n                                            return child;\n                                        }\n\n                                        return React.cloneElement(child, {\n                                            parentLink: link,\n                                        });\n                                    })\n                                }\n                            </ul>\n                        )}\n                    />\n                }\n            </li>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {NavLink} from 'react-router-dom';\n\nexport default class BackstageSection extends React.Component {\n    static get propTypes() {\n        return {\n            name: PropTypes.string.isRequired,\n            title: PropTypes.node.isRequired,\n            parentLink: PropTypes.string,\n            subsection: PropTypes.bool,\n            children: PropTypes.arrayOf(PropTypes.element),\n            id: PropTypes.string,\n        };\n    }\n\n    static get defaultProps() {\n        return {\n            parentLink: '',\n            subsection: false,\n            children: [],\n        };\n    }\n\n    static get contextTypes() {\n        return {\n            router: PropTypes.object.isRequired,\n        };\n    }\n\n    getLink() {\n        return this.props.parentLink + '/' + this.props.name;\n    }\n\n    render() {\n        const {title, subsection, children} = this.props;\n\n        const link = this.getLink();\n\n        let clonedChildren = null;\n        if (children.length > 0) {\n            clonedChildren = (\n                <ul className='subsections'>\n                    {\n                        React.Children.map(children, (child) => {\n                            return React.cloneElement(child, {\n                                parentLink: link,\n                                subsection: true,\n                            });\n                        })\n                    }\n                </ul>\n            );\n        }\n\n        let className = 'section';\n        if (subsection) {\n            className = 'subsection';\n        }\n\n        return (\n            <li\n                className={className}\n                id={this.props.id}\n            >\n                <NavLink\n                    className={`${className}-title`}\n                    activeClassName={`${className}-title--active`}\n                    to={link}\n                >\n                    <span className={`${className}-title__text`}>\n                        {title}\n                    </span>\n                </NavLink>\n                {clonedChildren}\n            </li>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\nimport TeamPermissionGate from 'components/permissions_gates/team_permission_gate';\n\nimport BackstageCategory from './backstage_category.jsx';\nimport BackstageSection from './backstage_section.jsx';\n\nexport default class BackstageSidebar extends React.Component {\n    static get propTypes() {\n        return {\n            team: PropTypes.object.isRequired,\n            user: PropTypes.object.isRequired,\n            enableCustomEmoji: PropTypes.bool.isRequired,\n            enableIncomingWebhooks: PropTypes.bool.isRequired,\n            enableOutgoingWebhooks: PropTypes.bool.isRequired,\n            enableCommands: PropTypes.bool.isRequired,\n            enableOAuthServiceProvider: PropTypes.bool.isRequired,\n            canCreateOrDeleteCustomEmoji: PropTypes.bool.isRequired,\n            canManageIntegrations: PropTypes.bool.isRequired,\n        };\n    }\n\n    renderCustomEmoji() {\n        if (!this.props.enableCustomEmoji || !this.props.canCreateOrDeleteCustomEmoji) {\n            return null;\n        }\n\n        return (\n            <BackstageCategory\n                name='emoji'\n                parentLink={'/' + this.props.team.name}\n                icon='fa-smile-o'\n                title={\n                    <FormattedMessage\n                        id='backstage_sidebar.emoji'\n                        defaultMessage='Custom Emoji'\n                    />\n                }\n            />\n        );\n    }\n\n    renderIntegrations() {\n        if (!this.props.canManageIntegrations) {\n            return null;\n        }\n\n        let incomingWebhooks = null;\n        if (this.props.enableIncomingWebhooks) {\n            incomingWebhooks = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_INCOMING_WEBHOOKS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name='incoming_webhooks'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={(\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.incoming_webhooks'\n                                defaultMessage='Incoming Webhooks'\n                            />\n                        )}\n                        id='incomingWebhooks'\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let outgoingWebhooks = null;\n        if (this.props.enableOutgoingWebhooks) {\n            outgoingWebhooks = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_OUTGOING_WEBHOOKS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name='outgoing_webhooks'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={(\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.outgoing_webhooks'\n                                defaultMessage='Outgoing Webhooks'\n                            />\n                        )}\n                        id='outgoingWebhooks'\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let commands = null;\n        if (this.props.enableCommands) {\n            commands = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_SLASH_COMMANDS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name='commands'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={(\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.commands'\n                                defaultMessage='Slash Commands'\n                            />\n                        )}\n                        id='slashCommands'\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let oauthApps = null;\n        if (this.props.enableOAuthServiceProvider) {\n            oauthApps = (\n                <SystemPermissionGate permissions={[Permissions.MANAGE_OAUTH]}>\n                    <BackstageSection\n                        name='oauth2-apps'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.oauthApps'\n                                defaultMessage='OAuth 2.0 Applications'\n                            />\n                        }\n                        id='oauthApps'\n                    />\n                </SystemPermissionGate>\n            );\n        }\n\n        // Note that we allow managing bot accounts even if bot account creation is disabled: only\n        // a permissions check is required.\n        const botAccounts = (\n            <SystemPermissionGate permissions={['manage_bots', 'manage_others_bots']}>\n                <BackstageSection\n                    name='bots'\n                    parentLink={'/' + this.props.team.name + '/integrations'}\n                    title={\n                        <FormattedMessage\n                            id='backstage_sidebar.bots'\n                            defaultMessage='Bot Accounts'\n                        />\n                    }\n                    id='botAccounts'\n                />\n            </SystemPermissionGate>\n        );\n\n        return (\n            <BackstageCategory\n                name='integrations'\n                icon='fa-link'\n                parentLink={'/' + this.props.team.name}\n                title={\n                    <FormattedMessage\n                        id='backstage_sidebar.integrations'\n                        defaultMessage='Integrations'\n                    />\n                }\n            >\n                {incomingWebhooks}\n                {outgoingWebhooks}\n                {commands}\n                {oauthApps}\n                {botAccounts}\n            </BackstageCategory>\n        );\n    }\n\n    render() {\n        return (\n            <div className='backstage-sidebar'>\n                <ul>\n                    {this.renderCustomEmoji()}\n                    {this.renderIntegrations()}\n                </ul>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackIcon from 'components/widgets/icons/fa_back_icon';\n\nexport default class BackstageNavbar extends React.Component {\n    static get propTypes() {\n        return {\n            team: PropTypes.object.isRequired,\n            siteName: PropTypes.string,\n        };\n    }\n\n    render() {\n        if (!this.props.team) {\n            return null;\n        }\n\n        return (\n            <div className='backstage-navbar'>\n                <Link\n                    className='backstage-navbar__back'\n                    to={`/${this.props.team.name}`}\n                >\n                    <BackIcon/>\n                    <span>\n                        <FormattedMessage\n                            id='backstage_navbar.backToMattermost'\n                            defaultMessage='Back to {siteName}'\n                            values={{\n                                siteName: this.props.siteName,\n                            }}\n                        />\n                    </span>\n                </Link>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Switch} from 'react-router-dom';\n\nimport Bots from 'components/integrations/bots';\nimport AddBot from 'components/integrations/bots/add_bot';\n\nimport Pluggable from 'plugins/pluggable';\nimport AnnouncementBar from 'components/announcement_bar';\nimport SystemNotice from 'components/system_notice';\nimport Integrations from 'components/integrations';\nimport Emoji from 'components/emoji';\nimport AddEmoji from 'components/emoji/add_emoji';\nimport InstalledIncomingWebhooks from 'components/integrations/installed_incoming_webhooks';\nimport AddIncomingWehook from 'components/integrations/add_incoming_webhook';\nimport EditIncomingWebhook from 'components/integrations/edit_incoming_webhook';\nimport InstalledOutgoingWebhooks from 'components/integrations/installed_outgoing_webhooks';\nimport AddOutgoingWebhook from 'components/integrations/add_outgoing_webhook';\nimport EditOutgoingWebhook from 'components/integrations/edit_outgoing_webhook';\nimport InstalledOauthApps from 'components/integrations/installed_oauth_apps';\nimport AddOauthApp from 'components/integrations/add_oauth_app';\nimport EditOauthApp from 'components/integrations/edit_oauth_app';\nimport CommandsContainer from 'components/integrations/commands_container';\nimport ConfirmIntegration from 'components/integrations/confirm_integration';\n\nimport BackstageSidebar from './components/backstage_sidebar.jsx';\nimport BackstageNavbar from './components/backstage_navbar';\n\nconst BackstageRoute = ({component: Component, extraProps, ...rest}) => ( //eslint-disable-line react/prop-types\n    <Route\n        {...rest}\n        render={(props) => (\n            <Component\n                {...extraProps}\n                {...props}\n            />\n        )}\n    />\n);\n\nexport default class BackstageController extends React.Component {\n    static propTypes = {\n\n        /**\n         * Current user.\n         */\n        user: PropTypes.object,\n\n        /**\n         * Current team.\n         */\n        team: PropTypes.object,\n\n        /**\n         * Object from react-router\n         */\n        match: PropTypes.shape({\n            url: PropTypes.string.isRequired,\n        }).isRequired,\n\n        siteName: PropTypes.string,\n        enableCustomEmoji: PropTypes.bool.isRequired,\n        enableIncomingWebhooks: PropTypes.bool.isRequired,\n        enableOutgoingWebhooks: PropTypes.bool.isRequired,\n        enableCommands: PropTypes.bool.isRequired,\n        enableOAuthServiceProvider: PropTypes.bool.isRequired,\n        canCreateOrDeleteCustomEmoji: PropTypes.bool.isRequired,\n        canManageIntegrations: PropTypes.bool.isRequired,\n    }\n\n    scrollToTop = () => {\n        if (this.listRef) {\n            this.listRef.scrollTop = 0;\n        }\n    }\n\n    setListRef = (ref) => {\n        this.listRef = ref;\n    }\n\n    render() {\n        if (this.props.team == null || this.props.user == null) {\n            return <div/>;\n        }\n        const extraProps = {\n            team: this.props.team,\n            user: this.props.user,\n            scrollToTop: this.scrollToTop,\n        };\n        return (\n            <div className='backstage'>\n                <AnnouncementBar/>\n                <SystemNotice/>\n                <BackstageNavbar\n                    team={this.props.team}\n                    siteName={this.props.siteName}\n                />\n                <Pluggable pluggableName='Root'/>\n                <div\n                    className='backstage-body'\n                    ref={this.setListRef}\n                >\n                    <BackstageSidebar\n                        team={this.props.team}\n                        user={this.props.user}\n                        enableCustomEmoji={this.props.enableCustomEmoji}\n                        enableIncomingWebhooks={this.props.enableIncomingWebhooks}\n                        enableOutgoingWebhooks={this.props.enableOutgoingWebhooks}\n                        enableCommands={this.props.enableCommands}\n                        enableOAuthServiceProvider={this.props.enableOAuthServiceProvider}\n                        canCreateOrDeleteCustomEmoji={this.props.canCreateOrDeleteCustomEmoji}\n                        canManageIntegrations={this.props.canManageIntegrations}\n                    />\n                    <Switch>\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={'/:team/integrations'}\n                            component={Integrations}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={`${this.props.match.url}/incoming_webhooks`}\n                            component={InstalledIncomingWebhooks}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/incoming_webhooks/add`}\n                            component={AddIncomingWehook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/incoming_webhooks/edit`}\n                            component={EditIncomingWebhook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={`${this.props.match.url}/outgoing_webhooks`}\n                            component={InstalledOutgoingWebhooks}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/outgoing_webhooks/add`}\n                            component={AddOutgoingWebhook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/outgoing_webhooks/edit`}\n                            component={EditOutgoingWebhook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/commands`}\n                            component={CommandsContainer}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={`${this.props.match.url}/oauth2-apps`}\n                            component={InstalledOauthApps}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/oauth2-apps/add`}\n                            component={AddOauthApp}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/oauth2-apps/edit`}\n                            component={EditOauthApp}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/confirm`}\n                            component={ConfirmIntegration}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={'/:team/emoji'}\n                            component={Emoji}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/add`}\n                            component={AddEmoji}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/bots/add`}\n                            component={AddBot}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/bots/edit`}\n                            component={AddBot}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/bots`}\n                            component={Bots}\n                        />\n                    </Switch>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\n\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\nimport {getMyTeams, getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {haveITeamPermission, haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport BackstageController from './backstage_controller.jsx';\n\nfunction mapStateToProps(state) {\n    const user = getCurrentUser(state);\n    const team = getCurrentTeam(state);\n\n    const config = getConfig(state);\n\n    const siteName = config.SiteName;\n    const enableCustomEmoji = config.EnableCustomEmoji === 'true';\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enableCommands = config.EnableCommands === 'true';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    let canCreateOrDeleteCustomEmoji = (haveISystemPermission(state, {permission: Permissions.CREATE_EMOJIS}) || haveISystemPermission(state, {permission: Permissions.DELETE_EMOJIS}));\n    if (!canCreateOrDeleteCustomEmoji) {\n        for (const t of getMyTeams(state)) {\n            if (haveITeamPermission(state, {team: t.id, permission: Permissions.CREATE_EMOJIS}) || haveITeamPermission(state, {team: t.id, permission: Permissions.DELETE_EMOJIS})) {\n                canCreateOrDeleteCustomEmoji = true;\n                break;\n            }\n        }\n    }\n\n    const canManageTeamIntegrations = (haveITeamPermission(state, {permission: Permissions.MANAGE_SLASH_COMMANDS}) || haveITeamPermission(state, {permission: Permissions.MANAGE_OAUTH}) || haveITeamPermission(state, {permission: Permissions.MANAGE_INCOMING_WEBHOOKS}) || haveITeamPermission(state, {permission: Permissions.MANAGE_OUTGOING_WEBHOOKS}));\n    const canManageSystemBots = (haveISystemPermission(state, {permission: Permissions.MANAGE_BOTS}) || haveISystemPermission(state, {permission: Permissions.MANAGE_OTHERS_BOTS}));\n    const canManageIntegrations = canManageTeamIntegrations || canManageSystemBots;\n\n    return {\n        user,\n        team,\n        siteName,\n        enableCustomEmoji,\n        enableIncomingWebhooks,\n        enableOutgoingWebhooks,\n        enableCommands,\n        enableOAuthServiceProvider,\n        canCreateOrDeleteCustomEmoji,\n        canManageIntegrations,\n    };\n}\n\nexport default withRouter(connect(mapStateToProps)(BackstageController));\n"],"sourceRoot":""}