(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1192:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(34),s=a.n(n),i=a(6),r=a.n(i),o=a(1166),l=a(27);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{render(){const e="fa fa-1x fa-angle-right"+(this.props.additionalClassName?" "+this.props.additionalClassName:"");return r.a.createElement(o.a,{className:e,title:{id:Object(l.b)("generic_icons.next"),defaultMessage:"Next Icon"}})}}c(d,"propTypes",{additionalClassName:s.a.oneOfType([s.a.string,s.a.oneOf([null])])}),c(d,"defaultProps",{additionalClassName:null})},1221:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLogs=function(e){return e.entities.admin.logs},t.getAudits=function(e){return e.entities.admin.audits},t.getConfig=function(e){return e.entities.admin.config},t.getLdapGroups=function(e){return e.entities.admin.ldapGroups},t.getLdapGroupsCount=function(e){return e.entities.admin.ldapGroupsCount},t.getEnvironmentConfig=function(e){return e.entities.admin.environmentConfig},t.getComplianceReports=function(e){return e.entities.admin.complianceReports},t.getClusterInfo=function(e){return e.entities.admin.clusterInfo},t.getUserAccessTokens=function(e){return e.entities.admin.userAccessTokens}},1222:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(34),s=a.n(n),i=a(6),r=a.n(i),o=a(1166),l=a(27);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{render(){const e="fa fa-1x fa-angle-left"+(this.props.additionalClassName?" "+this.props.additionalClassName:"");return r.a.createElement(o.a,{className:e,title:{id:Object(l.b)("generic_icons.previous"),defaultMessage:"Previous Icon"}})}}c(d,"propTypes",{additionalClassName:s.a.oneOfType([s.a.string,s.a.oneOf([null])])}),c(d,"defaultProps",{additionalClassName:null})},1235:function(e,t,a){(function(e,n){var s;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",r="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",c="[object Array]",d="[object Boolean]",u="[object Date]",m="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",f="[object Number]",b="[object Object]",v="[object RegExp]",_="[object Set]",y="[object String]",E="[object Symbol]",S="[object WeakMap]",T="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",O="[object Float64Array]",C="[object Int8Array]",M="[object Int16Array]",k="[object Int32Array]",j="[object Uint8Array]",P="[object Uint16Array]",A="[object Uint32Array]",R=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,I=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,B=RegExp(I.source),U=RegExp(L.source),F=/<%-([\s\S]+?)%>/g,q=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,V=RegExp(Y.source),J=/^\s+|\s+$/g,X=/^\s+/,K=/\s+$/,Q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ae=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,se=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,re=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,le=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,de=/($^)/,ue=/['\n\r\u2028\u2029\\]/g,me="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",he="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",ge="["+he+"]",fe="["+me+"]",be="\\d+",ve="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",ye="[^\\ud800-\\udfff"+he+be+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Ee="\\ud83c[\\udffb-\\udfff]",Se="[^\\ud800-\\udfff]",Te="(?:\\ud83c[\\udde6-\\uddff]){2}",xe="[\\ud800-\\udbff][\\udc00-\\udfff]",we="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Oe="(?:"+_e+"|"+ye+")",Ce="(?:"+we+"|"+ye+")",Me="(?:"+fe+"|"+Ee+")"+"?",ke="[\\ufe0e\\ufe0f]?"+Me+("(?:\\u200d(?:"+[Se,Te,xe].join("|")+")[\\ufe0e\\ufe0f]?"+Me+")*"),je="(?:"+[ve,Te,xe].join("|")+")"+ke,Pe="(?:"+[Se+fe+"?",fe,Te,xe,pe].join("|")+")",Ae=RegExp("['’]","g"),Re=RegExp(fe,"g"),Ne=RegExp(Ee+"(?="+Ee+")|"+Pe+ke,"g"),De=RegExp([we+"?"+_e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ge,we,"$"].join("|")+")",Ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ge,we+Oe,"$"].join("|")+")",we+"?"+Oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",we+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",be,je].join("|"),"g"),Ie=RegExp("[\\u200d\\ud800-\\udfff"+me+"\\ufe0e\\ufe0f]"),Le=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Be=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ue=-1,Fe={};Fe[w]=Fe[O]=Fe[C]=Fe[M]=Fe[k]=Fe[j]=Fe["[object Uint8ClampedArray]"]=Fe[P]=Fe[A]=!0,Fe[l]=Fe[c]=Fe[T]=Fe[d]=Fe[x]=Fe[u]=Fe[m]=Fe[h]=Fe[g]=Fe[f]=Fe[b]=Fe[v]=Fe[_]=Fe[y]=Fe[S]=!1;var qe={};qe[l]=qe[c]=qe[T]=qe[x]=qe[d]=qe[u]=qe[w]=qe[O]=qe[C]=qe[M]=qe[k]=qe[g]=qe[f]=qe[b]=qe[v]=qe[_]=qe[y]=qe[E]=qe[j]=qe["[object Uint8ClampedArray]"]=qe[P]=qe[A]=!0,qe[m]=qe[h]=qe[S]=!1;var Ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,We=parseInt,ze="object"==typeof e&&e&&e.Object===Object&&e,Ye="object"==typeof self&&self&&self.Object===Object&&self,Ve=ze||Ye||Function("return this")(),Je=t&&!t.nodeType&&t,Xe=Je&&"object"==typeof n&&n&&!n.nodeType&&n,Ke=Xe&&Xe.exports===Je,Qe=Ke&&ze.process,$e=function(){try{var e=Xe&&Xe.require&&Xe.require("util").types;return e||Qe&&Qe.binding&&Qe.binding("util")}catch(e){}}(),Ze=$e&&$e.isArrayBuffer,et=$e&&$e.isDate,tt=$e&&$e.isMap,at=$e&&$e.isRegExp,nt=$e&&$e.isSet,st=$e&&$e.isTypedArray;function it(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function rt(e,t,a,n){for(var s=-1,i=null==e?0:e.length;++s<i;){var r=e[s];t(n,r,a(r),e)}return n}function ot(e,t){for(var a=-1,n=null==e?0:e.length;++a<n&&!1!==t(e[a],a,e););return e}function lt(e,t){for(var a=null==e?0:e.length;a--&&!1!==t(e[a],a,e););return e}function ct(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(!t(e[a],a,e))return!1;return!0}function dt(e,t){for(var a=-1,n=null==e?0:e.length,s=0,i=[];++a<n;){var r=e[a];t(r,a,e)&&(i[s++]=r)}return i}function ut(e,t){return!!(null==e?0:e.length)&&Et(e,t,0)>-1}function mt(e,t,a){for(var n=-1,s=null==e?0:e.length;++n<s;)if(a(t,e[n]))return!0;return!1}function ht(e,t){for(var a=-1,n=null==e?0:e.length,s=Array(n);++a<n;)s[a]=t(e[a],a,e);return s}function pt(e,t){for(var a=-1,n=t.length,s=e.length;++a<n;)e[s+a]=t[a];return e}function gt(e,t,a,n){var s=-1,i=null==e?0:e.length;for(n&&i&&(a=e[++s]);++s<i;)a=t(a,e[s],s,e);return a}function ft(e,t,a,n){var s=null==e?0:e.length;for(n&&s&&(a=e[--s]);s--;)a=t(a,e[s],s,e);return a}function bt(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}var vt=wt("length");function _t(e,t,a){var n;return a(e,(function(e,a,s){if(t(e,a,s))return n=a,!1})),n}function yt(e,t,a,n){for(var s=e.length,i=a+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}function Et(e,t,a){return t==t?function(e,t,a){var n=a-1,s=e.length;for(;++n<s;)if(e[n]===t)return n;return-1}(e,t,a):yt(e,Tt,a)}function St(e,t,a,n){for(var s=a-1,i=e.length;++s<i;)if(n(e[s],t))return s;return-1}function Tt(e){return e!=e}function xt(e,t){var a=null==e?0:e.length;return a?Mt(e,t)/a:NaN}function wt(e){return function(t){return null==t?void 0:t[e]}}function Ot(e){return function(t){return null==e?void 0:e[t]}}function Ct(e,t,a,n,s){return s(e,(function(e,s,i){a=n?(n=!1,e):t(a,e,s,i)})),a}function Mt(e,t){for(var a,n=-1,s=e.length;++n<s;){var i=t(e[n]);void 0!==i&&(a=void 0===a?i:a+i)}return a}function kt(e,t){for(var a=-1,n=Array(e);++a<e;)n[a]=t(a);return n}function jt(e){return function(t){return e(t)}}function Pt(e,t){return ht(t,(function(t){return e[t]}))}function At(e,t){return e.has(t)}function Rt(e,t){for(var a=-1,n=e.length;++a<n&&Et(t,e[a],0)>-1;);return a}function Nt(e,t){for(var a=e.length;a--&&Et(t,e[a],0)>-1;);return a}function Dt(e,t){for(var a=e.length,n=0;a--;)e[a]===t&&++n;return n}var It=Ot({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Lt=Ot({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bt(e){return"\\"+Ge[e]}function Ut(e){return Ie.test(e)}function Ft(e){var t=-1,a=Array(e.size);return e.forEach((function(e,n){a[++t]=[n,e]})),a}function qt(e,t){return function(a){return e(t(a))}}function Gt(e,t){for(var a=-1,n=e.length,s=0,i=[];++a<n;){var o=e[a];o!==t&&o!==r||(e[a]=r,i[s++]=a)}return i}function Ht(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e})),a}function Wt(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=[e,e]})),a}function zt(e){return Ut(e)?function(e){var t=Ne.lastIndex=0;for(;Ne.test(e);)++t;return t}(e):vt(e)}function Yt(e){return Ut(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.split("")}(e)}var Vt=Ot({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Jt=function e(t){var a,n=(t=null==t?Ve:Jt.defaults(Ve.Object(),t,Jt.pick(Ve,Be))).Array,s=t.Date,me=t.Error,he=t.Function,pe=t.Math,ge=t.Object,fe=t.RegExp,be=t.String,ve=t.TypeError,_e=n.prototype,ye=he.prototype,Ee=ge.prototype,Se=t["__core-js_shared__"],Te=ye.toString,xe=Ee.hasOwnProperty,we=0,Oe=(a=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",Ce=Ee.toString,Me=Te.call(ge),ke=Ve._,je=fe("^"+Te.call(xe).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=Ke?t.Buffer:void 0,Ne=t.Symbol,Ie=t.Uint8Array,Ge=Pe?Pe.allocUnsafe:void 0,ze=qt(ge.getPrototypeOf,ge),Ye=ge.create,Je=Ee.propertyIsEnumerable,Xe=_e.splice,Qe=Ne?Ne.isConcatSpreadable:void 0,$e=Ne?Ne.iterator:void 0,vt=Ne?Ne.toStringTag:void 0,Ot=function(){try{var e=Zs(ge,"defineProperty");return e({},"",{}),e}catch(e){}}(),Xt=t.clearTimeout!==Ve.clearTimeout&&t.clearTimeout,Kt=s&&s.now!==Ve.Date.now&&s.now,Qt=t.setTimeout!==Ve.setTimeout&&t.setTimeout,$t=pe.ceil,Zt=pe.floor,ea=ge.getOwnPropertySymbols,ta=Pe?Pe.isBuffer:void 0,aa=t.isFinite,na=_e.join,sa=qt(ge.keys,ge),ia=pe.max,ra=pe.min,oa=s.now,la=t.parseInt,ca=pe.random,da=_e.reverse,ua=Zs(t,"DataView"),ma=Zs(t,"Map"),ha=Zs(t,"Promise"),pa=Zs(t,"Set"),ga=Zs(t,"WeakMap"),fa=Zs(ge,"create"),ba=ga&&new ga,va={},_a=Oi(ua),ya=Oi(ma),Ea=Oi(ha),Sa=Oi(pa),Ta=Oi(ga),xa=Ne?Ne.prototype:void 0,wa=xa?xa.valueOf:void 0,Oa=xa?xa.toString:void 0;function Ca(e){if(Hr(e)&&!Ar(e)&&!(e instanceof Pa)){if(e instanceof ja)return e;if(xe.call(e,"__wrapped__"))return Ci(e)}return new ja(e)}var Ma=function(){function e(){}return function(t){if(!Gr(t))return{};if(Ye)return Ye(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();function ka(){}function ja(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Pa(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Aa(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function Ra(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function Na(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function Da(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new Na;++t<a;)this.add(e[t])}function Ia(e){var t=this.__data__=new Ra(e);this.size=t.size}function La(e,t){var a=Ar(e),n=!a&&Pr(e),s=!a&&!n&&Ir(e),i=!a&&!n&&!s&&Qr(e),r=a||n||s||i,o=r?kt(e.length,be):[],l=o.length;for(var c in e)!t&&!xe.call(e,c)||r&&("length"==c||s&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ri(c,l))||o.push(c);return o}function Ba(e){var t=e.length;return t?e[In(0,t-1)]:void 0}function Ua(e,t){return Ti(bs(e),Ja(t,0,e.length))}function Fa(e){return Ti(bs(e))}function qa(e,t,a){(void 0!==a&&!Mr(e[t],a)||void 0===a&&!(t in e))&&Ya(e,t,a)}function Ga(e,t,a){var n=e[t];xe.call(e,t)&&Mr(n,a)&&(void 0!==a||t in e)||Ya(e,t,a)}function Ha(e,t){for(var a=e.length;a--;)if(Mr(e[a][0],t))return a;return-1}function Wa(e,t,a,n){return Za(e,(function(e,s,i){t(n,e,a(e),i)})),n}function za(e,t){return e&&vs(t,yo(t),e)}function Ya(e,t,a){"__proto__"==t&&Ot?Ot(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function Va(e,t){for(var a=-1,s=t.length,i=n(s),r=null==e;++a<s;)i[a]=r?void 0:go(e,t[a]);return i}function Ja(e,t,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==t&&(e=e>=t?e:t)),e}function Xa(e,t,a,n,s,i){var r,o=1&t,c=2&t,m=4&t;if(a&&(r=s?a(e,n,s,i):a(e)),void 0!==r)return r;if(!Gr(e))return e;var S=Ar(e);if(S){if(r=function(e){var t=e.length,a=new e.constructor(t);t&&"string"==typeof e[0]&&xe.call(e,"index")&&(a.index=e.index,a.input=e.input);return a}(e),!o)return bs(e,r)}else{var R=ai(e),N=R==h||R==p;if(Ir(e))return us(e,o);if(R==b||R==l||N&&!s){if(r=c||N?{}:si(e),!o)return c?function(e,t){return vs(e,ti(e),t)}(e,function(e,t){return e&&vs(t,Eo(t),e)}(r,e)):function(e,t){return vs(e,ei(e),t)}(e,za(r,e))}else{if(!qe[R])return s?e:{};r=function(e,t,a){var n=e.constructor;switch(t){case T:return ms(e);case d:case u:return new n(+e);case x:return function(e,t){var a=t?ms(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}(e,a);case w:case O:case C:case M:case k:case j:case"[object Uint8ClampedArray]":case P:case A:return hs(e,a);case g:return new n;case f:case y:return new n(e);case v:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new n;case E:return s=e,wa?ge(wa.call(s)):{}}var s}(e,R,o)}}i||(i=new Ia);var D=i.get(e);if(D)return D;i.set(e,r),Jr(e)?e.forEach((function(n){r.add(Xa(n,t,a,n,e,i))})):Wr(e)&&e.forEach((function(n,s){r.set(s,Xa(n,t,a,s,e,i))}));var I=S?void 0:(m?c?Ys:zs:c?Eo:yo)(e);return ot(I||e,(function(n,s){I&&(n=e[s=n]),Ga(r,s,Xa(n,t,a,s,e,i))})),r}function Ka(e,t,a){var n=a.length;if(null==e)return!n;for(e=ge(e);n--;){var s=a[n],i=t[s],r=e[s];if(void 0===r&&!(s in e)||!i(r))return!1}return!0}function Qa(e,t,a){if("function"!=typeof e)throw new ve(i);return _i((function(){e.apply(void 0,a)}),t)}function $a(e,t,a,n){var s=-1,i=ut,r=!0,o=e.length,l=[],c=t.length;if(!o)return l;a&&(t=ht(t,jt(a))),n?(i=mt,r=!1):t.length>=200&&(i=At,r=!1,t=new Da(t));e:for(;++s<o;){var d=e[s],u=null==a?d:a(d);if(d=n||0!==d?d:0,r&&u==u){for(var m=c;m--;)if(t[m]===u)continue e;l.push(d)}else i(t,u,n)||l.push(d)}return l}Ca.templateSettings={escape:F,evaluate:q,interpolate:G,variable:"",imports:{_:Ca}},Ca.prototype=ka.prototype,Ca.prototype.constructor=Ca,ja.prototype=Ma(ka.prototype),ja.prototype.constructor=ja,Pa.prototype=Ma(ka.prototype),Pa.prototype.constructor=Pa,Aa.prototype.clear=function(){this.__data__=fa?fa(null):{},this.size=0},Aa.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Aa.prototype.get=function(e){var t=this.__data__;if(fa){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return xe.call(t,e)?t[e]:void 0},Aa.prototype.has=function(e){var t=this.__data__;return fa?void 0!==t[e]:xe.call(t,e)},Aa.prototype.set=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=fa&&void 0===t?"__lodash_hash_undefined__":t,this},Ra.prototype.clear=function(){this.__data__=[],this.size=0},Ra.prototype.delete=function(e){var t=this.__data__,a=Ha(t,e);return!(a<0)&&(a==t.length-1?t.pop():Xe.call(t,a,1),--this.size,!0)},Ra.prototype.get=function(e){var t=this.__data__,a=Ha(t,e);return a<0?void 0:t[a][1]},Ra.prototype.has=function(e){return Ha(this.__data__,e)>-1},Ra.prototype.set=function(e,t){var a=this.__data__,n=Ha(a,e);return n<0?(++this.size,a.push([e,t])):a[n][1]=t,this},Na.prototype.clear=function(){this.size=0,this.__data__={hash:new Aa,map:new(ma||Ra),string:new Aa}},Na.prototype.delete=function(e){var t=Qs(this,e).delete(e);return this.size-=t?1:0,t},Na.prototype.get=function(e){return Qs(this,e).get(e)},Na.prototype.has=function(e){return Qs(this,e).has(e)},Na.prototype.set=function(e,t){var a=Qs(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this},Da.prototype.add=Da.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Da.prototype.has=function(e){return this.__data__.has(e)},Ia.prototype.clear=function(){this.__data__=new Ra,this.size=0},Ia.prototype.delete=function(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a},Ia.prototype.get=function(e){return this.__data__.get(e)},Ia.prototype.has=function(e){return this.__data__.has(e)},Ia.prototype.set=function(e,t){var a=this.__data__;if(a instanceof Ra){var n=a.__data__;if(!ma||n.length<199)return n.push([e,t]),this.size=++a.size,this;a=this.__data__=new Na(n)}return a.set(e,t),this.size=a.size,this};var Za=Es(ln),en=Es(cn,!0);function tn(e,t){var a=!0;return Za(e,(function(e,n,s){return a=!!t(e,n,s)})),a}function an(e,t,a){for(var n=-1,s=e.length;++n<s;){var i=e[n],r=t(i);if(null!=r&&(void 0===o?r==r&&!Kr(r):a(r,o)))var o=r,l=i}return l}function nn(e,t){var a=[];return Za(e,(function(e,n,s){t(e,n,s)&&a.push(e)})),a}function sn(e,t,a,n,s){var i=-1,r=e.length;for(a||(a=ii),s||(s=[]);++i<r;){var o=e[i];t>0&&a(o)?t>1?sn(o,t-1,a,n,s):pt(s,o):n||(s[s.length]=o)}return s}var rn=Ss(),on=Ss(!0);function ln(e,t){return e&&rn(e,t,yo)}function cn(e,t){return e&&on(e,t,yo)}function dn(e,t){return dt(t,(function(t){return Ur(e[t])}))}function un(e,t){for(var a=0,n=(t=os(t,e)).length;null!=e&&a<n;)e=e[wi(t[a++])];return a&&a==n?e:void 0}function mn(e,t,a){var n=t(e);return Ar(e)?n:pt(n,a(e))}function hn(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":vt&&vt in ge(e)?function(e){var t=xe.call(e,vt),a=e[vt];try{e[vt]=void 0;var n=!0}catch(e){}var s=Ce.call(e);n&&(t?e[vt]=a:delete e[vt]);return s}(e):function(e){return Ce.call(e)}(e)}function pn(e,t){return e>t}function gn(e,t){return null!=e&&xe.call(e,t)}function fn(e,t){return null!=e&&t in ge(e)}function bn(e,t,a){for(var s=a?mt:ut,i=e[0].length,r=e.length,o=r,l=n(r),c=1/0,d=[];o--;){var u=e[o];o&&t&&(u=ht(u,jt(t))),c=ra(u.length,c),l[o]=!a&&(t||i>=120&&u.length>=120)?new Da(o&&u):void 0}u=e[0];var m=-1,h=l[0];e:for(;++m<i&&d.length<c;){var p=u[m],g=t?t(p):p;if(p=a||0!==p?p:0,!(h?At(h,g):s(d,g,a))){for(o=r;--o;){var f=l[o];if(!(f?At(f,g):s(e[o],g,a)))continue e}h&&h.push(g),d.push(p)}}return d}function vn(e,t,a){var n=null==(e=gi(e,t=os(t,e)))?e:e[wi(Bi(t))];return null==n?void 0:it(n,e,a)}function _n(e){return Hr(e)&&hn(e)==l}function yn(e,t,a,n,s){return e===t||(null==e||null==t||!Hr(e)&&!Hr(t)?e!=e&&t!=t:function(e,t,a,n,s,i){var r=Ar(e),o=Ar(t),h=r?c:ai(e),p=o?c:ai(t),S=(h=h==l?b:h)==b,w=(p=p==l?b:p)==b,O=h==p;if(O&&Ir(e)){if(!Ir(t))return!1;r=!0,S=!1}if(O&&!S)return i||(i=new Ia),r||Qr(e)?Hs(e,t,a,n,s,i):function(e,t,a,n,s,i,r){switch(a){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!i(new Ie(e),new Ie(t)));case d:case u:case f:return Mr(+e,+t);case m:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case g:var o=Ft;case _:var l=1&n;if(o||(o=Ht),e.size!=t.size&&!l)return!1;var c=r.get(e);if(c)return c==t;n|=2,r.set(e,t);var h=Hs(o(e),o(t),n,s,i,r);return r.delete(e),h;case E:if(wa)return wa.call(e)==wa.call(t)}return!1}(e,t,h,a,n,s,i);if(!(1&a)){var C=S&&xe.call(e,"__wrapped__"),M=w&&xe.call(t,"__wrapped__");if(C||M){var k=C?e.value():e,j=M?t.value():t;return i||(i=new Ia),s(k,j,a,n,i)}}if(!O)return!1;return i||(i=new Ia),function(e,t,a,n,s,i){var r=1&a,o=zs(e),l=o.length,c=zs(t).length;if(l!=c&&!r)return!1;var d=l;for(;d--;){var u=o[d];if(!(r?u in t:xe.call(t,u)))return!1}var m=i.get(e);if(m&&i.get(t))return m==t;var h=!0;i.set(e,t),i.set(t,e);var p=r;for(;++d<l;){u=o[d];var g=e[u],f=t[u];if(n)var b=r?n(f,g,u,t,e,i):n(g,f,u,e,t,i);if(!(void 0===b?g===f||s(g,f,a,n,i):b)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,a,n,s,i)}(e,t,a,n,yn,s))}function En(e,t,a,n){var s=a.length,i=s,r=!n;if(null==e)return!i;for(e=ge(e);s--;){var o=a[s];if(r&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){var l=(o=a[s])[0],c=e[l],d=o[1];if(r&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new Ia;if(n)var m=n(c,d,l,e,t,u);if(!(void 0===m?yn(d,c,3,n,u):m))return!1}}return!0}function Sn(e){return!(!Gr(e)||(t=e,Oe&&Oe in t))&&(Ur(e)?je:re).test(Oi(e));var t}function Tn(e){return"function"==typeof e?e:null==e?Yo:"object"==typeof e?Ar(e)?kn(e[0],e[1]):Mn(e):tl(e)}function xn(e){if(!ui(e))return sa(e);var t=[];for(var a in ge(e))xe.call(e,a)&&"constructor"!=a&&t.push(a);return t}function wn(e){if(!Gr(e))return function(e){var t=[];if(null!=e)for(var a in ge(e))t.push(a);return t}(e);var t=ui(e),a=[];for(var n in e)("constructor"!=n||!t&&xe.call(e,n))&&a.push(n);return a}function On(e,t){return e<t}function Cn(e,t){var a=-1,s=Nr(e)?n(e.length):[];return Za(e,(function(e,n,i){s[++a]=t(e,n,i)})),s}function Mn(e){var t=$s(e);return 1==t.length&&t[0][2]?hi(t[0][0],t[0][1]):function(a){return a===e||En(a,e,t)}}function kn(e,t){return li(e)&&mi(t)?hi(wi(e),t):function(a){var n=go(a,e);return void 0===n&&n===t?fo(a,e):yn(t,n,3)}}function jn(e,t,a,n,s){e!==t&&rn(t,(function(i,r){if(s||(s=new Ia),Gr(i))!function(e,t,a,n,s,i,r){var o=bi(e,a),l=bi(t,a),c=r.get(l);if(c)return void qa(e,a,c);var d=i?i(o,l,a+"",e,t,r):void 0,u=void 0===d;if(u){var m=Ar(l),h=!m&&Ir(l),p=!m&&!h&&Qr(l);d=l,m||h||p?Ar(o)?d=o:Dr(o)?d=bs(o):h?(u=!1,d=us(l,!0)):p?(u=!1,d=hs(l,!0)):d=[]:Yr(l)||Pr(l)?(d=o,Pr(o)?d=io(o):Gr(o)&&!Ur(o)||(d=si(l))):u=!1}u&&(r.set(l,d),s(d,l,n,i,r),r.delete(l));qa(e,a,d)}(e,t,r,a,jn,n,s);else{var o=n?n(bi(e,r),i,r+"",e,t,s):void 0;void 0===o&&(o=i),qa(e,r,o)}}),Eo)}function Pn(e,t){var a=e.length;if(a)return ri(t+=t<0?a:0,a)?e[t]:void 0}function An(e,t,a){var n=-1;return t=ht(t.length?t:[Yo],jt(Ks())),function(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}(Cn(e,(function(e,a,s){return{criteria:ht(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,a){var n=-1,s=e.criteria,i=t.criteria,r=s.length,o=a.length;for(;++n<r;){var l=ps(s[n],i[n]);if(l){if(n>=o)return l;var c=a[n];return l*("desc"==c?-1:1)}}return e.index-t.index}(e,t,a)}))}function Rn(e,t,a){for(var n=-1,s=t.length,i={};++n<s;){var r=t[n],o=un(e,r);a(o,r)&&qn(i,os(r,e),o)}return i}function Nn(e,t,a,n){var s=n?St:Et,i=-1,r=t.length,o=e;for(e===t&&(t=bs(t)),a&&(o=ht(e,jt(a)));++i<r;)for(var l=0,c=t[i],d=a?a(c):c;(l=s(o,d,l,n))>-1;)o!==e&&Xe.call(o,l,1),Xe.call(e,l,1);return e}function Dn(e,t){for(var a=e?t.length:0,n=a-1;a--;){var s=t[a];if(a==n||s!==i){var i=s;ri(s)?Xe.call(e,s,1):Zn(e,s)}}return e}function In(e,t){return e+Zt(ca()*(t-e+1))}function Ln(e,t){var a="";if(!e||t<1||t>9007199254740991)return a;do{t%2&&(a+=e),(t=Zt(t/2))&&(e+=e)}while(t);return a}function Bn(e,t){return yi(pi(e,t,Yo),e+"")}function Un(e){return Ba(ko(e))}function Fn(e,t){var a=ko(e);return Ti(a,Ja(t,0,a.length))}function qn(e,t,a,n){if(!Gr(e))return e;for(var s=-1,i=(t=os(t,e)).length,r=i-1,o=e;null!=o&&++s<i;){var l=wi(t[s]),c=a;if(s!=r){var d=o[l];void 0===(c=n?n(d,l,o):void 0)&&(c=Gr(d)?d:ri(t[s+1])?[]:{})}Ga(o,l,c),o=o[l]}return e}var Gn=ba?function(e,t){return ba.set(e,t),e}:Yo,Hn=Ot?function(e,t){return Ot(e,"toString",{configurable:!0,enumerable:!1,value:Ho(t),writable:!0})}:Yo;function Wn(e){return Ti(ko(e))}function zn(e,t,a){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(a=a>i?i:a)<0&&(a+=i),i=t>a?0:a-t>>>0,t>>>=0;for(var r=n(i);++s<i;)r[s]=e[s+t];return r}function Yn(e,t){var a;return Za(e,(function(e,n,s){return!(a=t(e,n,s))})),!!a}function Vn(e,t,a){var n=0,s=null==e?n:e.length;if("number"==typeof t&&t==t&&s<=2147483647){for(;n<s;){var i=n+s>>>1,r=e[i];null!==r&&!Kr(r)&&(a?r<=t:r<t)?n=i+1:s=i}return s}return Jn(e,t,Yo,a)}function Jn(e,t,a,n){t=a(t);for(var s=0,i=null==e?0:e.length,r=t!=t,o=null===t,l=Kr(t),c=void 0===t;s<i;){var d=Zt((s+i)/2),u=a(e[d]),m=void 0!==u,h=null===u,p=u==u,g=Kr(u);if(r)var f=n||p;else f=c?p&&(n||m):o?p&&m&&(n||!h):l?p&&m&&!h&&(n||!g):!h&&!g&&(n?u<=t:u<t);f?s=d+1:i=d}return ra(i,4294967294)}function Xn(e,t){for(var a=-1,n=e.length,s=0,i=[];++a<n;){var r=e[a],o=t?t(r):r;if(!a||!Mr(o,l)){var l=o;i[s++]=0===r?0:r}}return i}function Kn(e){return"number"==typeof e?e:Kr(e)?NaN:+e}function Qn(e){if("string"==typeof e)return e;if(Ar(e))return ht(e,Qn)+"";if(Kr(e))return Oa?Oa.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $n(e,t,a){var n=-1,s=ut,i=e.length,r=!0,o=[],l=o;if(a)r=!1,s=mt;else if(i>=200){var c=t?null:Ls(e);if(c)return Ht(c);r=!1,s=At,l=new Da}else l=t?[]:o;e:for(;++n<i;){var d=e[n],u=t?t(d):d;if(d=a||0!==d?d:0,r&&u==u){for(var m=l.length;m--;)if(l[m]===u)continue e;t&&l.push(u),o.push(d)}else s(l,u,a)||(l!==o&&l.push(u),o.push(d))}return o}function Zn(e,t){return null==(e=gi(e,t=os(t,e)))||delete e[wi(Bi(t))]}function es(e,t,a,n){return qn(e,t,a(un(e,t)),n)}function ts(e,t,a,n){for(var s=e.length,i=n?s:-1;(n?i--:++i<s)&&t(e[i],i,e););return a?zn(e,n?0:i,n?i+1:s):zn(e,n?i+1:0,n?s:i)}function as(e,t){var a=e;return a instanceof Pa&&(a=a.value()),gt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),a)}function ns(e,t,a){var s=e.length;if(s<2)return s?$n(e[0]):[];for(var i=-1,r=n(s);++i<s;)for(var o=e[i],l=-1;++l<s;)l!=i&&(r[i]=$a(r[i]||o,e[l],t,a));return $n(sn(r,1),t,a)}function ss(e,t,a){for(var n=-1,s=e.length,i=t.length,r={};++n<s;){var o=n<i?t[n]:void 0;a(r,e[n],o)}return r}function is(e){return Dr(e)?e:[]}function rs(e){return"function"==typeof e?e:Yo}function os(e,t){return Ar(e)?e:li(e,t)?[e]:xi(ro(e))}var ls=Bn;function cs(e,t,a){var n=e.length;return a=void 0===a?n:a,!t&&a>=n?e:zn(e,t,a)}var ds=Xt||function(e){return Ve.clearTimeout(e)};function us(e,t){if(t)return e.slice();var a=e.length,n=Ge?Ge(a):new e.constructor(a);return e.copy(n),n}function ms(e){var t=new e.constructor(e.byteLength);return new Ie(t).set(new Ie(e)),t}function hs(e,t){var a=t?ms(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function ps(e,t){if(e!==t){var a=void 0!==e,n=null===e,s=e==e,i=Kr(e),r=void 0!==t,o=null===t,l=t==t,c=Kr(t);if(!o&&!c&&!i&&e>t||i&&r&&l&&!o&&!c||n&&r&&l||!a&&l||!s)return 1;if(!n&&!i&&!c&&e<t||c&&a&&s&&!n&&!i||o&&a&&s||!r&&s||!l)return-1}return 0}function gs(e,t,a,s){for(var i=-1,r=e.length,o=a.length,l=-1,c=t.length,d=ia(r-o,0),u=n(c+d),m=!s;++l<c;)u[l]=t[l];for(;++i<o;)(m||i<r)&&(u[a[i]]=e[i]);for(;d--;)u[l++]=e[i++];return u}function fs(e,t,a,s){for(var i=-1,r=e.length,o=-1,l=a.length,c=-1,d=t.length,u=ia(r-l,0),m=n(u+d),h=!s;++i<u;)m[i]=e[i];for(var p=i;++c<d;)m[p+c]=t[c];for(;++o<l;)(h||i<r)&&(m[p+a[o]]=e[i++]);return m}function bs(e,t){var a=-1,s=e.length;for(t||(t=n(s));++a<s;)t[a]=e[a];return t}function vs(e,t,a,n){var s=!a;a||(a={});for(var i=-1,r=t.length;++i<r;){var o=t[i],l=n?n(a[o],e[o],o,a,e):void 0;void 0===l&&(l=e[o]),s?Ya(a,o,l):Ga(a,o,l)}return a}function _s(e,t){return function(a,n){var s=Ar(a)?rt:Wa,i=t?t():{};return s(a,e,Ks(n,2),i)}}function ys(e){return Bn((function(t,a){var n=-1,s=a.length,i=s>1?a[s-1]:void 0,r=s>2?a[2]:void 0;for(i=e.length>3&&"function"==typeof i?(s--,i):void 0,r&&oi(a[0],a[1],r)&&(i=s<3?void 0:i,s=1),t=ge(t);++n<s;){var o=a[n];o&&e(t,o,n,i)}return t}))}function Es(e,t){return function(a,n){if(null==a)return a;if(!Nr(a))return e(a,n);for(var s=a.length,i=t?s:-1,r=ge(a);(t?i--:++i<s)&&!1!==n(r[i],i,r););return a}}function Ss(e){return function(t,a,n){for(var s=-1,i=ge(t),r=n(t),o=r.length;o--;){var l=r[e?o:++s];if(!1===a(i[l],l,i))break}return t}}function Ts(e){return function(t){var a=Ut(t=ro(t))?Yt(t):void 0,n=a?a[0]:t.charAt(0),s=a?cs(a,1).join(""):t.slice(1);return n[e]()+s}}function xs(e){return function(t){return gt(Fo(Ao(t).replace(Ae,"")),e,"")}}function ws(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=Ma(e.prototype),n=e.apply(a,t);return Gr(n)?n:a}}function Os(e){return function(t,a,n){var s=ge(t);if(!Nr(t)){var i=Ks(a,3);t=yo(t),a=function(e){return i(s[e],e,s)}}var r=e(t,a,n);return r>-1?s[i?t[r]:r]:void 0}}function Cs(e){return Ws((function(t){var a=t.length,n=a,s=ja.prototype.thru;for(e&&t.reverse();n--;){var r=t[n];if("function"!=typeof r)throw new ve(i);if(s&&!o&&"wrapper"==Js(r))var o=new ja([],!0)}for(n=o?n:a;++n<a;){var l=Js(r=t[n]),c="wrapper"==l?Vs(r):void 0;o=c&&ci(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?o[Js(c[0])].apply(o,c[3]):1==r.length&&ci(r)?o[l]():o.thru(r)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&Ar(n))return o.plant(n).value();for(var s=0,i=a?t[s].apply(this,e):n;++s<a;)i=t[s].call(this,i);return i}}))}function Ms(e,t,a,s,i,r,o,l,c,d){var u=128&t,m=1&t,h=2&t,p=24&t,g=512&t,f=h?void 0:ws(e);return function b(){for(var v=arguments.length,_=n(v),y=v;y--;)_[y]=arguments[y];if(p)var E=Xs(b),S=Dt(_,E);if(s&&(_=gs(_,s,i,p)),r&&(_=fs(_,r,o,p)),v-=S,p&&v<d){var T=Gt(_,E);return Ds(e,t,Ms,b.placeholder,a,_,T,l,c,d-v)}var x=m?a:this,w=h?x[e]:e;return v=_.length,l?_=fi(_,l):g&&v>1&&_.reverse(),u&&c<v&&(_.length=c),this&&this!==Ve&&this instanceof b&&(w=f||ws(w)),w.apply(x,_)}}function ks(e,t){return function(a,n){return function(e,t,a,n){return ln(e,(function(e,s,i){t(n,a(e),s,i)})),n}(a,e,t(n),{})}}function js(e,t){return function(a,n){var s;if(void 0===a&&void 0===n)return t;if(void 0!==a&&(s=a),void 0!==n){if(void 0===s)return n;"string"==typeof a||"string"==typeof n?(a=Qn(a),n=Qn(n)):(a=Kn(a),n=Kn(n)),s=e(a,n)}return s}}function Ps(e){return Ws((function(t){return t=ht(t,jt(Ks())),Bn((function(a){var n=this;return e(t,(function(e){return it(e,n,a)}))}))}))}function As(e,t){var a=(t=void 0===t?" ":Qn(t)).length;if(a<2)return a?Ln(t,e):t;var n=Ln(t,$t(e/zt(t)));return Ut(t)?cs(Yt(n),0,e).join(""):n.slice(0,e)}function Rs(e){return function(t,a,s){return s&&"number"!=typeof s&&oi(t,a,s)&&(a=s=void 0),t=to(t),void 0===a?(a=t,t=0):a=to(a),function(e,t,a,s){for(var i=-1,r=ia($t((t-e)/(a||1)),0),o=n(r);r--;)o[s?r:++i]=e,e+=a;return o}(t,a,s=void 0===s?t<a?1:-1:to(s),e)}}function Ns(e){return function(t,a){return"string"==typeof t&&"string"==typeof a||(t=so(t),a=so(a)),e(t,a)}}function Ds(e,t,a,n,s,i,r,o,l,c){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var u=[e,t,s,d?i:void 0,d?r:void 0,d?void 0:i,d?void 0:r,o,l,c],m=a.apply(void 0,u);return ci(e)&&vi(m,u),m.placeholder=n,Ei(m,e,t)}function Is(e){var t=pe[e];return function(e,a){if(e=so(e),(a=null==a?0:ra(ao(a),292))&&aa(e)){var n=(ro(e)+"e").split("e");return+((n=(ro(t(n[0]+"e"+(+n[1]+a)))+"e").split("e"))[0]+"e"+(+n[1]-a))}return t(e)}}var Ls=pa&&1/Ht(new pa([,-0]))[1]==1/0?function(e){return new pa(e)}:Qo;function Bs(e){return function(t){var a=ai(t);return a==g?Ft(t):a==_?Wt(t):function(e,t){return ht(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Us(e,t,a,s,o,l,c,d){var u=2&t;if(!u&&"function"!=typeof e)throw new ve(i);var m=s?s.length:0;if(m||(t&=-97,s=o=void 0),c=void 0===c?c:ia(ao(c),0),d=void 0===d?d:ao(d),m-=o?o.length:0,64&t){var h=s,p=o;s=o=void 0}var g=u?void 0:Vs(e),f=[e,t,a,s,o,h,p,l,c,d];if(g&&function(e,t){var a=e[1],n=t[1],s=a|n,i=s<131,o=128==n&&8==a||128==n&&256==a&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==a;if(!i&&!o)return e;1&n&&(e[2]=t[2],s|=1&a?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?gs(c,l,t[4]):l,e[4]=c?Gt(e[3],r):t[4]}(l=t[5])&&(c=e[5],e[5]=c?fs(c,l,t[6]):l,e[6]=c?Gt(e[5],r):t[6]);(l=t[7])&&(e[7]=l);128&n&&(e[8]=null==e[8]?t[8]:ra(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=s}(f,g),e=f[0],t=f[1],a=f[2],s=f[3],o=f[4],!(d=f[9]=void 0===f[9]?u?0:e.length:ia(f[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,a){var s=ws(e);return function i(){for(var r=arguments.length,o=n(r),l=r,c=Xs(i);l--;)o[l]=arguments[l];var d=r<3&&o[0]!==c&&o[r-1]!==c?[]:Gt(o,c);if((r-=d.length)<a)return Ds(e,t,Ms,i.placeholder,void 0,o,d,void 0,void 0,a-r);var u=this&&this!==Ve&&this instanceof i?s:e;return it(u,this,o)}}(e,t,d):32!=t&&33!=t||o.length?Ms.apply(void 0,f):function(e,t,a,s){var i=1&t,r=ws(e);return function t(){for(var o=-1,l=arguments.length,c=-1,d=s.length,u=n(d+l),m=this&&this!==Ve&&this instanceof t?r:e;++c<d;)u[c]=s[c];for(;l--;)u[c++]=arguments[++o];return it(m,i?a:this,u)}}(e,t,a,s);else var b=function(e,t,a){var n=1&t,s=ws(e);return function t(){var i=this&&this!==Ve&&this instanceof t?s:e;return i.apply(n?a:this,arguments)}}(e,t,a);return Ei((g?Gn:vi)(b,f),e,t)}function Fs(e,t,a,n){return void 0===e||Mr(e,Ee[a])&&!xe.call(n,a)?t:e}function qs(e,t,a,n,s,i){return Gr(e)&&Gr(t)&&(i.set(t,e),jn(e,t,void 0,qs,i),i.delete(t)),e}function Gs(e){return Yr(e)?void 0:e}function Hs(e,t,a,n,s,i){var r=1&a,o=e.length,l=t.length;if(o!=l&&!(r&&l>o))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var d=-1,u=!0,m=2&a?new Da:void 0;for(i.set(e,t),i.set(t,e);++d<o;){var h=e[d],p=t[d];if(n)var g=r?n(p,h,d,t,e,i):n(h,p,d,e,t,i);if(void 0!==g){if(g)continue;u=!1;break}if(m){if(!bt(t,(function(e,t){if(!At(m,t)&&(h===e||s(h,e,a,n,i)))return m.push(t)}))){u=!1;break}}else if(h!==p&&!s(h,p,a,n,i)){u=!1;break}}return i.delete(e),i.delete(t),u}function Ws(e){return yi(pi(e,void 0,Ri),e+"")}function zs(e){return mn(e,yo,ei)}function Ys(e){return mn(e,Eo,ti)}var Vs=ba?function(e){return ba.get(e)}:Qo;function Js(e){for(var t=e.name+"",a=va[t],n=xe.call(va,t)?a.length:0;n--;){var s=a[n],i=s.func;if(null==i||i==e)return s.name}return t}function Xs(e){return(xe.call(Ca,"placeholder")?Ca:e).placeholder}function Ks(){var e=Ca.iteratee||Vo;return e=e===Vo?Tn:e,arguments.length?e(arguments[0],arguments[1]):e}function Qs(e,t){var a,n,s=e.__data__;return("string"==(n=typeof(a=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==a:null===a)?s["string"==typeof t?"string":"hash"]:s.map}function $s(e){for(var t=yo(e),a=t.length;a--;){var n=t[a],s=e[n];t[a]=[n,s,mi(s)]}return t}function Zs(e,t){var a=function(e,t){return null==e?void 0:e[t]}(e,t);return Sn(a)?a:void 0}var ei=ea?function(e){return null==e?[]:(e=ge(e),dt(ea(e),(function(t){return Je.call(e,t)})))}:sl,ti=ea?function(e){for(var t=[];e;)pt(t,ei(e)),e=ze(e);return t}:sl,ai=hn;function ni(e,t,a){for(var n=-1,s=(t=os(t,e)).length,i=!1;++n<s;){var r=wi(t[n]);if(!(i=null!=e&&a(e,r)))break;e=e[r]}return i||++n!=s?i:!!(s=null==e?0:e.length)&&qr(s)&&ri(r,s)&&(Ar(e)||Pr(e))}function si(e){return"function"!=typeof e.constructor||ui(e)?{}:Ma(ze(e))}function ii(e){return Ar(e)||Pr(e)||!!(Qe&&e&&e[Qe])}function ri(e,t){var a=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==a||"symbol"!=a&&le.test(e))&&e>-1&&e%1==0&&e<t}function oi(e,t,a){if(!Gr(a))return!1;var n=typeof t;return!!("number"==n?Nr(a)&&ri(t,a.length):"string"==n&&t in a)&&Mr(a[t],e)}function li(e,t){if(Ar(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!Kr(e))||(W.test(e)||!H.test(e)||null!=t&&e in ge(t))}function ci(e){var t=Js(e),a=Ca[t];if("function"!=typeof a||!(t in Pa.prototype))return!1;if(e===a)return!0;var n=Vs(a);return!!n&&e===n[0]}(ua&&ai(new ua(new ArrayBuffer(1)))!=x||ma&&ai(new ma)!=g||ha&&"[object Promise]"!=ai(ha.resolve())||pa&&ai(new pa)!=_||ga&&ai(new ga)!=S)&&(ai=function(e){var t=hn(e),a=t==b?e.constructor:void 0,n=a?Oi(a):"";if(n)switch(n){case _a:return x;case ya:return g;case Ea:return"[object Promise]";case Sa:return _;case Ta:return S}return t});var di=Se?Ur:il;function ui(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ee)}function mi(e){return e==e&&!Gr(e)}function hi(e,t){return function(a){return null!=a&&(a[e]===t&&(void 0!==t||e in ge(a)))}}function pi(e,t,a){return t=ia(void 0===t?e.length-1:t,0),function(){for(var s=arguments,i=-1,r=ia(s.length-t,0),o=n(r);++i<r;)o[i]=s[t+i];i=-1;for(var l=n(t+1);++i<t;)l[i]=s[i];return l[t]=a(o),it(e,this,l)}}function gi(e,t){return t.length<2?e:un(e,zn(t,0,-1))}function fi(e,t){for(var a=e.length,n=ra(t.length,a),s=bs(e);n--;){var i=t[n];e[n]=ri(i,a)?s[i]:void 0}return e}function bi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var vi=Si(Gn),_i=Qt||function(e,t){return Ve.setTimeout(e,t)},yi=Si(Hn);function Ei(e,t,a){var n=t+"";return yi(e,function(e,t){var a=t.length;if(!a)return e;var n=a-1;return t[n]=(a>1?"& ":"")+t[n],t=t.join(a>2?", ":" "),e.replace(Q,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return ot(o,(function(a){var n="_."+a[0];t&a[1]&&!ut(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match($);return t?t[1].split(Z):[]}(n),a)))}function Si(e){var t=0,a=0;return function(){var n=oa(),s=16-(n-a);if(a=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ti(e,t){var a=-1,n=e.length,s=n-1;for(t=void 0===t?n:t;++a<t;){var i=In(a,s),r=e[i];e[i]=e[a],e[a]=r}return e.length=t,e}var xi=function(e){var t=Sr(e,(function(e){return 500===a.size&&a.clear(),e})),a=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(z,(function(e,a,n,s){t.push(n?s.replace(te,"$1"):a||e)})),t}));function wi(e){if("string"==typeof e||Kr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Oi(e){if(null!=e){try{return Te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ci(e){if(e instanceof Pa)return e.clone();var t=new ja(e.__wrapped__,e.__chain__);return t.__actions__=bs(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Mi=Bn((function(e,t){return Dr(e)?$a(e,sn(t,1,Dr,!0)):[]})),ki=Bn((function(e,t){var a=Bi(t);return Dr(a)&&(a=void 0),Dr(e)?$a(e,sn(t,1,Dr,!0),Ks(a,2)):[]})),ji=Bn((function(e,t){var a=Bi(t);return Dr(a)&&(a=void 0),Dr(e)?$a(e,sn(t,1,Dr,!0),void 0,a):[]}));function Pi(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var s=null==a?0:ao(a);return s<0&&(s=ia(n+s,0)),yt(e,Ks(t,3),s)}function Ai(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return void 0!==a&&(s=ao(a),s=a<0?ia(n+s,0):ra(s,n-1)),yt(e,Ks(t,3),s,!0)}function Ri(e){return(null==e?0:e.length)?sn(e,1):[]}function Ni(e){return e&&e.length?e[0]:void 0}var Di=Bn((function(e){var t=ht(e,is);return t.length&&t[0]===e[0]?bn(t):[]})),Ii=Bn((function(e){var t=Bi(e),a=ht(e,is);return t===Bi(a)?t=void 0:a.pop(),a.length&&a[0]===e[0]?bn(a,Ks(t,2)):[]})),Li=Bn((function(e){var t=Bi(e),a=ht(e,is);return(t="function"==typeof t?t:void 0)&&a.pop(),a.length&&a[0]===e[0]?bn(a,void 0,t):[]}));function Bi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ui=Bn(Fi);function Fi(e,t){return e&&e.length&&t&&t.length?Nn(e,t):e}var qi=Ws((function(e,t){var a=null==e?0:e.length,n=Va(e,t);return Dn(e,ht(t,(function(e){return ri(e,a)?+e:e})).sort(ps)),n}));function Gi(e){return null==e?e:da.call(e)}var Hi=Bn((function(e){return $n(sn(e,1,Dr,!0))})),Wi=Bn((function(e){var t=Bi(e);return Dr(t)&&(t=void 0),$n(sn(e,1,Dr,!0),Ks(t,2))})),zi=Bn((function(e){var t=Bi(e);return t="function"==typeof t?t:void 0,$n(sn(e,1,Dr,!0),void 0,t)}));function Yi(e){if(!e||!e.length)return[];var t=0;return e=dt(e,(function(e){if(Dr(e))return t=ia(e.length,t),!0})),kt(t,(function(t){return ht(e,wt(t))}))}function Vi(e,t){if(!e||!e.length)return[];var a=Yi(e);return null==t?a:ht(a,(function(e){return it(t,void 0,e)}))}var Ji=Bn((function(e,t){return Dr(e)?$a(e,t):[]})),Xi=Bn((function(e){return ns(dt(e,Dr))})),Ki=Bn((function(e){var t=Bi(e);return Dr(t)&&(t=void 0),ns(dt(e,Dr),Ks(t,2))})),Qi=Bn((function(e){var t=Bi(e);return t="function"==typeof t?t:void 0,ns(dt(e,Dr),void 0,t)})),$i=Bn(Yi);var Zi=Bn((function(e){var t=e.length,a=t>1?e[t-1]:void 0;return a="function"==typeof a?(e.pop(),a):void 0,Vi(e,a)}));function er(e){var t=Ca(e);return t.__chain__=!0,t}function tr(e,t){return t(e)}var ar=Ws((function(e){var t=e.length,a=t?e[0]:0,n=this.__wrapped__,s=function(t){return Va(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Pa&&ri(a)?((n=n.slice(a,+a+(t?1:0))).__actions__.push({func:tr,args:[s],thisArg:void 0}),new ja(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(s)}));var nr=_s((function(e,t,a){xe.call(e,a)?++e[a]:Ya(e,a,1)}));var sr=Os(Pi),ir=Os(Ai);function rr(e,t){return(Ar(e)?ot:Za)(e,Ks(t,3))}function or(e,t){return(Ar(e)?lt:en)(e,Ks(t,3))}var lr=_s((function(e,t,a){xe.call(e,a)?e[a].push(t):Ya(e,a,[t])}));var cr=Bn((function(e,t,a){var s=-1,i="function"==typeof t,r=Nr(e)?n(e.length):[];return Za(e,(function(e){r[++s]=i?it(t,e,a):vn(e,t,a)})),r})),dr=_s((function(e,t,a){Ya(e,a,t)}));function ur(e,t){return(Ar(e)?ht:Cn)(e,Ks(t,3))}var mr=_s((function(e,t,a){e[a?0:1].push(t)}),(function(){return[[],[]]}));var hr=Bn((function(e,t){if(null==e)return[];var a=t.length;return a>1&&oi(e,t[0],t[1])?t=[]:a>2&&oi(t[0],t[1],t[2])&&(t=[t[0]]),An(e,sn(t,1),[])})),pr=Kt||function(){return Ve.Date.now()};function gr(e,t,a){return t=a?void 0:t,Us(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function fr(e,t){var a;if("function"!=typeof t)throw new ve(i);return e=ao(e),function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=void 0),a}}var br=Bn((function(e,t,a){var n=1;if(a.length){var s=Gt(a,Xs(br));n|=32}return Us(e,n,t,a,s)})),vr=Bn((function(e,t,a){var n=3;if(a.length){var s=Gt(a,Xs(vr));n|=32}return Us(t,n,e,a,s)}));function _r(e,t,a){var n,s,r,o,l,c,d=0,u=!1,m=!1,h=!0;if("function"!=typeof e)throw new ve(i);function p(t){var a=n,i=s;return n=s=void 0,d=t,o=e.apply(i,a)}function g(e){return d=e,l=_i(b,t),u?p(e):o}function f(e){var a=e-c;return void 0===c||a>=t||a<0||m&&e-d>=r}function b(){var e=pr();if(f(e))return v(e);l=_i(b,function(e){var a=t-(e-c);return m?ra(a,r-(e-d)):a}(e))}function v(e){return l=void 0,h&&n?p(e):(n=s=void 0,o)}function _(){var e=pr(),a=f(e);if(n=arguments,s=this,c=e,a){if(void 0===l)return g(c);if(m)return ds(l),l=_i(b,t),p(c)}return void 0===l&&(l=_i(b,t)),o}return t=so(t)||0,Gr(a)&&(u=!!a.leading,r=(m="maxWait"in a)?ia(so(a.maxWait)||0,t):r,h="trailing"in a?!!a.trailing:h),_.cancel=function(){void 0!==l&&ds(l),d=0,n=c=s=l=void 0},_.flush=function(){return void 0===l?o:v(pr())},_}var yr=Bn((function(e,t){return Qa(e,1,t)})),Er=Bn((function(e,t,a){return Qa(e,so(t)||0,a)}));function Sr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ve(i);var a=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=a.cache;if(i.has(s))return i.get(s);var r=e.apply(this,n);return a.cache=i.set(s,r)||i,r};return a.cache=new(Sr.Cache||Na),a}function Tr(e){if("function"!=typeof e)throw new ve(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Sr.Cache=Na;var xr=ls((function(e,t){var a=(t=1==t.length&&Ar(t[0])?ht(t[0],jt(Ks())):ht(sn(t,1),jt(Ks()))).length;return Bn((function(n){for(var s=-1,i=ra(n.length,a);++s<i;)n[s]=t[s].call(this,n[s]);return it(e,this,n)}))})),wr=Bn((function(e,t){return Us(e,32,void 0,t,Gt(t,Xs(wr)))})),Or=Bn((function(e,t){return Us(e,64,void 0,t,Gt(t,Xs(Or)))})),Cr=Ws((function(e,t){return Us(e,256,void 0,void 0,void 0,t)}));function Mr(e,t){return e===t||e!=e&&t!=t}var kr=Ns(pn),jr=Ns((function(e,t){return e>=t})),Pr=_n(function(){return arguments}())?_n:function(e){return Hr(e)&&xe.call(e,"callee")&&!Je.call(e,"callee")},Ar=n.isArray,Rr=Ze?jt(Ze):function(e){return Hr(e)&&hn(e)==T};function Nr(e){return null!=e&&qr(e.length)&&!Ur(e)}function Dr(e){return Hr(e)&&Nr(e)}var Ir=ta||il,Lr=et?jt(et):function(e){return Hr(e)&&hn(e)==u};function Br(e){if(!Hr(e))return!1;var t=hn(e);return t==m||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Yr(e)}function Ur(e){if(!Gr(e))return!1;var t=hn(e);return t==h||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Fr(e){return"number"==typeof e&&e==ao(e)}function qr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Gr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Hr(e){return null!=e&&"object"==typeof e}var Wr=tt?jt(tt):function(e){return Hr(e)&&ai(e)==g};function zr(e){return"number"==typeof e||Hr(e)&&hn(e)==f}function Yr(e){if(!Hr(e)||hn(e)!=b)return!1;var t=ze(e);if(null===t)return!0;var a=xe.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&Te.call(a)==Me}var Vr=at?jt(at):function(e){return Hr(e)&&hn(e)==v};var Jr=nt?jt(nt):function(e){return Hr(e)&&ai(e)==_};function Xr(e){return"string"==typeof e||!Ar(e)&&Hr(e)&&hn(e)==y}function Kr(e){return"symbol"==typeof e||Hr(e)&&hn(e)==E}var Qr=st?jt(st):function(e){return Hr(e)&&qr(e.length)&&!!Fe[hn(e)]};var $r=Ns(On),Zr=Ns((function(e,t){return e<=t}));function eo(e){if(!e)return[];if(Nr(e))return Xr(e)?Yt(e):bs(e);if($e&&e[$e])return function(e){for(var t,a=[];!(t=e.next()).done;)a.push(t.value);return a}(e[$e]());var t=ai(e);return(t==g?Ft:t==_?Ht:ko)(e)}function to(e){return e?(e=so(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ao(e){var t=to(e),a=t%1;return t==t?a?t-a:t:0}function no(e){return e?Ja(ao(e),0,4294967295):0}function so(e){if("number"==typeof e)return e;if(Kr(e))return NaN;if(Gr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Gr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(J,"");var a=ie.test(e);return a||oe.test(e)?We(e.slice(2),a?2:8):se.test(e)?NaN:+e}function io(e){return vs(e,Eo(e))}function ro(e){return null==e?"":Qn(e)}var oo=ys((function(e,t){if(ui(t)||Nr(t))vs(t,yo(t),e);else for(var a in t)xe.call(t,a)&&Ga(e,a,t[a])})),lo=ys((function(e,t){vs(t,Eo(t),e)})),co=ys((function(e,t,a,n){vs(t,Eo(t),e,n)})),uo=ys((function(e,t,a,n){vs(t,yo(t),e,n)})),mo=Ws(Va);var ho=Bn((function(e,t){e=ge(e);var a=-1,n=t.length,s=n>2?t[2]:void 0;for(s&&oi(t[0],t[1],s)&&(n=1);++a<n;)for(var i=t[a],r=Eo(i),o=-1,l=r.length;++o<l;){var c=r[o],d=e[c];(void 0===d||Mr(d,Ee[c])&&!xe.call(e,c))&&(e[c]=i[c])}return e})),po=Bn((function(e){return e.push(void 0,qs),it(To,void 0,e)}));function go(e,t,a){var n=null==e?void 0:un(e,t);return void 0===n?a:n}function fo(e,t){return null!=e&&ni(e,t,fn)}var bo=ks((function(e,t,a){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=a}),Ho(Yo)),vo=ks((function(e,t,a){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),xe.call(e,t)?e[t].push(a):e[t]=[a]}),Ks),_o=Bn(vn);function yo(e){return Nr(e)?La(e):xn(e)}function Eo(e){return Nr(e)?La(e,!0):wn(e)}var So=ys((function(e,t,a){jn(e,t,a)})),To=ys((function(e,t,a,n){jn(e,t,a,n)})),xo=Ws((function(e,t){var a={};if(null==e)return a;var n=!1;t=ht(t,(function(t){return t=os(t,e),n||(n=t.length>1),t})),vs(e,Ys(e),a),n&&(a=Xa(a,7,Gs));for(var s=t.length;s--;)Zn(a,t[s]);return a}));var wo=Ws((function(e,t){return null==e?{}:function(e,t){return Rn(e,t,(function(t,a){return fo(e,a)}))}(e,t)}));function Oo(e,t){if(null==e)return{};var a=ht(Ys(e),(function(e){return[e]}));return t=Ks(t),Rn(e,a,(function(e,a){return t(e,a[0])}))}var Co=Bs(yo),Mo=Bs(Eo);function ko(e){return null==e?[]:Pt(e,yo(e))}var jo=xs((function(e,t,a){return t=t.toLowerCase(),e+(a?Po(t):t)}));function Po(e){return Uo(ro(e).toLowerCase())}function Ao(e){return(e=ro(e))&&e.replace(ce,It).replace(Re,"")}var Ro=xs((function(e,t,a){return e+(a?"-":"")+t.toLowerCase()})),No=xs((function(e,t,a){return e+(a?" ":"")+t.toLowerCase()})),Do=Ts("toLowerCase");var Io=xs((function(e,t,a){return e+(a?"_":"")+t.toLowerCase()}));var Lo=xs((function(e,t,a){return e+(a?" ":"")+Uo(t)}));var Bo=xs((function(e,t,a){return e+(a?" ":"")+t.toUpperCase()})),Uo=Ts("toUpperCase");function Fo(e,t,a){return e=ro(e),void 0===(t=a?void 0:t)?function(e){return Le.test(e)}(e)?function(e){return e.match(De)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var qo=Bn((function(e,t){try{return it(e,void 0,t)}catch(e){return Br(e)?e:new me(e)}})),Go=Ws((function(e,t){return ot(t,(function(t){t=wi(t),Ya(e,t,br(e[t],e))})),e}));function Ho(e){return function(){return e}}var Wo=Cs(),zo=Cs(!0);function Yo(e){return e}function Vo(e){return Tn("function"==typeof e?e:Xa(e,1))}var Jo=Bn((function(e,t){return function(a){return vn(a,e,t)}})),Xo=Bn((function(e,t){return function(a){return vn(e,a,t)}}));function Ko(e,t,a){var n=yo(t),s=dn(t,n);null!=a||Gr(t)&&(s.length||!n.length)||(a=t,t=e,e=this,s=dn(t,yo(t)));var i=!(Gr(a)&&"chain"in a&&!a.chain),r=Ur(e);return ot(s,(function(a){var n=t[a];e[a]=n,r&&(e.prototype[a]=function(){var t=this.__chain__;if(i||t){var a=e(this.__wrapped__),s=a.__actions__=bs(this.__actions__);return s.push({func:n,args:arguments,thisArg:e}),a.__chain__=t,a}return n.apply(e,pt([this.value()],arguments))})})),e}function Qo(){}var $o=Ps(ht),Zo=Ps(ct),el=Ps(bt);function tl(e){return li(e)?wt(wi(e)):function(e){return function(t){return un(t,e)}}(e)}var al=Rs(),nl=Rs(!0);function sl(){return[]}function il(){return!1}var rl=js((function(e,t){return e+t}),0),ol=Is("ceil"),ll=js((function(e,t){return e/t}),1),cl=Is("floor");var dl,ul=js((function(e,t){return e*t}),1),ml=Is("round"),hl=js((function(e,t){return e-t}),0);return Ca.after=function(e,t){if("function"!=typeof t)throw new ve(i);return e=ao(e),function(){if(--e<1)return t.apply(this,arguments)}},Ca.ary=gr,Ca.assign=oo,Ca.assignIn=lo,Ca.assignInWith=co,Ca.assignWith=uo,Ca.at=mo,Ca.before=fr,Ca.bind=br,Ca.bindAll=Go,Ca.bindKey=vr,Ca.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ar(e)?e:[e]},Ca.chain=er,Ca.chunk=function(e,t,a){t=(a?oi(e,t,a):void 0===t)?1:ia(ao(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var i=0,r=0,o=n($t(s/t));i<s;)o[r++]=zn(e,i,i+=t);return o},Ca.compact=function(e){for(var t=-1,a=null==e?0:e.length,n=0,s=[];++t<a;){var i=e[t];i&&(s[n++]=i)}return s},Ca.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),a=arguments[0],s=e;s--;)t[s-1]=arguments[s];return pt(Ar(a)?bs(a):[a],sn(t,1))},Ca.cond=function(e){var t=null==e?0:e.length,a=Ks();return e=t?ht(e,(function(e){if("function"!=typeof e[1])throw new ve(i);return[a(e[0]),e[1]]})):[],Bn((function(a){for(var n=-1;++n<t;){var s=e[n];if(it(s[0],this,a))return it(s[1],this,a)}}))},Ca.conforms=function(e){return function(e){var t=yo(e);return function(a){return Ka(a,e,t)}}(Xa(e,1))},Ca.constant=Ho,Ca.countBy=nr,Ca.create=function(e,t){var a=Ma(e);return null==t?a:za(a,t)},Ca.curry=function e(t,a,n){var s=Us(t,8,void 0,void 0,void 0,void 0,void 0,a=n?void 0:a);return s.placeholder=e.placeholder,s},Ca.curryRight=function e(t,a,n){var s=Us(t,16,void 0,void 0,void 0,void 0,void 0,a=n?void 0:a);return s.placeholder=e.placeholder,s},Ca.debounce=_r,Ca.defaults=ho,Ca.defaultsDeep=po,Ca.defer=yr,Ca.delay=Er,Ca.difference=Mi,Ca.differenceBy=ki,Ca.differenceWith=ji,Ca.drop=function(e,t,a){var n=null==e?0:e.length;return n?zn(e,(t=a||void 0===t?1:ao(t))<0?0:t,n):[]},Ca.dropRight=function(e,t,a){var n=null==e?0:e.length;return n?zn(e,0,(t=n-(t=a||void 0===t?1:ao(t)))<0?0:t):[]},Ca.dropRightWhile=function(e,t){return e&&e.length?ts(e,Ks(t,3),!0,!0):[]},Ca.dropWhile=function(e,t){return e&&e.length?ts(e,Ks(t,3),!0):[]},Ca.fill=function(e,t,a,n){var s=null==e?0:e.length;return s?(a&&"number"!=typeof a&&oi(e,t,a)&&(a=0,n=s),function(e,t,a,n){var s=e.length;for((a=ao(a))<0&&(a=-a>s?0:s+a),(n=void 0===n||n>s?s:ao(n))<0&&(n+=s),n=a>n?0:no(n);a<n;)e[a++]=t;return e}(e,t,a,n)):[]},Ca.filter=function(e,t){return(Ar(e)?dt:nn)(e,Ks(t,3))},Ca.flatMap=function(e,t){return sn(ur(e,t),1)},Ca.flatMapDeep=function(e,t){return sn(ur(e,t),1/0)},Ca.flatMapDepth=function(e,t,a){return a=void 0===a?1:ao(a),sn(ur(e,t),a)},Ca.flatten=Ri,Ca.flattenDeep=function(e){return(null==e?0:e.length)?sn(e,1/0):[]},Ca.flattenDepth=function(e,t){return(null==e?0:e.length)?sn(e,t=void 0===t?1:ao(t)):[]},Ca.flip=function(e){return Us(e,512)},Ca.flow=Wo,Ca.flowRight=zo,Ca.fromPairs=function(e){for(var t=-1,a=null==e?0:e.length,n={};++t<a;){var s=e[t];n[s[0]]=s[1]}return n},Ca.functions=function(e){return null==e?[]:dn(e,yo(e))},Ca.functionsIn=function(e){return null==e?[]:dn(e,Eo(e))},Ca.groupBy=lr,Ca.initial=function(e){return(null==e?0:e.length)?zn(e,0,-1):[]},Ca.intersection=Di,Ca.intersectionBy=Ii,Ca.intersectionWith=Li,Ca.invert=bo,Ca.invertBy=vo,Ca.invokeMap=cr,Ca.iteratee=Vo,Ca.keyBy=dr,Ca.keys=yo,Ca.keysIn=Eo,Ca.map=ur,Ca.mapKeys=function(e,t){var a={};return t=Ks(t,3),ln(e,(function(e,n,s){Ya(a,t(e,n,s),e)})),a},Ca.mapValues=function(e,t){var a={};return t=Ks(t,3),ln(e,(function(e,n,s){Ya(a,n,t(e,n,s))})),a},Ca.matches=function(e){return Mn(Xa(e,1))},Ca.matchesProperty=function(e,t){return kn(e,Xa(t,1))},Ca.memoize=Sr,Ca.merge=So,Ca.mergeWith=To,Ca.method=Jo,Ca.methodOf=Xo,Ca.mixin=Ko,Ca.negate=Tr,Ca.nthArg=function(e){return e=ao(e),Bn((function(t){return Pn(t,e)}))},Ca.omit=xo,Ca.omitBy=function(e,t){return Oo(e,Tr(Ks(t)))},Ca.once=function(e){return fr(2,e)},Ca.orderBy=function(e,t,a,n){return null==e?[]:(Ar(t)||(t=null==t?[]:[t]),Ar(a=n?void 0:a)||(a=null==a?[]:[a]),An(e,t,a))},Ca.over=$o,Ca.overArgs=xr,Ca.overEvery=Zo,Ca.overSome=el,Ca.partial=wr,Ca.partialRight=Or,Ca.partition=mr,Ca.pick=wo,Ca.pickBy=Oo,Ca.property=tl,Ca.propertyOf=function(e){return function(t){return null==e?void 0:un(e,t)}},Ca.pull=Ui,Ca.pullAll=Fi,Ca.pullAllBy=function(e,t,a){return e&&e.length&&t&&t.length?Nn(e,t,Ks(a,2)):e},Ca.pullAllWith=function(e,t,a){return e&&e.length&&t&&t.length?Nn(e,t,void 0,a):e},Ca.pullAt=qi,Ca.range=al,Ca.rangeRight=nl,Ca.rearg=Cr,Ca.reject=function(e,t){return(Ar(e)?dt:nn)(e,Tr(Ks(t,3)))},Ca.remove=function(e,t){var a=[];if(!e||!e.length)return a;var n=-1,s=[],i=e.length;for(t=Ks(t,3);++n<i;){var r=e[n];t(r,n,e)&&(a.push(r),s.push(n))}return Dn(e,s),a},Ca.rest=function(e,t){if("function"!=typeof e)throw new ve(i);return Bn(e,t=void 0===t?t:ao(t))},Ca.reverse=Gi,Ca.sampleSize=function(e,t,a){return t=(a?oi(e,t,a):void 0===t)?1:ao(t),(Ar(e)?Ua:Fn)(e,t)},Ca.set=function(e,t,a){return null==e?e:qn(e,t,a)},Ca.setWith=function(e,t,a,n){return n="function"==typeof n?n:void 0,null==e?e:qn(e,t,a,n)},Ca.shuffle=function(e){return(Ar(e)?Fa:Wn)(e)},Ca.slice=function(e,t,a){var n=null==e?0:e.length;return n?(a&&"number"!=typeof a&&oi(e,t,a)?(t=0,a=n):(t=null==t?0:ao(t),a=void 0===a?n:ao(a)),zn(e,t,a)):[]},Ca.sortBy=hr,Ca.sortedUniq=function(e){return e&&e.length?Xn(e):[]},Ca.sortedUniqBy=function(e,t){return e&&e.length?Xn(e,Ks(t,2)):[]},Ca.split=function(e,t,a){return a&&"number"!=typeof a&&oi(e,t,a)&&(t=a=void 0),(a=void 0===a?4294967295:a>>>0)?(e=ro(e))&&("string"==typeof t||null!=t&&!Vr(t))&&!(t=Qn(t))&&Ut(e)?cs(Yt(e),0,a):e.split(t,a):[]},Ca.spread=function(e,t){if("function"!=typeof e)throw new ve(i);return t=null==t?0:ia(ao(t),0),Bn((function(a){var n=a[t],s=cs(a,0,t);return n&&pt(s,n),it(e,this,s)}))},Ca.tail=function(e){var t=null==e?0:e.length;return t?zn(e,1,t):[]},Ca.take=function(e,t,a){return e&&e.length?zn(e,0,(t=a||void 0===t?1:ao(t))<0?0:t):[]},Ca.takeRight=function(e,t,a){var n=null==e?0:e.length;return n?zn(e,(t=n-(t=a||void 0===t?1:ao(t)))<0?0:t,n):[]},Ca.takeRightWhile=function(e,t){return e&&e.length?ts(e,Ks(t,3),!1,!0):[]},Ca.takeWhile=function(e,t){return e&&e.length?ts(e,Ks(t,3)):[]},Ca.tap=function(e,t){return t(e),e},Ca.throttle=function(e,t,a){var n=!0,s=!0;if("function"!=typeof e)throw new ve(i);return Gr(a)&&(n="leading"in a?!!a.leading:n,s="trailing"in a?!!a.trailing:s),_r(e,t,{leading:n,maxWait:t,trailing:s})},Ca.thru=tr,Ca.toArray=eo,Ca.toPairs=Co,Ca.toPairsIn=Mo,Ca.toPath=function(e){return Ar(e)?ht(e,wi):Kr(e)?[e]:bs(xi(ro(e)))},Ca.toPlainObject=io,Ca.transform=function(e,t,a){var n=Ar(e),s=n||Ir(e)||Qr(e);if(t=Ks(t,4),null==a){var i=e&&e.constructor;a=s?n?new i:[]:Gr(e)&&Ur(i)?Ma(ze(e)):{}}return(s?ot:ln)(e,(function(e,n,s){return t(a,e,n,s)})),a},Ca.unary=function(e){return gr(e,1)},Ca.union=Hi,Ca.unionBy=Wi,Ca.unionWith=zi,Ca.uniq=function(e){return e&&e.length?$n(e):[]},Ca.uniqBy=function(e,t){return e&&e.length?$n(e,Ks(t,2)):[]},Ca.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?$n(e,void 0,t):[]},Ca.unset=function(e,t){return null==e||Zn(e,t)},Ca.unzip=Yi,Ca.unzipWith=Vi,Ca.update=function(e,t,a){return null==e?e:es(e,t,rs(a))},Ca.updateWith=function(e,t,a,n){return n="function"==typeof n?n:void 0,null==e?e:es(e,t,rs(a),n)},Ca.values=ko,Ca.valuesIn=function(e){return null==e?[]:Pt(e,Eo(e))},Ca.without=Ji,Ca.words=Fo,Ca.wrap=function(e,t){return wr(rs(t),e)},Ca.xor=Xi,Ca.xorBy=Ki,Ca.xorWith=Qi,Ca.zip=$i,Ca.zipObject=function(e,t){return ss(e||[],t||[],Ga)},Ca.zipObjectDeep=function(e,t){return ss(e||[],t||[],qn)},Ca.zipWith=Zi,Ca.entries=Co,Ca.entriesIn=Mo,Ca.extend=lo,Ca.extendWith=co,Ko(Ca,Ca),Ca.add=rl,Ca.attempt=qo,Ca.camelCase=jo,Ca.capitalize=Po,Ca.ceil=ol,Ca.clamp=function(e,t,a){return void 0===a&&(a=t,t=void 0),void 0!==a&&(a=(a=so(a))==a?a:0),void 0!==t&&(t=(t=so(t))==t?t:0),Ja(so(e),t,a)},Ca.clone=function(e){return Xa(e,4)},Ca.cloneDeep=function(e){return Xa(e,5)},Ca.cloneDeepWith=function(e,t){return Xa(e,5,t="function"==typeof t?t:void 0)},Ca.cloneWith=function(e,t){return Xa(e,4,t="function"==typeof t?t:void 0)},Ca.conformsTo=function(e,t){return null==t||Ka(e,t,yo(t))},Ca.deburr=Ao,Ca.defaultTo=function(e,t){return null==e||e!=e?t:e},Ca.divide=ll,Ca.endsWith=function(e,t,a){e=ro(e),t=Qn(t);var n=e.length,s=a=void 0===a?n:Ja(ao(a),0,n);return(a-=t.length)>=0&&e.slice(a,s)==t},Ca.eq=Mr,Ca.escape=function(e){return(e=ro(e))&&U.test(e)?e.replace(L,Lt):e},Ca.escapeRegExp=function(e){return(e=ro(e))&&V.test(e)?e.replace(Y,"\\$&"):e},Ca.every=function(e,t,a){var n=Ar(e)?ct:tn;return a&&oi(e,t,a)&&(t=void 0),n(e,Ks(t,3))},Ca.find=sr,Ca.findIndex=Pi,Ca.findKey=function(e,t){return _t(e,Ks(t,3),ln)},Ca.findLast=ir,Ca.findLastIndex=Ai,Ca.findLastKey=function(e,t){return _t(e,Ks(t,3),cn)},Ca.floor=cl,Ca.forEach=rr,Ca.forEachRight=or,Ca.forIn=function(e,t){return null==e?e:rn(e,Ks(t,3),Eo)},Ca.forInRight=function(e,t){return null==e?e:on(e,Ks(t,3),Eo)},Ca.forOwn=function(e,t){return e&&ln(e,Ks(t,3))},Ca.forOwnRight=function(e,t){return e&&cn(e,Ks(t,3))},Ca.get=go,Ca.gt=kr,Ca.gte=jr,Ca.has=function(e,t){return null!=e&&ni(e,t,gn)},Ca.hasIn=fo,Ca.head=Ni,Ca.identity=Yo,Ca.includes=function(e,t,a,n){e=Nr(e)?e:ko(e),a=a&&!n?ao(a):0;var s=e.length;return a<0&&(a=ia(s+a,0)),Xr(e)?a<=s&&e.indexOf(t,a)>-1:!!s&&Et(e,t,a)>-1},Ca.indexOf=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var s=null==a?0:ao(a);return s<0&&(s=ia(n+s,0)),Et(e,t,s)},Ca.inRange=function(e,t,a){return t=to(t),void 0===a?(a=t,t=0):a=to(a),function(e,t,a){return e>=ra(t,a)&&e<ia(t,a)}(e=so(e),t,a)},Ca.invoke=_o,Ca.isArguments=Pr,Ca.isArray=Ar,Ca.isArrayBuffer=Rr,Ca.isArrayLike=Nr,Ca.isArrayLikeObject=Dr,Ca.isBoolean=function(e){return!0===e||!1===e||Hr(e)&&hn(e)==d},Ca.isBuffer=Ir,Ca.isDate=Lr,Ca.isElement=function(e){return Hr(e)&&1===e.nodeType&&!Yr(e)},Ca.isEmpty=function(e){if(null==e)return!0;if(Nr(e)&&(Ar(e)||"string"==typeof e||"function"==typeof e.splice||Ir(e)||Qr(e)||Pr(e)))return!e.length;var t=ai(e);if(t==g||t==_)return!e.size;if(ui(e))return!xn(e).length;for(var a in e)if(xe.call(e,a))return!1;return!0},Ca.isEqual=function(e,t){return yn(e,t)},Ca.isEqualWith=function(e,t,a){var n=(a="function"==typeof a?a:void 0)?a(e,t):void 0;return void 0===n?yn(e,t,void 0,a):!!n},Ca.isError=Br,Ca.isFinite=function(e){return"number"==typeof e&&aa(e)},Ca.isFunction=Ur,Ca.isInteger=Fr,Ca.isLength=qr,Ca.isMap=Wr,Ca.isMatch=function(e,t){return e===t||En(e,t,$s(t))},Ca.isMatchWith=function(e,t,a){return a="function"==typeof a?a:void 0,En(e,t,$s(t),a)},Ca.isNaN=function(e){return zr(e)&&e!=+e},Ca.isNative=function(e){if(di(e))throw new me("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sn(e)},Ca.isNil=function(e){return null==e},Ca.isNull=function(e){return null===e},Ca.isNumber=zr,Ca.isObject=Gr,Ca.isObjectLike=Hr,Ca.isPlainObject=Yr,Ca.isRegExp=Vr,Ca.isSafeInteger=function(e){return Fr(e)&&e>=-9007199254740991&&e<=9007199254740991},Ca.isSet=Jr,Ca.isString=Xr,Ca.isSymbol=Kr,Ca.isTypedArray=Qr,Ca.isUndefined=function(e){return void 0===e},Ca.isWeakMap=function(e){return Hr(e)&&ai(e)==S},Ca.isWeakSet=function(e){return Hr(e)&&"[object WeakSet]"==hn(e)},Ca.join=function(e,t){return null==e?"":na.call(e,t)},Ca.kebabCase=Ro,Ca.last=Bi,Ca.lastIndexOf=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var s=n;return void 0!==a&&(s=(s=ao(a))<0?ia(n+s,0):ra(s,n-1)),t==t?function(e,t,a){for(var n=a+1;n--;)if(e[n]===t)return n;return n}(e,t,s):yt(e,Tt,s,!0)},Ca.lowerCase=No,Ca.lowerFirst=Do,Ca.lt=$r,Ca.lte=Zr,Ca.max=function(e){return e&&e.length?an(e,Yo,pn):void 0},Ca.maxBy=function(e,t){return e&&e.length?an(e,Ks(t,2),pn):void 0},Ca.mean=function(e){return xt(e,Yo)},Ca.meanBy=function(e,t){return xt(e,Ks(t,2))},Ca.min=function(e){return e&&e.length?an(e,Yo,On):void 0},Ca.minBy=function(e,t){return e&&e.length?an(e,Ks(t,2),On):void 0},Ca.stubArray=sl,Ca.stubFalse=il,Ca.stubObject=function(){return{}},Ca.stubString=function(){return""},Ca.stubTrue=function(){return!0},Ca.multiply=ul,Ca.nth=function(e,t){return e&&e.length?Pn(e,ao(t)):void 0},Ca.noConflict=function(){return Ve._===this&&(Ve._=ke),this},Ca.noop=Qo,Ca.now=pr,Ca.pad=function(e,t,a){e=ro(e);var n=(t=ao(t))?zt(e):0;if(!t||n>=t)return e;var s=(t-n)/2;return As(Zt(s),a)+e+As($t(s),a)},Ca.padEnd=function(e,t,a){e=ro(e);var n=(t=ao(t))?zt(e):0;return t&&n<t?e+As(t-n,a):e},Ca.padStart=function(e,t,a){e=ro(e);var n=(t=ao(t))?zt(e):0;return t&&n<t?As(t-n,a)+e:e},Ca.parseInt=function(e,t,a){return a||null==t?t=0:t&&(t=+t),la(ro(e).replace(X,""),t||0)},Ca.random=function(e,t,a){if(a&&"boolean"!=typeof a&&oi(e,t,a)&&(t=a=void 0),void 0===a&&("boolean"==typeof t?(a=t,t=void 0):"boolean"==typeof e&&(a=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=to(e),void 0===t?(t=e,e=0):t=to(t)),e>t){var n=e;e=t,t=n}if(a||e%1||t%1){var s=ca();return ra(e+s*(t-e+He("1e-"+((s+"").length-1))),t)}return In(e,t)},Ca.reduce=function(e,t,a){var n=Ar(e)?gt:Ct,s=arguments.length<3;return n(e,Ks(t,4),a,s,Za)},Ca.reduceRight=function(e,t,a){var n=Ar(e)?ft:Ct,s=arguments.length<3;return n(e,Ks(t,4),a,s,en)},Ca.repeat=function(e,t,a){return t=(a?oi(e,t,a):void 0===t)?1:ao(t),Ln(ro(e),t)},Ca.replace=function(){var e=arguments,t=ro(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Ca.result=function(e,t,a){var n=-1,s=(t=os(t,e)).length;for(s||(s=1,e=void 0);++n<s;){var i=null==e?void 0:e[wi(t[n])];void 0===i&&(n=s,i=a),e=Ur(i)?i.call(e):i}return e},Ca.round=ml,Ca.runInContext=e,Ca.sample=function(e){return(Ar(e)?Ba:Un)(e)},Ca.size=function(e){if(null==e)return 0;if(Nr(e))return Xr(e)?zt(e):e.length;var t=ai(e);return t==g||t==_?e.size:xn(e).length},Ca.snakeCase=Io,Ca.some=function(e,t,a){var n=Ar(e)?bt:Yn;return a&&oi(e,t,a)&&(t=void 0),n(e,Ks(t,3))},Ca.sortedIndex=function(e,t){return Vn(e,t)},Ca.sortedIndexBy=function(e,t,a){return Jn(e,t,Ks(a,2))},Ca.sortedIndexOf=function(e,t){var a=null==e?0:e.length;if(a){var n=Vn(e,t);if(n<a&&Mr(e[n],t))return n}return-1},Ca.sortedLastIndex=function(e,t){return Vn(e,t,!0)},Ca.sortedLastIndexBy=function(e,t,a){return Jn(e,t,Ks(a,2),!0)},Ca.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var a=Vn(e,t,!0)-1;if(Mr(e[a],t))return a}return-1},Ca.startCase=Lo,Ca.startsWith=function(e,t,a){return e=ro(e),a=null==a?0:Ja(ao(a),0,e.length),t=Qn(t),e.slice(a,a+t.length)==t},Ca.subtract=hl,Ca.sum=function(e){return e&&e.length?Mt(e,Yo):0},Ca.sumBy=function(e,t){return e&&e.length?Mt(e,Ks(t,2)):0},Ca.template=function(e,t,a){var n=Ca.templateSettings;a&&oi(e,t,a)&&(t=void 0),e=ro(e),t=co({},t,n,Fs);var s,i,r=co({},t.imports,n.imports,Fs),o=yo(r),l=Pt(r,o),c=0,d=t.interpolate||de,u="__p += '",m=fe((t.escape||de).source+"|"+d.source+"|"+(d===G?ae:de).source+"|"+(t.evaluate||de).source+"|$","g"),h="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ue+"]")+"\n";e.replace(m,(function(t,a,n,r,o,l){return n||(n=r),u+=e.slice(c,l).replace(ue,Bt),a&&(s=!0,u+="' +\n__e("+a+") +\n'"),o&&(i=!0,u+="';\n"+o+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),u+="';\n";var p=xe.call(t,"variable")&&t.variable;p||(u="with (obj) {\n"+u+"\n}\n"),u=(i?u.replace(R,""):u).replace(N,"$1").replace(D,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=qo((function(){return he(o,h+"return "+u).apply(void 0,l)}));if(g.source=u,Br(g))throw g;return g},Ca.times=function(e,t){if((e=ao(e))<1||e>9007199254740991)return[];var a=4294967295,n=ra(e,4294967295);e-=4294967295;for(var s=kt(n,t=Ks(t));++a<e;)t(a);return s},Ca.toFinite=to,Ca.toInteger=ao,Ca.toLength=no,Ca.toLower=function(e){return ro(e).toLowerCase()},Ca.toNumber=so,Ca.toSafeInteger=function(e){return e?Ja(ao(e),-9007199254740991,9007199254740991):0===e?e:0},Ca.toString=ro,Ca.toUpper=function(e){return ro(e).toUpperCase()},Ca.trim=function(e,t,a){if((e=ro(e))&&(a||void 0===t))return e.replace(J,"");if(!e||!(t=Qn(t)))return e;var n=Yt(e),s=Yt(t);return cs(n,Rt(n,s),Nt(n,s)+1).join("")},Ca.trimEnd=function(e,t,a){if((e=ro(e))&&(a||void 0===t))return e.replace(K,"");if(!e||!(t=Qn(t)))return e;var n=Yt(e);return cs(n,0,Nt(n,Yt(t))+1).join("")},Ca.trimStart=function(e,t,a){if((e=ro(e))&&(a||void 0===t))return e.replace(X,"");if(!e||!(t=Qn(t)))return e;var n=Yt(e);return cs(n,Rt(n,Yt(t))).join("")},Ca.truncate=function(e,t){var a=30,n="...";if(Gr(t)){var s="separator"in t?t.separator:s;a="length"in t?ao(t.length):a,n="omission"in t?Qn(t.omission):n}var i=(e=ro(e)).length;if(Ut(e)){var r=Yt(e);i=r.length}if(a>=i)return e;var o=a-zt(n);if(o<1)return n;var l=r?cs(r,0,o).join(""):e.slice(0,o);if(void 0===s)return l+n;if(r&&(o+=l.length-o),Vr(s)){if(e.slice(o).search(s)){var c,d=l;for(s.global||(s=fe(s.source,ro(ne.exec(s))+"g")),s.lastIndex=0;c=s.exec(d);)var u=c.index;l=l.slice(0,void 0===u?o:u)}}else if(e.indexOf(Qn(s),o)!=o){var m=l.lastIndexOf(s);m>-1&&(l=l.slice(0,m))}return l+n},Ca.unescape=function(e){return(e=ro(e))&&B.test(e)?e.replace(I,Vt):e},Ca.uniqueId=function(e){var t=++we;return ro(e)+t},Ca.upperCase=Bo,Ca.upperFirst=Uo,Ca.each=rr,Ca.eachRight=or,Ca.first=Ni,Ko(Ca,(dl={},ln(Ca,(function(e,t){xe.call(Ca.prototype,t)||(dl[t]=e)})),dl),{chain:!1}),Ca.VERSION="4.17.15",ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ca[e].placeholder=Ca})),ot(["drop","take"],(function(e,t){Pa.prototype[e]=function(a){a=void 0===a?1:ia(ao(a),0);var n=this.__filtered__&&!t?new Pa(this):this.clone();return n.__filtered__?n.__takeCount__=ra(a,n.__takeCount__):n.__views__.push({size:ra(a,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},Pa.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ot(["filter","map","takeWhile"],(function(e,t){var a=t+1,n=1==a||3==a;Pa.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ks(e,3),type:a}),t.__filtered__=t.__filtered__||n,t}})),ot(["head","last"],(function(e,t){var a="take"+(t?"Right":"");Pa.prototype[e]=function(){return this[a](1).value()[0]}})),ot(["initial","tail"],(function(e,t){var a="drop"+(t?"":"Right");Pa.prototype[e]=function(){return this.__filtered__?new Pa(this):this[a](1)}})),Pa.prototype.compact=function(){return this.filter(Yo)},Pa.prototype.find=function(e){return this.filter(e).head()},Pa.prototype.findLast=function(e){return this.reverse().find(e)},Pa.prototype.invokeMap=Bn((function(e,t){return"function"==typeof e?new Pa(this):this.map((function(a){return vn(a,e,t)}))})),Pa.prototype.reject=function(e){return this.filter(Tr(Ks(e)))},Pa.prototype.slice=function(e,t){e=ao(e);var a=this;return a.__filtered__&&(e>0||t<0)?new Pa(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),void 0!==t&&(a=(t=ao(t))<0?a.dropRight(-t):a.take(t-e)),a)},Pa.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pa.prototype.toArray=function(){return this.take(4294967295)},ln(Pa.prototype,(function(e,t){var a=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=Ca[n?"take"+("last"==t?"Right":""):t],i=n||/^find/.test(t);s&&(Ca.prototype[t]=function(){var t=this.__wrapped__,r=n?[1]:arguments,o=t instanceof Pa,l=r[0],c=o||Ar(t),d=function(e){var t=s.apply(Ca,pt([e],r));return n&&u?t[0]:t};c&&a&&"function"==typeof l&&1!=l.length&&(o=c=!1);var u=this.__chain__,m=!!this.__actions__.length,h=i&&!u,p=o&&!m;if(!i&&c){t=p?t:new Pa(this);var g=e.apply(t,r);return g.__actions__.push({func:tr,args:[d],thisArg:void 0}),new ja(g,u)}return h&&p?e.apply(this,r):(g=this.thru(d),h?n?g.value()[0]:g.value():g)})})),ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_e[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Ca.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var s=this.value();return t.apply(Ar(s)?s:[],e)}return this[a]((function(a){return t.apply(Ar(a)?a:[],e)}))}})),ln(Pa.prototype,(function(e,t){var a=Ca[t];if(a){var n=a.name+"";xe.call(va,n)||(va[n]=[]),va[n].push({name:t,func:a})}})),va[Ms(void 0,2).name]=[{name:"wrapper",func:void 0}],Pa.prototype.clone=function(){var e=new Pa(this.__wrapped__);return e.__actions__=bs(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=bs(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=bs(this.__views__),e},Pa.prototype.reverse=function(){if(this.__filtered__){var e=new Pa(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Pa.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,a=Ar(e),n=t<0,s=a?e.length:0,i=function(e,t,a){var n=-1,s=a.length;for(;++n<s;){var i=a[n],r=i.size;switch(i.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=ra(t,e+r);break;case"takeRight":e=ia(e,t-r)}}return{start:e,end:t}}(0,s,this.__views__),r=i.start,o=i.end,l=o-r,c=n?o:r-1,d=this.__iteratees__,u=d.length,m=0,h=ra(l,this.__takeCount__);if(!a||!n&&s==l&&h==l)return as(e,this.__actions__);var p=[];e:for(;l--&&m<h;){for(var g=-1,f=e[c+=t];++g<u;){var b=d[g],v=b.iteratee,_=b.type,y=v(f);if(2==_)f=y;else if(!y){if(1==_)continue e;break e}}p[m++]=f}return p},Ca.prototype.at=ar,Ca.prototype.chain=function(){return er(this)},Ca.prototype.commit=function(){return new ja(this.value(),this.__chain__)},Ca.prototype.next=function(){void 0===this.__values__&&(this.__values__=eo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Ca.prototype.plant=function(e){for(var t,a=this;a instanceof ka;){var n=Ci(a);n.__index__=0,n.__values__=void 0,t?s.__wrapped__=n:t=n;var s=n;a=a.__wrapped__}return s.__wrapped__=e,t},Ca.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Pa){var t=e;return this.__actions__.length&&(t=new Pa(this)),(t=t.reverse()).__actions__.push({func:tr,args:[Gi],thisArg:void 0}),new ja(t,this.__chain__)}return this.thru(Gi)},Ca.prototype.toJSON=Ca.prototype.valueOf=Ca.prototype.value=function(){return as(this.__wrapped__,this.__actions__)},Ca.prototype.first=Ca.prototype.head,$e&&(Ca.prototype[$e]=function(){return this}),Ca}();Ve._=Jt,void 0===(s=function(){return Jt}.call(t,a,t,n))||(n.exports=s)}).call(this)}).call(this,a(25),a(152)(e))},1236:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(6),s=a.n(n);class i extends s.a.PureComponent{render(){return s.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},s.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},s.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},s.a.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},s.a.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},s.a.createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},s.a.createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},s.a.createElement("g",{id:"data-table/1st/row-checkbox-label-base"},s.a.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},s.a.createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"})))))))))))}}},1262:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBotAccounts=function(e){return e.entities.bots.accounts}},1292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),s=a(18),i=a(5),r=a(10),o=a(65),l=a(44);t.getScheme=function(e){return o.bindClientFunc({clientFunc:s.Client4.getScheme,onSuccess:[i.SchemeTypes.RECEIVED_SCHEME],params:[e]})},t.getSchemes=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=r.General.PAGE_SIZE_DEFAULT),o.bindClientFunc({clientFunc:s.Client4.getSchemes,onSuccess:[i.SchemeTypes.RECEIVED_SCHEMES],params:[e,t,a]})},t.createScheme=function(e){return o.bindClientFunc({clientFunc:s.Client4.createScheme,onSuccess:[i.SchemeTypes.CREATED_SCHEME],params:[e]})},t.deleteScheme=function(e){var t=this;return function(a,r){return n.__awaiter(t,void 0,void 0,(function(){var t,c;return n.__generator(this,(function(n){switch(n.label){case 0:t=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s.Client4.deleteScheme(e)];case 2:return t=n.sent(),[3,4];case 3:return c=n.sent(),o.forceLogoutIfNecessary(c,a,r),a(l.logError(c)),[2,{error:c}];case 4:return a({type:i.SchemeTypes.DELETED_SCHEME,data:{schemeId:e}}),[2,{data:t}]}}))}))}},t.patchScheme=function(e,t){return o.bindClientFunc({clientFunc:s.Client4.patchScheme,onSuccess:[i.SchemeTypes.PATCHED_SCHEME],params:[e,t]})},t.getSchemeTeams=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=r.General.PAGE_SIZE_DEFAULT),o.bindClientFunc({clientFunc:s.Client4.getSchemeTeams,onSuccess:[i.SchemeTypes.RECEIVED_SCHEME_TEAMS],params:[e,t,a]})},t.getSchemeChannels=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=r.General.PAGE_SIZE_DEFAULT),o.bindClientFunc({clientFunc:s.Client4.getSchemeChannels,onSuccess:[i.SchemeTypes.RECEIVED_SCHEME_CHANNELS],params:[e,t,a]})}},1293:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),s=a(22),i=a(1968),r=a(12),o=a(19);function l(e){return e.entities.schemes.schemes}function c(e,t){return l(e)[t]}t.getSchemes=l,t.getScheme=c,t.makeGetSchemeChannels=function(){return s.createSelector(r.getAllChannels,(function(e,t){return c(e,t.schemeId)}),(function(e,t){if(!t)return[];if(t.scope===i.ScopeTypes.TEAM){var a="Not implemented: scheme '"+t.id+"' is team-scope but 'getSchemeChannels' only accepts channel-scoped schemes.";return console.log(a),[]}var s=[];return Object.entries(e).forEach((function(e){var a=n.__read(e,2)[1];a.scheme_id===t.id&&s.push(a)})),s}))},t.makeGetSchemeTeams=function(){return s.createSelector(o.getTeams,(function(e,t){return c(e,t.schemeId)}),(function(e,t){if(!t)return[];if(t.scope===i.ScopeTypes.CHANNEL){var a="Error: scheme '"+t.id+"' is channel-scoped but 'getSchemeChannels' only accepts team-scoped schemes.";return console.log(a),[]}var s=[];return Object.entries(e).forEach((function(e){var a=n.__read(e,2)[1];a.scheme_id===t.id&&s.push(a)})),s}))}},1294:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(18),s=a(5),i=a(65);t.createBot=function(e){return i.bindClientFunc({clientFunc:n.Client4.createBot,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNT,params:[e]})},t.patchBot=function(e,t){return i.bindClientFunc({clientFunc:n.Client4.patchBot,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNT,params:[e,t]})},t.loadBot=function(e){return i.bindClientFunc({clientFunc:n.Client4.getBot,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNT,params:[e]})},t.loadBots=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=20),i.bindClientFunc({clientFunc:n.Client4.getBotsIncludeDeleted,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNTS,params:[e,t]})},t.disableBot=function(e){return i.bindClientFunc({clientFunc:n.Client4.disableBot,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNT,params:[e]})},t.enableBot=function(e){return i.bindClientFunc({clientFunc:n.Client4.enableBot,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNT,params:[e]})},t.assignBot=function(e,t){return i.bindClientFunc({clientFunc:n.Client4.assignBot,onSuccess:s.BotTypes.RECEIVED_BOT_ACCOUNT,params:[e,t]})}},1506:function(e,t,a){
/*!
 * Chart.js v2.8.0
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={rgb2hsl:a,rgb2hsv:n,rgb2hwb:s,rgb2cmyk:i,rgb2keyword:o,rgb2xyz:l,rgb2lab:c,rgb2lch:function(e){return _(c(e))},hsl2rgb:d,hsl2hsv:function(e){var t=e[0],a=e[1]/100,n=e[2]/100;return 0===n?[0,0,0]:[t,2*(a*=(n*=2)<=1?n:2-n)/(n+a)*100,(n+a)/2*100]},hsl2hwb:function(e){return s(d(e))},hsl2cmyk:function(e){return i(d(e))},hsl2keyword:function(e){return o(d(e))},hsv2rgb:u,hsv2hsl:function(e){var t,a,n=e[0],s=e[1]/100,i=e[2]/100;return t=s*i,[n,100*(t=(t/=(a=(2-s)*i)<=1?a:2-a)||0),100*(a/=2)]},hsv2hwb:function(e){return s(u(e))},hsv2cmyk:function(e){return i(u(e))},hsv2keyword:function(e){return o(u(e))},hwb2rgb:m,hwb2hsl:function(e){return a(m(e))},hwb2hsv:function(e){return n(m(e))},hwb2cmyk:function(e){return i(m(e))},hwb2keyword:function(e){return o(m(e))},cmyk2rgb:h,cmyk2hsl:function(e){return a(h(e))},cmyk2hsv:function(e){return n(h(e))},cmyk2hwb:function(e){return s(h(e))},cmyk2keyword:function(e){return o(h(e))},keyword2rgb:S,keyword2hsl:function(e){return a(S(e))},keyword2hsv:function(e){return n(S(e))},keyword2hwb:function(e){return s(S(e))},keyword2cmyk:function(e){return i(S(e))},keyword2lab:function(e){return c(S(e))},keyword2xyz:function(e){return l(S(e))},xyz2rgb:p,xyz2lab:f,xyz2lch:function(e){return _(f(e))},lab2xyz:v,lab2rgb:y,lab2lch:_,lch2lab:E,lch2xyz:function(e){return v(E(e))},lch2rgb:function(e){return y(E(e))}};function a(e){var t,a,n=e[0]/255,s=e[1]/255,i=e[2]/255,r=Math.min(n,s,i),o=Math.max(n,s,i),l=o-r;return o==r?t=0:n==o?t=(s-i)/l:s==o?t=2+(i-n)/l:i==o&&(t=4+(n-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),a=(r+o)/2,[t,100*(o==r?0:a<=.5?l/(o+r):l/(2-o-r)),100*a]}function n(e){var t,a,n=e[0],s=e[1],i=e[2],r=Math.min(n,s,i),o=Math.max(n,s,i),l=o-r;return a=0==o?0:l/o*1e3/10,o==r?t=0:n==o?t=(s-i)/l:s==o?t=2+(i-n)/l:i==o&&(t=4+(n-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,a,o/255*1e3/10]}function s(e){var t=e[0],n=e[1],s=e[2];return[a(e)[0],1/255*Math.min(t,Math.min(n,s))*100,100*(s=1-1/255*Math.max(t,Math.max(n,s)))]}function i(e){var t,a=e[0]/255,n=e[1]/255,s=e[2]/255;return[100*((1-a-(t=Math.min(1-a,1-n,1-s)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]}function o(e){return x[JSON.stringify(e)]}function l(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*a+.0722*n),100*(.0193*t+.1192*a+.9505*n)]}function c(e){var t=l(e),a=t[0],n=t[1],s=t[2];return n/=100,s/=108.883,a=(a/=95.047)>.008856?Math.pow(a,1/3):7.787*a+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(a-n),200*(n-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]}function d(e){var t,a,n,s,i,r=e[0]/360,o=e[1]/100,l=e[2]/100;if(0==o)return[i=255*l,i,i];t=2*l-(a=l<.5?l*(1+o):l+o-l*o),s=[0,0,0];for(var c=0;c<3;c++)(n=r+1/3*-(c-1))<0&&n++,n>1&&n--,i=6*n<1?t+6*(a-t)*n:2*n<1?a:3*n<2?t+(a-t)*(2/3-n)*6:t,s[c]=255*i;return s}function u(e){var t=e[0]/60,a=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,i=t-Math.floor(t),r=255*n*(1-a),o=255*n*(1-a*i),l=255*n*(1-a*(1-i));switch(n*=255,s){case 0:return[n,l,r];case 1:return[o,n,r];case 2:return[r,n,l];case 3:return[r,o,n];case 4:return[l,r,n];case 5:return[n,r,o]}}function m(e){var t,a,n,s,i=e[0]/360,o=e[1]/100,l=e[2]/100,c=o+l;switch(c>1&&(o/=c,l/=c),n=6*i-(t=Math.floor(6*i)),0!=(1&t)&&(n=1-n),s=o+n*((a=1-l)-o),t){default:case 6:case 0:r=a,g=s,b=o;break;case 1:r=s,g=a,b=o;break;case 2:r=o,g=a,b=s;break;case 3:r=o,g=s,b=a;break;case 4:r=s,g=o,b=a;break;case 5:r=a,g=o,b=s}return[255*r,255*g,255*b]}function h(e){var t=e[0]/100,a=e[1]/100,n=e[2]/100,s=e[3]/100;return[255*(1-Math.min(1,t*(1-s)+s)),255*(1-Math.min(1,a*(1-s)+s)),255*(1-Math.min(1,n*(1-s)+s))]}function p(e){var t,a,n,s=e[0]/100,i=e[1]/100,r=e[2]/100;return a=-.9689*s+1.8758*i+.0415*r,n=.0557*s+-.204*i+1.057*r,t=(t=3.2406*s+-1.5372*i+-.4986*r)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(a=Math.min(Math.max(0,a),1)),255*(n=Math.min(Math.max(0,n),1))]}function f(e){var t=e[0],a=e[1],n=e[2];return a/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,500*(t-a),200*(a-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function v(e){var t,a,n,s,i=e[0],r=e[1],o=e[2];return i<=8?s=(a=100*i/903.3)/100*7.787+16/116:(a=100*Math.pow((i+16)/116,3),s=Math.pow(a/100,1/3)),[t=t/95.047<=.008856?t=95.047*(r/500+s-16/116)/7.787:95.047*Math.pow(r/500+s,3),a,n=n/108.883<=.008859?n=108.883*(s-o/200-16/116)/7.787:108.883*Math.pow(s-o/200,3)]}function _(e){var t,a=e[0],n=e[1],s=e[2];return(t=360*Math.atan2(s,n)/2/Math.PI)<0&&(t+=360),[a,Math.sqrt(n*n+s*s),t]}function y(e){return p(v(e))}function E(e){var t,a=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[a,n*Math.cos(t),n*Math.sin(t)]}function S(e){return T[e]}var T={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},x={};for(var w in T)x[JSON.stringify(T[w])]=w;var O=function(){return new P};for(var C in t){O[C+"Raw"]=function(e){return function(a){return"number"==typeof a&&(a=Array.prototype.slice.call(arguments)),t[e](a)}}(C);var M=/(\w+)2(\w+)/.exec(C),k=M[1],j=M[2];(O[k]=O[k]||{})[j]=O[C]=function(e){return function(a){"number"==typeof a&&(a=Array.prototype.slice.call(arguments));var n=t[e](a);if("string"==typeof n||void 0===n)return n;for(var s=0;s<n.length;s++)n[s]=Math.round(n[s]);return n}}(C)}var P=function(){this.convs={}};P.prototype.routeSpace=function(e,t){var a=t[0];return void 0===a?this.getValues(e):("number"==typeof a&&(a=Array.prototype.slice.call(t)),this.setValues(e,a))},P.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},P.prototype.getValues=function(e){var t=this.convs[e];if(!t){var a=this.space,n=this.convs[a];t=O[a][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(e){P.prototype[e]=function(t){return this.routeSpace(e,arguments)}}));var A=O,R={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},N={getRgba:D,getHsla:I,getRgb:function(e){var t=D(e);return t&&t.slice(0,3)},getHsl:function(e){var t=I(e);return t&&t.slice(0,3)},getHwb:L,getAlpha:function(e){var t=D(e);return t||(t=I(e))||(t=L(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+G(e[0])+G(e[1])+G(e[2])+(t>=0&&t<1?G(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?B(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:B,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return U(e,t);var a=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),s=Math.round(e[2]/255*100);return"rgb("+a+"%, "+n+"%, "+s+"%)"},percentaString:U,hslString:function(e,t){return t<1||e[3]&&e[3]<1?F(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:F,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return H[e.slice(0,3)]}};function D(e){if(e){var t=[0,0,0],a=1,n=e.match(/^#([a-fA-F0-9]{3,4})$/i),s="";if(n){s=(n=n[1])[3];for(var i=0;i<t.length;i++)t[i]=parseInt(n[i]+n[i],16);s&&(a=Math.round(parseInt(s+s,16)/255*100)/100)}else if(n=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(s=n[2],n=n[1],i=0;i<t.length;i++)t[i]=parseInt(n.slice(2*i,2*i+2),16);s&&(a=Math.round(parseInt(s,16)/255*100)/100)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(i=0;i<t.length;i++)t[i]=parseInt(n[i+1]);a=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(i=0;i<t.length;i++)t[i]=Math.round(2.55*parseFloat(n[i+1]));a=parseFloat(n[4])}else if(n=e.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=R[n[1]]))return}for(i=0;i<t.length;i++)t[i]=q(t[i],0,255);return a=a||0==a?q(a,0,1):1,t[3]=a,t}}function I(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var a=parseFloat(t[4]);return[q(parseInt(t[1]),0,360),q(parseFloat(t[2]),0,100),q(parseFloat(t[3]),0,100),q(isNaN(a)?1:a,0,1)]}}}function L(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var a=parseFloat(t[4]);return[q(parseInt(t[1]),0,360),q(parseFloat(t[2]),0,100),q(parseFloat(t[3]),0,100),q(isNaN(a)?1:a,0,1)]}}}function B(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function U(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function F(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function q(e,t,a){return Math.min(Math.max(t,e),a)}function G(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var H={};for(var W in R)H[R[W]]=W;var z=function(e){return e instanceof z?e:this instanceof z?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=N.getRgba(e))?this.setValues("rgb",t):(t=N.getHsla(e))?this.setValues("hsl",t):(t=N.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new z(e);var t};z.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return N.hexString(this.values.rgb)},rgbString:function(){return N.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return N.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return N.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return N.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return N.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return N.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return N.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],a=0;a<e.length;a++){var n=e[a]/255;t[a]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),a=e.luminosity();return t>a?(t+.05)/(a+.05):(a+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,a=(t[0]+e)%360;return t[0]=a<0?360+a:a,this.setValues("hsl",t),this},mix:function(e,t){var a=e,n=void 0===t?.5:t,s=2*n-1,i=this.alpha()-a.alpha(),r=((s*i==-1?s:(s+i)/(1+s*i))+1)/2,o=1-r;return this.rgb(r*this.red()+o*a.red(),r*this.green()+o*a.green(),r*this.blue()+o*a.blue()).alpha(this.alpha()*n+a.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var e,t,a=new z,n=this.values,s=a.values;for(var i in n)n.hasOwnProperty(i)&&(e=n[i],"[object Array]"===(t={}.toString.call(e))?s[i]=e.slice(0):"[object Number]"===t?s[i]=e:console.error("unexpected color value:",e));return a}},z.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},z.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},z.prototype.getValues=function(e){for(var t=this.values,a={},n=0;n<e.length;n++)a[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(a.a=t.alpha),a},z.prototype.setValues=function(e,t){var a,n,s=this.values,i=this.spaces,r=this.maxes,o=1;if(this.valid=!0,"alpha"===e)o=t;else if(t.length)s[e]=t.slice(0,e.length),o=t[e.length];else if(void 0!==t[e.charAt(0)]){for(a=0;a<e.length;a++)s[e][a]=t[e.charAt(a)];o=t.a}else if(void 0!==t[i[e][0]]){var l=i[e];for(a=0;a<e.length;a++)s[e][a]=t[l[a]];o=t.alpha}if(s.alpha=Math.max(0,Math.min(1,void 0===o?s.alpha:o)),"alpha"===e)return!1;for(a=0;a<e.length;a++)n=Math.max(0,Math.min(r[e][a],s[e][a])),s[e][a]=Math.round(n);for(var c in i)c!==e&&(s[c]=A[e][c](s[e]));return!0},z.prototype.setSpace=function(e,t){var a=t[0];return void 0===a?this.getValues(e):("number"==typeof a&&(a=Array.prototype.slice.call(t)),this.setValues(e,a),this)},z.prototype.setChannel=function(e,t,a){var n=this.values[e];return void 0===a?n[t]:(a===n[t]||(n[t]=a,this.setValues(e,n)),this)},"undefined"!=typeof window&&(window.Color=z);var Y,V=z,J={noop:function(){},uid:(Y=0,function(){return Y++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,a){return J.valueOrDefault(J.isArray(e)?e[t]:e,a)},callback:function(e,t,a){if(e&&"function"==typeof e.call)return e.apply(a,t)},each:function(e,t,a,n){var s,i,r;if(J.isArray(e))if(i=e.length,n)for(s=i-1;s>=0;s--)t.call(a,e[s],s);else for(s=0;s<i;s++)t.call(a,e[s],s);else if(J.isObject(e))for(i=(r=Object.keys(e)).length,s=0;s<i;s++)t.call(a,e[r[s]],r[s])},arrayEquals:function(e,t){var a,n,s,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,n=e.length;a<n;++a)if(s=e[a],i=t[a],s instanceof Array&&i instanceof Array){if(!J.arrayEquals(s,i))return!1}else if(s!==i)return!1;return!0},clone:function(e){if(J.isArray(e))return e.map(J.clone);if(J.isObject(e)){for(var t={},a=Object.keys(e),n=a.length,s=0;s<n;++s)t[a[s]]=J.clone(e[a[s]]);return t}return e},_merger:function(e,t,a,n){var s=t[e],i=a[e];J.isObject(s)&&J.isObject(i)?J.merge(s,i,n):t[e]=J.clone(i)},_mergerIf:function(e,t,a){var n=t[e],s=a[e];J.isObject(n)&&J.isObject(s)?J.mergeIf(n,s):t.hasOwnProperty(e)||(t[e]=J.clone(s))},merge:function(e,t,a){var n,s,i,r,o,l=J.isArray(t)?t:[t],c=l.length;if(!J.isObject(e))return e;for(n=(a=a||{}).merger||J._merger,s=0;s<c;++s)if(t=l[s],J.isObject(t))for(o=0,r=(i=Object.keys(t)).length;o<r;++o)n(i[o],e,t,a);return e},mergeIf:function(e,t){return J.merge(e,t,{merger:J._mergerIf})},extend:function(e){for(var t=function(t,a){e[a]=t},a=1,n=arguments.length;a<n;++a)J.each(arguments[a],t);return e},inherits:function(e){var t=this,a=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=a};return n.prototype=t.prototype,a.prototype=new n,a.extend=J.inherits,e&&J.extend(a.prototype,e),a.__super__=t.prototype,a}},X=J;J.callCallback=J.callback,J.indexOf=function(e,t,a){return Array.prototype.indexOf.call(e,t,a)},J.getValueOrDefault=J.valueOrDefault,J.getValueAtIndexOrDefault=J.valueAtIndexOrDefault;var K={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:1===e?1:(a||(a=.3),n<1?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a))},easeOutElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:1===e?1:(a||(a=.3),n<1?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/a)+1)},easeInOutElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:2==(e/=.5)?1:(a||(a=.45),n<1?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-K.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*K.easeInBounce(2*e):.5*K.easeOutBounce(2*e-1)+.5}},Q={effects:K};X.easingEffects=K;var $=Math.PI,Z=$/180,ee=2*$,te=$/2,ae=$/4,ne=2*$/3,se={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,a,n,s,i){if(i){var r=Math.min(i,s/2,n/2),o=t+r,l=a+r,c=t+n-r,d=a+s-r;e.moveTo(t,l),o<c&&l<d?(e.arc(o,l,r,-$,-te),e.arc(c,l,r,-te,0),e.arc(c,d,r,0,te),e.arc(o,d,r,te,$)):o<c?(e.moveTo(o,a),e.arc(c,l,r,-te,te),e.arc(o,l,r,te,$+te)):l<d?(e.arc(o,l,r,-$,0),e.arc(o,d,r,0,$)):e.arc(o,l,r,-$,$),e.closePath(),e.moveTo(t,a)}else e.rect(t,a,n,s)},drawPoint:function(e,t,a,n,s,i){var r,o,l,c,d,u=(i||0)*Z;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(r=t.toString())&&"[object HTMLCanvasElement]"!==r){if(!(isNaN(a)||a<=0)){switch(e.beginPath(),t){default:e.arc(n,s,a,0,ee),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(u)*a,s-Math.cos(u)*a),u+=ne,e.lineTo(n+Math.sin(u)*a,s-Math.cos(u)*a),u+=ne,e.lineTo(n+Math.sin(u)*a,s-Math.cos(u)*a),e.closePath();break;case"rectRounded":c=a-(d=.516*a),o=Math.cos(u+ae)*c,l=Math.sin(u+ae)*c,e.arc(n-o,s-l,d,u-$,u-te),e.arc(n+l,s-o,d,u-te,u),e.arc(n+o,s+l,d,u,u+te),e.arc(n-l,s+o,d,u+te,u+$),e.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*a,e.rect(n-c,s-c,2*c,2*c);break}u+=ae;case"rectRot":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(n-o,s-l),e.lineTo(n+l,s-o),e.lineTo(n+o,s+l),e.lineTo(n-l,s+o),e.closePath();break;case"crossRot":u+=ae;case"cross":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l),e.moveTo(n+l,s-o),e.lineTo(n-l,s+o);break;case"star":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l),e.moveTo(n+l,s-o),e.lineTo(n-l,s+o),u+=ae,o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l),e.moveTo(n+l,s-o),e.lineTo(n-l,s+o);break;case"line":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(u)*a,s+Math.sin(u)*a)}e.fill(),e.stroke()}}else e.drawImage(t,n-t.width/2,s-t.height/2,t.width,t.height)},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,a,n){var s=a.steppedLine;if(s){if("middle"===s){var i=(t.x+a.x)/2;e.lineTo(i,n?a.y:t.y),e.lineTo(i,n?t.y:a.y)}else"after"===s&&!n||"after"!==s&&n?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}else a.tension?e.bezierCurveTo(n?t.controlPointPreviousX:t.controlPointNextX,n?t.controlPointPreviousY:t.controlPointNextY,n?a.controlPointNextX:a.controlPointPreviousX,n?a.controlPointNextY:a.controlPointPreviousY,a.x,a.y):e.lineTo(a.x,a.y)}},ie=se;X.clear=se.clear,X.drawRoundedRectangle=function(e){e.beginPath(),se.roundedRect.apply(se,arguments)};var re={_set:function(e,t){return X.merge(this[e]||(this[e]={}),t)}};re._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var oe=re,le=X.valueOrDefault,ce={toLineHeight:function(e,t){var a=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!a||"normal"===a[1])return 1.2*t;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,a,n,s;return X.isObject(e)?(t=+e.top||0,a=+e.right||0,n=+e.bottom||0,s=+e.left||0):t=a=n=s=+e||0,{top:t,right:a,bottom:n,left:s,height:t+n,width:s+a}},_parseFont:function(e){var t=oe.global,a=le(e.fontSize,t.defaultFontSize),n={family:le(e.fontFamily,t.defaultFontFamily),lineHeight:X.options.toLineHeight(le(e.lineHeight,t.defaultLineHeight),a),size:a,style:le(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return n.string=function(e){return!e||X.isNullOrUndef(e.size)||X.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n},resolve:function(e,t,a){var n,s,i;for(n=0,s=e.length;n<s;++n)if(void 0!==(i=e[n])&&(void 0!==t&&"function"==typeof i&&(i=i(t)),void 0!==a&&X.isArray(i)&&(i=i[a]),void 0!==i))return i}},de=X,ue=Q,me=ie,he=ce;de.easing=ue,de.canvas=me,de.options=he;var pe=function(e){de.extend(this,e),this.initialize.apply(this,arguments)};de.extend(pe.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=de.clone(e._model)),e._start={},e},transition:function(e){var t=this,a=t._model,n=t._start,s=t._view;return a&&1!==e?(s||(s=t._view={}),n||(n=t._start={}),function(e,t,a,n){var s,i,r,o,l,c,d,u,m,h=Object.keys(a);for(s=0,i=h.length;s<i;++s)if(c=a[r=h[s]],t.hasOwnProperty(r)||(t[r]=c),(o=t[r])!==c&&"_"!==r[0]){if(e.hasOwnProperty(r)||(e[r]=o),(d=typeof c)==typeof(l=e[r]))if("string"===d){if((u=V(l)).valid&&(m=V(c)).valid){t[r]=m.mix(u,n).rgbString();continue}}else if(de.isFinite(l)&&de.isFinite(c)){t[r]=l+(c-l)*n;continue}t[r]=c}}(n,s,a,e),t):(t._view=a,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return de.isNumber(this._model.x)&&de.isNumber(this._model.y)}}),pe.extend=de.inherits;var ge=pe,fe=ge.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),be=fe;Object.defineProperty(fe.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(fe.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),oe._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:de.noop,onComplete:de.noop}});var ve={animations:[],request:null,addAnimation:function(e,t,a,n){var s,i,r=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=a,n||(e.animating=!0),s=0,i=r.length;s<i;++s)if(r[s].chart===e)return void(r[s]=t);r.push(t),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=de.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=de.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,a,n,s=this.animations,i=0;i<s.length;)t=(e=s[i]).chart,a=e.numSteps,n=Math.floor((Date.now()-e.startTime)/e.duration*a)+1,e.currentStep=Math.min(n,a),de.callback(e.render,[t,e],t),de.callback(e.onAnimationProgress,[e],t),e.currentStep>=a?(de.callback(e.onAnimationComplete,[e],t),t.animating=!1,s.splice(i,1)):++i}},_e=de.options.resolve,ye=["push","pop","shift","splice","unshift"];function Ee(e,t){var a=e._chartjs;if(a){var n=a.listeners,s=n.indexOf(t);-1!==s&&n.splice(s,1),n.length>0||(ye.forEach((function(t){delete e[t]})),delete e._chartjs)}}var Se=function(e,t){this.initialize(e,t)};de.extend(Se.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),a=e.getDataset();null!==t.xAxisID&&t.xAxisID in e.chart.scales||(t.xAxisID=a.xAxisID||e.chart.options.scales.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in e.chart.scales||(t.yAxisID=a.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&Ee(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,a=this.getMeta(),n=this.getDataset().data||[],s=a.data;for(e=0,t=n.length;e<t;++e)s[e]=s[e]||this.createMetaData(e);a.dataset=a.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,a=this,n=a.getDataset(),s=n.data||(n.data=[]);a._data!==s&&(a._data&&Ee(a._data,a),s&&Object.isExtensible(s)&&(t=a,(e=s)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ye.forEach((function(t){var a="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),s=n.apply(this,t);return de.each(e._chartjs.listeners,(function(e){"function"==typeof e[a]&&e[a].apply(e,t)})),s}})})))),a._data=s),a.resyncElements()},update:de.noop,transition:function(e){for(var t=this.getMeta(),a=t.data||[],n=a.length,s=0;s<n;++s)a[s].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],a=t.length,n=0;for(e.dataset&&e.dataset.draw();n<a;++n)t[n].draw()},removeHoverStyle:function(e){de.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index,n=e.custom||{},s=e._model,i=de.getHoverColor;e.$previousStyle={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth},s.backgroundColor=_e([n.hoverBackgroundColor,t.hoverBackgroundColor,i(s.backgroundColor)],void 0,a),s.borderColor=_e([n.hoverBorderColor,t.hoverBorderColor,i(s.borderColor)],void 0,a),s.borderWidth=_e([n.hoverBorderWidth,t.hoverBorderWidth,s.borderWidth],void 0,a)},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,a=e.data.length,n=t.length;n<a?e.data.splice(n,a-n):n>a&&this.insertElements(a,n-a)},insertElements:function(e,t){for(var a=0;a<t;++a)this.addElementAndReset(e+a)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Se.extend=de.inherits;var Te=Se;oe._set("global",{elements:{arc:{backgroundColor:oe.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var xe=ge.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var a=this._view;if(a){for(var n=de.getAngleFromPoint(a,{x:e,y:t}),s=n.angle,i=n.distance,r=a.startAngle,o=a.endAngle;o<r;)o+=2*Math.PI;for(;s>o;)s-=2*Math.PI;for(;s<r;)s+=2*Math.PI;var l=s>=r&&s<=o,c=i>=a.innerRadius&&i<=a.outerRadius;return l&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,a=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,a=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},draw:function(){var e,t=this._chart.ctx,a=this._view,n=a.startAngle,s=a.endAngle,i="inner"===a.borderAlign?.33:0;t.save(),t.beginPath(),t.arc(a.x,a.y,Math.max(a.outerRadius-i,0),n,s),t.arc(a.x,a.y,a.innerRadius,s,n,!0),t.closePath(),t.fillStyle=a.backgroundColor,t.fill(),a.borderWidth&&("inner"===a.borderAlign?(t.beginPath(),e=i/a.outerRadius,t.arc(a.x,a.y,a.outerRadius,n-e,s+e),a.innerRadius>i?(e=i/a.innerRadius,t.arc(a.x,a.y,a.innerRadius-i,s+e,n-e,!0)):t.arc(a.x,a.y,i,s+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip(),t.beginPath(),t.arc(a.x,a.y,a.outerRadius,n,s),t.arc(a.x,a.y,a.innerRadius,s,n,!0),t.closePath(),t.lineWidth=2*a.borderWidth,t.lineJoin="round"):(t.lineWidth=a.borderWidth,t.lineJoin="bevel"),t.strokeStyle=a.borderColor,t.stroke()),t.restore()}}),we=de.valueOrDefault,Oe=oe.global.defaultColor;oe._set("global",{elements:{line:{tension:.4,backgroundColor:Oe,borderWidth:3,borderColor:Oe,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Ce=ge.extend({draw:function(){var e,t,a,n,s=this._view,i=this._chart.ctx,r=s.spanGaps,o=this._children.slice(),l=oe.global,c=l.elements.line,d=-1;for(this._loop&&o.length&&o.push(o[0]),i.save(),i.lineCap=s.borderCapStyle||c.borderCapStyle,i.setLineDash&&i.setLineDash(s.borderDash||c.borderDash),i.lineDashOffset=we(s.borderDashOffset,c.borderDashOffset),i.lineJoin=s.borderJoinStyle||c.borderJoinStyle,i.lineWidth=we(s.borderWidth,c.borderWidth),i.strokeStyle=s.borderColor||l.defaultColor,i.beginPath(),d=-1,e=0;e<o.length;++e)t=o[e],a=de.previousItem(o,e),n=t._view,0===e?n.skip||(i.moveTo(n.x,n.y),d=e):(a=-1===d?a:o[d],n.skip||(d!==e-1&&!r||-1===d?i.moveTo(n.x,n.y):de.canvas.lineTo(i,a._view,t._view),d=e));i.stroke(),i.restore()}}),Me=de.valueOrDefault,ke=oe.global.defaultColor;function je(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}oe._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ke,borderColor:ke,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Pe=ge.extend({inRange:function(e,t){var a=this._view;return!!a&&Math.pow(e-a.x,2)+Math.pow(t-a.y,2)<Math.pow(a.hitRadius+a.radius,2)},inLabelRange:je,inXRange:je,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,a=this._chart.ctx,n=t.pointStyle,s=t.rotation,i=t.radius,r=t.x,o=t.y,l=oe.global,c=l.defaultColor;t.skip||(void 0===e||de.canvas._isPointInArea(t,e))&&(a.strokeStyle=t.borderColor||c,a.lineWidth=Me(t.borderWidth,l.elements.point.borderWidth),a.fillStyle=t.backgroundColor||c,de.canvas.drawPoint(a,n,i,r,o,s))}}),Ae=oe.global.defaultColor;function Re(e){return e&&void 0!==e.width}function Ne(e){var t,a,n,s,i;return Re(e)?(i=e.width/2,t=e.x-i,a=e.x+i,n=Math.min(e.y,e.base),s=Math.max(e.y,e.base)):(i=e.height/2,t=Math.min(e.x,e.base),a=Math.max(e.x,e.base),n=e.y-i,s=e.y+i),{left:t,top:n,right:a,bottom:s}}function De(e,t,a){return e===t?a:e===a?t:e}function Ie(e,t,a){var n,s,i,r,o=e.borderWidth,l=function(e){var t=e.borderSkipped,a={};return t?(e.horizontal?e.base>e.x&&(t=De(t,"left","right")):e.base<e.y&&(t=De(t,"bottom","top")),a[t]=!0,a):a}(e);return de.isObject(o)?(n=+o.top||0,s=+o.right||0,i=+o.bottom||0,r=+o.left||0):n=s=i=r=+o||0,{t:l.top||n<0?0:n>a?a:n,r:l.right||s<0?0:s>t?t:s,b:l.bottom||i<0?0:i>a?a:i,l:l.left||r<0?0:r>t?t:r}}function Le(e,t,a){var n=null===t,s=null===a,i=!(!e||n&&s)&&Ne(e);return i&&(n||t>=i.left&&t<=i.right)&&(s||a>=i.top&&a<=i.bottom)}oe._set("global",{elements:{rectangle:{backgroundColor:Ae,borderColor:Ae,borderSkipped:"bottom",borderWidth:0}}});var Be=ge.extend({draw:function(){var e=this._chart.ctx,t=this._view,a=function(e){var t=Ne(e),a=t.right-t.left,n=t.bottom-t.top,s=Ie(e,a/2,n/2);return{outer:{x:t.left,y:t.top,w:a,h:n},inner:{x:t.left+s.l,y:t.top+s.t,w:a-s.l-s.r,h:n-s.t-s.b}}}(t),n=a.outer,s=a.inner;e.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.w,n.h),n.w===s.w&&n.h===s.h||(e.save(),e.beginPath(),e.rect(n.x,n.y,n.w,n.h),e.clip(),e.fillStyle=t.borderColor,e.rect(s.x,s.y,s.w,s.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Le(this._view,e,t)},inLabelRange:function(e,t){var a=this._view;return Re(a)?Le(a,e,null):Le(a,null,t)},inXRange:function(e){return Le(this._view,e,null)},inYRange:function(e){return Le(this._view,null,e)},getCenterPoint:function(){var e,t,a=this._view;return Re(a)?(e=a.x,t=(a.y+a.base)/2):(e=(a.x+a.base)/2,t=a.y),{x:e,y:t}},getArea:function(){var e=this._view;return Re(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Ue={},Fe=xe,qe=Ce,Ge=Pe,He=Be;Ue.Arc=Fe,Ue.Line=qe,Ue.Point=Ge,Ue.Rectangle=He;var We=de.options.resolve;oe._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var ze=Te.extend({dataElementType:Ue.Rectangle,initialize:function(){var e,t=this;Te.prototype.initialize.apply(t,arguments),(e=t.getMeta()).stack=t.getDataset().stack,e.bar=!0},update:function(e){var t,a,n=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,a=n.length;t<a;++t)this.updateElement(n[t],t,e)},updateElement:function(e,t,a){var n=this,s=n.getMeta(),i=n.getDataset(),r=n._resolveElementOptions(e,t);e._xScale=n.getScaleForId(s.xAxisID),e._yScale=n.getScaleForId(s.yAxisID),e._datasetIndex=n.index,e._index=t,e._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:i.label,label:n.chart.data.labels[t]},n._updateElementGeometry(e,t,a),e.pivot()},_updateElementGeometry:function(e,t,a){var n=this,s=e._model,i=n._getValueScale(),r=i.getBasePixel(),o=i.isHorizontal(),l=n._ruler||n.getRuler(),c=n.calculateBarValuePixels(n.index,t),d=n.calculateBarIndexPixels(n.index,t,l);s.horizontal=o,s.base=a?r:c.base,s.x=o?a?r:c.head:d.center,s.y=o?d.center:a?r:c.head,s.height=o?d.size:void 0,s.width=o?void 0:d.size},_getStacks:function(e){var t,a,n=this.chart,s=this._getIndexScale().options.stacked,i=void 0===e?n.data.datasets.length:e+1,r=[];for(t=0;t<i;++t)(a=n.getDatasetMeta(t)).bar&&n.isDatasetVisible(t)&&(!1===s||!0===s&&-1===r.indexOf(a.stack)||void 0===s&&(void 0===a.stack||-1===r.indexOf(a.stack)))&&r.push(a.stack);return r},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var a=this._getStacks(e),n=void 0!==t?a.indexOf(t):-1;return-1===n?a.length-1:n},getRuler:function(){var e,t,a=this._getIndexScale(),n=this.getStackCount(),s=this.index,i=a.isHorizontal(),r=i?a.left:a.top,o=r+(i?a.width:a.height),l=[];for(e=0,t=this.getMeta().data.length;e<t;++e)l.push(a.getPixelForValue(null,e,s));return{min:de.isNullOrUndef(a.options.barThickness)?function(e,t){var a,n,s,i,r=e.isHorizontal()?e.width:e.height,o=e.getTicks();for(s=1,i=t.length;s<i;++s)r=Math.min(r,Math.abs(t[s]-t[s-1]));for(s=0,i=o.length;s<i;++s)n=e.getPixelForTick(s),r=s>0?Math.min(r,n-a):r,a=n;return r}(a,l):-1,pixels:l,start:r,end:o,stackCount:n,scale:a}},calculateBarValuePixels:function(e,t){var a,n,s,i,r,o,l=this.chart,c=this.getMeta(),d=this._getValueScale(),u=d.isHorizontal(),m=l.data.datasets,h=+d.getRightValue(m[e].data[t]),p=d.options.minBarLength,g=d.options.stacked,f=c.stack,b=0;if(g||void 0===g&&void 0!==f)for(a=0;a<e;++a)(n=l.getDatasetMeta(a)).bar&&n.stack===f&&n.controller._getValueScaleId()===d.id&&l.isDatasetVisible(a)&&(s=+d.getRightValue(m[a].data[t]),(h<0&&s<0||h>=0&&s>0)&&(b+=s));return i=d.getPixelForValue(b),o=(r=d.getPixelForValue(b+h))-i,void 0!==p&&Math.abs(o)<p&&(o=p,r=h>=0&&!u||h<0&&u?i-p:i+p),{size:o,base:i,head:r,center:r+o/2}},calculateBarIndexPixels:function(e,t,a){var n=a.scale.options,s="flex"===n.barThickness?function(e,t,a){var n,s=t.pixels,i=s[e],r=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null,l=a.categoryPercentage;return null===r&&(r=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-r),n=i-(i-Math.min(r,o))/2*l,{chunk:Math.abs(o-r)/2*l/t.stackCount,ratio:a.barPercentage,start:n}}(t,a,n):function(e,t,a){var n,s,i=a.barThickness,r=t.stackCount,o=t.pixels[e];return de.isNullOrUndef(i)?(n=t.min*a.categoryPercentage,s=a.barPercentage):(n=i*r,s=1),{chunk:n/r,ratio:s,start:o-n/2}}(t,a,n),i=this.getStackIndex(e,this.getMeta().stack),r=s.start+s.chunk*i+s.chunk/2,o=Math.min(de.valueOrDefault(n.maxBarThickness,1/0),s.chunk*s.ratio);return{base:r-o/2,head:r+o/2,center:r,size:o}},draw:function(){var e=this.chart,t=this._getValueScale(),a=this.getMeta().data,n=this.getDataset(),s=a.length,i=0;for(de.canvas.clipArea(e.ctx,e.chartArea);i<s;++i)isNaN(t.getRightValue(n.data[i]))||a[i].draw();de.canvas.unclipArea(e.ctx)},_resolveElementOptions:function(e,t){var a,n,s,i=this.chart,r=i.data.datasets[this.index],o=e.custom||{},l=i.options.elements.rectangle,c={},d={chart:i,dataIndex:t,dataset:r,datasetIndex:this.index},u=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(a=0,n=u.length;a<n;++a)c[s=u[a]]=We([o[s],r[s],l[s]],d,t);return c}}),Ye=de.valueOrDefault,Ve=de.options.resolve;oe._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=t.datasets[e.datasetIndex].data[e.index];return a+": ("+e.xLabel+", "+e.yLabel+", "+n.r+")"}}}});var Je=Te.extend({dataElementType:Ue.Point,update:function(e){var t=this,a=t.getMeta().data;de.each(a,(function(a,n){t.updateElement(a,n,e)}))},updateElement:function(e,t,a){var n=this,s=n.getMeta(),i=e.custom||{},r=n.getScaleForId(s.xAxisID),o=n.getScaleForId(s.yAxisID),l=n._resolveElementOptions(e,t),c=n.getDataset().data[t],d=n.index,u=a?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof c?c:NaN,t,d),m=a?o.getBasePixel():o.getPixelForValue(c,t,d);e._xScale=r,e._yScale=o,e._options=l,e._datasetIndex=d,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:a?0:l.radius,skip:i.skip||isNaN(u)||isNaN(m),x:u,y:m},e.pivot()},setHoverStyle:function(e){var t=e._model,a=e._options,n=de.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ye(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=Ye(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=Ye(a.hoverBorderWidth,a.borderWidth),t.radius=a.radius+a.hoverRadius},_resolveElementOptions:function(e,t){var a,n,s,i=this.chart,r=i.data.datasets[this.index],o=e.custom||{},l=i.options.elements.point,c=r.data[t],d={},u={chart:i,dataIndex:t,dataset:r,datasetIndex:this.index},m=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(a=0,n=m.length;a<n;++a)d[s=m[a]]=Ve([o[s],r[s],l[s]],u,t);return d.radius=Ve([o.radius,c?c.r:void 0,r.radius,l.radius],u,t),d}}),Xe=de.options.resolve,Ke=de.valueOrDefault;oe._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var a=e.data,n=a.datasets,s=a.labels;if(n.length)for(var i=0;i<n[0].data.length;++i)t.push('<li><span style="background-color:'+n[0].backgroundColor[i]+'"></span>'),s[i]&&t.push(s[i]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,n){var s=e.getDatasetMeta(0),i=t.datasets[0],r=s.data[n],o=r&&r.custom||{},l=e.options.elements.arc;return{text:a,fillStyle:Xe([o.backgroundColor,i.backgroundColor,l.backgroundColor],void 0,n),strokeStyle:Xe([o.borderColor,i.borderColor,l.borderColor],void 0,n),lineWidth:Xe([o.borderWidth,i.borderWidth,l.borderWidth],void 0,n),hidden:isNaN(i.data[n])||s.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var a,n,s,i=t.index,r=this.chart;for(a=0,n=(r.data.datasets||[]).length;a<n;++a)(s=r.getDatasetMeta(a)).data[i]&&(s.data[i].hidden=!s.data[i].hidden);r.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.labels[e.index],n=": "+t.datasets[e.datasetIndex].data[e.index];return de.isArray(a)?(a=a.slice())[0]+=n:a+=n,a}}}});var Qe=Te.extend({dataElementType:Ue.Arc,linkScales:de.noop,getRingIndex:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&++t;return t},update:function(e){var t,a,n=this,s=n.chart,i=s.chartArea,r=s.options,o=i.right-i.left,l=i.bottom-i.top,c=Math.min(o,l),d={x:0,y:0},u=n.getMeta(),m=u.data,h=r.cutoutPercentage,p=r.circumference,g=n._getRingWeight(n.index);if(p<2*Math.PI){var f=r.rotation%(2*Math.PI),b=(f+=2*Math.PI*(f>=Math.PI?-1:f<-Math.PI?1:0))+p,v={x:Math.cos(f),y:Math.sin(f)},_={x:Math.cos(b),y:Math.sin(b)},y=f<=0&&b>=0||f<=2*Math.PI&&2*Math.PI<=b,E=f<=.5*Math.PI&&.5*Math.PI<=b||f<=2.5*Math.PI&&2.5*Math.PI<=b,S=f<=-Math.PI&&-Math.PI<=b||f<=Math.PI&&Math.PI<=b,T=f<=.5*-Math.PI&&.5*-Math.PI<=b||f<=1.5*Math.PI&&1.5*Math.PI<=b,x=h/100,w={x:S?-1:Math.min(v.x*(v.x<0?1:x),_.x*(_.x<0?1:x)),y:T?-1:Math.min(v.y*(v.y<0?1:x),_.y*(_.y<0?1:x))},O={x:y?1:Math.max(v.x*(v.x>0?1:x),_.x*(_.x>0?1:x)),y:E?1:Math.max(v.y*(v.y>0?1:x),_.y*(_.y>0?1:x))},C={width:.5*(O.x-w.x),height:.5*(O.y-w.y)};c=Math.min(o/C.width,l/C.height),d={x:-.5*(O.x+w.x),y:-.5*(O.y+w.y)}}for(t=0,a=m.length;t<a;++t)m[t]._options=n._resolveElementOptions(m[t],t);for(s.borderWidth=n.getMaxBorderWidth(),s.outerRadius=Math.max((c-s.borderWidth)/2,0),s.innerRadius=Math.max(h?s.outerRadius/100*h:0,0),s.radiusLength=(s.outerRadius-s.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),s.offsetX=d.x*s.outerRadius,s.offsetY=d.y*s.outerRadius,u.total=n.calculateTotal(),n.outerRadius=s.outerRadius-s.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-s.radiusLength*g,0),t=0,a=m.length;t<a;++t)n.updateElement(m[t],t,e)},updateElement:function(e,t,a){var n=this,s=n.chart,i=s.chartArea,r=s.options,o=r.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=r.rotation,u=r.rotation,m=n.getDataset(),h=a&&o.animateRotate||e.hidden?0:n.calculateCircumference(m.data[t])*(r.circumference/(2*Math.PI)),p=a&&o.animateScale?0:n.innerRadius,g=a&&o.animateScale?0:n.outerRadius,f=e._options||{};de.extend(e,{_datasetIndex:n.index,_index:t,_model:{backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,borderAlign:f.borderAlign,x:l+s.offsetX,y:c+s.offsetY,startAngle:d,endAngle:u,circumference:h,outerRadius:g,innerRadius:p,label:de.valueAtIndexOrDefault(m.label,t,s.data.labels[t])}});var b=e._model;a&&o.animateRotate||(b.startAngle=0===t?r.rotation:n.getMeta().data[t-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),a=this.getMeta(),n=0;return de.each(a.data,(function(a,s){e=t.data[s],isNaN(e)||a.hidden||(n+=Math.abs(e))})),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,a,n,s,i,r,o,l,c=0,d=this.chart;if(!e)for(t=0,a=d.data.datasets.length;t<a;++t)if(d.isDatasetVisible(t)){e=(n=d.getDatasetMeta(t)).data,t!==this.index&&(i=n.controller);break}if(!e)return 0;for(t=0,a=e.length;t<a;++t)s=e[t],"inner"!==(r=i?i._resolveElementOptions(s,t):s._options).borderAlign&&(o=r.borderWidth,c=(l=r.hoverBorderWidth)>(c=o>c?o:c)?l:c);return c},setHoverStyle:function(e){var t=e._model,a=e._options,n=de.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Ke(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=Ke(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=Ke(a.hoverBorderWidth,a.borderWidth)},_resolveElementOptions:function(e,t){var a,n,s,i=this.chart,r=this.getDataset(),o=e.custom||{},l=i.options.elements.arc,c={},d={chart:i,dataIndex:t,dataset:r,datasetIndex:this.index},u=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(a=0,n=u.length;a<n;++a)c[s=u[a]]=Xe([o[s],r[s],l[s]],d,t);return c},_getRingWeightOffset:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(t+=this._getRingWeight(a));return t},_getRingWeight:function(e){return Math.max(Ke(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});oe._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var $e=ze.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ze=de.valueOrDefault,et=de.options.resolve,tt=de.canvas._isPointInArea;function at(e,t){return Ze(e.showLine,t.showLines)}oe._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var nt=Te.extend({datasetElementType:Ue.Line,dataElementType:Ue.Point,update:function(e){var t,a,n=this,s=n.getMeta(),i=s.dataset,r=s.data||[],o=n.getScaleForId(s.yAxisID),l=n.getDataset(),c=at(l,n.chart.options);for(c&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),i._scale=o,i._datasetIndex=n.index,i._children=r,i._model=n._resolveLineOptions(i),i.pivot()),t=0,a=r.length;t<a;++t)n.updateElement(r[t],t,e);for(c&&0!==i._model.tension&&n.updateBezierControlPoints(),t=0,a=r.length;t<a;++t)r[t].pivot()},updateElement:function(e,t,a){var n,s,i=this,r=i.getMeta(),o=e.custom||{},l=i.getDataset(),c=i.index,d=l.data[t],u=i.getScaleForId(r.yAxisID),m=i.getScaleForId(r.xAxisID),h=r.dataset._model,p=i._resolvePointOptions(e,t);n=m.getPixelForValue("object"==typeof d?d:NaN,t,c),s=a?u.getBasePixel():i.calculatePointY(d,t,c),e._xScale=m,e._yScale=u,e._options=p,e._datasetIndex=c,e._index=t,e._model={x:n,y:s,skip:o.skip||isNaN(n)||isNaN(s),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:Ze(o.tension,h?h.tension:0),steppedLine:!!h&&h.steppedLine,hitRadius:p.hitRadius}},_resolvePointOptions:function(e,t){var a,n,s,i=this.chart,r=i.data.datasets[this.index],o=e.custom||{},l=i.options.elements.point,c={},d={chart:i,dataIndex:t,dataset:r,datasetIndex:this.index},u={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},m=Object.keys(u);for(a=0,n=m.length;a<n;++a)c[s=m[a]]=et([o[s],r[u[s]],r[s],l[s]],d,t);return c},_resolveLineOptions:function(e){var t,a,n,s=this.chart,i=s.data.datasets[this.index],r=e.custom||{},o=s.options,l=o.elements.line,c={},d=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(t=0,a=d.length;t<a;++t)c[n=d[t]]=et([r[n],i[n],l[n]]);return c.spanGaps=Ze(i.spanGaps,o.spanGaps),c.tension=Ze(i.lineTension,l.tension),c.steppedLine=et([r.steppedLine,i.steppedLine,l.stepped]),c},calculatePointY:function(e,t,a){var n,s,i,r=this.chart,o=this.getMeta(),l=this.getScaleForId(o.yAxisID),c=0,d=0;if(l.options.stacked){for(n=0;n<a;n++)if(s=r.data.datasets[n],"line"===(i=r.getDatasetMeta(n)).type&&i.yAxisID===l.id&&r.isDatasetVisible(n)){var u=Number(l.getRightValue(s.data[t]));u<0?d+=u||0:c+=u||0}var m=Number(l.getRightValue(e));return m<0?l.getPixelForValue(d+m):l.getPixelForValue(c+m)}return l.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,a,n,s=this.chart,i=this.getMeta(),r=i.dataset._model,o=s.chartArea,l=i.data||[];function c(e,t,a){return Math.max(Math.min(e,a),t)}if(r.spanGaps&&(l=l.filter((function(e){return!e._model.skip}))),"monotone"===r.cubicInterpolationMode)de.splineCurveMonotone(l);else for(e=0,t=l.length;e<t;++e)a=l[e]._model,n=de.splineCurve(de.previousItem(l,e)._model,a,de.nextItem(l,e)._model,r.tension),a.controlPointPreviousX=n.previous.x,a.controlPointPreviousY=n.previous.y,a.controlPointNextX=n.next.x,a.controlPointNextY=n.next.y;if(s.options.elements.line.capBezierPoints)for(e=0,t=l.length;e<t;++e)a=l[e]._model,tt(a,o)&&(e>0&&tt(l[e-1]._model,o)&&(a.controlPointPreviousX=c(a.controlPointPreviousX,o.left,o.right),a.controlPointPreviousY=c(a.controlPointPreviousY,o.top,o.bottom)),e<l.length-1&&tt(l[e+1]._model,o)&&(a.controlPointNextX=c(a.controlPointNextX,o.left,o.right),a.controlPointNextY=c(a.controlPointNextY,o.top,o.bottom)))},draw:function(){var e,t=this.chart,a=this.getMeta(),n=a.data||[],s=t.chartArea,i=n.length,r=0;for(at(this.getDataset(),t.options)&&(e=(a.dataset._model.borderWidth||0)/2,de.canvas.clipArea(t.ctx,{left:s.left,right:s.right,top:s.top-e,bottom:s.bottom+e}),a.dataset.draw(),de.canvas.unclipArea(t.ctx));r<i;++r)n[r].draw(s)},setHoverStyle:function(e){var t=e._model,a=e._options,n=de.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ze(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=Ze(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=Ze(a.hoverBorderWidth,a.borderWidth),t.radius=Ze(a.hoverRadius,a.radius)}}),st=de.options.resolve;oe._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var a=e.data,n=a.datasets,s=a.labels;if(n.length)for(var i=0;i<n[0].data.length;++i)t.push('<li><span style="background-color:'+n[0].backgroundColor[i]+'"></span>'),s[i]&&t.push(s[i]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,n){var s=e.getDatasetMeta(0),i=t.datasets[0],r=s.data[n].custom||{},o=e.options.elements.arc;return{text:a,fillStyle:st([r.backgroundColor,i.backgroundColor,o.backgroundColor],void 0,n),strokeStyle:st([r.borderColor,i.borderColor,o.borderColor],void 0,n),lineWidth:st([r.borderWidth,i.borderWidth,o.borderWidth],void 0,n),hidden:isNaN(i.data[n])||s.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var a,n,s,i=t.index,r=this.chart;for(a=0,n=(r.data.datasets||[]).length;a<n;++a)(s=r.getDatasetMeta(a)).data[i].hidden=!s.data[i].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var it=Te.extend({dataElementType:Ue.Arc,linkScales:de.noop,update:function(e){var t,a,n,s=this,i=s.getDataset(),r=s.getMeta(),o=s.chart.options.startAngle||0,l=s._starts=[],c=s._angles=[],d=r.data;for(s._updateRadius(),r.count=s.countVisibleElements(),t=0,a=i.data.length;t<a;t++)l[t]=o,n=s._computeAngle(t),c[t]=n,o+=n;for(t=0,a=d.length;t<a;++t)d[t]._options=s._resolveElementOptions(d[t],t),s.updateElement(d[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,a=t.chartArea,n=t.options,s=Math.min(a.right-a.left,a.bottom-a.top);t.outerRadius=Math.max(s/2,0),t.innerRadius=Math.max(n.cutoutPercentage?t.outerRadius/100*n.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,a){var n=this,s=n.chart,i=n.getDataset(),r=s.options,o=r.animation,l=s.scale,c=s.data.labels,d=l.xCenter,u=l.yCenter,m=r.startAngle,h=e.hidden?0:l.getDistanceFromCenterForValue(i.data[t]),p=n._starts[t],g=p+(e.hidden?0:n._angles[t]),f=o.animateScale?0:l.getDistanceFromCenterForValue(i.data[t]),b=e._options||{};de.extend(e,{_datasetIndex:n.index,_index:t,_scale:l,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:d,y:u,innerRadius:0,outerRadius:a?f:h,startAngle:a&&o.animateRotate?m:p,endAngle:a&&o.animateRotate?m:g,label:de.valueAtIndexOrDefault(c,t,c[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),a=0;return de.each(t.data,(function(t,n){isNaN(e.data[n])||t.hidden||a++})),a},setHoverStyle:function(e){var t=e._model,a=e._options,n=de.getHoverColor,s=de.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=s(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=s(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=s(a.hoverBorderWidth,a.borderWidth)},_resolveElementOptions:function(e,t){var a,n,s,i=this.chart,r=this.getDataset(),o=e.custom||{},l=i.options.elements.arc,c={},d={chart:i,dataIndex:t,dataset:r,datasetIndex:this.index},u=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(a=0,n=u.length;a<n;++a)c[s=u[a]]=st([o[s],r[s],l[s]],d,t);return c},_computeAngle:function(e){var t=this,a=this.getMeta().count,n=t.getDataset(),s=t.getMeta();if(isNaN(n.data[e])||s.data[e].hidden)return 0;var i={chart:t.chart,dataIndex:e,dataset:n,datasetIndex:t.index};return st([t.chart.options.elements.arc.angle,2*Math.PI/a],i,e)}});oe._set("pie",de.clone(oe.doughnut)),oe._set("pie",{cutoutPercentage:0});var rt=Qe,ot=de.valueOrDefault,lt=de.options.resolve;oe._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var ct=Te.extend({datasetElementType:Ue.Line,dataElementType:Ue.Point,linkScales:de.noop,update:function(e){var t,a,n=this,s=n.getMeta(),i=s.dataset,r=s.data||[],o=n.chart.scale,l=n.getDataset();for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),i._scale=o,i._datasetIndex=n.index,i._children=r,i._loop=!0,i._model=n._resolveLineOptions(i),i.pivot(),t=0,a=r.length;t<a;++t)n.updateElement(r[t],t,e);for(n.updateBezierControlPoints(),t=0,a=r.length;t<a;++t)r[t].pivot()},updateElement:function(e,t,a){var n=this,s=e.custom||{},i=n.getDataset(),r=n.chart.scale,o=r.getPointPositionForValue(t,i.data[t]),l=n._resolvePointOptions(e,t),c=n.getMeta().dataset._model,d=a?r.xCenter:o.x,u=a?r.yCenter:o.y;e._scale=r,e._options=l,e._datasetIndex=n.index,e._index=t,e._model={x:d,y:u,skip:s.skip||isNaN(d)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:ot(s.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolvePointOptions:function(e,t){var a,n,s,i=this.chart,r=i.data.datasets[this.index],o=e.custom||{},l=i.options.elements.point,c={},d={chart:i,dataIndex:t,dataset:r,datasetIndex:this.index},u={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},m=Object.keys(u);for(a=0,n=m.length;a<n;++a)c[s=m[a]]=lt([o[s],r[u[s]],r[s],l[s]],d,t);return c},_resolveLineOptions:function(e){var t,a,n,s=this.chart,i=s.data.datasets[this.index],r=e.custom||{},o=s.options.elements.line,l={},c=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(t=0,a=c.length;t<a;++t)l[n=c[t]]=lt([r[n],i[n],o[n]]);return l.tension=ot(i.lineTension,o.tension),l},updateBezierControlPoints:function(){var e,t,a,n,s=this.getMeta(),i=this.chart.chartArea,r=s.data||[];function o(e,t,a){return Math.max(Math.min(e,a),t)}for(e=0,t=r.length;e<t;++e)a=r[e]._model,n=de.splineCurve(de.previousItem(r,e,!0)._model,a,de.nextItem(r,e,!0)._model,a.tension),a.controlPointPreviousX=o(n.previous.x,i.left,i.right),a.controlPointPreviousY=o(n.previous.y,i.top,i.bottom),a.controlPointNextX=o(n.next.x,i.left,i.right),a.controlPointNextY=o(n.next.y,i.top,i.bottom)},setHoverStyle:function(e){var t=e._model,a=e._options,n=de.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ot(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=ot(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=ot(a.hoverBorderWidth,a.borderWidth),t.radius=ot(a.hoverRadius,a.radius)}});oe._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}});var dt={bar:ze,bubble:Je,doughnut:Qe,horizontalBar:$e,line:nt,polarArea:it,pie:rt,radar:ct,scatter:nt};function ut(e,t){return e.native?{x:e.x,y:e.y}:de.getRelativePosition(e,t)}function mt(e,t){var a,n,s,i,r;for(n=0,i=e.data.datasets.length;n<i;++n)if(e.isDatasetVisible(n))for(s=0,r=(a=e.getDatasetMeta(n)).data.length;s<r;++s){var o=a.data[s];o._view.skip||t(o)}}function ht(e,t){var a=[];return mt(e,(function(e){e.inRange(t.x,t.y)&&a.push(e)})),a}function pt(e,t,a,n){var s=Number.POSITIVE_INFINITY,i=[];return mt(e,(function(e){if(!a||e.inRange(t.x,t.y)){var r=e.getCenterPoint(),o=n(t,r);o<s?(i=[e],s=o):o===s&&i.push(e)}})),i}function gt(e){var t=-1!==e.indexOf("x"),a=-1!==e.indexOf("y");return function(e,n){var s=t?Math.abs(e.x-n.x):0,i=a?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}function ft(e,t,a){var n=ut(t,e);a.axis=a.axis||"x";var s=gt(a.axis),i=a.intersect?ht(e,n):pt(e,n,!1,s),r=[];return i.length?(e.data.datasets.forEach((function(t,a){if(e.isDatasetVisible(a)){var n=e.getDatasetMeta(a).data[i[0]._index];n&&!n._view.skip&&r.push(n)}})),r):[]}var bt={modes:{single:function(e,t){var a=ut(t,e),n=[];return mt(e,(function(e){if(e.inRange(a.x,a.y))return n.push(e),n})),n.slice(0,1)},label:ft,index:ft,dataset:function(e,t,a){var n=ut(t,e);a.axis=a.axis||"xy";var s=gt(a.axis),i=a.intersect?ht(e,n):pt(e,n,!1,s);return i.length>0&&(i=e.getDatasetMeta(i[0]._datasetIndex).data),i},"x-axis":function(e,t){return ft(e,t,{intersect:!1})},point:function(e,t){return ht(e,ut(t,e))},nearest:function(e,t,a){var n=ut(t,e);a.axis=a.axis||"xy";var s=gt(a.axis);return pt(e,n,a.intersect,s)},x:function(e,t,a){var n=ut(t,e),s=[],i=!1;return mt(e,(function(e){e.inXRange(n.x)&&s.push(e),e.inRange(n.x,n.y)&&(i=!0)})),a.intersect&&!i&&(s=[]),s},y:function(e,t,a){var n=ut(t,e),s=[],i=!1;return mt(e,(function(e){e.inYRange(n.y)&&s.push(e),e.inRange(n.x,n.y)&&(i=!0)})),a.intersect&&!i&&(s=[]),s}}};function vt(e,t){return de.where(e,(function(e){return e.position===t}))}function _t(e,t){e.forEach((function(e,t){return e._tmpIndex_=t,e})),e.sort((function(e,a){var n=t?a:e,s=t?e:a;return n.weight===s.weight?n._tmpIndex_-s._tmpIndex_:n.weight-s.weight})),e.forEach((function(e){delete e._tmpIndex_}))}function yt(e,t){de.each(e,(function(e){t[e.position]+=e.isHorizontal()?e.height:e.width}))}oe._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Et,St={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var a=e.boxes?e.boxes.indexOf(t):-1;-1!==a&&e.boxes.splice(a,1)},configure:function(e,t,a){for(var n,s=["fullWidth","position","weight"],i=s.length,r=0;r<i;++r)n=s[r],a.hasOwnProperty(n)&&(t[n]=a[n])},update:function(e,t,a){if(e){var n=e.options.layout||{},s=de.options.toPadding(n.padding),i=s.left,r=s.right,o=s.top,l=s.bottom,c=vt(e.boxes,"left"),d=vt(e.boxes,"right"),u=vt(e.boxes,"top"),m=vt(e.boxes,"bottom"),h=vt(e.boxes,"chartArea");_t(c,!0),_t(d,!1),_t(u,!0),_t(m,!1);var p,g=c.concat(d),f=u.concat(m),b=g.concat(f),v=t-i-r,_=a-o-l,y=(t-v/2)/g.length,E=v,S=_,T={top:o,left:i,bottom:l,right:r},x=[];de.each(b,(function(e){var t,a=e.isHorizontal();a?(t=e.update(e.fullWidth?v:E,_/2),S-=t.height):(t=e.update(y,S),E-=t.width),x.push({horizontal:a,width:t.width,box:e})})),p=function(e){var t=0,a=0,n=0,s=0;return de.each(e,(function(e){if(e.getPadding){var i=e.getPadding();t=Math.max(t,i.top),a=Math.max(a,i.left),n=Math.max(n,i.bottom),s=Math.max(s,i.right)}})),{top:t,left:a,bottom:n,right:s}}(b),de.each(g,P),yt(g,T),de.each(f,P),yt(f,T),de.each(g,(function(e){var t=de.findNextWhere(x,(function(t){return t.box===e})),a={left:0,right:0,top:T.top,bottom:T.bottom};t&&e.update(t.width,S,a)})),yt(b,T={top:o,left:i,bottom:l,right:r});var w=Math.max(p.left-T.left,0);T.left+=w,T.right+=Math.max(p.right-T.right,0);var O=Math.max(p.top-T.top,0);T.top+=O,T.bottom+=Math.max(p.bottom-T.bottom,0);var C=a-T.top-T.bottom,M=t-T.left-T.right;M===E&&C===S||(de.each(g,(function(e){e.height=C})),de.each(f,(function(e){e.fullWidth||(e.width=M)})),S=C,E=M);var k=i+w,j=o+O;de.each(c.concat(u),A),k+=E,j+=S,de.each(d,A),de.each(m,A),e.chartArea={left:T.left,top:T.top,right:T.left+E,bottom:T.top+S},de.each(h,(function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(E,S)}))}function P(e){var t=de.findNextWhere(x,(function(t){return t.box===e}));if(t)if(t.horizontal){var a={left:Math.max(T.left,p.left),right:Math.max(T.right,p.right),top:0,bottom:0};e.update(e.fullWidth?v:E,_/2,a)}else e.update(t.width,S)}function A(e){e.isHorizontal()?(e.left=e.fullWidth?i:T.left,e.right=e.fullWidth?t-r:T.left+E,e.top=j,e.bottom=j+e.height,j=e.bottom):(e.left=k,e.right=k+e.width,e.top=T.top,e.bottom=T.top+S,k=e.right)}}},Tt=(Et=Object.freeze({default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&Et.default||Et,xt=["animationstart","webkitAnimationStart"],wt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function Ot(e,t){var a=de.getStyle(e,t),n=a&&a.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var Ct=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};function Mt(e,t,a){e.addEventListener(t,a,Ct)}function kt(e,t,a){e.removeEventListener(t,a,Ct)}function jt(e,t,a,n,s){return{type:e,chart:t,native:s||null,x:void 0!==a?a:null,y:void 0!==n?n:null}}function Pt(e){var t=document.createElement("div");return t.className=e||"",t}function At(e,t,a){var n,s,i,r,o=e.$chartjs||(e.$chartjs={}),l=o.resizer=function(e){var t=Pt("chartjs-size-monitor"),a=Pt("chartjs-size-monitor-expand"),n=Pt("chartjs-size-monitor-shrink");a.appendChild(Pt()),n.appendChild(Pt()),t.appendChild(a),t.appendChild(n),t._reset=function(){a.scrollLeft=1e6,a.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var s=function(){t._reset(),e()};return Mt(a,"scroll",s.bind(a,"expand")),Mt(n,"scroll",s.bind(n,"shrink")),t}((n=function(){if(o.resizer){var n=a.options.maintainAspectRatio&&e.parentNode,s=n?n.clientWidth:0;t(jt("resize",a)),n&&n.clientWidth<s&&a.canvas&&t(jt("resize",a))}},i=!1,r=[],function(){r=Array.prototype.slice.call(arguments),s=s||this,i||(i=!0,de.requestAnimFrame.call(window,(function(){i=!1,n.apply(s,r)})))}));!function(e,t){var a=e.$chartjs||(e.$chartjs={}),n=a.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};de.each(xt,(function(t){Mt(e,t,n)})),a.reflow=!!e.offsetParent,e.classList.add("chartjs-render-monitor")}(e,(function(){if(o.resizer){var t=e.parentNode;t&&t!==l.parentNode&&t.insertBefore(l,t.firstChild),l._reset()}}))}function Rt(e){var t=e.$chartjs||{},a=t.resizer;delete t.resizer,function(e){var t=e.$chartjs||{},a=t.renderProxy;a&&(de.each(xt,(function(t){kt(e,t,a)})),delete t.renderProxy),e.classList.remove("chartjs-render-monitor")}(e),a&&a.parentNode&&a.parentNode.removeChild(a)}var Nt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){this._loaded||(this._loaded=!0,this.disableCSSInjection||function(e,t){var a=e._style||document.createElement("style");e._style||(e._style=a,t="/* Chart.js */\n"+t,a.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(a)),a.appendChild(document.createTextNode(t))}(this,Tt))},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var a=e&&e.getContext&&e.getContext("2d");return this._ensureLoaded(),a&&a.canvas===e?(function(e,t){var a=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e.$chartjs={initial:{height:n,width:s,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",null===s||""===s){var i=Ot(e,"width");void 0!==i&&(e.width=i)}if(null===n||""===n)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var r=Ot(e,"height");void 0!==i&&(e.height=r)}}(e,t),a):null},releaseContext:function(e){var t=e.canvas;if(t.$chartjs){var a=t.$chartjs.initial;["height","width"].forEach((function(e){var n=a[e];de.isNullOrUndef(n)?t.removeAttribute(e):t.setAttribute(e,n)})),de.each(a.style||{},(function(e,a){t.style[a]=e})),t.width=t.width,delete t.$chartjs}},addEventListener:function(e,t,a){var n=e.canvas;if("resize"!==t){var s=a.$chartjs||(a.$chartjs={});Mt(n,t,(s.proxies||(s.proxies={}))[e.id+"_"+t]=function(t){a(function(e,t){var a=wt[e.type]||e.type,n=de.getRelativePosition(e,t);return jt(a,t,n.x,n.y,e)}(t,e))})}else At(n,a,e)},removeEventListener:function(e,t,a){var n=e.canvas;if("resize"!==t){var s=((a.$chartjs||{}).proxies||{})[e.id+"_"+t];s&&kt(n,t,s)}else Rt(n)}};de.addEvent=Mt,de.removeEvent=kt;var Dt=Nt._enabled?Nt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},It=de.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Dt);oe._set("global",{plugins:{}});var Lt={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,a){var n,s,i,r,o,l=this.descriptors(e),c=l.length;for(n=0;n<c;++n)if("function"==typeof(o=(i=(s=l[n]).plugin)[t])&&((r=[e].concat(a||[])).push(s.options),!1===o.apply(i,r)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var a=[],n=[],s=e&&e.config||{},i=s.options&&s.options.plugins||{};return this._plugins.concat(s.plugins||[]).forEach((function(e){if(-1===a.indexOf(e)){var t=e.id,s=i[t];!1!==s&&(!0===s&&(s=de.clone(oe.global.plugins[t])),a.push(e),n.push({plugin:e,options:s||{}}))}})),t.descriptors=n,t.id=this._cacheId,n},_invalidate:function(e){delete e.$plugins}},Bt={constructors:{},defaults:{},registerScaleType:function(e,t,a){this.constructors[e]=t,this.defaults[e]=de.clone(a)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?de.merge({},[oe.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=de.extend(this.defaults[e],t))},addScalesToLayout:function(e){de.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,St.addBox(e,t)}))}},Ut=de.valueOrDefault;oe._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:de.noop,title:function(e,t){var a="",n=t.labels,s=n?n.length:0;if(e.length>0){var i=e[0];i.label?a=i.label:i.xLabel?a=i.xLabel:s>0&&i.index<s&&(a=n[i.index])}return a},afterTitle:de.noop,beforeBody:de.noop,beforeLabel:de.noop,label:function(e,t){var a=t.datasets[e.datasetIndex].label||"";return a&&(a+=": "),de.isNullOrUndef(e.value)?a+=e.yLabel:a+=e.value,a},labelColor:function(e,t){var a=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:a.borderColor,backgroundColor:a.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:de.noop,afterBody:de.noop,beforeFooter:de.noop,footer:de.noop,afterFooter:de.noop}}});var Ft={average:function(e){if(!e.length)return!1;var t,a,n=0,s=0,i=0;for(t=0,a=e.length;t<a;++t){var r=e[t];if(r&&r.hasValue()){var o=r.tooltipPosition();n+=o.x,s+=o.y,++i}}return{x:n/i,y:s/i}},nearest:function(e,t){var a,n,s,i=t.x,r=t.y,o=Number.POSITIVE_INFINITY;for(a=0,n=e.length;a<n;++a){var l=e[a];if(l&&l.hasValue()){var c=l.getCenterPoint(),d=de.distanceBetweenPoints(t,c);d<o&&(o=d,s=l)}}if(s){var u=s.tooltipPosition();i=u.x,r=u.y}return{x:i,y:r}}};function qt(e,t){return t&&(de.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Gt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ht(e){var t=oe.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Ut(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Ut(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Ut(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Ut(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Ut(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Ut(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Ut(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Ut(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Ut(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Wt(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function zt(e){return qt([],Gt(e))}var Yt=ge.extend({initialize:function(){this._model=Ht(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,a=t.callbacks,n=a.beforeTitle.apply(e,arguments),s=a.title.apply(e,arguments),i=a.afterTitle.apply(e,arguments),r=[];return r=qt(r,Gt(n)),r=qt(r,Gt(s)),r=qt(r,Gt(i))},getBeforeBody:function(){return zt(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var a=this,n=a._options.callbacks,s=[];return de.each(e,(function(e){var i={before:[],lines:[],after:[]};qt(i.before,Gt(n.beforeLabel.call(a,e,t))),qt(i.lines,n.label.call(a,e,t)),qt(i.after,Gt(n.afterLabel.call(a,e,t))),s.push(i)})),s},getAfterBody:function(){return zt(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,a=t.beforeFooter.apply(e,arguments),n=t.footer.apply(e,arguments),s=t.afterFooter.apply(e,arguments),i=[];return i=qt(i,Gt(a)),i=qt(i,Gt(n)),i=qt(i,Gt(s))},update:function(e){var t,a,n,s,i,r,o,l,c,d,u=this,m=u._options,h=u._model,p=u._model=Ht(m),g=u._active,f=u._data,b={xAlign:h.xAlign,yAlign:h.yAlign},v={x:h.x,y:h.y},_={width:h.width,height:h.height},y={x:h.caretX,y:h.caretY};if(g.length){p.opacity=1;var E=[],S=[];y=Ft[m.position].call(u,g,u._eventPosition);var T=[];for(t=0,a=g.length;t<a;++t)T.push((n=g[t],s=void 0,i=void 0,r=void 0,o=void 0,l=void 0,c=void 0,d=void 0,s=n._xScale,i=n._yScale||n._scale,r=n._index,o=n._datasetIndex,l=n._chart.getDatasetMeta(o).controller,c=l._getIndexScale(),d=l._getValueScale(),{xLabel:s?s.getLabelForIndex(r,o):"",yLabel:i?i.getLabelForIndex(r,o):"",label:c?""+c.getLabelForIndex(r,o):"",value:d?""+d.getLabelForIndex(r,o):"",index:r,datasetIndex:o,x:n._model.x,y:n._model.y}));m.filter&&(T=T.filter((function(e){return m.filter(e,f)}))),m.itemSort&&(T=T.sort((function(e,t){return m.itemSort(e,t,f)}))),de.each(T,(function(e){E.push(m.callbacks.labelColor.call(u,e,u._chart)),S.push(m.callbacks.labelTextColor.call(u,e,u._chart))})),p.title=u.getTitle(T,f),p.beforeBody=u.getBeforeBody(T,f),p.body=u.getBody(T,f),p.afterBody=u.getAfterBody(T,f),p.footer=u.getFooter(T,f),p.x=y.x,p.y=y.y,p.caretPadding=m.caretPadding,p.labelColors=E,p.labelTextColors=S,p.dataPoints=T,_=function(e,t){var a=e._chart.ctx,n=2*t.yPadding,s=0,i=t.body,r=i.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);r+=t.beforeBody.length+t.afterBody.length;var o=t.title.length,l=t.footer.length,c=t.titleFontSize,d=t.bodyFontSize,u=t.footerFontSize;n+=o*c,n+=o?(o-1)*t.titleSpacing:0,n+=o?t.titleMarginBottom:0,n+=r*d,n+=r?(r-1)*t.bodySpacing:0,n+=l?t.footerMarginTop:0,n+=l*u,n+=l?(l-1)*t.footerSpacing:0;var m=0,h=function(e){s=Math.max(s,a.measureText(e).width+m)};return a.font=de.fontString(c,t._titleFontStyle,t._titleFontFamily),de.each(t.title,h),a.font=de.fontString(d,t._bodyFontStyle,t._bodyFontFamily),de.each(t.beforeBody.concat(t.afterBody),h),m=t.displayColors?d+2:0,de.each(i,(function(e){de.each(e.before,h),de.each(e.lines,h),de.each(e.after,h)})),m=0,a.font=de.fontString(u,t._footerFontStyle,t._footerFontFamily),de.each(t.footer,h),{width:s+=2*t.xPadding,height:n}}(this,p),v=function(e,t,a,n){var s=e.x,i=e.y,r=e.caretSize,o=e.caretPadding,l=e.cornerRadius,c=a.xAlign,d=a.yAlign,u=r+o,m=l+o;return"right"===c?s-=t.width:"center"===c&&((s-=t.width/2)+t.width>n.width&&(s=n.width-t.width),s<0&&(s=0)),"top"===d?i+=u:i-="bottom"===d?t.height+u:t.height/2,"center"===d?"left"===c?s+=u:"right"===c&&(s-=u):"left"===c?s-=m:"right"===c&&(s+=m),{x:s,y:i}}(p,_,b=function(e,t){var a,n,s,i,r,o=e._model,l=e._chart,c=e._chart.chartArea,d="center",u="center";o.y<t.height?u="top":o.y>l.height-t.height&&(u="bottom");var m=(c.left+c.right)/2,h=(c.top+c.bottom)/2;"center"===u?(a=function(e){return e<=m},n=function(e){return e>m}):(a=function(e){return e<=t.width/2},n=function(e){return e>=l.width-t.width/2}),s=function(e){return e+t.width+o.caretSize+o.caretPadding>l.width},i=function(e){return e-t.width-o.caretSize-o.caretPadding<0},r=function(e){return e<=h?"top":"bottom"},a(o.x)?(d="left",s(o.x)&&(d="center",u=r(o.y))):n(o.x)&&(d="right",i(o.x)&&(d="center",u=r(o.y)));var p=e._options;return{xAlign:p.xAlign?p.xAlign:d,yAlign:p.yAlign?p.yAlign:u}}(this,_),u._chart)}else p.opacity=0;return p.xAlign=b.xAlign,p.yAlign=b.yAlign,p.x=v.x,p.y=v.y,p.width=_.width,p.height=_.height,p.caretX=y.x,p.caretY=y.y,u._model=p,e&&m.custom&&m.custom.call(u,p),u},drawCaret:function(e,t){var a=this._chart.ctx,n=this._view,s=this.getCaretPosition(e,t,n);a.lineTo(s.x1,s.y1),a.lineTo(s.x2,s.y2),a.lineTo(s.x3,s.y3)},getCaretPosition:function(e,t,a){var n,s,i,r,o,l,c=a.caretSize,d=a.cornerRadius,u=a.xAlign,m=a.yAlign,h=e.x,p=e.y,g=t.width,f=t.height;if("center"===m)o=p+f/2,"left"===u?(s=(n=h)-c,i=n,r=o+c,l=o-c):(s=(n=h+g)+c,i=n,r=o-c,l=o+c);else if("left"===u?(n=(s=h+d+c)-c,i=s+c):"right"===u?(n=(s=h+g-d-c)-c,i=s+c):(n=(s=a.caretX)-c,i=s+c),"top"===m)o=(r=p)-c,l=r;else{o=(r=p+f)+c,l=r;var b=i;i=n,n=b}return{x1:n,x2:s,x3:i,y1:r,y2:o,y3:l}},drawTitle:function(e,t,a){var n=t.title;if(n.length){e.x=Wt(t,t._titleAlign),a.textAlign=t._titleAlign,a.textBaseline="top";var s,i,r=t.titleFontSize,o=t.titleSpacing;for(a.fillStyle=t.titleFontColor,a.font=de.fontString(r,t._titleFontStyle,t._titleFontFamily),s=0,i=n.length;s<i;++s)a.fillText(n[s],e.x,e.y),e.y+=r+o,s+1===n.length&&(e.y+=t.titleMarginBottom-o)}},drawBody:function(e,t,a){var n,s=t.bodyFontSize,i=t.bodySpacing,r=t._bodyAlign,o=t.body,l=t.displayColors,c=t.labelColors,d=0,u=l?Wt(t,"left"):0;a.textAlign=r,a.textBaseline="top",a.font=de.fontString(s,t._bodyFontStyle,t._bodyFontFamily),e.x=Wt(t,r);var m=function(t){a.fillText(t,e.x+d,e.y),e.y+=s+i};a.fillStyle=t.bodyFontColor,de.each(t.beforeBody,m),d=l&&"right"!==r?"center"===r?s/2+1:s+2:0,de.each(o,(function(i,r){n=t.labelTextColors[r],a.fillStyle=n,de.each(i.before,m),de.each(i.lines,(function(i){l&&(a.fillStyle=t.legendColorBackground,a.fillRect(u,e.y,s,s),a.lineWidth=1,a.strokeStyle=c[r].borderColor,a.strokeRect(u,e.y,s,s),a.fillStyle=c[r].backgroundColor,a.fillRect(u+1,e.y+1,s-2,s-2),a.fillStyle=n),m(i)})),de.each(i.after,m)})),d=0,de.each(t.afterBody,m),e.y-=i},drawFooter:function(e,t,a){var n=t.footer;n.length&&(e.x=Wt(t,t._footerAlign),e.y+=t.footerMarginTop,a.textAlign=t._footerAlign,a.textBaseline="top",a.fillStyle=t.footerFontColor,a.font=de.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),de.each(n,(function(n){a.fillText(n,e.x,e.y),e.y+=t.footerFontSize+t.footerSpacing})))},drawBackground:function(e,t,a,n){a.fillStyle=t.backgroundColor,a.strokeStyle=t.borderColor,a.lineWidth=t.borderWidth;var s=t.xAlign,i=t.yAlign,r=e.x,o=e.y,l=n.width,c=n.height,d=t.cornerRadius;a.beginPath(),a.moveTo(r+d,o),"top"===i&&this.drawCaret(e,n),a.lineTo(r+l-d,o),a.quadraticCurveTo(r+l,o,r+l,o+d),"center"===i&&"right"===s&&this.drawCaret(e,n),a.lineTo(r+l,o+c-d),a.quadraticCurveTo(r+l,o+c,r+l-d,o+c),"bottom"===i&&this.drawCaret(e,n),a.lineTo(r+d,o+c),a.quadraticCurveTo(r,o+c,r,o+c-d),"center"===i&&"left"===s&&this.drawCaret(e,n),a.lineTo(r,o+d),a.quadraticCurveTo(r,o,r+d,o),a.closePath(),a.fill(),t.borderWidth>0&&a.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var a={width:t.width,height:t.height},n={x:t.x,y:t.y},s=Math.abs(t.opacity<.001)?0:t.opacity,i=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&i&&(e.save(),e.globalAlpha=s,this.drawBackground(n,t,e,a),n.y+=t.yPadding,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),e.restore())}},handleEvent:function(e){var t,a=this,n=a._options;return a._lastActive=a._lastActive||[],"mouseout"===e.type?a._active=[]:a._active=a._chart.getElementsAtEventForMode(e,n.mode,n),(t=!de.arrayEquals(a._active,a._lastActive))&&(a._lastActive=a._active,(n.enabled||n.custom)&&(a._eventPosition={x:e.x,y:e.y},a.update(!0),a.pivot())),t}}),Vt=Ft,Jt=Yt;Jt.positioners=Vt;var Xt=de.valueOrDefault;function Kt(){return de.merge({},[].slice.call(arguments),{merger:function(e,t,a,n){if("xAxes"===e||"yAxes"===e){var s,i,r,o=a[e].length;for(t[e]||(t[e]=[]),s=0;s<o;++s)r=a[e][s],i=Xt(r.type,"xAxes"===e?"category":"linear"),s>=t[e].length&&t[e].push({}),!t[e][s].type||r.type&&r.type!==t[e][s].type?de.merge(t[e][s],[Bt.getScaleDefaults(i),r]):de.merge(t[e][s],r)}else de._merger(e,t,a,n)}})}function Qt(){return de.merge({},[].slice.call(arguments),{merger:function(e,t,a,n){var s=t[e]||{},i=a[e];"scales"===e?t[e]=Kt(s,i):"scale"===e?t[e]=de.merge(s,[Bt.getScaleDefaults(i.type),i]):de._merger(e,t,a,n)}})}function $t(e){var t=e.options;de.each(e.scales,(function(t){St.removeBox(e,t)})),t=Qt(oe.global,oe[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Zt(e){return"top"===e||"bottom"===e}oe._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var ea=function(e,t){return this.construct(e,t),this};de.extend(ea.prototype,{construct:function(e,t){var a=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Qt(oe.global,oe[e.type],e.options||{}),e}(t);var n=It.acquireContext(e,t),s=n&&n.canvas,i=s&&s.height,r=s&&s.width;a.id=de.uid(),a.ctx=n,a.canvas=s,a.config=t,a.width=r,a.height=i,a.aspectRatio=i?r/i:null,a.options=t.options,a._bufferedRender=!1,a.chart=a,a.controller=a,ea.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data},set:function(e){a.config.data=e}}),n&&s?(a.initialize(),a.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Lt.notify(e,"beforeInit"),de.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.initToolTip(),Lt.notify(e,"afterInit"),e},clear:function(){return de.canvas.clear(this),this},stop:function(){return ve.cancelAnimation(this),this},resize:function(e){var t=this,a=t.options,n=t.canvas,s=a.maintainAspectRatio&&t.aspectRatio||null,i=Math.max(0,Math.floor(de.getMaximumWidth(n))),r=Math.max(0,Math.floor(s?i/s:de.getMaximumHeight(n)));if((t.width!==i||t.height!==r)&&(n.width=t.width=i,n.height=t.height=r,n.style.width=i+"px",n.style.height=r+"px",de.retinaScale(t,a.devicePixelRatio),!e)){var o={width:i,height:r};Lt.notify(t,"resize",[o]),a.onResize&&a.onResize(t,o),t.stop(),t.update({duration:a.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},a=e.scale;de.each(t.xAxes,(function(e,t){e.id=e.id||"x-axis-"+t})),de.each(t.yAxes,(function(e,t){e.id=e.id||"y-axis-"+t})),a&&(a.id=a.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,a=e.scales||{},n=[],s=Object.keys(a).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(n=n.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&n.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),de.each(n,(function(t){var n=t.options,i=n.id,r=Xt(n.type,t.dtype);Zt(n.position)!==Zt(t.dposition)&&(n.position=t.dposition),s[i]=!0;var o=null;if(i in a&&a[i].type===r)(o=a[i]).options=n,o.ctx=e.ctx,o.chart=e;else{var l=Bt.getScaleConstructor(r);if(!l)return;o=new l({id:i,type:r,options:n,ctx:e.ctx,chart:e}),a[o.id]=o}o.mergeTicksOptions(),t.isDefault&&(e.scale=o)})),de.each(s,(function(e,t){e||delete a[t]})),e.scales=a,Bt.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e=this,t=[];return de.each(e.data.datasets,(function(a,n){var s=e.getDatasetMeta(n),i=a.type||e.config.type;if(s.type&&s.type!==i&&(e.destroyDatasetMeta(n),s=e.getDatasetMeta(n)),s.type=i,s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{var r=dt[s.type];if(void 0===r)throw new Error('"'+s.type+'" is not a chart type.');s.controller=new r(e,n),t.push(s.controller)}}),e),t},resetElements:function(){var e=this;de.each(e.data.datasets,(function(t,a){e.getDatasetMeta(a).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),$t(t),Lt._invalidate(t),!1!==Lt.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var a=t.buildOrUpdateControllers();de.each(t.data.datasets,(function(e,a){t.getDatasetMeta(a).controller.buildOrUpdateElements()}),t),t.updateLayout(),t.options.animation&&t.options.animation.duration&&de.each(a,(function(e){e.reset()})),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],Lt.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){!1!==Lt.notify(this,"beforeLayout")&&(St.update(this,this.width,this.height),Lt.notify(this,"afterScaleUpdate"),Lt.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Lt.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Lt.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),a={meta:t,index:e};!1!==Lt.notify(this,"beforeDatasetUpdate",[a])&&(t.controller.update(),Lt.notify(this,"afterDatasetUpdate",[a]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var a=t.options.animation,n=Xt(e.duration,a&&a.duration),s=e.lazy;if(!1!==Lt.notify(t,"beforeRender")){var i=function(e){Lt.notify(t,"afterRender"),de.callback(a&&a.onComplete,[e],t)};if(a&&n){var r=new be({numSteps:n/16.66,easing:e.easing||a.easing,render:function(e,t){var a=de.easing.effects[t.easing],n=t.currentStep,s=n/t.numSteps;e.draw(a(s),s,n)},onAnimationProgress:a.onProgress,onAnimationComplete:i});ve.addAnimation(t,r,n,s)}else t.draw(),i(new be({numSteps:0,chart:t}));return t}},draw:function(e){var t=this;t.clear(),de.isNullOrUndef(e)&&(e=1),t.transition(e),t.width<=0||t.height<=0||!1!==Lt.notify(t,"beforeDraw",[e])&&(de.each(t.boxes,(function(e){e.draw(t.chartArea)}),t),t.drawDatasets(e),t._drawTooltip(e),Lt.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=0,a=(this.data.datasets||[]).length;t<a;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==Lt.notify(t,"beforeDatasetsDraw",[e])){for(var a=(t.data.datasets||[]).length-1;a>=0;--a)t.isDatasetVisible(a)&&t.drawDataset(a,e);Lt.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var a=this.getDatasetMeta(e),n={meta:a,index:e,easingValue:t};!1!==Lt.notify(this,"beforeDatasetDraw",[n])&&(a.controller.draw(t),Lt.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,a={tooltip:t,easingValue:e};!1!==Lt.notify(this,"beforeTooltipDraw",[a])&&(t.draw(),Lt.notify(this,"afterTooltipDraw",[a]))},getElementAtEvent:function(e){return bt.modes.single(this,e)},getElementsAtEvent:function(e){return bt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return bt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,a){var n=bt.modes[t];return"function"==typeof n?n(this,e,a):[]},getDatasetAtEvent:function(e){return bt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var a=t._meta[this.id];return a||(a=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),a},getVisibleDatasetCount:function(){for(var e=0,t=0,a=this.data.datasets.length;t<a;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,a=this.data.datasets[e],n=a._meta&&a._meta[t];n&&(n.controller.destroy(),delete a._meta[t])},destroy:function(){var e,t,a=this,n=a.canvas;for(a.stop(),e=0,t=a.data.datasets.length;e<t;++e)a.destroyDatasetMeta(e);n&&(a.unbindEvents(),de.canvas.clear(a),It.releaseContext(a.ctx),a.canvas=null,a.ctx=null),Lt.notify(a,"destroy"),delete ea.instances[a.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Jt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},a=function(){e.eventHandler.apply(e,arguments)};de.each(e.options.events,(function(n){It.addEventListener(e,n,a),t[n]=a})),e.options.responsive&&(a=function(){e.resize()},It.addEventListener(e,"resize",a),t.resize=a)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,de.each(t,(function(t,a){It.removeEventListener(e,a,t)})))},updateHoverStyle:function(e,t,a){var n,s,i,r=a?"setHoverStyle":"removeHoverStyle";for(s=0,i=e.length;s<i;++s)(n=e[s])&&this.getDatasetMeta(n._datasetIndex).controller[r](n)},eventHandler:function(e){var t=this,a=t.tooltip;if(!1!==Lt.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var n=t.handleEvent(e);a&&(n=a._start?a.handleEvent(e):n|a.handleEvent(e)),Lt.notify(t,"afterEvent",[e]);var s=t._bufferedRequest;return s?t.render(s):n&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,a=this,n=a.options||{},s=n.hover;return a.lastActive=a.lastActive||[],"mouseout"===e.type?a.active=[]:a.active=a.getElementsAtEventForMode(e,s.mode,s),de.callback(n.onHover||n.hover.onHover,[e.native,a.active],a),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(a,e.native,a.active),a.lastActive.length&&a.updateHoverStyle(a.lastActive,s.mode,!1),a.active.length&&s.mode&&a.updateHoverStyle(a.active,s.mode,!0),t=!de.arrayEquals(a.active,a.lastActive),a.lastActive=a.active,t}}),ea.instances={};var ta=ea;function aa(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function na(e){this.options=e||{}}ea.Controller=ea,ea.types={},de.configMerge=Qt,de.scaleMerge=Kt,de.extend(na.prototype,{formats:aa,parse:aa,format:aa,add:aa,diff:aa,startOf:aa,endOf:aa,_create:function(e){return e}}),na.override=function(e){de.extend(na.prototype,e)};var sa={_date:na},ia={formatters:{values:function(e){return de.isArray(e)?e:""+e},linear:function(e,t,a){var n=a.length>3?a[2]-a[1]:a[1]-a[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var s=de.log10(Math.abs(n)),i="";if(0!==e)if(Math.max(Math.abs(a[0]),Math.abs(a[a.length-1]))<1e-4){var r=de.log10(Math.abs(e));i=e.toExponential(Math.floor(r)-Math.floor(s))}else{var o=-1*Math.floor(s);o=Math.max(Math.min(o,20),0),i=e.toFixed(o)}else i="0";return i},logarithmic:function(e,t,a){var n=e/Math.pow(10,Math.floor(de.log10(e)));return 0===e?"0":1===n||2===n||5===n||0===t||t===a.length-1?e.toExponential():""}}},ra=de.valueOrDefault,oa=de.valueAtIndexOrDefault;function la(e){var t,a,n=[];for(t=0,a=e.length;t<a;++t)n.push(e[t].label);return n}function ca(e,t,a){return de.isArray(t)?de.longestText(e,a,t):e.measureText(t).width}oe._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:ia.formatters.values,minor:{},major:{}}});var da=ge.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;for(var t in!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1}),e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){de.callback(this.options.beforeUpdate,[this])},update:function(e,t,a){var n,s,i,r,o,l,c=this;for(c.beforeUpdate(),c.maxWidth=e,c.maxHeight=t,c.margins=de.extend({left:0,right:0,top:0,bottom:0},a),c._maxLabelLines=0,c.longestLabelWidth=0,c.longestTextCache=c.longestTextCache||{},c.beforeSetDimensions(),c.setDimensions(),c.afterSetDimensions(),c.beforeDataLimits(),c.determineDataLimits(),c.afterDataLimits(),c.beforeBuildTicks(),o=c.buildTicks()||[],o=c.afterBuildTicks(o)||o,c.beforeTickToLabelConversion(),i=c.convertTicksToLabels(o)||c.ticks,c.afterTickToLabelConversion(),c.ticks=i,n=0,s=i.length;n<s;++n)r=i[n],(l=o[n])?l.label=r:o.push(l={label:r,major:!1});return c._ticks=o,c.beforeCalculateTickRotation(),c.calculateTickRotation(),c.afterCalculateTickRotation(),c.beforeFit(),c.fit(),c.afterFit(),c.afterUpdate(),c.minSize},afterUpdate:function(){de.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){de.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){de.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){de.callback(this.options.beforeDataLimits,[this])},determineDataLimits:de.noop,afterDataLimits:function(){de.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){de.callback(this.options.beforeBuildTicks,[this])},buildTicks:de.noop,afterBuildTicks:function(e){var t=this;return de.isArray(e)&&e.length?de.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=de.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){de.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){de.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){de.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,a=e.options.ticks,n=la(e._ticks),s=de.options._parseFont(a);t.font=s.string;var i=a.minRotation||0;if(n.length&&e.options.display&&e.isHorizontal())for(var r,o=de.longestText(t,s.string,n,e.longestTextCache),l=o,c=e.getPixelForTick(1)-e.getPixelForTick(0)-6;l>c&&i<a.maxRotation;){var d=de.toRadians(i);if(r=Math.cos(d),Math.sin(d)*o>e.maxHeight){i--;break}i++,l=r*o}e.labelRotation=i},afterCalculateTickRotation:function(){de.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){de.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},a=la(e._ticks),n=e.options,s=n.ticks,i=n.scaleLabel,r=n.gridLines,o=e._isVisible(),l=n.position,c=e.isHorizontal(),d=de.options._parseFont,u=d(s),m=n.gridLines.tickMarkLength;if(t.width=c?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:o&&r.drawTicks?m:0,t.height=c?o&&r.drawTicks?m:0:e.maxHeight,i.display&&o){var h=d(i),p=de.options.toPadding(i.padding),g=h.lineHeight+p.height;c?t.height+=g:t.width+=g}if(s.display&&o){var f=de.longestText(e.ctx,u.string,a,e.longestTextCache),b=de.numberOfLabelLines(a),v=.5*u.size,_=e.options.ticks.padding;if(e._maxLabelLines=b,e.longestLabelWidth=f,c){var y=de.toRadians(e.labelRotation),E=Math.cos(y),S=Math.sin(y)*f+u.lineHeight*b+v;t.height=Math.min(e.maxHeight,t.height+S+_),e.ctx.font=u.string;var T,x,w=ca(e.ctx,a[0],u.string),O=ca(e.ctx,a[a.length-1],u.string),C=e.getPixelForTick(0)-e.left,M=e.right-e.getPixelForTick(a.length-1);0!==e.labelRotation?(T="bottom"===l?E*w:E*v,x="bottom"===l?E*v:E*O):(T=w/2,x=O/2),e.paddingLeft=Math.max(T-C,0)+3,e.paddingRight=Math.max(x-M,0)+3}else s.mirror?f=0:f+=_+v,t.width=Math.min(e.maxWidth,t.width+f),e.paddingTop=u.size/2,e.paddingBottom=u.size/2}e.handleMargins(),e.width=t.width,e.height=t.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){de.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(de.isNullOrUndef(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:de.noop,getPixelForValue:de.noop,getValueForPixel:de.noop,getPixelForTick:function(e){var t=this,a=t.options.offset;if(t.isHorizontal()){var n=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(a?0:1),1),s=n*e+t.paddingLeft;a&&(s+=n/2);var i=t.left+s;return i+=t.isFullWidth()?t.margins.left:0}var r=t.height-(t.paddingTop+t.paddingBottom);return t.top+e*(r/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;if(t.isHorizontal()){var a=(t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft,n=t.left+a;return n+=t.isFullWidth()?t.margins.left:0}return t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,a,n=this,s=n.isHorizontal(),i=n.options.ticks.minor,r=e.length,o=!1,l=i.maxTicksLimit,c=n._tickSize()*(r-1),d=s?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),u=[];for(c>d&&(o=1+Math.floor(c/d)),r>l&&(o=Math.max(o,1+Math.floor(r/l))),t=0;t<r;t++)a=e[t],o>1&&t%o>0&&delete a.label,u.push(a);return u},_tickSize:function(){var e=this,t=e.isHorizontal(),a=e.options.ticks.minor,n=de.toRadians(e.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=a.autoSkipPadding||0,o=e.longestLabelWidth+r||0,l=de.options._parseFont(a),c=e._maxLabelLines*l.lineHeight+r||0;return t?c*s>o*i?o/s:c/i:c*i<o*s?c/s:o/i},_isVisible:function(){var e,t,a,n=this.chart,s=this.options.display;if("auto"!==s)return!!s;for(e=0,t=n.data.datasets.length;e<t;++e)if(n.isDatasetVisible(e)&&((a=n.getDatasetMeta(e)).xAxisID===this.id||a.yAxisID===this.id))return!0;return!1},draw:function(e){var t=this,a=t.options;if(t._isVisible()){var n,s,i,r=t.chart,o=t.ctx,l=oe.global.defaultFontColor,c=a.ticks.minor,d=a.ticks.major||c,u=a.gridLines,m=a.scaleLabel,h=a.position,p=0!==t.labelRotation,g=c.mirror,f=t.isHorizontal(),b=de.options._parseFont,v=c.display&&c.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),_=ra(c.fontColor,l),y=b(c),E=y.lineHeight,S=ra(d.fontColor,l),T=b(d),x=c.padding,w=c.labelOffset,O=u.drawTicks?u.tickMarkLength:0,C=ra(m.fontColor,l),M=b(m),k=de.options.toPadding(m.padding),j=de.toRadians(t.labelRotation),P=[],A=u.drawBorder?oa(u.lineWidth,0,0):0,R=de._alignPixel;if("top"===h?(n=R(r,t.bottom,A),s=t.bottom-O,i=n-A/2):"bottom"===h?(n=R(r,t.top,A),s=n+A/2,i=t.top+O):"left"===h?(n=R(r,t.right,A),s=t.right-O,i=n-A/2):(n=R(r,t.left,A),s=n+A/2,i=t.left+O),de.each(v,(function(n,o){if(!de.isNullOrUndef(n.label)){var l,c,d,m,b,v,_,y,S,T,C,M,k,N,D,I,L=n.label;o===t.zeroLineIndex&&a.offset===u.offsetGridLines?(l=u.zeroLineWidth,c=u.zeroLineColor,d=u.zeroLineBorderDash||[],m=u.zeroLineBorderDashOffset||0):(l=oa(u.lineWidth,o),c=oa(u.color,o),d=u.borderDash||[],m=u.borderDashOffset||0);var B=de.isArray(L)?L.length:1,U=function(e,t,a){var n=e.getPixelForTick(t);return a&&(1===e.getTicks().length?n-=e.isHorizontal()?Math.max(n-e.left,e.right-n):Math.max(n-e.top,e.bottom-n):n-=0===t?(e.getPixelForTick(1)-n)/2:(n-e.getPixelForTick(t-1))/2),n}(t,o,u.offsetGridLines);if(f){var F=O+x;U<t.left-1e-7&&(c="rgba(0,0,0,0)"),b=_=S=C=R(r,U,l),v=s,y=i,k=t.getPixelForTick(o)+w,"top"===h?(T=R(r,e.top,A)+A/2,M=e.bottom,D=((p?1:.5)-B)*E,I=p?"left":"center",N=t.bottom-F):(T=e.top,M=R(r,e.bottom,A)-A/2,D=(p?0:.5)*E,I=p?"right":"center",N=t.top+F)}else{var q=(g?0:O)+x;U<t.top-1e-7&&(c="rgba(0,0,0,0)"),b=s,_=i,v=y=T=M=R(r,U,l),N=t.getPixelForTick(o)+w,D=(1-B)*E/2,"left"===h?(S=R(r,e.left,A)+A/2,C=e.right,I=g?"left":"right",k=t.right-q):(S=e.left,C=R(r,e.right,A)-A/2,I=g?"right":"left",k=t.left+q)}P.push({tx1:b,ty1:v,tx2:_,ty2:y,x1:S,y1:T,x2:C,y2:M,labelX:k,labelY:N,glWidth:l,glColor:c,glBorderDash:d,glBorderDashOffset:m,rotation:-1*j,label:L,major:n.major,textOffset:D,textAlign:I})}})),de.each(P,(function(e){var t=e.glWidth,a=e.glColor;if(u.display&&t&&a&&(o.save(),o.lineWidth=t,o.strokeStyle=a,o.setLineDash&&(o.setLineDash(e.glBorderDash),o.lineDashOffset=e.glBorderDashOffset),o.beginPath(),u.drawTicks&&(o.moveTo(e.tx1,e.ty1),o.lineTo(e.tx2,e.ty2)),u.drawOnChartArea&&(o.moveTo(e.x1,e.y1),o.lineTo(e.x2,e.y2)),o.stroke(),o.restore()),c.display){o.save(),o.translate(e.labelX,e.labelY),o.rotate(e.rotation),o.font=e.major?T.string:y.string,o.fillStyle=e.major?S:_,o.textBaseline="middle",o.textAlign=e.textAlign;var n=e.label,s=e.textOffset;if(de.isArray(n))for(var i=0;i<n.length;++i)o.fillText(""+n[i],0,s),s+=E;else o.fillText(n,0,s);o.restore()}})),m.display){var N,D,I=0,L=M.lineHeight/2;if(f)N=t.left+(t.right-t.left)/2,D="bottom"===h?t.bottom-L-k.bottom:t.top+L+k.top;else{var B="left"===h;N=B?t.left+L+k.top:t.right-L-k.top,D=t.top+(t.bottom-t.top)/2,I=B?-.5*Math.PI:.5*Math.PI}o.save(),o.translate(N,D),o.rotate(I),o.textAlign="center",o.textBaseline="middle",o.fillStyle=C,o.font=M.string,o.fillText(m.labelString,0,0),o.restore()}if(A){var U,F,q,G,H=A,W=oa(u.lineWidth,v.length-1,0);f?(U=R(r,t.left,H)-H/2,F=R(r,t.right,W)+W/2,q=G=n):(q=R(r,t.top,H)-H/2,G=R(r,t.bottom,W)+W/2,U=F=n),o.lineWidth=A,o.strokeStyle=oa(u.color,0),o.beginPath(),o.moveTo(U,q),o.lineTo(F,G),o.stroke()}}}}),ua=da.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,t=this,a=t.getLabels();t.minIndex=0,t.maxIndex=a.length-1,void 0!==t.options.ticks.min&&(e=a.indexOf(t.options.ticks.min),t.minIndex=-1!==e?e:t.minIndex),void 0!==t.options.ticks.max&&(e=a.indexOf(t.options.ticks.max),t.maxIndex=-1!==e?e:t.maxIndex),t.min=a[t.minIndex],t.max=a[t.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var a=this,n=a.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===a.id?a.getRightValue(n.data.datasets[t].data[e]):a.ticks[e-a.minIndex]},getPixelForValue:function(e,t){var a,n=this,s=n.options.offset,i=Math.max(n.maxIndex+1-n.minIndex-(s?0:1),1);if(null!=e&&(a=n.isHorizontal()?e.x:e.y),void 0!==a||void 0!==e&&isNaN(t)){e=a||e;var r=n.getLabels().indexOf(e);t=-1!==r?r:t}if(n.isHorizontal()){var o=n.width/i,l=o*(t-n.minIndex);return s&&(l+=o/2),n.left+l}var c=n.height/i,d=c*(t-n.minIndex);return s&&(d+=c/2),n.top+d},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,a=t.options.offset,n=Math.max(t._ticks.length-(a?0:1),1),s=t.isHorizontal(),i=(s?t.width:t.height)/n;return e-=s?t.left:t.top,a&&(e-=i/2),(e<=0?0:Math.round(e/i))+t.minIndex},getBasePixel:function(){return this.bottom}}),ma={position:"bottom"};ua._defaults=ma;var ha=de.noop,pa=de.isNullOrUndef,ga=da.extend({getRightValue:function(e){return"string"==typeof e?+e:da.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var a=de.sign(e.min),n=de.sign(e.max);a<0&&n<0?e.max=0:a>0&&n>0&&(e.min=0)}var s=void 0!==t.min||void 0!==t.suggestedMin,i=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),s!==i&&e.min>=e.max&&(s?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,a=t.stepSize,n=t.maxTicksLimit;return a?e=Math.ceil(this.max/a)-Math.floor(this.min/a)+1:(e=this._computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ha,buildTicks:function(){var e=this,t=e.options.ticks,a=e.getTickLimit(),n={maxTicks:a=Math.max(2,a),min:t.min,max:t.max,precision:t.precision,stepSize:de.valueOrDefault(t.fixedStepSize,t.stepSize)},s=e.ticks=function(e,t){var a,n,s,i,r=[],o=e.stepSize,l=o||1,c=e.maxTicks-1,d=e.min,u=e.max,m=e.precision,h=t.min,p=t.max,g=de.niceNum((p-h)/c/l)*l;if(g<1e-14&&pa(d)&&pa(u))return[h,p];(i=Math.ceil(p/g)-Math.floor(h/g))>c&&(g=de.niceNum(i*g/c/l)*l),o||pa(m)?a=Math.pow(10,de._decimalPlaces(g)):(a=Math.pow(10,m),g=Math.ceil(g*a)/a),n=Math.floor(h/g)*g,s=Math.ceil(p/g)*g,o&&(!pa(d)&&de.almostWhole(d/g,g/1e3)&&(n=d),!pa(u)&&de.almostWhole(u/g,g/1e3)&&(s=u)),i=(s-n)/g,i=de.almostEquals(i,Math.round(i),g/1e3)?Math.round(i):Math.ceil(i),n=Math.round(n*a)/a,s=Math.round(s*a)/a,r.push(pa(d)?n:d);for(var f=1;f<i;++f)r.push(Math.round((n+f*g)*a)/a);return r.push(pa(u)?s:u),r}(n,e);e.handleDirectionalChanges(),e.max=de.max(s),e.min=de.min(s),t.reverse?(s.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),da.prototype.convertTicksToLabels.call(e)}}),fa={position:"left",ticks:{callback:ia.formatters.linear}},ba=ga.extend({determineDataLimits:function(){var e=this,t=e.options,a=e.chart,n=a.data.datasets,s=e.isHorizontal();function i(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null;var r=t.stacked;if(void 0===r&&de.each(n,(function(e,t){if(!r){var n=a.getDatasetMeta(t);a.isDatasetVisible(t)&&i(n)&&void 0!==n.stack&&(r=!0)}})),t.stacked||r){var o={};de.each(n,(function(n,s){var r=a.getDatasetMeta(s),l=[r.type,void 0===t.stacked&&void 0===r.stack?s:"",r.stack].join(".");void 0===o[l]&&(o[l]={positiveValues:[],negativeValues:[]});var c=o[l].positiveValues,d=o[l].negativeValues;a.isDatasetVisible(s)&&i(r)&&de.each(n.data,(function(a,n){var s=+e.getRightValue(a);isNaN(s)||r.data[n].hidden||(c[n]=c[n]||0,d[n]=d[n]||0,t.relativePoints?c[n]=100:s<0?d[n]+=s:c[n]+=s)}))})),de.each(o,(function(t){var a=t.positiveValues.concat(t.negativeValues),n=de.min(a),s=de.max(a);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?s:Math.max(e.max,s)}))}else de.each(n,(function(t,n){var s=a.getDatasetMeta(n);a.isDatasetVisible(n)&&i(s)&&de.each(t.data,(function(t,a){var n=+e.getRightValue(t);isNaN(n)||s.data[a].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n))}))}));e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=de.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this,a=t.start,n=+t.getRightValue(e),s=t.end-a;return t.isHorizontal()?t.left+t.width/s*(n-a):t.bottom-t.height/s*(n-a)},getValueForPixel:function(e){var t=this,a=t.isHorizontal(),n=a?t.width:t.height,s=(a?e-t.left:t.bottom-e)/n;return t.start+(t.end-t.start)*s},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}}),va=fa;ba._defaults=va;var _a=de.valueOrDefault,ya={position:"left",ticks:{callback:ia.formatters.logarithmic}};function Ea(e,t){return de.isFinite(e)&&e>=0?e:t}var Sa=da.extend({determineDataLimits:function(){var e=this,t=e.options,a=e.chart,n=a.data.datasets,s=e.isHorizontal();function i(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null,e.minNotZero=null;var r=t.stacked;if(void 0===r&&de.each(n,(function(e,t){if(!r){var n=a.getDatasetMeta(t);a.isDatasetVisible(t)&&i(n)&&void 0!==n.stack&&(r=!0)}})),t.stacked||r){var o={};de.each(n,(function(n,s){var r=a.getDatasetMeta(s),l=[r.type,void 0===t.stacked&&void 0===r.stack?s:"",r.stack].join(".");a.isDatasetVisible(s)&&i(r)&&(void 0===o[l]&&(o[l]=[]),de.each(n.data,(function(t,a){var n=o[l],s=+e.getRightValue(t);isNaN(s)||r.data[a].hidden||s<0||(n[a]=n[a]||0,n[a]+=s)})))})),de.each(o,(function(t){if(t.length>0){var a=de.min(t),n=de.max(t);e.min=null===e.min?a:Math.min(e.min,a),e.max=null===e.max?n:Math.max(e.max,n)}}))}else de.each(n,(function(t,n){var s=a.getDatasetMeta(n);a.isDatasetVisible(n)&&i(s)&&de.each(t.data,(function(t,a){var n=+e.getRightValue(t);isNaN(n)||s.data[a].hidden||n<0||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n),0!==n&&(null===e.minNotZero||n<e.minNotZero)&&(e.minNotZero=n))}))}));this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=Ea(t.min,e.min),e.max=Ea(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(de.log10(e.min))-1),e.max=Math.pow(10,Math.floor(de.log10(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(de.log10(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(de.log10(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(de.log10(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,a=!e.isHorizontal(),n={min:Ea(t.min),max:Ea(t.max)},s=e.ticks=function(e,t){var a,n,s=[],i=_a(e.min,Math.pow(10,Math.floor(de.log10(t.min)))),r=Math.floor(de.log10(t.max)),o=Math.ceil(t.max/Math.pow(10,r));0===i?(a=Math.floor(de.log10(t.minNotZero)),n=Math.floor(t.minNotZero/Math.pow(10,a)),s.push(i),i=n*Math.pow(10,a)):(a=Math.floor(de.log10(i)),n=Math.floor(i/Math.pow(10,a)));var l=a<0?Math.pow(10,Math.abs(a)):1;do{s.push(i),10==++n&&(n=1,l=++a>=0?1:l),i=Math.round(n*Math.pow(10,a)*l)/l}while(a<r||a===r&&n<o);var c=_a(e.max,i);return s.push(c),s}(n,e);e.max=de.max(s),e.min=de.min(s),t.reverse?(a=!a,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),a&&s.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),da.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},_getFirstTickValue:function(e){var t=Math.floor(de.log10(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},getPixelForValue:function(e){var t,a,n,s,i,r=this,o=r.options.ticks,l=o.reverse,c=de.log10,d=r._getFirstTickValue(r.minNotZero),u=0;return e=+r.getRightValue(e),l?(n=r.end,s=r.start,i=-1):(n=r.start,s=r.end,i=1),r.isHorizontal()?(t=r.width,a=l?r.right:r.left):(t=r.height,i*=-1,a=l?r.top:r.bottom),e!==n&&(0===n&&(t-=u=_a(o.fontSize,oe.global.defaultFontSize),n=d),0!==e&&(u+=t/(c(s)-c(n))*(c(e)-c(n))),a+=i*u),a},getValueForPixel:function(e){var t,a,n,s,i=this,r=i.options.ticks,o=r.reverse,l=de.log10,c=i._getFirstTickValue(i.minNotZero);if(o?(a=i.end,n=i.start):(a=i.start,n=i.end),i.isHorizontal()?(t=i.width,s=o?i.right-e:e-i.left):(t=i.height,s=o?e-i.top:i.bottom-e),s!==a){if(0===a){var d=_a(r.fontSize,oe.global.defaultFontSize);s-=d,t-=d,a=c}s*=l(n)-l(a),s/=t,s=Math.pow(10,l(a)+s)}return s}}),Ta=ya;Sa._defaults=Ta;var xa=de.valueOrDefault,wa=de.valueAtIndexOrDefault,Oa=de.options.resolve,Ca={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:ia.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Ma(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function ka(e){var t=e.ticks;return t.display&&e.display?xa(t.fontSize,oe.global.defaultFontSize)+2*t.backdropPaddingY:0}function ja(e,t,a,n,s){return e===n||e===s?{start:t-a/2,end:t+a/2}:e<n||e>s?{start:t-a,end:t}:{start:t,end:t+a}}function Pa(e){return 0===e||180===e?"center":e<180?"left":"right"}function Aa(e,t,a,n){var s,i,r=a.y+n/2;if(de.isArray(t))for(s=0,i=t.length;s<i;++s)e.fillText(t[s],a.x,r),r+=n;else e.fillText(t,a.x,r)}function Ra(e,t,a){90===e||270===e?a.y-=t.h/2:(e>270||e<90)&&(a.y-=t.h)}function Na(e){return de.isNumber(e)?e:0}var Da=ga.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=ka(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;de.each(t.data.datasets,(function(s,i){if(t.isDatasetVisible(i)){var r=t.getDatasetMeta(i);de.each(s.data,(function(t,s){var i=+e.getRightValue(t);isNaN(i)||r.data[s].hidden||(a=Math.min(i,a),n=Math.max(i,n))}))}})),e.min=a===Number.POSITIVE_INFINITY?0:a,e.max=n===Number.NEGATIVE_INFINITY?0:n,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/ka(this.options))},convertTicksToLabels:function(){var e=this;ga.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,a,n,s=de.options._parseFont(e.options.pointLabels),i={l:0,r:e.width,t:0,b:e.height-e.paddingTop},r={};e.ctx.font=s.string,e._pointLabelSizes=[];var o,l,c,d=Ma(e);for(t=0;t<d;t++){n=e.getPointPosition(t,e.drawingArea+5),o=e.ctx,l=s.lineHeight,c=e.pointLabels[t]||"",a=de.isArray(c)?{w:de.longestText(o,o.font,c),h:c.length*l}:{w:o.measureText(c).width,h:l},e._pointLabelSizes[t]=a;var u=e.getIndexAngle(t),m=de.toDegrees(u)%360,h=ja(m,n.x,a.w,0,180),p=ja(m,n.y,a.h,90,270);h.start<i.l&&(i.l=h.start,r.l=u),h.end>i.r&&(i.r=h.end,r.r=u),p.start<i.t&&(i.t=p.start,r.t=u),p.end>i.b&&(i.b=p.end,r.b=u)}e.setReductions(e.drawingArea,i,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,a){var n=this,s=t.l/Math.sin(a.l),i=Math.max(t.r-n.width,0)/Math.sin(a.r),r=-t.t/Math.cos(a.t),o=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(a.b);s=Na(s),i=Na(i),r=Na(r),o=Na(o),n.drawingArea=Math.min(Math.floor(e-(s+i)/2),Math.floor(e-(r+o)/2)),n.setCenterPoint(s,i,r,o)},setCenterPoint:function(e,t,a,n){var s=this,i=s.width-t-s.drawingArea,r=e+s.drawingArea,o=a+s.drawingArea,l=s.height-s.paddingTop-n-s.drawingArea;s.xCenter=Math.floor((r+i)/2+s.left),s.yCenter=Math.floor((o+l)/2+s.top+s.paddingTop)},getIndexAngle:function(e){return e*(2*Math.PI/Ma(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var a=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*a:(e-t.min)*a},getPointPosition:function(e,t){var a=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(a)*t+this.xCenter,y:Math.sin(a)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this.min,t=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0)},draw:function(){var e=this,t=e.options,a=t.gridLines,n=t.ticks;if(t.display){var s=e.ctx,i=this.getIndexAngle(0),r=de.options._parseFont(n);(t.angleLines.display||t.pointLabels.display)&&function(e){var t=e.ctx,a=e.options,n=a.angleLines,s=a.gridLines,i=a.pointLabels,r=xa(n.lineWidth,s.lineWidth),o=xa(n.color,s.color),l=ka(a);t.save(),t.lineWidth=r,t.strokeStyle=o,t.setLineDash&&(t.setLineDash(Oa([n.borderDash,s.borderDash,[]])),t.lineDashOffset=Oa([n.borderDashOffset,s.borderDashOffset,0]));var c=e.getDistanceFromCenterForValue(a.ticks.reverse?e.min:e.max),d=de.options._parseFont(i);t.font=d.string,t.textBaseline="middle";for(var u=Ma(e)-1;u>=0;u--){if(n.display&&r&&o){var m=e.getPointPosition(u,c);t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(m.x,m.y),t.stroke()}if(i.display){var h=0===u?l/2:0,p=e.getPointPosition(u,c+h+5),g=wa(i.fontColor,u,oe.global.defaultFontColor);t.fillStyle=g;var f=e.getIndexAngle(u),b=de.toDegrees(f);t.textAlign=Pa(b),Ra(b,e._pointLabelSizes[u],p),Aa(t,e.pointLabels[u]||"",p,d.lineHeight)}}t.restore()}(e),de.each(e.ticks,(function(t,o){if(o>0||n.reverse){var l=e.getDistanceFromCenterForValue(e.ticksAsNumbers[o]);if(a.display&&0!==o&&function(e,t,a,n){var s,i=e.ctx,r=t.circular,o=Ma(e),l=wa(t.color,n-1),c=wa(t.lineWidth,n-1);if((r||o)&&l&&c){if(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash&&(i.setLineDash(t.borderDash||[]),i.lineDashOffset=t.borderDashOffset||0),i.beginPath(),r)i.arc(e.xCenter,e.yCenter,a,0,2*Math.PI);else{s=e.getPointPosition(0,a),i.moveTo(s.x,s.y);for(var d=1;d<o;d++)s=e.getPointPosition(d,a),i.lineTo(s.x,s.y)}i.closePath(),i.stroke(),i.restore()}}(e,a,l,o),n.display){var c=xa(n.fontColor,oe.global.defaultFontColor);if(s.font=r.string,s.save(),s.translate(e.xCenter,e.yCenter),s.rotate(i),n.showLabelBackdrop){var d=s.measureText(t).width;s.fillStyle=n.backdropColor,s.fillRect(-d/2-n.backdropPaddingX,-l-r.size/2-n.backdropPaddingY,d+2*n.backdropPaddingX,r.size+2*n.backdropPaddingY)}s.textAlign="center",s.textBaseline="middle",s.fillStyle=c,s.fillText(t,0,-l),s.restore()}}}))}}}),Ia=Ca;Da._defaults=Ia;var La=de.valueOrDefault,Ba=Number.MIN_SAFE_INTEGER||-9007199254740991,Ua=Number.MAX_SAFE_INTEGER||9007199254740991,Fa={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},qa=Object.keys(Fa);function Ga(e,t){return e-t}function Ha(e){var t,a,n,s={},i=[];for(t=0,a=e.length;t<a;++t)s[n=e[t]]||(s[n]=!0,i.push(n));return i}function Wa(e,t,a,n){var s=function(e,t,a){for(var n,s,i,r=0,o=e.length-1;r>=0&&r<=o;){if(s=e[(n=r+o>>1)-1]||null,i=e[n],!s)return{lo:null,hi:i};if(i[t]<a)r=n+1;else{if(!(s[t]>a))return{lo:s,hi:i};o=n-1}}return{lo:i,hi:null}}(e,t,a),i=s.lo?s.hi?s.lo:e[e.length-2]:e[0],r=s.lo?s.hi?s.hi:e[e.length-1]:e[1],o=r[t]-i[t],l=o?(a-i[t])/o:0,c=(r[n]-i[n])*l;return i[n]+c}function za(e,t){var a=e._adapter,n=e.options.time,s=n.parser,i=s||n.format,r=t;return"function"==typeof s&&(r=s(r)),de.isFinite(r)||(r="string"==typeof i?a.parse(r,i):a.parse(r)),null!==r?+r:(s||"function"!=typeof i||(r=i(t),de.isFinite(r)||(r=a.parse(r))),r)}function Ya(e,t){if(de.isNullOrUndef(t))return null;var a=e.options.time,n=za(e,e.getRightValue(t));return null===n||a.round&&(n=+e._adapter.startOf(n,a.round)),n}function Va(e){for(var t=qa.indexOf(e)+1,a=qa.length;t<a;++t)if(Fa[qa[t]].common)return qa[t]}function Ja(e,t,a,n){var s,i=e._adapter,r=e.options,o=r.time,l=o.unit||function(e,t,a,n){var s,i,r,o=qa.length;for(s=qa.indexOf(e);s<o-1;++s)if(r=(i=Fa[qa[s]]).steps?i.steps[i.steps.length-1]:Ua,i.common&&Math.ceil((a-t)/(r*i.size))<=n)return qa[s];return qa[o-1]}(o.minUnit,t,a,n),c=Va(l),d=La(o.stepSize,o.unitStepSize),u="week"===l&&o.isoWeekday,m=r.ticks.major.enabled,h=Fa[l],p=t,g=a,f=[];for(d||(d=function(e,t,a,n){var s,i,r,o=t-e,l=Fa[a],c=l.size,d=l.steps;if(!d)return Math.ceil(o/(n*c));for(s=0,i=d.length;s<i&&(r=d[s],!(Math.ceil(o/(c*r))<=n));++s);return r}(t,a,l,n)),u&&(p=+i.startOf(p,"isoWeek",u),g=+i.startOf(g,"isoWeek",u)),p=+i.startOf(p,u?"day":l),(g=+i.startOf(g,u?"day":l))<a&&(g=+i.add(g,1,l)),s=p,m&&c&&!u&&!o.round&&(s=+i.startOf(s,c),s=+i.add(s,~~((p-s)/(h.size*d))*d,l));s<g;s=+i.add(s,d,l))f.push(+s);return f.push(+s),f}var Xa=da.extend({initialize:function(){this.mergeTicksOptions(),da.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,a=t.time||(t.time={}),n=e._adapter=new sa._date(t.adapters.date);return a.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),de.mergeIf(a.displayFormats,n.formats()),da.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),da.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,a,n,s,i,r=this,o=r.chart,l=r._adapter,c=r.options.time,d=c.unit||"day",u=Ua,m=Ba,h=[],p=[],g=[],f=o.data.labels||[];for(e=0,a=f.length;e<a;++e)g.push(Ya(r,f[e]));for(e=0,a=(o.data.datasets||[]).length;e<a;++e)if(o.isDatasetVisible(e))if(s=o.data.datasets[e].data,de.isObject(s[0]))for(p[e]=[],t=0,n=s.length;t<n;++t)i=Ya(r,s[t]),h.push(i),p[e][t]=i;else{for(t=0,n=g.length;t<n;++t)h.push(g[t]);p[e]=g.slice(0)}else p[e]=[];g.length&&(g=Ha(g).sort(Ga),u=Math.min(u,g[0]),m=Math.max(m,g[g.length-1])),h.length&&(h=Ha(h).sort(Ga),u=Math.min(u,h[0]),m=Math.max(m,h[h.length-1])),u=Ya(r,c.min)||u,m=Ya(r,c.max)||m,u=u===Ua?+l.startOf(Date.now(),d):u,m=m===Ba?+l.endOf(Date.now(),d)+1:m,r.min=Math.min(u,m),r.max=Math.max(u+1,m),r._horizontal=r.isHorizontal(),r._table=[],r._timestamps={data:h,datasets:p,labels:g}},buildTicks:function(){var e,t,a,n=this,s=n.min,i=n.max,r=n.options,o=r.time,l=[],c=[];switch(r.ticks.source){case"data":l=n._timestamps.data;break;case"labels":l=n._timestamps.labels;break;case"auto":default:l=Ja(n,s,i,n.getLabelCapacity(s))}for("ticks"===r.bounds&&l.length&&(s=l[0],i=l[l.length-1]),s=Ya(n,o.min)||s,i=Ya(n,o.max)||i,e=0,t=l.length;e<t;++e)(a=l[e])>=s&&a<=i&&c.push(a);return n.min=s,n.max=i,n._unit=o.unit||function(e,t,a,n,s){var i,r;for(i=qa.length-1;i>=qa.indexOf(a);i--)if(r=qa[i],Fa[r].common&&e._adapter.diff(s,n,r)>=t.length)return r;return qa[a?qa.indexOf(a):0]}(n,c,o.minUnit,n.min,n.max),n._majorUnit=Va(n._unit),n._table=function(e,t,a,n){if("linear"===n||!e.length)return[{time:t,pos:0},{time:a,pos:1}];var s,i,r,o,l,c=[],d=[t];for(s=0,i=e.length;s<i;++s)(o=e[s])>t&&o<a&&d.push(o);for(d.push(a),s=0,i=d.length;s<i;++s)l=d[s+1],r=d[s-1],o=d[s],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===o||c.push({time:o,pos:s/(i-1)});return c}(n._timestamps.data,s,i,r.distribution),n._offsets=function(e,t,a,n,s){var i,r,o=0,l=0;return s.offset&&t.length&&(s.time.min||(i=Wa(e,"time",t[0],"pos"),o=1===t.length?1-i:(Wa(e,"time",t[1],"pos")-i)/2),s.time.max||(r=Wa(e,"time",t[t.length-1],"pos"),l=1===t.length?r:(r-Wa(e,"time",t[t.length-2],"pos"))/2)),{start:o,end:l}}(n._table,c,0,0,r),r.ticks.reverse&&c.reverse(),function(e,t,a){var n,s,i,r,o=[];for(n=0,s=t.length;n<s;++n)i=t[n],r=!!a&&i===+e._adapter.startOf(i,a),o.push({value:i,major:r});return o}(n,c,n._majorUnit)},getLabelForIndex:function(e,t){var a=this,n=a._adapter,s=a.chart.data,i=a.options.time,r=s.labels&&e<s.labels.length?s.labels[e]:"",o=s.datasets[t].data[e];return de.isObject(o)&&(r=a.getRightValue(o)),i.tooltipFormat?n.format(za(a,r),i.tooltipFormat):"string"==typeof r?r:n.format(za(a,r),i.displayFormats.datetime)},tickFormatFunction:function(e,t,a,n){var s=this._adapter,i=this.options,r=i.time.displayFormats,o=r[this._unit],l=this._majorUnit,c=r[l],d=+s.startOf(e,l),u=i.ticks.major,m=u.enabled&&l&&c&&e===d,h=s.format(e,n||(m?c:o)),p=m?u:i.ticks.minor,g=La(p.callback,p.userCallback);return g?g(h,t,a):h},convertTicksToLabels:function(e){var t,a,n=[];for(t=0,a=e.length;t<a;++t)n.push(this.tickFormatFunction(e[t].value,t,e));return n},getPixelForOffset:function(e){var t=this,a=t.options.ticks.reverse,n=t._horizontal?t.width:t.height,s=t._horizontal?a?t.right:t.left:a?t.bottom:t.top,i=Wa(t._table,"time",e,"pos"),r=n*(t._offsets.start+i)/(t._offsets.start+1+t._offsets.end);return a?s-r:s+r},getPixelForValue:function(e,t,a){var n=null;if(void 0!==t&&void 0!==a&&(n=this._timestamps.datasets[a][t]),null===n&&(n=Ya(this,e)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,a=t._horizontal?t.width:t.height,n=t._horizontal?t.left:t.top,s=(a?(e-n)/a:0)*(t._offsets.start+1+t._offsets.start)-t._offsets.end,i=Wa(t._table,"pos",s,"time");return t._adapter._create(i)},getLabelWidth:function(e){var t=this.options.ticks,a=this.ctx.measureText(e).width,n=de.toRadians(t.maxRotation),s=Math.cos(n),i=Math.sin(n);return a*s+La(t.fontSize,oe.global.defaultFontSize)*i},getLabelCapacity:function(e){var t=this,a=t.options.time.displayFormats.millisecond,n=t.tickFormatFunction(e,0,[],a),s=t.getLabelWidth(n),i=t.isHorizontal()?t.width:t.height,r=Math.floor(i/s);return r>0?r:1}}),Ka={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};Xa._defaults=Ka;var Qa={category:ua,linear:ba,logarithmic:Sa,radialLinear:Da,time:Xa},$a={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};sa._date.override("function"==typeof e?{_id:"moment",formats:function(){return $a},parse:function(t,a){return"string"==typeof t&&"string"==typeof a?t=e(t,a):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,a){return e(t).format(a)},add:function(t,a,n){return e(t).add(a,n).valueOf()},diff:function(t,a,n){return e.duration(e(t).diff(e(a))).as(n)},startOf:function(t,a,n){return t=e(t),"isoWeek"===a?t.isoWeekday(n).valueOf():t.startOf(a).valueOf()},endOf:function(t,a){return e(t).endOf(a).valueOf()},_create:function(t){return e(t)}}:{}),oe._set("global",{plugins:{filler:{propagate:!0}}});var Za={dataset:function(e){var t=e.fill,a=e.chart,n=a.getDatasetMeta(t),s=n&&a.isDatasetVisible(t)&&n.dataset._children||[],i=s.length||0;return i?function(e,t){return t<i&&s[t]._view||null}:null},boundary:function(e){var t=e.boundary,a=t?t.x:null,n=t?t.y:null;return function(e){return{x:null===a?e.x:a,y:null===n?e.y:n}}}};function en(e,t,a){var n,s=e._model||{},i=s.fill;if(void 0===i&&(i=!!s.backgroundColor),!1===i||null===i)return!1;if(!0===i)return"origin";if(n=parseFloat(i,10),isFinite(n)&&Math.floor(n)===n)return"-"!==i[0]&&"+"!==i[0]||(n=t+n),!(n===t||n<0||n>=a)&&n;switch(i){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return i;default:return!1}}function tn(e){var t,a=e.el._model||{},n=e.el._scale||{},s=e.fill,i=null;if(isFinite(s))return null;if("start"===s?i=void 0===a.scaleBottom?n.bottom:a.scaleBottom:"end"===s?i=void 0===a.scaleTop?n.top:a.scaleTop:void 0!==a.scaleZero?i=a.scaleZero:n.getBasePosition?i=n.getBasePosition():n.getBasePixel&&(i=n.getBasePixel()),null!=i){if(void 0!==i.x&&void 0!==i.y)return i;if(de.isFinite(i))return{x:(t=n.isHorizontal())?i:null,y:t?null:i}}return null}function an(e,t,a){var n,s=e[t].fill,i=[t];if(!a)return s;for(;!1!==s&&-1===i.indexOf(s);){if(!isFinite(s))return s;if(!(n=e[s]))return!1;if(n.visible)return s;i.push(s),s=n.fill}return!1}function nn(e){var t=e.fill,a="dataset";return!1===t?null:(isFinite(t)||(a="boundary"),Za[a](e))}function sn(e){return e&&!e.skip}function rn(e,t,a,n,s){var i;if(n&&s){for(e.moveTo(t[0].x,t[0].y),i=1;i<n;++i)de.canvas.lineTo(e,t[i-1],t[i]);for(e.lineTo(a[s-1].x,a[s-1].y),i=s-1;i>0;--i)de.canvas.lineTo(e,a[i],a[i-1],!0)}}var on={id:"filler",afterDatasetsUpdate:function(e,t){var a,n,s,i,r=(e.data.datasets||[]).length,o=t.propagate,l=[];for(n=0;n<r;++n)i=null,(s=(a=e.getDatasetMeta(n)).dataset)&&s._model&&s instanceof Ue.Line&&(i={visible:e.isDatasetVisible(n),fill:en(s,n,r),chart:e,el:s}),a.$filler=i,l.push(i);for(n=0;n<r;++n)(i=l[n])&&(i.fill=an(l,n,o),i.boundary=tn(i),i.mapper=nn(i))},beforeDatasetDraw:function(e,t){var a=t.meta.$filler;if(a){var n=e.ctx,s=a.el,i=s._view,r=s._children||[],o=a.mapper,l=i.backgroundColor||oe.global.defaultColor;o&&l&&r.length&&(de.canvas.clipArea(n,e.chartArea),function(e,t,a,n,s,i){var r,o,l,c,d,u,m,h=t.length,p=n.spanGaps,g=[],f=[],b=0,v=0;for(e.beginPath(),r=0,o=h+!!i;r<o;++r)d=a(c=t[l=r%h]._view,l,n),u=sn(c),m=sn(d),u&&m?(b=g.push(c),v=f.push(d)):b&&v&&(p?(u&&g.push(c),m&&f.push(d)):(rn(e,g,f,b,v),b=v=0,g=[],f=[]));rn(e,g,f,b,v),e.closePath(),e.fillStyle=s,e.fill()}(n,r,o,i,l,s._loop),de.canvas.unclipArea(n))}}},ln=de.noop,cn=de.valueOrDefault;function dn(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}oe._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var a=t.datasetIndex,n=this.chart,s=n.getDatasetMeta(a);s.hidden=null===s.hidden?!n.data.datasets[a].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return de.isArray(t.datasets)?t.datasets.map((function(t,a){return{text:t.label,fillStyle:de.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(a),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:a}}),this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var a=0;a<e.data.datasets.length;a++)t.push('<li><span style="background-color:'+e.data.datasets[a].backgroundColor+'"></span>'),e.data.datasets[a].label&&t.push(e.data.datasets[a].label),t.push("</li>");return t.push("</ul>"),t.join("")}});var un=ge.extend({initialize:function(e){de.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:ln,update:function(e,t,a){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=a,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:ln,beforeSetDimensions:ln,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:ln,beforeBuildLabels:ln,buildLabels:function(){var e=this,t=e.options.labels||{},a=de.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(a=a.filter((function(a){return t.filter(a,e.chart.data)}))),e.options.reverse&&a.reverse(),e.legendItems=a},afterBuildLabels:ln,beforeFit:ln,fit:function(){var e=this,t=e.options,a=t.labels,n=t.display,s=e.ctx,i=de.options._parseFont(a),r=i.size,o=e.legendHitBoxes=[],l=e.minSize,c=e.isHorizontal();if(c?(l.width=e.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=e.maxHeight),n)if(s.font=i.string,c){var d=e.lineWidths=[0],u=0;s.textAlign="left",s.textBaseline="top",de.each(e.legendItems,(function(e,t){var n=dn(a,r)+r/2+s.measureText(e.text).width;(0===t||d[d.length-1]+n+a.padding>l.width)&&(u+=r+a.padding,d[d.length-(t>0?0:1)]=a.padding),o[t]={left:0,top:0,width:n,height:r},d[d.length-1]+=n+a.padding})),l.height+=u}else{var m=a.padding,h=e.columnWidths=[],p=a.padding,g=0,f=0,b=r+m;de.each(e.legendItems,(function(e,t){var n=dn(a,r)+r/2+s.measureText(e.text).width;t>0&&f+b>l.height-m&&(p+=g+a.padding,h.push(g),g=0,f=0),g=Math.max(g,n),f+=b,o[t]={left:0,top:0,width:n,height:r}})),p+=g,h.push(g),l.width+=p}e.width=l.width,e.height=l.height},afterFit:ln,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,a=t.labels,n=oe.global,s=n.defaultColor,i=n.elements.line,r=e.width,o=e.lineWidths;if(t.display){var l,c=e.ctx,d=cn(a.fontColor,n.defaultFontColor),u=de.options._parseFont(a),m=u.size;c.textAlign="left",c.textBaseline="middle",c.lineWidth=.5,c.strokeStyle=d,c.fillStyle=d,c.font=u.string;var h=dn(a,m),p=e.legendHitBoxes,g=e.isHorizontal();l=g?{x:e.left+(r-o[0])/2+a.padding,y:e.top+a.padding,line:0}:{x:e.left+a.padding,y:e.top+a.padding,line:0};var f=m+a.padding;de.each(e.legendItems,(function(n,d){var u=c.measureText(n.text).width,b=h+m/2+u,v=l.x,_=l.y;g?d>0&&v+b+a.padding>e.left+e.minSize.width&&(_=l.y+=f,l.line++,v=l.x=e.left+(r-o[l.line])/2+a.padding):d>0&&_+f>e.top+e.minSize.height&&(v=l.x=v+e.columnWidths[l.line]+a.padding,_=l.y=e.top+a.padding,l.line++),function(e,a,n){if(!(isNaN(h)||h<=0)){c.save();var r=cn(n.lineWidth,i.borderWidth);if(c.fillStyle=cn(n.fillStyle,s),c.lineCap=cn(n.lineCap,i.borderCapStyle),c.lineDashOffset=cn(n.lineDashOffset,i.borderDashOffset),c.lineJoin=cn(n.lineJoin,i.borderJoinStyle),c.lineWidth=r,c.strokeStyle=cn(n.strokeStyle,s),c.setLineDash&&c.setLineDash(cn(n.lineDash,i.borderDash)),t.labels&&t.labels.usePointStyle){var o=h*Math.SQRT2/2,l=e+h/2,d=a+m/2;de.canvas.drawPoint(c,n.pointStyle,o,l,d)}else 0!==r&&c.strokeRect(e,a,h,m),c.fillRect(e,a,h,m);c.restore()}}(v,_,n),p[d].left=v,p[d].top=_,function(e,t,a,n){var s=m/2,i=h+s+e,r=t+s;c.fillText(a.text,i,r),a.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(i,r),c.lineTo(i+n,r),c.stroke())}(v,_,n,u),g?l.x+=b+a.padding:l.y+=f}))}},_getLegendItemAt:function(e,t){var a,n,s,i=this;if(e>=i.left&&e<=i.right&&t>=i.top&&t<=i.bottom)for(s=i.legendHitBoxes,a=0;a<s.length;++a)if(e>=(n=s[a]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return i.legendItems[a];return null},handleEvent:function(e){var t,a=this,n=a.options,s="mouseup"===e.type?"click":e.type;if("mousemove"===s){if(!n.onHover&&!n.onLeave)return}else{if("click"!==s)return;if(!n.onClick)return}t=a._getLegendItemAt(e.x,e.y),"click"===s?t&&n.onClick&&n.onClick.call(a,e.native,t):(n.onLeave&&t!==a._hoveredItem&&(a._hoveredItem&&n.onLeave.call(a,e.native,a._hoveredItem),a._hoveredItem=t),n.onHover&&t&&n.onHover.call(a,e.native,t))}});function mn(e,t){var a=new un({ctx:e.ctx,options:t,chart:e});St.configure(e,a,t),St.addBox(e,a),e.legend=a}var hn={id:"legend",_element:un,beforeInit:function(e){var t=e.options.legend;t&&mn(e,t)},beforeUpdate:function(e){var t=e.options.legend,a=e.legend;t?(de.mergeIf(t,oe.global.legend),a?(St.configure(e,a,t),a.options=t):mn(e,t)):a&&(St.removeBox(e,a),delete e.legend)},afterEvent:function(e,t){var a=e.legend;a&&a.handleEvent(t)}},pn=de.noop;oe._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var gn=ge.extend({initialize:function(e){de.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:pn,update:function(e,t,a){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=a,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:pn,beforeSetDimensions:pn,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:pn,beforeBuildLabels:pn,buildLabels:pn,afterBuildLabels:pn,beforeFit:pn,fit:function(){var e=this,t=e.options,a=t.display,n=e.minSize,s=de.isArray(t.text)?t.text.length:1,i=de.options._parseFont(t),r=a?s*i.lineHeight+2*t.padding:0;e.isHorizontal()?(n.width=e.maxWidth,n.height=r):(n.width=r,n.height=e.maxHeight),e.width=n.width,e.height=n.height},afterFit:pn,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,a=e.options;if(a.display){var n,s,i,r=de.options._parseFont(a),o=r.lineHeight,l=o/2+a.padding,c=0,d=e.top,u=e.left,m=e.bottom,h=e.right;t.fillStyle=de.valueOrDefault(a.fontColor,oe.global.defaultFontColor),t.font=r.string,e.isHorizontal()?(s=u+(h-u)/2,i=d+l,n=h-u):(s="left"===a.position?u+l:h-l,i=d+(m-d)/2,n=m-d,c=Math.PI*("left"===a.position?-.5:.5)),t.save(),t.translate(s,i),t.rotate(c),t.textAlign="center",t.textBaseline="middle";var p=a.text;if(de.isArray(p))for(var g=0,f=0;f<p.length;++f)t.fillText(p[f],0,g,n),g+=o;else t.fillText(p,0,0,n);t.restore()}}});function fn(e,t){var a=new gn({ctx:e.ctx,options:t,chart:e});St.configure(e,a,t),St.addBox(e,a),e.titleBlock=a}var bn={},vn=on,_n=hn,yn={id:"title",_element:gn,beforeInit:function(e){var t=e.options.title;t&&fn(e,t)},beforeUpdate:function(e){var t=e.options.title,a=e.titleBlock;t?(de.mergeIf(t,oe.global.title),a?(St.configure(e,a,t),a.options=t):fn(e,t)):a&&(St.removeBox(e,a),delete e.titleBlock)}};for(var En in bn.filler=vn,bn.legend=_n,bn.title=yn,ta.helpers=de,function(){function e(e,t,a){var n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[a])):n=e,n}function t(e){return null!=e&&"none"!==e}function a(a,n,s){var i=document.defaultView,r=de._getParentNode(a),o=i.getComputedStyle(a)[n],l=i.getComputedStyle(r)[n],c=t(o),d=t(l),u=Number.POSITIVE_INFINITY;return c||d?Math.min(c?e(o,a,s):u,d?e(l,r,s):u):"none"}de.where=function(e,t){if(de.isArray(e)&&Array.prototype.filter)return e.filter(t);var a=[];return de.each(e,(function(e){t(e)&&a.push(e)})),a},de.findIndex=Array.prototype.findIndex?function(e,t,a){return e.findIndex(t,a)}:function(e,t,a){a=void 0===a?e:a;for(var n=0,s=e.length;n<s;++n)if(t.call(a,e[n],n,e))return n;return-1},de.findNextWhere=function(e,t,a){de.isNullOrUndef(a)&&(a=-1);for(var n=a+1;n<e.length;n++){var s=e[n];if(t(s))return s}},de.findPreviousWhere=function(e,t,a){de.isNullOrUndef(a)&&(a=e.length);for(var n=a-1;n>=0;n--){var s=e[n];if(t(s))return s}},de.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},de.almostEquals=function(e,t,a){return Math.abs(e-t)<a},de.almostWhole=function(e,t){var a=Math.round(e);return a-t<e&&a+t>e},de.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},de.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},de.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},de.log10=Math.log10?function(e){return Math.log10(e)}:function(e){var t=Math.log(e)*Math.LOG10E,a=Math.round(t);return e===Math.pow(10,a)?a:t},de.toRadians=function(e){return e*(Math.PI/180)},de.toDegrees=function(e){return e*(180/Math.PI)},de._decimalPlaces=function(e){if(de.isFinite(e)){for(var t=1,a=0;Math.round(e*t)/t!==e;)t*=10,a++;return a}},de.getAngleFromPoint=function(e,t){var a=t.x-e.x,n=t.y-e.y,s=Math.sqrt(a*a+n*n),i=Math.atan2(n,a);return i<-.5*Math.PI&&(i+=2*Math.PI),{angle:i,distance:s}},de.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},de.aliasPixel=function(e){return e%2==0?0:.5},de._alignPixel=function(e,t,a){var n=e.currentDevicePixelRatio,s=a/2;return Math.round((t-s)*n)/n+s},de.splineCurve=function(e,t,a,n){var s=e.skip?t:e,i=t,r=a.skip?t:a,o=Math.sqrt(Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2)),l=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),c=o/(o+l),d=l/(o+l),u=n*(c=isNaN(c)?0:c),m=n*(d=isNaN(d)?0:d);return{previous:{x:i.x-u*(r.x-s.x),y:i.y-u*(r.y-s.y)},next:{x:i.x+m*(r.x-s.x),y:i.y+m*(r.y-s.y)}}},de.EPSILON=Number.EPSILON||1e-14,de.splineCurveMonotone=function(e){var t,a,n,s,i,r,o,l,c,d=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),u=d.length;for(t=0;t<u;++t)if(!(n=d[t]).model.skip){if(a=t>0?d[t-1]:null,(s=t<u-1?d[t+1]:null)&&!s.model.skip){var m=s.model.x-n.model.x;n.deltaK=0!==m?(s.model.y-n.model.y)/m:0}!a||a.model.skip?n.mK=n.deltaK:!s||s.model.skip?n.mK=a.deltaK:this.sign(a.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(a.deltaK+n.deltaK)/2}for(t=0;t<u-1;++t)n=d[t],s=d[t+1],n.model.skip||s.model.skip||(de.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=s.mK=0:(i=n.mK/n.deltaK,r=s.mK/n.deltaK,(l=Math.pow(i,2)+Math.pow(r,2))<=9||(o=3/Math.sqrt(l),n.mK=i*o*n.deltaK,s.mK=r*o*n.deltaK)));for(t=0;t<u;++t)(n=d[t]).model.skip||(a=t>0?d[t-1]:null,s=t<u-1?d[t+1]:null,a&&!a.model.skip&&(c=(n.model.x-a.model.x)/3,n.model.controlPointPreviousX=n.model.x-c,n.model.controlPointPreviousY=n.model.y-c*n.mK),s&&!s.model.skip&&(c=(s.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+c,n.model.controlPointNextY=n.model.y+c*n.mK))},de.nextItem=function(e,t,a){return a?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},de.previousItem=function(e,t,a){return a?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},de.niceNum=function(e,t){var a=Math.floor(de.log10(e)),n=e/Math.pow(10,a);return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,a)},de.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},de.getRelativePosition=function(e,t){var a,n,s=e.originalEvent||e,i=e.target||e.srcElement,r=i.getBoundingClientRect(),o=s.touches;o&&o.length>0?(a=o[0].clientX,n=o[0].clientY):(a=s.clientX,n=s.clientY);var l=parseFloat(de.getStyle(i,"padding-left")),c=parseFloat(de.getStyle(i,"padding-top")),d=parseFloat(de.getStyle(i,"padding-right")),u=parseFloat(de.getStyle(i,"padding-bottom")),m=r.right-r.left-l-d,h=r.bottom-r.top-c-u;return{x:a=Math.round((a-r.left-l)/m*i.width/t.currentDevicePixelRatio),y:n=Math.round((n-r.top-c)/h*i.height/t.currentDevicePixelRatio)}},de.getConstraintWidth=function(e){return a(e,"max-width","clientWidth")},de.getConstraintHeight=function(e){return a(e,"max-height","clientHeight")},de._calculatePadding=function(e,t,a){return(t=de.getStyle(e,t)).indexOf("%")>-1?a*parseInt(t,10)/100:parseInt(t,10)},de._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},de.getMaximumWidth=function(e){var t=de._getParentNode(e);if(!t)return e.clientWidth;var a=t.clientWidth,n=a-de._calculatePadding(t,"padding-left",a)-de._calculatePadding(t,"padding-right",a),s=de.getConstraintWidth(e);return isNaN(s)?n:Math.min(n,s)},de.getMaximumHeight=function(e){var t=de._getParentNode(e);if(!t)return e.clientHeight;var a=t.clientHeight,n=a-de._calculatePadding(t,"padding-top",a)-de._calculatePadding(t,"padding-bottom",a),s=de.getConstraintHeight(e);return isNaN(s)?n:Math.min(n,s)},de.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},de.retinaScale=function(e,t){var a=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==a){var n=e.canvas,s=e.height,i=e.width;n.height=s*a,n.width=i*a,e.ctx.scale(a,a),n.style.height||n.style.width||(n.style.height=s+"px",n.style.width=i+"px")}},de.fontString=function(e,t,a){return t+" "+e+"px "+a},de.longestText=function(e,t,a,n){var s=(n=n||{}).data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},i=n.garbageCollect=[],n.font=t),e.font=t;var r=0;de.each(a,(function(t){null!=t&&!0!==de.isArray(t)?r=de.measureText(e,s,i,r,t):de.isArray(t)&&de.each(t,(function(t){null==t||de.isArray(t)||(r=de.measureText(e,s,i,r,t))}))}));var o=i.length/2;if(o>a.length){for(var l=0;l<o;l++)delete s[i[l]];i.splice(0,o)}return r},de.measureText=function(e,t,a,n,s){var i=t[s];return i||(i=t[s]=e.measureText(s).width,a.push(s)),i>n&&(n=i),n},de.numberOfLabelLines=function(e){var t=1;return de.each(e,(function(e){de.isArray(e)&&e.length>t&&(t=e.length)})),t},de.color=V?function(e){return e instanceof CanvasGradient&&(e=oe.global.defaultColor),V(e)}:function(e){return console.error("Color.js not found!"),e},de.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:de.color(e).saturate(.5).darken(.1).rgbString()}}(),ta._adapters=sa,ta.Animation=be,ta.animationService=ve,ta.controllers=dt,ta.DatasetController=Te,ta.defaults=oe,ta.Element=ge,ta.elements=Ue,ta.Interaction=bt,ta.layouts=St,ta.platform=It,ta.plugins=Lt,ta.Scale=da,ta.scaleService=Bt,ta.Ticks=ia,ta.Tooltip=Jt,ta.helpers.each(Qa,(function(e,t){ta.scaleService.registerScaleType(t,e,e._defaults)})),bn)bn.hasOwnProperty(En)&&ta.plugins.register(bn[En]);ta.platform.initialize();var Sn=ta;return"undefined"!=typeof window&&(window.Chart=ta),ta.Chart=ta,ta.Legend=bn.legend._element,ta.Title=bn.title._element,ta.pluginService=ta.plugins,ta.PluginBase=ta.Element.extend({}),ta.canvasHelpers=ta.helpers.canvas,ta.layoutService=ta.layouts,ta.LinearScaleBase=ga,ta.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){ta[e]=function(t,a){return new ta(t,ta.helpers.merge(a||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),Sn}(function(){try{return a(3)}catch(e){}}())},1525:function(e,t,a){"use strict";var n=a(57),s=a(129),i=a(629),r=a(108),o=a(335),l=a(630),c=a(69);n({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=o(this,r("Promise")),a="function"==typeof e;return this.then(a?function(a){return l(t,e()).then((function(){return a}))}:e,a?function(a){return l(t,e()).then((function(){throw a}))}:e)}}),s||"function"!=typeof i||i.prototype.finally||c(i.prototype,"finally",r("Promise").prototype.finally)},1966:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),s=a(18),i=a(10),r=a(65);t.createJob=function(e){return r.bindClientFunc({clientFunc:s.Client4.createJob,onRequest:n.JobTypes.CREATE_JOB_REQUEST,onSuccess:[n.JobTypes.RECEIVED_JOB,n.JobTypes.CREATE_JOB_SUCCESS],onFailure:n.JobTypes.CREATE_JOB_FAILURE,params:[e]})},t.getJob=function(e){return r.bindClientFunc({clientFunc:s.Client4.getJob,onRequest:n.JobTypes.GET_JOB_REQUEST,onSuccess:[n.JobTypes.RECEIVED_JOB,n.JobTypes.GET_JOB_SUCCESS],onFailure:n.JobTypes.GET_JOB_FAILURE,params:[e]})},t.getJobs=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=i.General.JOBS_CHUNK_SIZE),r.bindClientFunc({clientFunc:s.Client4.getJobs,onRequest:n.JobTypes.GET_JOBS_REQUEST,onSuccess:[n.JobTypes.RECEIVED_JOBS,n.JobTypes.GET_JOBS_SUCCESS],onFailure:n.JobTypes.GET_JOBS_FAILURE,params:[e,t]})},t.getJobsByType=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=i.General.JOBS_CHUNK_SIZE),r.bindClientFunc({clientFunc:s.Client4.getJobsByType,onRequest:n.JobTypes.GET_JOBS_REQUEST,onSuccess:[n.JobTypes.RECEIVED_JOBS,n.JobTypes.RECEIVED_JOBS_BY_TYPE,n.JobTypes.GET_JOBS_SUCCESS],onFailure:n.JobTypes.GET_JOBS_FAILURE,params:[e,t,a]})},t.cancelJob=function(e){return r.bindClientFunc({clientFunc:s.Client4.cancelJob,onRequest:n.JobTypes.CANCEL_JOB_REQUEST,onSuccess:n.JobTypes.CANCEL_JOB_SUCCESS,onFailure:n.JobTypes.CANCEL_JOB_FAILURE,params:[e]})}},1967:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22);function s(e){return e.entities.jobs.jobsByTypeList}t.getAllJobs=function(e){return e.entities.jobs.jobs},t.getJobsByType=s,t.makeGetJobsByType=function(e){return n.createSelector(s,(function(t){return t[e]||[]}))}},1968:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeTypes={TEAM:"team",CHANNEL:"channel"}},1969:function(e,t,a){},1970:function(e,t,a){},1971:function(e,t,a){},1972:function(e,t,a){},1973:function(e,t,a){},1974:function(e,t,a){},1975:function(e,t,a){e.exports=a.p+"files/f7199ef7df8f38eedb0ee2ca2b4ad893.png"},1976:function(e,t,a){e.exports=a.p+"files/d5143a5f3054c6cc9b04a6313998d24e.png"},1977:function(e,t,a){var n=a(351);e.exports=function(e,t){return n(e,t)}},1978:function(e,t,a){"use strict";(function(t){function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,a){e!=Array.prototype&&e!=Object.prototype&&(e[t]=a.value)},s="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},s.Symbol||(s.Symbol=l)}function r(e,t){this.b=e,n(this,"description",{configurable:!0,writable:!0,value:t})}r.prototype.toString=function(){return this.b};var o,l=(o=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new r("jscomp_symbol_"+(t||"")+"_"+o++,t)});function c(){i();var e=s.Symbol.iterator;e||(e=s.Symbol.iterator=s.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&n(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return function(e){return c(),(e={next:e})[s.Symbol.iterator]=function(){return this},e}(a(this))}}),c=function(){}}function d(e,t){if(t){var a=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];r in a||(a[r]={}),a=a[r]}(t=t(i=a[e=e[e.length-1]]))!=i&&null!=t&&n(a,e,{configurable:!0,writable:!0,value:t})}}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}d("Array.prototype.keys",(function(e){return e||function(){return function(e,t){c(),e instanceof String&&(e+="");var a=0,n={next:function(){if(a<e.length){var s=a++;return{value:t(s,e[s]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n}(this,(function(e){return e}))}})),d("Promise",(function(e){function t(e){this.h=0,this.m=void 0,this.b=[];var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function a(){this.b=null}function n(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;a.prototype.h=function(e){if(null==this.b){this.b=[];var t=this;this.j((function(){t.m()}))}this.b.push(e)};var i=s.setTimeout;a.prototype.j=function(e){i(e,0)},a.prototype.m=function(){for(;this.b&&this.b.length;){var e=this.b;this.b=[];for(var t=0;t<e.length;++t){var a=e[t];e[t]=null;try{a()}catch(e){this.l(e)}}}this.b=null},a.prototype.l=function(e){this.j((function(){throw e}))},t.prototype.j=function(){function e(e){return function(n){a||(a=!0,e.call(t,n))}}var t=this,a=!1;return{resolve:e(this.L),reject:e(this.l)}},t.prototype.L=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.M(e);else{e:switch(typeof e){case"object":var a=null!=e;break e;case"function":a=!0;break e;default:a=!1}a?this.K(e):this.w(e)}},t.prototype.K=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.N(t,e):this.w(e)},t.prototype.l=function(e){this.B(2,e)},t.prototype.w=function(e){this.B(1,e)},t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.m=t,this.I()},t.prototype.I=function(){if(null!=this.b){for(var e=0;e<this.b.length;++e)r.h(this.b[e]);this.b=null}};var r=new a;return t.prototype.M=function(e){var t=this.j();e.F(t.resolve,t.reject)},t.prototype.N=function(e,t){var a=this.j();try{e.call(t,a.resolve,a.reject)}catch(e){a.reject(e)}},t.prototype.then=function(e,a){function n(e,t){return"function"==typeof e?function(t){try{s(e(t))}catch(e){i(e)}}:t}var s,i,r=new t((function(e,t){s=e,i=t}));return this.F(n(e,s),n(a,i)),r},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.F=function(e,t){function a(){switch(n.h){case 1:e(n.m);break;case 2:t(n.m);break;default:throw Error("Unexpected state: "+n.h)}}var n=this;null==this.b?r.h(a):this.b.push(a)},t.resolve=n,t.reject=function(e){return new t((function(t,a){a(e)}))},t.race=function(e){return new t((function(t,a){for(var s=u(e),i=s.next();!i.done;i=s.next())n(i.value).F(t,a)}))},t.all=function(e){var a=u(e),s=a.next();return s.done?n([]):new t((function(e,t){function i(t){return function(a){r[t]=a,0==--o&&e(r)}}var r=[],o=0;do{r.push(void 0),o++,n(s.value).F(i(r.length-1),t),s=a.next()}while(!s.done)}))},t})),function(t,a,n){var s;(s=n.define)&&s.amd?s([],(function(){return a})):(s=n.modules)?s["FlexSearch".toLowerCase()]=a:e.exports=a}(0,function e(t){function a(e,t){var a=t?t.id:e&&e.id;this.id=a||0===a?a:j++,this.init(e,t),r(this,"index",(function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)})),r(this,"length",(function(){return this.index.length}))}function n(e,t,a,n){return this.D!==this.i&&(this.A=this.A.concat(a),this.D++,n&&this.A.length>=n&&(this.D=this.i),this.D===this.i&&(this.cache&&this.u.set(t,this.A),this.H&&this.H(this.A))),this}function s(e,t){for(var a=e.length,n=_(t),s=[],i=0,r=0;i<a;i++){var o=e[i];(n&&t(o)||!n&&!t[o])&&(s[r++]=o)}return s}function i(e,t,a,n,s,i,r,o,l,c){if(a=f(a,r?0:s,o,i,t,l,c),o){o=a.page;var d=a.next;a=a.result}if(r)t=this.where(r,null,s,a);else{for(t=a,a=this.v,s=t.length,i=Array(s),r=0;r<s;r++)i[r]=a[t[r]];t=i}return a=t,n&&(_(n)||(1<(O=n.split(":")).length?n=p:(O=O[0],n=h)),a.sort(n)),a=g(o,d,a),this.cache&&this.u.set(e,a),a}function r(e,t,a){Object.defineProperty(e,t,{get:a})}function o(e){return new RegExp(e,"g")}function l(e,t){for(var a=0;a<t.length;a+=2)e=e.replace(t[a],t[a+1]);return e}function c(e,t,a,n,s,i,r,o){return t[a]?t[a]:(s=s?(o-(r||o/1.5))*i+(r||o/1.5)*s:i,t[a]=s,s>=r&&((e=(e=e[o-(s+.5>>0)])[a]||(e[a]=[]))[e.length]=n),s)}function d(e,t){if(e)for(var a=Object.keys(e),n=0,s=a.length;n<s;n++){var i=a[n],r=e[i];if(r)for(var o=0,l=r.length;o<l;o++){if(r[o]===t){1===l?delete e[i]:r.splice(o,1);break}y(r[o])&&d(r[o],t)}}}function u(e){for(var t="",a="",n="",s=0;s<e.length;s++){var i=e[s];i!==a&&(s&&"h"===i?(n="a"===n||"e"===n||"i"===n||"o"===n||"u"===n||"y"===n,(("a"===a||"e"===a||"i"===a||"o"===a||"u"===a||"y"===a)&&n||" "===a)&&(t+=i)):t+=i),n=s===e.length-1?"":e[s+1],a=i}return t}function m(e,t){return 0>(e=e.length-t.length)?1:e?-1:0}function h(e,t){return(e=e[O])<(t=t[O])?-1:e>t?1:0}function p(e,t){for(var a=O.length,n=0;n<a;n++)e=e[O[n]],t=t[O[n]];return e<t?-1:e>t?1:0}function g(e,t,a){return e?{page:e,next:t?""+t:null,result:a}:a}function f(e,t,a,n,s,i,r){var o=[];if(!0===a){a="0";var l=""}else l=a&&a.split(":");var c=e.length;if(1<c){var d,u,m,h,p=T(),f=[],v=0,_=!0,y=0;if(l)if(2===l.length){var S=l;l=!1}else l=m=parseInt(l[0],10);if(r){for(d=T();v<c;v++)if("not"===s[v]){var x=e[v],w=x.length;for(u=0;u<w;u++)d["@"+x[u]]=1}else var O=v+1;if(E(O))return g(a,N,o);v=0}else var C=b(s)&&s;for(;v<c;v++){var M=v===(O||c)-1;if(!C||!v)if((u=C||s&&s[v])&&"and"!==u){if("or"!==u)continue;h=!1}else h=i=!0;if(w=(x=e[v]).length){if(_){if(!P){P=x;continue}var k=P.length;for(u=0;u<k;u++){var j="@"+(_=P[u]);r&&d[j]||(p[j]=1,i||(o[y++]=_))}var P=null;_=!1}for(j=!1,u=0;u<w;u++){var A="@"+(k=x[u]),R=i?p[A]||0:v;if(!(!R&&!n||r&&d[A]||!i&&p[A]))if(R===v){if(M){if((!m||--m<y)&&(o[y++]=k,t&&y===t))return g(a,y+(l||0),o)}else p[A]=v+1;j=!0}else n&&((A=f[R]||(f[R]=[]))[A.length]=k)}if(h&&!j&&!n)break}else if(h&&!n)return g(a,N,x)}if(P)if(v=P.length,r)for(u=l?parseInt(l,10):0;u<v;u++)d["@"+(e=P[u])]||(o[y++]=e);else o=P;if(n)for(y=o.length,S?(v=parseInt(S[0],10)+1,u=parseInt(S[1],10)+1):(v=f.length,u=0);v--;)if(k=f[v]){for(w=k.length;u<w;u++)if(n=k[u],(!r||!d["@"+n])&&(o[y++]=n,t&&y===t))return g(a,v+":"+u,o);u=0}}else!c||s&&"not"===s[0]||(o=e[0],l&&(l=parseInt(l[0],10)));if(t){r=o.length,l&&l>r&&(l=0);var N=(l=l||0)+t;N<r?o=o.slice(l,N):(N=0,l&&(o=o.slice(l)))}return g(a,N,o)}function b(e){return"string"==typeof e}function v(e){return e.constructor===Array}function _(e){return"function"==typeof e}function y(e){return"object"==typeof e}function E(e){return void 0===e}function S(e){for(var t=Array(e),a=0;a<e;a++)t[a]=T();return t}function T(){return Object.create(null)}function x(){var e,t;self.onmessage=function(a){if(a=a.data)if(a.search){var n=t.search(a.content,a.threshold?{limit:a.limit,threshold:a.threshold,where:a.where}:a.limit);self.postMessage({id:e,content:a.content,limit:a.limit,result:n})}else a.add?t.add(a.id,a.content):a.update?t.update(a.id,a.content):a.remove?t.remove(a.id):a.clear?t.clear():a.info?((a=t.info()).worker=e,console.log(a)):a.register&&(e=a.id,a.options.cache=!1,a.options.async=!1,a.options.worker=!1,t=new(t=new Function(a.register.substring(a.register.indexOf("{")+1,a.register.lastIndexOf("}")))())(a.options))}}function w(a,n,s,i){a=t("flexsearch","id"+a,x,(function(e){(e=e.data)&&e.result&&i(e.id,e.content,e.result,e.limit,e.where,e.cursor,e.suggest)}),n);var r=e.toString();return s.id=n,a.postMessage({register:r,options:s,id:n}),a}var O,C={encode:"icase",g:"forward",split:/\W+/,cache:!1,async:!1,i:!1,G:!1,a:!1,c:9,threshold:0,depth:0},M={memory:{encode:"extra",g:"strict",threshold:0,c:1},speed:{encode:"icase",g:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",g:"full",threshold:1,c:3},score:{encode:"extra",g:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",g:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",g:"strict",threshold:8,c:9,depth:1}},k=[],j=0,P={},A={};a.create=function(e,t){return new a(e,t)},a.registerMatcher=function(e){for(var t in e)e.hasOwnProperty(t)&&k.push(o(t),e[t]);return this},a.registerEncoder=function(e,t){return N[e]=t.bind(N),this},a.registerLanguage=function(e,t){return P[e]=t.filter,A[e]=t.stemmer,this},a.encode=function(e,t){return N[e](t)},a.prototype.init=function(e,t){if(this.h=[],t){var s=t.preset;e=t}else e||(e=C),s=e.preset;if(t={},b(e)?((t=M[e])||console.warn("Preset not found: "+e),e={}):s&&((t=M[s])||console.warn("Preset not found: "+s)),s=e.worker)if("undefined"==typeof Worker)e.worker=!1,this.b=null;else{var i=parseInt(s,10)||4;this.w=-1,this.D=0,this.A=[],this.H=null,this.b=Array(i);for(var r=0;r<i;r++)this.b[r]=w(this.id,r,e,n.bind(this))}if(this.g=e.tokenize||t.g||this.g||C.g,this.split=E(s=e.split)?this.split||C.split:b(s)?o(s):s,this.G=e.rtl||this.G||C.G,this.async="undefined"==typeof Promise||E(s=e.async)?this.async||C.async:s,this.i=E(s=e.worker)?this.i||C.i:s,this.threshold=E(s=e.threshold)?t.threshold||this.threshold||C.threshold:s,this.c=E(s=e.resolution)?s=t.c||this.c||C.c:s,s<=this.threshold&&(this.c=this.threshold+1),this.depth="strict"!==this.g||E(s=e.depth)?t.depth||this.depth||C.depth:s,this.j=(s=E(s=e.encode)?t.encode||C.encode:s)&&N[s]&&N[s].bind(N)||(_(s)?s:this.j||!1),(s=e.matcher)&&this.addMatcher(s),s=(t=e.lang)||e.filter){if(b(s)&&(s=P[s]),v(s)){i=this.j,r=T();for(var l=0;l<s.length;l++){var c=i?i(s[l]):s[l];r[c]=1}s=r}this.filter=s}if(s=t||e.stemmer){for(var d in t=b(s)?A[s]:s,i=this.j,r=[],t)t.hasOwnProperty(d)&&(l=i?i(d):d,r.push(o(l+"($|\\W)"),i?i(t[d]):t[d]));this.stemmer=r}if(this.a=r=(s=e.doc)?function e(t){var a,n=T();for(a in t)if(t.hasOwnProperty(a)){var s=t[a];v(s)?n[a]=s.slice(0):y(s)?n[a]=e(s):n[a]=s}return n}(s):this.a||C.a,this.s=S(this.c-(this.threshold||0)),this.o=T(),this.f=T(),r){if(this.v=T(),e.doc=null,d=r.index={},t=r.keys=[],i=r.field,l=r.tag,c=r.store,v(r.id)||(r.id=r.id.split(":")),c){var u=T();if(b(c))u[c]=1;else if(v(c))for(var m=0;m<c.length;m++)u[c[m]]=1;else y(c)&&(u=c);r.store=u}if(l){if(this.B=T(),c=T(),i)if(b(i))c[i]=e;else if(v(i))for(u=0;u<i.length;u++)c[i[u]]=e;else y(i)&&(c=i);for(v(l)||(r.tag=l=[l]),i=0;i<l.length;i++)this.B[l[i]]=T();this.I=l,i=c}if(i){if(!v(i))if(y(i)){var h=i;r.field=i=Object.keys(i)}else r.field=i=[i];for(r=0;r<i.length;r++)v(l=i[r])||(h&&(e=h[l]),t[r]=l,i[r]=l.split(":")),d[l]=new a(e)}e.doc=s}return this.m=!0,this.u=!!(this.cache=s=E(s=e.cache)?this.cache||C.cache:s)&&new D(s),this},a.prototype.encode=function(e){return e&&(k.length&&(e=l(e,k)),this.h.length&&(e=l(e,this.h)),this.j&&(e=this.j(e)),this.stemmer&&(e=l(e,this.stemmer))),e},a.prototype.addMatcher=function(e){var t,a=this.h;for(t in e)e.hasOwnProperty(t)&&a.push(o(t),e[t]);return this},a.prototype.add=function(e,t,a,n,i){if(this.a&&y(e))return this.l("add",e,t);if(t&&b(t)&&(e||0===e)){var r="@"+e;if(this.f[r]&&!n)return this.update(e,t);if(this.i)return++this.w>=this.b.length&&(this.w=0),this.b[this.w].postMessage({add:!0,id:e,content:t}),this.f[r]=""+this.w,a&&a(),this;if(!i){if(this.async&&"function"!=typeof importScripts){var o=this;return r=new Promise((function(a){setTimeout((function(){o.add(e,t,null,n,!0),o=null,a()}))})),a?(r.then(a),this):r}if(a)return this.add(e,t,null,n,!0),a(),this}if(!(t=this.encode(t)).length)return this;i=_(a=this.g)?a(t):t.split(this.split),this.filter&&(i=s(i,this.filter));var l=T();l._ctx=T();for(var d=i.length,u=this.threshold,m=this.depth,h=this.c,p=this.s,g=this.G,f=0;f<d;f++){var v=i[f];if(v){var E=v.length,x=(g?f+1:d-f)/d,w="";switch(a){case"reverse":case"both":for(var O=E;--O;)c(p,l,w=v[O]+w,e,g?1:(E-O)/E,x,u,h-1);w="";case"forward":for(O=0;O<E;O++)c(p,l,w+=v[O],e,g?(O+1)/E:1,x,u,h-1);break;case"full":for(O=0;O<E;O++)for(var C=(g?O+1:E-O)/E,M=E;M>O;M--)c(p,l,w=v.substring(O,M),e,C,x,u,h-1);break;default:if(E=c(p,l,v,e,1,x,u,h-1),m&&1<d&&E>=u)for(E=l._ctx[v]||(l._ctx[v]=T()),v=this.o[v]||(this.o[v]=S(h-(u||0))),0>(x=f-m)&&(x=0),(w=f+m+1)>d&&(w=d);x<w;x++)x!==f&&c(v,E,i[x],e,0,h-(x<f?f-x:x-f),u,h-1)}}}this.f[r]=1,this.m=!1}return this},a.prototype.l=function(e,t,a){if(v(t)){var n=t.length;if(n--){for(var s=0;s<n;s++)this.l(e,t[s]);return this.l(e,t[n],a)}}else{var i,r=this.a.index,o=this.a.keys,l=this.a.tag;s=this.a.store;var c=this.a.id;n=t;for(var d=0;d<c.length;d++)n=n[c[d]];if("remove"===e&&(delete this.v[n],c=o.length,c--)){for(t=0;t<c;t++)r[o[t]].remove(n);return r[o[c]].remove(n,a)}if(l){for(i=0;i<l.length;i++){var u=l[i],m=t;for(c=u.split(":"),d=0;d<c.length;d++)m=m[c[d]];m="@"+m}i=(i=this.B[u])[m]||(i[m]=[])}for(l=0,u=(c=this.a.field).length;l<u;l++){d=c[l],m=t;for(var h=0;h<d.length;h++)m=m[d[h]];d=r[o[l]],h="add"===e?d.add:d.update,l===u-1?h.call(d,n,m,a):h.call(d,n,m)}if(s){for(a=Object.keys(s),e=T(),r=0;r<a.length;r++)if(s[o=a[r]])for(o=o.split(":"),l=c=void 0,u=0;u<o.length;u++)c=(c||t)[m=o[u]],l=(l||e)[m]=c;t=e}i&&(i[i.length]=t),this.v[n]=t}return this},a.prototype.update=function(e,t,a){return this.a&&y(e)?this.l("update",e,t):(this.f["@"+e]&&b(t)&&(this.remove(e),this.add(e,t,a,!0)),this)},a.prototype.remove=function(e,t,a){if(this.a&&y(e))return this.l("remove",e,t);var n="@"+e;if(this.f[n]){if(this.i)return this.b[this.f[n]].postMessage({remove:!0,id:e}),delete this.f[n],t&&t(),this;if(!a){if(this.async&&"function"!=typeof importScripts){var s=this;return n=new Promise((function(t){setTimeout((function(){s.remove(e,null,!0),s=null,t()}))})),t?(n.then(t),this):n}if(t)return this.remove(e,null,!0),t(),this}for(t=0;t<this.c-(this.threshold||0);t++)d(this.s[t],e);this.depth&&d(this.o,e),delete this.f[n],this.m=!1}return this},a.prototype.search=function(e,t,a,n){if(y(t)){if(v(t))for(var r=0;r<t.length;r++)t[r].query=e;else t.query=e;e=t,t=1e3}else t&&_(t)?(a=t,t=1e3):t||0===t||(t=1e3);if(!this.i){var o=[],l=e;if(y(e)&&!v(e)){a||(a=e.callback)&&(l.callback=null);var c=e.sort,d=e.page;t=e.limit,U=e.threshold;var u=e.suggest;e=e.query}if(this.a){U=this.a.index;var h,p,g=l.where,E=l.bool||"or",S=l.field,x=E;if(S)v(S)||(S=[S]);else if(v(l)){var w=l;S=[],x=[];for(var O=0;O<l.length;O++)r=(n=l[O]).bool||E,S[O]=n.field,x[O]=r,"not"===r?h=!0:"and"===r&&(p=!0)}else S=this.a.keys;for(E=S.length,O=0;O<E;O++)w&&(l=w[O]),d&&!b(l)&&(l.page=null,l.limit=0),o[O]=U[S[O]].search(l,0);if(a)return a(i.call(this,e,x,o,c,t,u,g,d,p,h));if(this.async){var C=this;return new Promise((function(a){Promise.all(o).then((function(n){a(i.call(C,e,x,n,c,t,u,g,d,p,h))}))}))}return i.call(this,e,x,o,c,t,u,g,d,p,h)}if(U||(U=this.threshold||0),!n){if(this.async&&"function"!=typeof importScripts){var M=this;return U=new Promise((function(e){setTimeout((function(){e(M.search(l,t,null,!0)),M=null}))})),a?(U.then(a),this):U}if(a)return a(this.search(l,t,null,!0)),this}if(!e||!b(e))return o;if(l=e,this.cache)if(this.m){if(a=this.u.get(e))return a}else this.u.clear(),this.m=!0;if(!(l=this.encode(l)).length)return o;a=_(a=this.g)?a(l):l.split(this.split),this.filter&&(a=s(a,this.filter)),w=a.length,n=!0,r=[];var k=T(),j=0;if(1<w&&(this.depth&&"strict"===this.g?E=!0:a.sort(m)),!E||(O=this.o))for(var P=this.c;j<w;j++){var A=a[j];if(A){if(E){if(!S)if(O[A])S=A,k[A]=1;else if(!u)return o;if(u&&j===w-1&&!r.length)E=!1,k[A=S||A]=0;else if(!S)continue}if(!k[A]){var R=[],N=!1,D=0,I=E?O[S]:this.s;if(I)for(var L=void 0,B=0;B<P-U;B++)(L=I[B]&&I[B][A])&&(R[D++]=L,N=!0);if(N)S=A,r[r.length]=1<D?R.concat.apply([],R):R[0];else if(!u){n=!1;break}k[A]=1}}}else n=!1;return n&&(o=f(r,t,d,u)),this.cache&&this.u.set(e,o),o}this.H=a,this.D=0,this.A=[];for(var U=0;U<this.i;U++)this.b[U].postMessage({search:!0,limit:t,content:e})},a.prototype.find=function(e,t){return this.where(e,t,1)[0]||null},a.prototype.where=function(e,t,a,n){var s,i=this.v,r=[],o=0;if(y(e)){a||(a=t);var l=Object.keys(e),c=l.length,d=!1;if(1===c&&"id"===l[0])return[i[e.id]];if((s=this.I)&&!n)for(var u=0;u<s.length;u++){var m=s[u],h=e[m];if(!E(h)){var p=this.B[m]["@"+h];if(0==--c)return p;l.splice(l.indexOf(m),1),delete e[m];break}}for(s=Array(c),u=0;u<c;u++)s[u]=l[u].split(":")}else{if(_(e)){for(a=(t=n||Object.keys(i)).length,l=0;l<a;l++)e(c=i[t[l]])&&(r[o++]=c);return r}if(E(t))return[i[e]];if("id"===e)return[i[t]];l=[e],c=1,s=[e.split(":")],d=!0}for(u=(n=p||n||Object.keys(i)).length,m=0;m<u;m++){h=p?n[m]:i[n[m]];for(var g=!0,f=0;f<c;f++){d||(t=e[l[f]]);var b=s[f],v=b.length,S=h;if(1<v)for(var T=0;T<v;T++)S=S[b[T]];else S=S[b[0]];if(S!==t){g=!1;break}}if(g&&(r[o++]=h,a&&o===a))break}return r},a.prototype.info=function(){if(!this.i)return{id:this.id,items:this.length,cache:!(!this.cache||!this.cache.C)&&this.cache.C.length,matcher:k.length+(this.h?this.h.length:0),worker:this.i,threshold:this.threshold,depth:this.depth,resolution:this.c,contextual:this.depth&&"strict"===this.g};for(var e=0;e<this.i;e++)this.b[e].postMessage({info:!0,id:this.id})},a.prototype.clear=function(){return this.destroy().init()},a.prototype.destroy=function(){if(this.cache&&(this.u.clear(),this.u=null),this.s=this.o=this.f=null,this.a){for(var e=this.a.keys,t=0;t<e.length;t++)this.a.index[e[t]].destroy();this.a=this.v=null}return this},a.prototype.export=function(e){var t=!e||E(e.serialize)||e.serialize;if(this.a){var a=!e||E(e.doc)||e.doc,n=!e||E(e.index)||e.index;e=[];var s=0;if(n)for(n=this.a.keys;s<n.length;s++){var i=this.a.index[n[s]];e[s]=[i.s,i.o,Object.keys(i.f)]}a&&(e[s]=this.v)}else e=[this.s,this.o,Object.keys(this.f)];return t&&(e=JSON.stringify(e)),e},a.prototype.import=function(e,t){(!t||E(t.serialize)||t.serialize)&&(e=JSON.parse(e));var a=T();if(this.a){var n=!t||E(t.doc)||t.doc,s=0;if(!t||E(t.index)||t.index){for(var i=(t=this.a.keys).length,r=e[0][2];s<r.length;s++)a[r[s]]=1;for(s=0;s<i;s++){r=this.a.index[t[s]];var o=e[s];o&&(r.s=o[0],r.o=o[1],r.f=a)}}n&&(this.v=y(n)?n:e[s])}else{for(n=e[2],s=0;s<n.length;s++)a[n[s]]=1;this.s=e[0],this.o=e[1],this.f=a}};var R=function(){var e=o("\\s+"),t=o("[^a-z0-9 ]"),a=[o("[-/]")," ",t,"",e," "];return function(e){return u(l(e.toLowerCase(),a))}}(),N={icase:function(e){return e.toLowerCase()},simple:function(){var e=o("\\s+"),t=o("[^a-z0-9 ]"),a=o("[-/]"),n=[o("[àáâãäå]"),"a",o("[èéêë]"),"e",o("[ìíîï]"),"i",o("[òóôõöő]"),"o",o("[ùúûüű]"),"u",o("[ýŷÿ]"),"y",o("ñ"),"n",o("[çc]"),"k",o("ß"),"s",o(" & ")," and ",a," ",t,"",e," "];return function(e){return" "===(e=l(e.toLowerCase(),n))?"":e}}(),advanced:function(){var e=o("ae"),t=o("ai"),a=o("ay"),n=o("ey"),s=o("oe"),i=o("ue"),r=o("ie"),c=o("sz"),d=o("zs"),m=o("ck"),h=o("cc"),p=[e,"a",t,"ei",a,"ei",n,"ei",s,"o",i,"u",r,"i",c,"s",d,"s",o("sh"),"s",m,"k",h,"k",o("th"),"t",o("dt"),"t",o("ph"),"f",o("pf"),"f",o("ou"),"o",o("uo"),"u"];return function(e,t){return e?(2<(e=this.simple(e)).length&&(e=l(e,p)),t||1<e.length&&(e=u(e)),e):e}}(),extra:function(){var e=[o("p"),"b",o("z"),"s",o("[cgq]"),"k",o("n"),"m",o("d"),"t",o("[vw]"),"f",o("[aeiouy]"),""];return function(t){if(!t)return t;if(1<(t=this.advanced(t,!0)).length){t=t.split(" ");for(var a=0;a<t.length;a++){var n=t[a];1<n.length&&(t[a]=n[0]+l(n.substring(1),e))}t=u(t=t.join(" "))}return t}}(),balance:R},D=function(){function e(e){this.clear(),this.J=!0!==e&&e}return e.prototype.clear=function(){this.cache=T(),this.count=T(),this.index=T(),this.C=[]},e.prototype.set=function(e,t){if(this.J&&E(this.cache[e])){var a=this.C.length;if(a===this.J){a--;var n=this.C[a];delete this.cache[n],delete this.count[n],delete this.index[n]}this.index[e]=a,this.C[a]=e,this.count[e]=-1,this.cache[e]=t,this.get(e)}else this.cache[e]=t},e.prototype.get=function(e){var t=this.cache[e];if(this.J&&t){var a=++this.count[e],n=this.index,s=n[e];if(0<s){for(var i=this.C,r=s;this.count[i[--s]]<=a&&-1!==s;);if(++s!==r){for(a=r;a>s;a--)r=i[a-1],i[a]=r,n[r]=a;i[s]=e,n[e]=s}}}return t},e}();return a}(function(){var e={},t="undefined"!=typeof Blob&&"undefined"!=typeof URL&&URL.createObjectURL;return function(a,n,s,i,r){return s=t?URL.createObjectURL(new Blob(["("+s.toString()+")()"],{type:"text/javascript"})):a+".es5.js",e[a+="-"+n]||(e[a]=[]),e[a][r]=new Worker(s),e[a][r].onmessage=i,console.log("Register Worker: "+a+"@"+r),e[a][r]}}()),this)}).call(this,a(25))},1979:function(e,t,a){
/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(a){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=a,this.iframes=n,this.exclude=s,this.iframesTimeout=i}return a(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var a=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||a||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=void 0;try{var s=e.contentWindow;if(n=s.document,!s||!n)throw new Error("iframe inaccessible")}catch(e){a()}n&&t(n)}},{key:"isIframeBlank",value:function(e){var t="about:blank",a=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&a!==t&&a}},{key:"observeIframeLoad",value:function(e,t,a){var n=this,s=!1,i=null,r=function r(){if(!s){s=!0,clearTimeout(i);try{n.isIframeBlank(e)||(e.removeEventListener("load",r),n.getIframeContents(e,t,a))}catch(e){a()}}};e.addEventListener("load",r),i=setTimeout(r,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,a){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,a):this.getIframeContents(e,t,a):this.observeIframeLoad(e,t,a)}catch(e){a()}}},{key:"waitForIframes",value:function(e,t){var a=this,n=0;this.forEachIframe(e,(function(){return!0}),(function(e){n++,a.waitForIframes(e.querySelector("html"),(function(){--n||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,a,n){var s=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=t.querySelectorAll("iframe"),o=r.length,l=0;r=Array.prototype.slice.call(r);var c=function(){--o<=0&&i(l)};o||c(),r.forEach((function(t){e.matches(t,s.exclude)?c():s.onIframeReady(t,(function(e){a(t)&&(l++,n(e)),c()}),c)}))}},{key:"createIterator",value:function(e,t,a){return document.createNodeIterator(e,t,a,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,a){if(e.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,a,n){var s=!1,i=!1;return n.forEach((function(e,t){e.val===a&&(s=t,i=e.handled)})),this.compareNodeIframe(e,t,a)?(!1!==s||i?!1===s||i||(n[s].handled=!0):n.push({val:a,handled:!0}),!0):(!1===s&&n.push({val:a,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,a,n){var s=this;e.forEach((function(e){e.handled||s.getIframeContents(e.val,(function(e){s.createInstanceOnIframe(e).forEachNode(t,a,n)}))}))}},{key:"iterateThroughNodes",value:function(e,t,a,n,s){for(var i,r=this,o=this.createIterator(t,e,n),l=[],c=[],d=void 0,u=void 0;i=void 0,i=r.getIteratorNode(o),u=i.prevNode,d=i.node;)this.iframes&&this.forEachIframe(t,(function(e){return r.checkIframeFilter(d,u,e,l)}),(function(t){r.createInstanceOnIframe(t).forEachNode(e,(function(e){return c.push(e)}),n)})),c.push(d);c.forEach((function(e){a(e)})),this.iframes&&this.handleOpenIframes(l,e,a,n),s()}},{key:"forEachNode",value:function(e,t,a){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=this.getContexts(),r=i.length;r||s(),i.forEach((function(i){var o=function(){n.iterateThroughNodes(e,i,t,a,(function(){--r<=0&&s()}))};n.iframes?n.waitForIframes(i,o):o()}))}}],[{key:"matches",value:function(e,t){var a="string"==typeof t?[t]:t,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){var s=!1;return a.every((function(t){return!n.call(e,t)||(s=!0,!1)})),s}return!1}}]),e}(),i=function(){function i(e){t(this,i),this.ctx=e,this.ie=!1;var a=window.navigator.userAgent;(a.indexOf("MSIE")>-1||a.indexOf("Trident")>-1)&&(this.ie=!0)}return a(i,[{key:"log",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",n=this.opt.log;this.opt.debug&&"object"===(void 0===n?"undefined":e(n))&&"function"==typeof n[a]&&n[a]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,a=this.opt.caseSensitive?"":"i",n=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var s in t)if(t.hasOwnProperty(s)){var i=t[s],r="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(s):this.escapeStr(s),o="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i);""!==r&&""!==o&&(e=e.replace(new RegExp("("+this.escapeStr(r)+"|"+this.escapeStr(o)+")","gm"+a),n+"("+this.processSynomyms(r)+"|"+this.processSynomyms(o)+")"+n))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,a){var n=a.charAt(t+1);return/[(|)\\]/.test(n)||""===n?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],a=this.opt.ignorePunctuation;return Array.isArray(a)&&a.length&&t.push(this.escapeStr(a.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",a=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],n=[];return e.split("").forEach((function(s){a.every((function(a){if(-1!==a.indexOf(s)){if(n.indexOf(a)>-1)return!1;e=e.replace(new RegExp("["+a+"]","gm"+t),"["+a+"]"),n.push(a)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,a=this.opt.accuracy,n="string"==typeof a?a:a.value,s="string"==typeof a?[]:a.limiters,i="";switch(s.forEach((function(e){i+="|"+t.escapeStr(e)})),n){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(i="\\s"+(i||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")))+"]*"+e+"[^"+i+"]*)";case"exactly":return"(^|\\s"+i+")("+e+")(?=$|\\s"+i+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,a=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===a.indexOf(e)&&a.push(e)})):e.trim()&&-1===a.indexOf(e)&&a.push(e)})),{keywords:a.sort((function(e,t){return t.length-e.length})),length:a.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var a=[],n=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var s=t.callNoMatchOnInvalidRanges(e,n),i=s.start,r=s.end;s.valid&&(e.start=i,e.length=r-i,a.push(e),n=r)})),a}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var a=void 0,n=void 0,s=!1;return e&&void 0!==e.start?(n=(a=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&n-t>0&&n-a>0?s=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:a,end:n,valid:s}}},{key:"checkWhitespaceRanges",value:function(e,t,a){var n=void 0,s=!0,i=a.length,r=t-i,o=parseInt(e.start,10)-r;return(n=(o=o>i?i:o)+parseInt(e.length,10))>i&&(n=i,this.log("End range automatically set to the max value of "+i)),o<0||n-o<0||o>i||n>i?(s=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===a.substring(o,n).replace(/\s+/g,"")&&(s=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:o,end:n,valid:s}}},{key:"getTextNodes",value:function(e){var t=this,a="",n=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){n.push({start:a.length,end:(a+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:a,nodes:n})}))}},{key:"matchesExclude",value:function(e){return s.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,a){var n=this.opt.element?this.opt.element:"mark",s=e.splitText(t),i=s.splitText(a-t),r=document.createElement(n);return r.setAttribute("data-markjs","true"),this.opt.className&&r.setAttribute("class",this.opt.className),r.textContent=s.textContent,s.parentNode.replaceChild(r,s),i}},{key:"wrapRangeInMappedTextNode",value:function(e,t,a,n,s){var i=this;e.nodes.every((function(r,o){var l=e.nodes[o+1];if(void 0===l||l.start>t){if(!n(r.node))return!1;var c=t-r.start,d=(a>r.end?r.end:a)-r.start,u=e.value.substr(0,r.start),m=e.value.substr(d+r.start);if(r.node=i.wrapRangeInTextNode(r.node,c,d),e.value=u+m,e.nodes.forEach((function(t,a){a>=o&&(e.nodes[a].start>0&&a!==o&&(e.nodes[a].start-=d),e.nodes[a].end-=d)})),a-=d,s(r.node.previousSibling,r.start),!(a>r.end))return!1;t=r.end}return!0}))}},{key:"wrapMatches",value:function(e,t,a,n,s){var i=this,r=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var s=void 0;null!==(s=e.exec(t.textContent))&&""!==s[r];)if(a(s[r],t)){var o=s.index;if(0!==r)for(var l=1;l<r;l++)o+=s[l].length;t=i.wrapRangeInTextNode(t,o,o+s[r].length),n(t.previousSibling),e.lastIndex=0}})),s()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,a,n,s){var i=this,r=0===t?0:t+1;this.getTextNodes((function(t){for(var o=void 0;null!==(o=e.exec(t.value))&&""!==o[r];){var l=o.index;if(0!==r)for(var c=1;c<r;c++)l+=o[c].length;var d=l+o[r].length;i.wrapRangeInMappedTextNode(t,l,d,(function(e){return a(o[r],e)}),(function(t,a){e.lastIndex=a,n(t)}))}s()}))}},{key:"wrapRangeFromIndex",value:function(e,t,a,n){var s=this;this.getTextNodes((function(i){var r=i.value.length;e.forEach((function(e,n){var o=s.checkWhitespaceRanges(e,r,i.value),l=o.start,c=o.end;o.valid&&s.wrapRangeInMappedTextNode(i,l,c,(function(a){return t(a,e,i.value.substring(l,c),n)}),(function(t){a(t,e)}))})),n()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,a=document.createDocumentFragment();e.firstChild;)a.appendChild(e.removeChild(e.firstChild));t.replaceChild(a,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var a=this;this.opt=t,this.log('Searching with expression "'+e+'"');var n=0,s="wrapMatches";this.opt.acrossElements&&(s="wrapMatchesAcrossElements"),this[s](e,this.opt.ignoreGroups,(function(e,t){return a.opt.filter(t,e,n)}),(function(e){n++,a.opt.each(e)}),(function(){0===n&&a.opt.noMatch(e),a.opt.done(n)}))}},{key:"mark",value:function(e,t){var a=this;this.opt=t;var n=0,s="wrapMatches",i=this.getSeparatedKeywords("string"==typeof e?[e]:e),r=i.keywords,o=i.length,l=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(s="wrapMatchesAcrossElements"),0===o?this.opt.done(n):function e(t){var i=new RegExp(a.createRegExp(t),"gm"+l),c=0;a.log('Searching with expression "'+i+'"'),a[s](i,1,(function(e,s){return a.opt.filter(s,t,n,c)}),(function(e){c++,n++,a.opt.each(e)}),(function(){0===c&&a.opt.noMatch(t),r[o-1]===t?a.opt.done(n):e(r[r.indexOf(t)+1])}))}(r[0])}},{key:"markRanges",value:function(e,t){var a=this;this.opt=t;var n=0,s=this.checkRanges(e);s&&s.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(s)),this.wrapRangeFromIndex(s,(function(e,t,n,s){return a.opt.filter(e,t,n,s)}),(function(e,t){n++,a.opt.each(e,t)}),(function(){a.opt.done(n)}))):this.opt.done(n)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var a=this.opt.element?this.opt.element:"*";a+="[data-markjs]",this.opt.className&&(a+="."+this.opt.className),this.log('Removal selector "'+a+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var n=s.matches(e,a),i=t.matchesExclude(e);return!n||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=n({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new s(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),i}();return function(e){var t=this,a=new i(e);return this.mark=function(e,n){return a.mark(e,n),t},this.markRegExp=function(e,n){return a.markRegExp(e,n),t},this.markRanges=function(e,n){return a.markRanges(e,n),t},this.unmark=function(e){return a.unmark(e),t},this}}()},1991:function(e,t,a){"use strict";a.r(t);var n,s,i,r=a(323),o=a(11),l=a(1177),c=a(149),d=a(1221),u=a(1130),m=a(15),h=a(102),p=a(37),g=a(184),f=a(9),b=a(19),v=a(10),_=a(1151),y=a(1225),E=(a(36),a(22)),S=a(1235),T=(a(148),a(64),a(6)),x=a.n(T),w=a(1131),O=a(0),C=a(183),M=a(27),k=a(34),j=a.n(k),P=a(1138);class A extends x.a.Component{render(){return x.a.createElement("div",{className:"admin-console__header"},this.props.children)}}n=A,s="propTypes",i={children:j.a.oneOfType([j.a.arrayOf(j.a.element),j.a.element,j.a.string]).isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;const R=e=>x.a.createElement(A,null,x.a.createElement(P.b,{id:e.id,defaultMessage:e.defaultMessage,values:e.values}));R.propTypes={id:j.a.string.isRequired,defaultMessage:j.a.string.isRequired,values:j.a.any},R.defaultProps={values:{}};var N=R,D=a(324),I=a.n(D),L=a(1506),B=a.n(L),U=a(14);function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class q extends x.a.PureComponent{constructor(...e){super(...e),F(this,"chart",null),F(this,"initChart",e=>{if(!this.refs.canvas)return;const t=I.a.findDOMNode(this.refs.canvas).getContext("2d"),a=JSON.parse(JSON.stringify(this.props.data));this.chart=new B.a(t,{type:"doughnut",data:a,options:{}}),e&&this.chart&&this.chart.update()})}componentDidMount(){this.initChart()}componentDidUpdate(e){U.c(e.data,this.props.data)||this.initChart(!0)}componentWillUnmount(){this.chart&&this.refs.canvas&&this.chart.destroy()}render(){let e;return e=null==this.props.data?x.a.createElement(w.a,{id:"analytics.chart.loading",defaultMessage:"Loading..."}):x.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height}),x.a.createElement("div",{className:"col-sm-6"},x.a.createElement("div",{className:"total-count"},x.a.createElement("div",{className:"title"},this.props.title),x.a.createElement("div",{className:"content"},e)))}}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}F(q,"propTypes",{title:j.a.node.isRequired,width:j.a.number.isRequired,height:j.a.number.isRequired,data:j.a.object});class H extends x.a.PureComponent{constructor(...e){super(...e),G(this,"chart",null),G(this,"chartOptions",{legend:{display:!1}}),G(this,"initChart",e=>{if(!this.refs.canvas)return;const t=I.a.findDOMNode(this.refs.canvas).getContext("2d"),a=JSON.parse(JSON.stringify(this.props.data));this.chart=new B.a(t,{type:"line",data:a,options:this.chartOptions||{}}),e&&this.chart.update()})}componentDidMount(){this.initChart()}componentDidUpdate(e){if(!(this.props.data&&this.props.data.labels.length>0)&&this.chart&&(this.chart.destroy(),this.chart=null),U.c(e.data,this.props.data))return;const t=this.props.data&&this.props.data.labels.length>0,a=Boolean(this.chart);t&&this.initChart(a)}componentWillUnmount(){this.chart&&this.chart.destroy()}render(){let e;return e=null==this.props.data?x.a.createElement(w.a,{id:"analytics.chart.loading",defaultMessage:"Loading..."}):0===this.props.data.labels.length?x.a.createElement("h5",null,x.a.createElement(w.a,{id:"analytics.chart.meaningful",defaultMessage:"Not enough data for a meaningful representation."})):x.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height}),x.a.createElement("div",{className:"col-sm-12"},x.a.createElement("div",{className:"total-count by-day"},x.a.createElement("div",{className:"title"},this.props.title),x.a.createElement("div",{className:"content"},e)))}}G(H,"propTypes",{title:j.a.node.isRequired,width:j.a.number.isRequired,height:j.a.number.isRequired,data:j.a.object});class W extends x.a.PureComponent{render(){const e=x.a.createElement(w.a,{id:"analytics.chart.loading",defaultMessage:"Loading..."});return x.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6"},x.a.createElement("div",{className:"total-count"},x.a.createElement("div",{className:"title"},this.props.title,x.a.createElement("i",{className:"fa "+this.props.icon})),x.a.createElement("div",{className:"content"},void 0===this.props.count||isNaN(this.props.count)?e:this.props.count)))}}function z(e){const t={labels:[],datasets:[{fillColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(151,187,205,1)",data:[]}]};for(const a in e)if(e[a]){const n=e[a];t.labels.push(n.name),t.datasets[0].data.push(n.value)}return t}function Y(e){const t={labels:[],datasets:[{label:"",fillColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(151,187,205,1)",data:[]}]};for(const a in e)if(e[a]){const n=e[a];t.labels.push(n.name),t.datasets[0].data.push(n.value)}return t}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(W,"propTypes",{title:j.a.node.isRequired,icon:j.a.string.isRequired,count:j.a.number});const V=O.Q.StatTypes;class J extends x.a.PureComponent{componentDidMount(){_.r(),_.p(),_.m(),_.s(),this.props.isLicensed&&_.l()}render(){const e=this.props.stats,t=this.props.isLicensed,a=-1===e[V.TOTAL_POSTS],n=z(e[V.POST_PER_DAY]),s=z(e[V.BOT_POST_PER_DAY]),i=Y(e[V.USERS_WITH_POSTS_PER_DAY]);let r,o,l,c,d,u,m,h,p,g,f;if(function(...e){const t=new Set;e.forEach(e=>{e.labels.forEach(e=>t.add(e))}),e.forEach(e=>{e.labels.length>0&&t.forEach(t=>{-1===e.labels.indexOf(t)&&(e.labels.push(t),e.datasets[0].data.push(0))})})}(n,s,i),a?r=x.a.createElement("div",{className:"banner"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(P.b,{id:"analytics.system.skippedIntensiveQueries",defaultMessage:"To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html)."}))):(o=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalPosts",defaultMessage:"Total Posts"}),icon:"fa-comment",count:e[V.TOTAL_POSTS]}),c=x.a.createElement("div",{className:"row"},x.a.createElement(H,{title:x.a.createElement(w.a,{id:"analytics.system.totalBotPosts",defaultMessage:"Total Posts from Bots"}),data:s,width:740,height:225})),l=x.a.createElement("div",{className:"row"},x.a.createElement(H,{title:x.a.createElement(w.a,{id:"analytics.system.totalPosts",defaultMessage:"Total Posts"}),data:n,width:740,height:225})),d=x.a.createElement("div",{className:"row"},x.a.createElement(H,{title:x.a.createElement(w.a,{id:"analytics.system.activeUsers",defaultMessage:"Active Users With Posts"}),data:i,width:740,height:225}))),this.props.isLicensed){h=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalSessions",defaultMessage:"Total Sessions"}),icon:"fa-signal",count:e[V.TOTAL_SESSIONS]}),p=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalCommands",defaultMessage:"Total Commands"}),icon:"fa-terminal",count:e[V.TOTAL_COMMANDS]}),g=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalIncomingWebhooks",defaultMessage:"Incoming Webhooks"}),icon:"fa-arrow-down",count:e[V.TOTAL_IHOOKS]}),f=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalOutgoingWebhooks",defaultMessage:"Outgoing Webhooks"}),icon:"fa-arrow-up",count:e[V.TOTAL_OHOOKS]}),u=x.a.createElement("div",null,x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalWebsockets",defaultMessage:"WebSocket Conns"}),icon:"fa-user",count:e[V.TOTAL_WEBSOCKET_CONNECTIONS]}),x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalMasterDbConnections",defaultMessage:"Master DB Conns"}),icon:"fa-terminal",count:e[V.TOTAL_MASTER_DB_CONNECTIONS]}),x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalReadDbConnections",defaultMessage:"Replica DB Conns"}),icon:"fa-terminal",count:e[V.TOTAL_READ_DB_CONNECTIONS]}));const t=(y=e[V.TOTAL_PUBLIC_CHANNELS],E=e[V.TOTAL_PRIVATE_GROUPS],{labels:[U.jb("analytics.system.publicChannels","Public Channels"),U.jb("analytics.system.privateGroups","Private Channels")],datasets:[{data:[y,E],backgroundColor:["#46BFBD","#FDB45C"],hoverBackgroundColor:["#5AD3D1","#FFC870"]}]}),a=(b=e[V.TOTAL_FILE_POSTS],v=e[V.TOTAL_HASHTAG_POSTS],_=e[V.TOTAL_POSTS],{labels:[U.jb("analytics.system.totalFilePosts","Posts with Files"),U.jb("analytics.system.totalHashtagPosts","Posts with Hashtags"),U.jb("analytics.system.textPosts","Posts with Text-only")],datasets:[{data:[b,v,_-b-v],backgroundColor:["#46BFBD","#F7464A","#FDB45C"],hoverBackgroundColor:["#5AD3D1","#FF5A5E","#FFC870"]}]});let n;-1!==e[V.TOTAL_POSTS]&&(n=x.a.createElement(q,{title:x.a.createElement(w.a,{id:"analytics.system.postTypes",defaultMessage:"Posts, Files and Hashtags"}),data:a,width:300,height:225})),m=x.a.createElement("div",{className:"row"},x.a.createElement(q,{title:x.a.createElement(w.a,{id:"analytics.system.channelTypes",defaultMessage:"Channel Types"}),data:t,width:300,height:225}),n)}var b,v,_,y,E;const S=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalUsers",defaultMessage:"Total Active Users"}),icon:"fa-user",count:e[V.TOTAL_USERS]}),T=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalTeams",defaultMessage:"Total Teams"}),icon:"fa-users",count:e[V.TOTAL_TEAMS]}),O=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.totalChannels",defaultMessage:"Total Channels"}),icon:"fa-globe",count:e[V.TOTAL_PUBLIC_CHANNELS]+e[V.TOTAL_PRIVATE_GROUPS]}),C=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.dailyActiveUsers",defaultMessage:"Daily Active Users"}),icon:"fa-users",count:e[V.DAILY_ACTIVE_USERS]}),M=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.system.monthlyActiveUsers",defaultMessage:"Monthly Active Users"}),icon:"fa-users",count:e[V.MONTHLY_ACTIVE_USERS]});let k,j;t&&a?(k=x.a.createElement("div",null,S,T,O,h),j=x.a.createElement("div",null,p,g,f)):t&&!a?(k=x.a.createElement("div",null,S,T,O,o),j=x.a.createElement("div",null,h,p,g,f)):t||(k=x.a.createElement("div",null,S,T,O,o));const A=x.a.createElement("div",null,C,M);return x.a.createElement("div",{className:"wrapper--fixed team_statistics"},x.a.createElement(N,{id:"analytics.system.title",defaultMessage:"System Statistics"}),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},r,x.a.createElement("div",{className:"row"},k,j,A,u),m,l,c,d)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(J,"propTypes",{isLicensed:j.a.bool.isRequired,stats:j.a.object});var X=Object(r.connect)((function(e){return{isLicensed:"true"===Object(m.getLicense)(e).IsLicensed,stats:e.entities.admin.analytics}}))(J),K=a(21),Q=a(1244),$=a(186),Z=(a(56),a(1128)),ee=a(1143);a(608);const te=e=>{let t=x.a.createElement(w.a,{id:"admin.banner.heading",defaultMessage:"Note:"});return e.title&&(t=e.title),x.a.createElement("div",{className:"banner"},x.a.createElement("div",{className:"banner__content"},x.a.createElement("h4",{className:"banner__heading"},t),x.a.createElement("p",null,e.description)))};te.propTypes={title:j.a.element,description:j.a.element.isRequired};var ae=te,ne=a(1401),se=a(1141);class ie extends x.a.PureComponent{render(){return x.a.createElement("div",{className:"col-sm-6"},x.a.createElement("div",{className:"total-count recent-active-users"},x.a.createElement("div",{className:"title"},this.props.title),x.a.createElement("div",{className:"content"},x.a.createElement("table",null,x.a.createElement("tbody",null,this.props.data.map(e=>{const t=x.a.createElement(ne.a,{id:"tip-table-entry-"+e.name},e.tip);return x.a.createElement("tr",{key:"table-entry-"+e.name},x.a.createElement("td",null,x.a.createElement(se.a,{delayShow:O.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},x.a.createElement("time",null,e.name))),x.a.createElement("td",null,e.value))}))))))}}function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ie,"propTypes",{title:j.a.node.isRequired,data:j.a.arrayOf(j.a.shape({name:j.a.string.isRequired,tip:j.a.string.isRequired,value:j.a.node.isRequired})).isRequired});class oe extends x.a.Component{constructor(e){super(e),re(this,"getData",async e=>{_.r(e),_.p(e),_.m(e),_.s(e);const{data:t}=await this.props.actions.getProfilesInTeam(e,0,v.General.PROFILE_CHUNK_SIZE,"last_activity_at"),{data:a}=await this.props.actions.getProfilesInTeam(e,0,v.General.PROFILE_CHUNK_SIZE,"create_at");this.setState({recentlyActiveUsers:t,newUsers:a})}),re(this,"handleTeamChange",e=>{const t=e.target.value;let a;this.props.teams.forEach(e=>{e.id===t&&(a=e)}),this.setState({team:a}),Q.a.setGlobalItem("last_analytics_team",t)}),this.state={team:e.initialTeam,recentlyActiveUsers:[],newUsers:[]}}componentDidMount(){this.state.team&&this.getData(this.state.team.id),this.props.actions.getTeams(0,1e3)}componentDidUpdate(e,t){this.state.team&&t.team!==this.state.team&&this.getData(this.state.team.id)}render(){if(0===this.props.teams.length||!this.state.team||!this.props.stats[this.state.team.id])return x.a.createElement(ee.a,null);if(null==this.state.team)return x.a.createElement(ae,{description:x.a.createElement(w.a,{id:"analytics.team.noTeams",defaultMessage:"This server has no teams for which to view statistics."})});const e=this.props.stats[this.state.team.id],t=z(e[O.H.POST_PER_DAY]),a=Y(e[O.H.USERS_WITH_POSTS_PER_DAY]);let n,s,i,r=x.a.createElement("div",{className:"banner"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(w.a,{id:"analytics.system.info",defaultMessage:"Use data for only the chosen team. Exclude posts in direct message channels that are not tied to a team."})));-1===e[O.H.TOTAL_POSTS]?r=x.a.createElement("div",{className:"banner"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(P.b,{id:"analytics.system.infoAndSkippedIntensiveQueries",defaultMessage:"Use data for only the chosen team. Exclude posts in direct message channels that are not tied to a team. \\n \\n To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html)."}))):(n=x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.team.totalPosts",defaultMessage:"Total Posts"}),icon:"fa-comment",count:e[O.H.TOTAL_POSTS]}),s=x.a.createElement("div",{className:"row"},x.a.createElement(H,{key:this.state.team.id,title:x.a.createElement(w.a,{id:"analytics.team.totalPosts",defaultMessage:"Total Posts"}),data:t,width:740,height:225})),i=x.a.createElement("div",{className:"row"},x.a.createElement(H,{key:this.state.team.id,title:x.a.createElement(w.a,{id:"analytics.team.activeUsers",defaultMessage:"Active Users With Posts"}),data:a,width:740,height:225})));const o=function(e,t){if(null==e)return[];return e.map(e=>{const a={};return a.name=e.username,a.value=x.a.createElement(Z.a,{value:e.last_activity_at,day:"numeric",month:Object(M.a)(t),year:"numeric",hour12:!0,hour:"2-digit",minute:"2-digit"}),a.tip=e.email,a})}(this.state.recentlyActiveUsers,this.props.locale),l=function(e,t){if(null==e)return[];return e.map(e=>{const a={};return a.name=e.username,a.value=x.a.createElement(Z.a,{value:e.create_at,day:"numeric",month:Object(M.a)(t),year:"numeric",hour12:!0,hour:"2-digit",minute:"2-digit"}),a.tip=e.email,a})}(this.state.newUsers,this.props.locale),c=this.props.teams.sort((e,t)=>{const a=e.display_name.toUpperCase(),n=t.display_name.toUpperCase();return a===n?0:a>n?1:-1}).map(e=>x.a.createElement("option",{key:e.id,value:e.id},e.display_name));return x.a.createElement("div",{className:"wrapper--fixed team_statistics"},x.a.createElement("div",{className:"admin-console__header team-statistics__header-row"},x.a.createElement("div",{className:"team-statistics__header"},x.a.createElement(P.b,{id:"analytics.team.title",defaultMessage:"Team Statistics for {team}",values:{team:this.state.team.display_name}})),x.a.createElement("div",{className:"team-statistics__team-filter"},x.a.createElement("select",{className:"form-control team-statistics__team-filter__dropdown",onChange:this.handleTeamChange,value:this.state.team.id},c))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},r,x.a.createElement("div",{className:"row"},x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.team.totalUsers",defaultMessage:"Total Active Users"}),icon:"fa-users",count:e[O.H.TOTAL_USERS]}),x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.team.publicChannels",defaultMessage:"Public Channels"}),icon:"fa-globe",count:e[O.H.TOTAL_PUBLIC_CHANNELS]}),x.a.createElement(W,{title:x.a.createElement(w.a,{id:"analytics.team.privateGroups",defaultMessage:"Private Channels"}),icon:"fa-lock",count:e[O.H.TOTAL_PRIVATE_GROUPS]}),n),s,i,x.a.createElement("div",{className:"row"},x.a.createElement(ie,{title:x.a.createElement(w.a,{id:"analytics.team.recentUsers",defaultMessage:"Recent Active Users"}),data:o}),x.a.createElement(ie,{title:x.a.createElement(w.a,{id:"analytics.team.newlyCreated",defaultMessage:"Newly Created Users"}),data:l})))))}}re(oe,"propTypes",{teams:j.a.arrayOf(j.a.object).isRequired,initialTeam:j.a.object,locale:j.a.string.isRequired,stats:j.a.object.isRequired,actions:j.a.shape({getTeams:j.a.func.isRequired,getProfilesInTeam:j.a.func.isRequired}).isRequired});var le=Object(r.connect)((function(e){const t=Object(b.getTeamsList)(e),a=Q.a.getGlobalItem("last_analytics_team",null);return{initialTeam:e.entities.teams.teams[a]||(t.length>0?t[0]:null),locale:Object($.a)(e),teams:t,stats:e.entities.admin.teamAnalytics}}),(function(e){return{actions:Object(o.bindActionCreators)({getTeams:g.getTeams,getProfilesInTeam:K.getProfilesInTeam},e)}}))(oe),ce=(a(180),a(1456)),de=a(1129),ue=a(1134),me=a.n(ue),he=a(340),pe=a.n(he),ge=a(1146),fe=(a(101),a(1319)),be=a(1175),ve=a(1154);function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ee extends x.a.Component{constructor(e){super(e),ye(this,"handleSaved",void 0),ye(this,"canSave",void 0),ye(this,"closeTooltip",()=>{this.setState({errorTooltip:!1})}),ye(this,"openTooltip",e=>{const t=e.currentTarget.querySelector(".control-label");if(t){const e=t.offsetWidth<t.scrollWidth;this.setState({errorTooltip:e})}}),ye(this,"handleChange",(e,t)=>{this.setState(a=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){ye(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{saveNeeded:!0,[e]:t})),this.props.setNavigationBlocked&&this.props.setNavigationBlocked(!0)}),ye(this,"handleSubmit",e=>{e.preventDefault(),this.doSubmit()}),ye(this,"doSubmit",async e=>{this.setState({saving:!0,serverError:null});let t=JSON.parse(JSON.stringify(this.props.config));if(t=this.getConfigFromState(t),this.props.updateConfig){const{data:a,error:n}=await this.props.updateConfig(t);a?(this.setState(this.getStateFromConfig(a)),this.setState({saveNeeded:!1,saving:!1}),this.props.setNavigationBlocked&&this.props.setNavigationBlocked(!1),e&&e(),this.handleSaved&&this.handleSaved(t)):n&&(this.setState({saving:!1,serverError:n.message,serverErrorId:n.server_error_id}),e&&e(),this.handleSaved&&this.handleSaved(t))}}),ye(this,"parseInt",(e,t)=>{const a=parseInt(e,10);return isNaN(a)?t||0:a}),ye(this,"parseIntNonNegative",(e,t)=>{const a=parseInt(e,10);return isNaN(a)||a<0?t||0:a}),ye(this,"parseIntNonZero",(e,t,a=1)=>{const n=parseInt(e,10);return isNaN(n)||n<a?t||1:n}),ye(this,"isSetByEnv",e=>Boolean(this.props.environmentConfig&&this.getConfigValue(this.props.environmentConfig,e)));const t={saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1};e.config?this.state=Object.assign(this.getStateFromConfig(e.config),t):this.state=t}getConfigValue(e,t){return t.split(".").reduce((e,t)=>e?e[t]:null,e)}setConfigValue(e,t,a){!function e(t,n){const s=n[0];1===n.length?Object.assign(t,{[s]:a}):(null==t[s]&&Object.assign(t,{[s]:{}}),e(t[s],n.slice(1)))}(e,t.split("."))}render(){return x.a.createElement("form",{className:"form-horizontal",role:"form",onSubmit:this.handleSubmit},x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement(A,null,this.renderTitle()),this.renderSettings(),x.a.createElement("div",{className:"admin-console-save"},x.a.createElement(be.a,{saving:this.state.saving,disabled:!this.state.saveNeeded||this.canSave&&!this.canSave(),onClick:this.handleSubmit,savingMessage:Object(U.jb)("admin.saving","Saving Config...")}),x.a.createElement("div",{className:"error-message",ref:"errorMessage",onMouseOver:this.openTooltip,onMouseOut:this.closeTooltip},x.a.createElement(ve.a,{error:this.state.serverError})),x.a.createElement(fe.a,{show:this.state.errorTooltip,placement:"top",target:this.refs.errorMessage},x.a.createElement(ne.a,{id:"error-tooltip"},this.state.serverError)))))}}ye(Ee,"propTypes",{config:j.a.object,environmentConfig:j.a.object,setNavigationBlocked:j.a.func,updateConfig:j.a.func});var Se=function(){return x.a.createElement("div",{className:"alert alert-warning"},x.a.createElement(w.a,{id:"admin.set_by_env",defaultMessage:"This setting has been set through an environment variable. It cannot be changed through the System Console."}))};class Te extends T.PureComponent{render(){const{children:e,setByEnv:t,helpText:a,inputId:n,label:s}=this.props;return x.a.createElement("div",{"data-testid":n,className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4",htmlFor:n},s),x.a.createElement("div",{className:"col-sm-8"},e,x.a.createElement("div",{"data-testid":n+"help-text",className:"help-text"},a),t?x.a.createElement(Se,null):null))}}function xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Te,"propTypes",{inputId:j.a.string,label:j.a.node.isRequired,children:j.a.node.isRequired,helpText:j.a.node,setByEnv:j.a.bool});class we extends x.a.Component{constructor(...e){super(...e),xe(this,"handleChange",e=>{this.props.onChange(this.props.id,"true"===e.target.value)})}render(){let e;return e=this.props.disabled&&this.props.disabledText?x.a.createElement("div",null,x.a.createElement("span",{className:"admin-console__disabled-text"},this.props.disabledText),this.props.helpText):this.props.helpText,x.a.createElement(Te,{inputId:this.props.id,label:this.props.label,helpText:e,setByEnv:this.props.setByEnv},x.a.createElement("a",{id:this.props.id}),x.a.createElement("label",{className:"radio-inline"},x.a.createElement("input",{"data-testid":this.props.id+"true",type:"radio",value:"true",id:U.h(this.props.id)+"true",name:this.props.id,checked:this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}),this.props.trueText),x.a.createElement("label",{className:"radio-inline"},x.a.createElement("input",{"data-testid":this.props.id+"false",type:"radio",value:"false",id:U.h(this.props.id)+"false",name:this.props.id,checked:!this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}),this.props.falseText))}}xe(we,"propTypes",{id:j.a.string.isRequired,label:j.a.node.isRequired,value:j.a.bool.isRequired,onChange:j.a.func.isRequired,trueText:j.a.node,falseText:j.a.node,disabled:j.a.bool,setByEnv:j.a.bool.isRequired,disabledText:j.a.node,helpText:j.a.node.isRequired}),xe(we,"defaultProps",{trueText:x.a.createElement(w.a,{id:"admin.true",defaultMessage:"true"}),falseText:x.a.createElement(w.a,{id:"admin.false",defaultMessage:"false"}),disabled:!1});class Oe extends x.a.Component{static get propTypes(){return{show:j.a.bool.isRequired,header:j.a.node,children:j.a.node,container:j.a.bool}}static get defaultProps(){return{show:!0,container:!0}}render(){let e="",t="";if(!this.props.show)return null;this.props.container&&(e="admin-console__wrapper",t="admin-console__content");let a=null;return this.props.header&&(a=x.a.createElement("h4",null,this.props.header)),x.a.createElement("div",{className:e},x.a.createElement("div",{className:t},a,this.props.children))}}var Ce=a(1396);function Me(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const ke=e=>{const{setByEnv:t,disabled:a}=e,n=Me(e,["setByEnv","disabled"]),s=e.disabled||e.setByEnv;return x.a.createElement(Ce.a,Object.assign({},n,{labelClassName:"col-sm-4",inputClassName:"col-sm-8",disabled:s,footer:t?x.a.createElement(Se,null):null}))};ke.propTypes={setByEnv:j.a.bool.isRequired};var je=ke;function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ae=({state:e})=>{switch(e){case pe.a.PLUGIN_STATE_NOT_RUNNING:return x.a.createElement(w.a,{id:"admin.plugin.state.not_running",defaultMessage:"Not running"});case pe.a.PLUGIN_STATE_STARTING:return x.a.createElement(w.a,{id:"admin.plugin.state.starting",defaultMessage:"Starting"});case pe.a.PLUGIN_STATE_RUNNING:return x.a.createElement(w.a,{id:"admin.plugin.state.running",defaultMessage:"Running"});case pe.a.PLUGIN_STATE_FAILED_TO_START:return x.a.createElement(w.a,{id:"admin.plugin.state.failed_to_start",defaultMessage:"Failed to start"});case pe.a.PLUGIN_STATE_FAILED_TO_STAY_RUNNING:return x.a.createElement(w.a,{id:"admin.plugin.state.failed_to_stay_running",defaultMessage:"Crashing"});case pe.a.PLUGIN_STATE_STOPPING:return x.a.createElement(w.a,{id:"admin.plugin.state.stopping",defaultMessage:"Stopping"});default:return x.a.createElement(w.a,{id:"admin.plugin.state.unknown",defaultMessage:"Unknown"})}};Ae.propTypes={state:j.a.number.isRequired};const Re=({state:e})=>{switch(e){case pe.a.PLUGIN_STATE_NOT_RUNNING:return x.a.createElement("div",{className:"alert alert-info"},x.a.createElement("i",{className:"fa fa-ban"}),x.a.createElement(w.a,{id:"admin.plugin.state.not_running.description",defaultMessage:"This plugin is not enabled."}));case pe.a.PLUGIN_STATE_STARTING:return x.a.createElement("div",{className:"alert alert-success"},x.a.createElement("i",{className:"fa fa-info"}),x.a.createElement(w.a,{id:"admin.plugin.state.starting.description",defaultMessage:"This plugin is starting."}));case pe.a.PLUGIN_STATE_RUNNING:return x.a.createElement("div",{className:"alert alert-success"},x.a.createElement("i",{className:"fa fa-check"}),x.a.createElement(w.a,{id:"admin.plugin.state.running.description",defaultMessage:"This plugin is running."}));case pe.a.PLUGIN_STATE_FAILED_TO_START:return x.a.createElement("div",{className:"alert alert-warning"},x.a.createElement("i",{className:"fa fa-warning"}),x.a.createElement(w.a,{id:"admin.plugin.state.failed_to_start.description",defaultMessage:"This plugin failed to start. Check your system logs for errors."}));case pe.a.PLUGIN_STATE_FAILED_TO_STAY_RUNNING:return x.a.createElement("div",{className:"alert alert-warning"},x.a.createElement("i",{className:"fa fa-warning"}),x.a.createElement(w.a,{id:"admin.plugin.state.failed_to_stay_running.description",defaultMessage:"This plugin crashed multiple times and is no longer running. Check your system logs for errors."}));case pe.a.PLUGIN_STATE_STOPPING:return x.a.createElement("div",{className:"alert alert-info"},x.a.createElement("i",{className:"fa fa-info"}),x.a.createElement(w.a,{id:"admin.plugin.state.stopping.description",defaultMessage:"This plugin is stopping."}));default:return null}};Re.propTypes={state:j.a.number.isRequired};const Ne=({pluginStatus:e,removing:t,handleEnable:a,handleDisable:n,handleRemove:s,showInstances:i,hasSettings:r})=>{let o;const l=e.state===pe.a.PLUGIN_STATE_STARTING,c=e.state===pe.a.PLUGIN_STATE_STOPPING;o=e.active?x.a.createElement("a",{"data-plugin-id":e.id,disabled:c,onClick:n},c?x.a.createElement(w.a,{id:"admin.plugin.disabling",defaultMessage:"Disabling..."}):x.a.createElement(w.a,{id:"admin.plugin.disable",defaultMessage:"Disable"})):x.a.createElement("a",{"data-plugin-id":e.id,disabled:l,onClick:a},l?x.a.createElement(w.a,{id:"admin.plugin.enabling",defaultMessage:"Enabling..."}):x.a.createElement(w.a,{id:"admin.plugin.enable",defaultMessage:"Enable"}));let d,u=null;r&&(u=x.a.createElement("span",null," - ",x.a.createElement(de.a,{to:"/admin_console/plugins/plugin_"+e.id},x.a.createElement(w.a,{id:"admin.plugin.settingsButton",defaultMessage:"Settings"})))),d=t?x.a.createElement(w.a,{id:"admin.plugin.removing",defaultMessage:"Removing..."}):x.a.createElement(w.a,{id:"admin.plugin.remove",defaultMessage:"Remove"});const m=x.a.createElement("span",null," - ",x.a.createElement("a",{"data-plugin-id":e.id,disabled:t,onClick:s},d));let h;e.description&&(h=x.a.createElement("div",{className:"pt-2"},e.description));const p=[];e.instances.some(t=>t.version!==e.version)&&p.push(x.a.createElement("div",{key:"multiple-versions",className:"alert alert-warning"},x.a.createElement("i",{className:"fa fa-warning"}),x.a.createElement(w.a,{id:"admin.plugin.multiple_versions_warning",defaultMessage:"There are multiple versions of this plugin installed across your cluster. Re-install this plugin to ensure it works consistently."}))),p.push(x.a.createElement(Re,{key:"state-description",state:e.state}));const g=e.instances.slice();let f;return g.sort((e,t)=>e.cluster_id<t.cluster_id?-1:e.cluster_id>t.cluster_id?1:0),i&&(f=x.a.createElement("div",{className:"pt-3 pb-3"},x.a.createElement("div",{className:"row"},x.a.createElement("div",{className:"col-md-6"},x.a.createElement("strong",null,x.a.createElement(w.a,{id:"admin.plugin.cluster_instance",defaultMessage:"Cluster Instance"}))),x.a.createElement("div",{className:"col-md-3"},x.a.createElement("strong",null,x.a.createElement(w.a,{id:"admin.plugin.version_title",defaultMessage:"Version"}))),x.a.createElement("div",{className:"col-md-3"},x.a.createElement("strong",null,x.a.createElement(w.a,{id:"admin.plugin.state",defaultMessage:"State"})))),g.map(e=>x.a.createElement("div",{key:e.cluster_id,className:"row"},x.a.createElement("div",{className:"col-md-6"},e.cluster_id),x.a.createElement("div",{className:"col-md-3"},e.version),x.a.createElement("div",{className:"col-md-3"},x.a.createElement(Ae,{state:e.state})))))),x.a.createElement("div",{"data-testid":e.id},x.a.createElement("div",null,x.a.createElement("strong",null,e.name)," (",e.id," - ",e.version,")"),h,x.a.createElement("div",{className:"pt-2"},o,m,u),x.a.createElement("div",null,p),x.a.createElement("div",null,f),x.a.createElement("hr",null))};Ne.propTypes={pluginStatus:j.a.object.isRequired,removing:j.a.bool.isRequired,handleEnable:j.a.func.isRequired,handleDisable:j.a.func.isRequired,handleRemove:j.a.func.isRequired,showInstances:j.a.bool.isRequired,hasSettings:j.a.bool.isRequired};class De extends Ee{constructor(e){super(e),Pe(this,"getConfigFromState",e=>(e.PluginSettings.Enable=this.state.enable,e.PluginSettings.EnableUploads=this.state.enableUploads,e.PluginSettings.AllowInsecureDownloadUrl=this.state.allowInsecureDownloadUrl,e.PluginSettings.EnableMarketplace=this.state.enableMarketplace,e.PluginSettings.EnableRemoteMarketplace=this.state.enableRemoteMarketplace,e.PluginSettings.AutomaticPrepackagedPlugins=this.state.automaticPrepackagedPlugins,e.PluginSettings.MarketplaceUrl=this.state.marketplaceUrl,e.PluginSettings.RequirePluginSignature=this.state.requirePluginSignature,e)),Pe(this,"handleUpload",()=>{this.setState({lastMessage:null,serverError:null});const e=this.refs.fileInput;e.files.length>0&&this.setState({fileSelected:!0,file:e.files[0]})}),Pe(this,"helpSubmitUpload",async(e,t)=>{this.setState({uploading:!0});const{error:a}=await this.props.actions.uploadPlugin(e,t);if(a)return"app.plugin.install_id.app_error"!==a.server_error_id||t?(this.setState({file:null,fileSelected:!1,uploading:!1}),"app.plugin.activate.app_error"===a.server_error_id?this.setState({serverError:U.jb("admin.plugin.error.activate","Unable to upload the plugin. It may conflict with another plugin on your server.")}):"app.plugin.extract.app_error"===a.server_error_id?this.setState({serverError:U.jb("admin.plugin.error.extract","Encountered an error when extracting the plugin. Review your plugin file content and try again.")}):this.setState({serverError:a.message}),void this.setState({file:null,fileSelected:!1})):void this.setState({confirmOverwriteUploadModal:!0,overwritingUpload:!0});this.setState({loading:!0}),await this.props.actions.getPlugins();let n="Successfully uploaded plugin from ".concat(e.name);this.state.overwritingUpload&&(n="Successfully updated plugin from ".concat(e.name)),this.setState({file:null,fileSelected:!1,serverError:null,lastMessage:n,overwritingUpload:!1,uploading:!1,loading:!1})}),Pe(this,"handleSubmitUpload",e=>{e.preventDefault();const t=this.refs.fileInput;if(0===t.files.length)return;const a=t.files[0];this.helpSubmitUpload(a,!1),U.d(t)}),Pe(this,"handleOverwriteUploadPluginCancel",()=>{this.setState({file:null,fileSelected:!1,serverError:null,confirmOverwriteUploadModal:!1,lastMessage:null,uploading:!1})}),Pe(this,"handleOverwriteUploadPlugin",()=>{this.setState({confirmOverwriteUploadModal:!1}),this.helpSubmitUpload(this.state.file,!0)}),Pe(this,"onPluginDownloadUrlChange",e=>{this.setState({pluginDownloadUrl:e.target.value})}),Pe(this,"installFromUrl",async e=>{const{pluginDownloadUrl:t}=this.state;this.setState({installing:!0,serverError:null,lastMessage:null});const{error:a}=await this.props.actions.installPluginFromUrl(t,e);if(a)return"app.plugin.install_id.app_error"!==a.server_error_id||e?(this.setState({installing:!1}),void("app.plugin.extract.app_error"===a.server_error_id?this.setState({serverError:U.jb("admin.plugin.error.extract","Encountered an error when extracting the plugin. Review your plugin file content and try again.")}):this.setState({serverError:a.message}))):void this.setState({confirmOverwriteInstallModal:!0,overwritingInstall:!0});this.setState({loading:!0}),await this.props.actions.getPlugins();let n="Successfully installed plugin from ".concat(t);this.state.overwritingInstall&&(n="Successfully updated plugin from ".concat(t)),this.setState({serverError:null,lastMessage:n,overwritingInstall:!1,installing:!1,loading:!1})}),Pe(this,"getMarketplaceUrlHelpText",e=>x.a.createElement("div",null,""===e&&x.a.createElement("div",{className:"alert-warning"},x.a.createElement("i",{className:"fa fa-warning"}),x.a.createElement(P.b,{id:"admin.plugins.settings.marketplaceUrlDesc.empty",defaultMessage:" Marketplace URL is a required field."})),""!==e&&x.a.createElement(P.b,{id:"admin.plugins.settings.marketplaceUrlDesc",defaultMessage:"URL of the marketplace server."}))),Pe(this,"canSave",()=>""!==this.state.marketplaceUrl),Pe(this,"handleSubmitInstall",e=>(e.preventDefault(),this.installFromUrl(!1))),Pe(this,"handleOverwriteInstallPluginCancel",()=>{this.setState({confirmOverwriteInstallModal:!1,installing:!1,serverError:null,lastMessage:null})}),Pe(this,"handleOverwriteInstallPlugin",()=>(this.setState({confirmOverwriteInstallModal:!1}),this.installFromUrl(!0))),Pe(this,"showRemovePluginModal",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-plugin-id");this.setState({showRemoveModal:!0,removing:t})}),Pe(this,"handleRemovePluginCancel",()=>{this.setState({showRemoveModal:!1,removing:null})}),Pe(this,"handleRemovePlugin",()=>{this.setState({showRemoveModal:!1}),this.handleRemove()}),Pe(this,"handleRemove",async()=>{this.setState({lastMessage:null,serverError:null});const{error:e}=await this.props.actions.removePlugin(this.state.removing);this.setState({removing:null}),e&&this.setState({serverError:e.message})}),Pe(this,"handleEnable",async e=>{e.preventDefault(),this.setState({lastMessage:null,serverError:null});const t=e.currentTarget.getAttribute("data-plugin-id"),{error:a}=await this.props.actions.enablePlugin(t);a&&this.setState({serverError:a.message})}),Pe(this,"handleDisable",async e=>{this.setState({lastMessage:null,serverError:null}),e.preventDefault();const t=e.currentTarget.getAttribute("data-plugin-id"),{error:a}=await this.props.actions.disablePlugin(t);a&&this.setState({serverError:a.message})}),Pe(this,"renderOverwritePluginModal",({show:e,onConfirm:t,onCancel:a})=>{const n=x.a.createElement(w.a,{id:"admin.plugin.upload.overwrite_modal.title",defaultMessage:"Overwrite existing plugin?"}),s=x.a.createElement(w.a,{id:"admin.plugin.upload.overwrite_modal.desc",defaultMessage:"A plugin with this ID already exists. Would you like to overwrite it?"}),i=x.a.createElement(w.a,{id:"admin.plugin.upload.overwrite_modal.overwrite",defaultMessage:"Overwrite"});return x.a.createElement(ge.a,{show:e,title:n,message:s,confirmButtonClass:"btn btn-danger",confirmButtonText:i,onConfirm:t,onCancel:a})}),Pe(this,"renderRemovePluginModal",({show:e,onConfirm:t,onCancel:a})=>{const n=x.a.createElement(w.a,{id:"admin.plugin.remove_modal.title",defaultMessage:"Remove plugin?"}),s=x.a.createElement(w.a,{id:"admin.plugin.remove_modal.desc",defaultMessage:"Are you sure you would like to remove the plugin?"}),i=x.a.createElement(w.a,{id:"admin.plugin.remove_modal.overwrite",defaultMessage:"Remove"});return x.a.createElement(ge.a,{show:e,title:n,message:s,confirmButtonClass:"btn btn-danger",confirmButtonText:i,onConfirm:t,onCancel:a})}),Pe(this,"renderEnablePluginsSetting",()=>this.props.config.ExperimentalSettings.RestrictSystemAdmin?null:x.a.createElement(we,{id:"enable",label:x.a.createElement(w.a,{id:"admin.plugins.settings.enable",defaultMessage:"Enable Plugins: "}),helpText:x.a.createElement(P.b,{id:"admin.plugins.settings.enableDesc",defaultMessage:"When true, enables plugins on your Mattermost server. Use plugins to integrate with third-party systems, extend functionality, or customize the user interface of your Mattermost server. See [documentation](https://about.mattermost.com/default-plugin-uploads) to learn more."}),value:this.state.enable,onChange:this.handleChange,setByEnv:this.isSetByEnv("PluginSettings.Enable")})),Pe(this,"renderSettings",()=>{const{enableUploads:e}=this.state,t=this.props.config.PluginSettings.Enable;let a="",n="";const s=e&&t&&!this.props.config.PluginSettings.RequirePluginSignature;this.state.serverError&&(a=x.a.createElement("div",{className:"col-sm-12"},x.a.createElement("div",{className:"form-group has-error half"},x.a.createElement("label",{className:"control-label"},this.state.serverError)))),this.state.lastMessage&&(n=x.a.createElement("div",{className:"col-sm-12"},x.a.createElement("div",{className:"form-group half"},this.state.lastMessage)));let i,r,o,l,c,d="btn";this.state.fileSelected&&(d="btn btn-primary"),this.state.file&&(i=this.state.file.name),r=this.state.uploading?x.a.createElement(w.a,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."}):x.a.createElement(w.a,{id:"admin.plugin.upload",defaultMessage:"Upload"});const u=Object.values(this.props.pluginStatuses);if(this.state.loading)o=x.a.createElement(ee.a,null);else if(0===u.length)c=x.a.createElement(w.a,{id:"admin.plugin.no_plugins",defaultMessage:"No installed plugins."});else{const e=u.some(e=>e.instances.length>1);u.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0),o=u.map(t=>{const a=this.props.plugins[t.id],n=Boolean(a&&a.settings_schema&&(a.settings_schema.header||a.settings_schema.footer||a.settings_schema.settings&&a.settings_schema.settings.length>0));return x.a.createElement(Ne,{key:t.id,pluginStatus:t,removing:this.state.removing===t.id,handleEnable:this.handleEnable,handleDisable:this.handleDisable,handleRemove:this.showRemovePluginModal,showInstances:e,hasSettings:n})}),c=x.a.createElement("div",{className:"alert alert-transparent"},o)}let m;t&&(l=x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.plugin.installedTitle",defaultMessage:"Installed Plugins: "})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("p",{className:"help-text"},x.a.createElement(ce.a,{id:"admin.plugin.installedDesc",defaultMessage:"Installed plugins on your Mattermost server."})),x.a.createElement("br",null),c))),m=e&&t?x.a.createElement(P.b,{id:"admin.plugin.uploadDesc",defaultMessage:"Upload a plugin for your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more."}):t&&!e?x.a.createElement(P.b,{id:"admin.plugin.uploadDisabledDesc",defaultMessage:"Enable plugin uploads in config.json. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more."}):x.a.createElement(P.b,{id:"admin.plugin.uploadAndPluginDisabledDesc",defaultMessage:"To enable plugins, set **Enable Plugins** to true. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more."});const h=this.state.confirmOverwriteUploadModal&&this.renderOverwritePluginModal({show:this.state.confirmOverwriteUploadModal,onConfirm:this.handleOverwriteUploadPlugin,onCancel:this.handleOverwriteUploadPluginCancel}),p=this.state.showRemoveModal&&this.renderRemovePluginModal({show:this.state.showRemoveModal,onConfirm:this.handleRemovePlugin,onCancel:this.handleRemovePluginCancel});return x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement(Oe,{id:"PluginSettings",container:!1},this.renderEnablePluginsSetting(),x.a.createElement(we,{id:"requirePluginSignature",label:x.a.createElement(w.a,{id:"admin.plugins.settings.requirePluginSignature",defaultMessage:"Require Plugin Signature:"}),helpText:x.a.createElement(P.b,{id:"admin.plugins.settings.requirePluginSignatureDesc",defaultMessage:"When true, uploading plugins is disabled and may only be installed through the Marketplace. Plugins are always verified during Mattermost server startup and initialization. See [documentation](!https://mattermost.com/pl/default-plugin-signing) to learn more."}),value:this.state.requirePluginSignature,disabled:!this.state.enable,onChange:this.handleChange,setByEnv:this.isSetByEnv("PluginSettings.RequirePluginSignature")}),x.a.createElement(we,{id:"automaticPrepackagedPlugins",label:x.a.createElement(w.a,{id:"admin.plugins.settings.automaticPrepackagedPlugins",defaultMessage:"Enable Automatic Prepackaged Plugins:"}),helpText:x.a.createElement(P.b,{id:"admin.plugins.settings.automaticPrepackagedPluginsDesc",defaultMessage:"When true, automatically installs any prepackaged plugin found to be enabled in the server configuration."}),value:this.state.automaticPrepackagedPlugins,disabled:!this.state.enable,onChange:this.handleChange,setByEnv:this.isSetByEnv("PluginSettings.AutomaticPrepackagedPlugins")}),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.plugin.uploadTitle",defaultMessage:"Upload Plugin: "})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("div",{className:"file__upload"},x.a.createElement("button",{className:me()(["btn",{"btn-primary":e}]),disabled:!s},x.a.createElement(w.a,{id:"admin.plugin.choose",defaultMessage:"Choose File"})),x.a.createElement("input",{ref:"fileInput",type:"file",accept:".gz",onChange:this.handleUpload,disabled:!s})),x.a.createElement("button",{className:d,id:"uploadPlugin",disabled:!this.state.fileSelected,onClick:this.handleSubmitUpload},r),x.a.createElement("div",{className:"help-text m-0"},i),a,n,x.a.createElement("p",{className:"help-text"},m))),x.a.createElement(we,{id:"enableMarketplace",label:x.a.createElement(w.a,{id:"admin.plugins.settings.enableMarketplace",defaultMessage:"Enable Marketplace:"}),helpText:x.a.createElement(P.b,{id:"admin.plugins.settings.enableMarketplaceDesc",defaultMessage:"When true, enables System Administrators to install plugins from the [marketplace](!https://mattermost.com/pl/default-mattermost-marketplace.html)."}),value:this.state.enableMarketplace,disabled:!this.state.enable,onChange:this.handleChange,setByEnv:this.isSetByEnv("PluginSettings.EnableMarketplace")}),x.a.createElement(we,{id:"enableRemoteMarketplace",label:x.a.createElement(w.a,{id:"admin.plugins.settings.enableRemoteMarketplace",defaultMessage:"Enable Remote Marketplace:"}),helpText:x.a.createElement(P.b,{id:"admin.plugins.settings.enableRemoteMarketplaceDesc",defaultMessage:"When true, marketplace fetches latest plugins from the configured Marketplace URL."}),value:this.state.enableRemoteMarketplace,disabled:!this.state.enable||!this.state.enableMarketplace,onChange:this.handleChange,setByEnv:this.isSetByEnv("PluginSettings.EnableRemoteMarketplace")}),x.a.createElement(je,{id:"marketplaceUrl",type:"input",label:x.a.createElement(w.a,{id:"admin.plugins.settings.marketplaceUrl",defaultMessage:"Marketplace URL:"}),helpText:this.getMarketplaceUrlHelpText(this.state.marketplaceUrl),value:this.state.marketplaceUrl,disabled:!this.state.enable||!this.state.enableMarketplace||!this.state.enableRemoteMarketplace,onChange:this.handleChange,setByEnv:this.isSetByEnv("PluginSettings.MarketplaceUrl")}),l),h,p))}),this.state=Object.assign(this.state,{loading:!0,fileSelected:!1,file:null,pluginDownloadUrl:"",serverError:null,lastMessage:null,uploading:!1,installing:!1,overwritingUpload:!1,confirmOverwriteUploadModal:!1,overwritingInstall:!1,confirmOverwriteInstallModal:!1,showRemoveModal:!1,resolveRemoveModal:null})}getStateFromConfig(e){return{enable:e.PluginSettings.Enable,enableUploads:e.PluginSettings.EnableUploads,allowInsecureDownloadUrl:e.PluginSettings.AllowInsecureDownloadUrl,enableMarketplace:e.PluginSettings.EnableMarketplace,enableRemoteMarketplace:e.PluginSettings.EnableRemoteMarketplace,automaticPrepackagedPlugins:e.PluginSettings.AutomaticPrepackagedPlugins,marketplaceUrl:e.PluginSettings.MarketplaceUrl,requirePluginSignature:e.PluginSettings.RequirePluginSignature}}componentDidMount(){this.state.enable&&this.props.actions.getPluginStatuses().then(()=>this.setState({loading:!1}))}renderTitle(){return x.a.createElement(w.a,{id:"admin.plugin.management.title",defaultMessage:"Management"})}}Pe(De,"propTypes",{config:j.a.object.isRequired,pluginStatuses:j.a.object.isRequired,plugins:j.a.object.isRequired,actions:j.a.shape({uploadPlugin:j.a.func.isRequired,removePlugin:j.a.func.isRequired,getPlugins:j.a.func.isRequired,getPluginStatuses:j.a.func.isRequired,enablePlugin:j.a.func.isRequired,disablePlugin:j.a.func.isRequired,installPluginFromUrl:j.a.func.isRequired}).isRequired});var Ie=Object(r.connect)((function(e){return{plugins:e.entities.admin.plugins,pluginStatuses:e.entities.admin.pluginStatuses}}),(function(e){return{actions:Object(o.bindActionCreators)({uploadPlugin:l.uploadPlugin,installPluginFromUrl:l.installPluginFromUrl,removePlugin:l.removePlugin,getPlugins:l.getPlugins,getPluginStatuses:l.getPluginStatuses,enablePlugin:l.enablePlugin,disablePlugin:l.disablePlugin},e)}}))(De),Le=(a(147),a(199));a(123);const Be={enableTeamCreation:{true:[{roleName:"system_user",permission:v.Permissions.CREATE_TEAM,shouldHave:!0}],false:[{roleName:"system_user",permission:v.Permissions.CREATE_TEAM,shouldHave:!1}]},editOthersPosts:{true:[{roleName:"system_admin",permission:v.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0},{roleName:"team_admin",permission:v.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0}],false:[{roleName:"team_admin",permission:v.Permissions.EDIT_OTHERS_POSTS,shouldHave:!1},{roleName:"system_admin",permission:v.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0}]},enableOnlyAdminIntegrations:{true:[{roleName:"team_user",permission:v.Permissions.MANAGE_INCOMING_WEBHOOKS,shouldHave:!1},{roleName:"team_user",permission:v.Permissions.MANAGE_OUTGOING_WEBHOOKS,shouldHave:!1},{roleName:"team_user",permission:v.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!1},{roleName:"system_user",permission:v.Permissions.MANAGE_OAUTH,shouldHave:!1}],false:[{roleName:"team_user",permission:v.Permissions.MANAGE_INCOMING_WEBHOOKS,shouldHave:!0},{roleName:"team_user",permission:v.Permissions.MANAGE_OUTGOING_WEBHOOKS,shouldHave:!0},{roleName:"team_user",permission:v.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!0},{roleName:"system_user",permission:v.Permissions.MANAGE_OAUTH,shouldHave:!0}]}};function Ue(e,t){const a=JSON.parse(JSON.stringify(t));return function(e){const t=function(){let e=[];return Object.values(Be).forEach(t=>{Object.values(t).forEach(t=>{const a=t.map(e=>e.roleName);e=e.concat(a)})}),[...new Set(e.map(e=>e))]}();Object.keys(e).forEach(a=>{t.includes(a)||delete e[a]})}(a),Object.keys(Be).forEach(t=>{const n=e[t];n&&function(e,t,a){const n=Be[e][t];if(void 0===n)throw new Error("Value '".concat(t,"' not present in MAPPING for key '").concat(e,"'."));n.forEach(e=>{const t=a[e.roleName];e.shouldHave?function(e,t){t.permissions.includes(e)||t.permissions.push(e)}(e.permission,t):function(e,t){const a=t.permissions.indexOf(e);-1!==a&&t.permissions.splice(a,1)}(e.permission,t)})}(t,n,a)}),Object.entries(a).forEach(([e,n])=>{const s=new Set(t[e].permissions),i=new Set(n.permissions),r=[...i].filter(e=>!s.has(e));s.size===i.size&&0===r.length&&delete a[e]}),a}var Fe=a(1185),qe=a(1249),Ge=a(1188);function He(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class We extends x.a.Component{constructor(e){super(e),He(this,"handleRequest",e=>{e.preventDefault(),this.setState({busy:!0,fail:null,success:!1});const t=()=>{this.props.requestAction(()=>{this.setState({busy:!1,success:!0})},e=>{let t=e.message;this.props.includeDetailedError&&e.detailed_error&&(t+=" - "+e.detailed_error),this.setState({busy:!1,fail:t})})};this.props.saveNeeded?this.props.saveConfigAction(t):t()}),this.state={busy:!1,fail:null,success:!1}}render(){let e=null;this.state.fail?e=x.a.createElement("div",null,x.a.createElement("div",{className:"alert alert-warning"},x.a.createElement(Ge.a,null),x.a.createElement(w.a,{id:this.props.errorMessage.id,defaultMessage:this.props.errorMessage.defaultMessage,values:{error:this.state.fail}}))):this.state.success&&this.props.showSuccessMessage&&(e=x.a.createElement("div",null,x.a.createElement("div",{className:"alert alert-success"},x.a.createElement(qe.a,null),x.a.createElement(w.a,{id:this.props.successMessage.id,defaultMessage:this.props.successMessage.defaultMessage}))));let t="col-sm-8",a=null;return this.props.label?a=x.a.createElement("label",{className:"control-label col-sm-4"},this.props.label):t="col-sm-offset-4 "+t,x.a.createElement("div",{className:"form-group",id:this.props.id},a,x.a.createElement("div",{className:t},x.a.createElement("div",null,x.a.createElement("button",{className:"btn btn-default",onClick:this.handleRequest,disabled:this.props.disabled},x.a.createElement(Fe.a,{loading:this.state.busy,text:this.props.loadingText||U.jb("admin.requestButton.loading"," Loading...")},this.props.buttonText)),this.props.alternativeActionElement,e),x.a.createElement("div",{className:"help-text"},this.props.helpText)))}}function ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}He(We,"propTypes",{id:j.a.string,requestAction:j.a.func.isRequired,helpText:j.a.element,loadingText:j.a.string,buttonText:j.a.element.isRequired,label:j.a.element,disabled:j.a.bool,saveNeeded:j.a.bool,saveConfigAction:j.a.func,showSuccessMessage:j.a.bool,successMessage:j.a.shape({id:j.a.string.isRequired,defaultMessage:j.a.string.isRequired}),errorMessage:j.a.shape({id:j.a.string.isRequired,defaultMessage:j.a.string.isRequired}),includeDetailedError:j.a.bool,alternativeActionElement:j.a.element}),He(We,"defaultProps",{id:null,disabled:!1,saveNeeded:!1,showSuccessMessage:!0,includeDetailedError:!1,successMessage:{id:Object(M.b)("admin.requestButton.requestSuccess"),defaultMessage:"Test Successful"},errorMessage:{id:Object(M.b)("admin.requestButton.requestFailure"),defaultMessage:"Test Failure: {error}"}});class Ye extends x.a.Component{constructor(...e){super(...e),ze(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.value)})}render(){const e=[];for(const{value:t,text:a}of this.props.values)e.push(x.a.createElement("option",{value:t,key:t},a));return x.a.createElement(Te,{label:this.props.label,inputId:this.props.id,helpText:this.props.helpText,setByEnv:this.props.setByEnv},x.a.createElement("select",{"data-testid":this.props.id+"dropdown",className:"form-control",id:this.props.id,value:this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv},e))}}ze(Ye,"propTypes",{id:j.a.string.isRequired,values:j.a.array.isRequired,label:j.a.node.isRequired,value:j.a.string.isRequired,onChange:j.a.func.isRequired,disabled:j.a.bool,setByEnv:j.a.bool.isRequired,helpText:j.a.node}),ze(Ye,"defaultProps",{isDisabled:!1});var Ve=a(1250);function Je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xe extends x.a.Component{constructor(e){super(e),Je(this,"handleChange",e=>{const t=e.map(e=>e.value);this.props.selected.length>0&&this.props.mustBePresent&&-1===t.join(",").indexOf(this.props.mustBePresent)?this.setState({error:this.props.notPresent}):(this.props.onChange(this.props.id,t),this.setState({error:!1}))}),Je(this,"calculateValue",()=>this.props.selected.reduce((e,t)=>{const a=this.props.values.find(e=>e.value===t);return null!==a&&e.push(a),e},[])),Je(this,"getOptionLabel",({text:e})=>e),this.state={error:!1}}UNSAFE_componentWillReceiveProps(e){e.selected.length>0&&e.mustBePresent&&-1===e.selected.join(",").indexOf(e.mustBePresent)?this.setState({error:this.props.notPresent}):this.setState({error:!1})}render(){return x.a.createElement(Te,{label:this.props.label,inputId:this.props.id,helpText:this.props.helpText,setByEnv:this.props.setByEnv},x.a.createElement(Ve.b,{id:this.props.id,isMulti:!0,getOptionLabel:this.getOptionLabel,options:this.props.values,delimiter:",",clearable:!1,disabled:this.props.disabled||this.props.setByEnv,noResultsText:this.props.noResultText,onChange:this.handleChange,value:this.calculateValue()}),x.a.createElement(ve.a,{error:this.state.error}))}}function Ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Je(Xe,"propTypes",{id:j.a.string.isRequired,values:j.a.array.isRequired,label:j.a.node.isRequired,selected:j.a.array.isRequired,mustBePresent:j.a.string,onChange:j.a.func.isRequired,disabled:j.a.bool,setByEnv:j.a.bool.isRequired,helpText:j.a.node,noResultText:j.a.node,errorText:j.a.node,notPresent:j.a.node}),Je(Xe,"defaultProps",{disabled:!1});class Qe extends x.a.Component{constructor(...e){super(...e),Ke(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.value)})}render(){const e=[];for(const{value:t,text:a}of this.props.values)e.push(x.a.createElement("div",{className:"radio",key:t},x.a.createElement("label",null,x.a.createElement("input",{type:"radio",value:t,name:this.props.id,checked:t===this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}),a)));return x.a.createElement(Te,{label:this.props.label,inputId:this.props.id,helpText:this.props.helpText,setByEnv:this.props.setByEnv},e)}}Ke(Qe,"propTypes",{id:j.a.string.isRequired,label:j.a.node.isRequired,values:j.a.arrayOf(j.a.shape({text:j.a.string.isRequired,value:j.a.string.isRequired})).isRequired,value:j.a.string.isRequired,setByEnv:j.a.bool.isRequired,disabled:j.a.bool,helpText:j.a.node}),Ke(Qe,"defaultProps",{disabled:!1});var $e=a(1507);function Ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class et extends x.a.PureComponent{constructor(e){super(e),Ze(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.props.id,e.hex)}),Ze(this,"togglePicker",()=>{this.props.disabled?this.setState({showPicker:!1}):this.setState({showPicker:!this.state.showPicker})}),Ze(this,"closePicker",e=>{if(e.target){const t=e.target.closest("."+this.getPickerClass());t&&t.contains(e.target)||this.setState({showPicker:!1})}}),Ze(this,"onTextInput",e=>{this.props.onChange&&this.props.onChange(this.props.id,e.target.value)}),Ze(this,"getPickerClass",()=>this.props.id?"picker-"+this.props.id.replace(".","-"):""),this.state={showPicker:!1}}componentDidMount(){document.addEventListener("click",this.closePicker)}componentWillUnmount(){document.removeEventListener("click",this.closePicker)}render(){let e;return this.state.showPicker&&(e=x.a.createElement("div",{className:"color-picker__popover "+this.getPickerClass()},x.a.createElement($e.ChromePicker,{color:this.props.value,onChange:this.handleChange}))),x.a.createElement(Te,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},x.a.createElement("div",{className:"input-group color-picker colorpicker-element"},x.a.createElement("input",{type:"text",className:"form-control",value:this.props.value,onChange:this.onTextInput,disabled:this.props.disabled}),x.a.createElement("span",{className:"input-group-addon "+this.getPickerClass(),onClick:this.togglePicker},x.a.createElement("i",{style:{backgroundColor:this.props.value}})),e))}}Ze(et,"propTypes",{id:j.a.string.isRequired,label:j.a.node.isRequired,helpText:j.a.node,value:j.a.string.isRequired,onChange:j.a.func,disabled:j.a.bool});var tt=a(1471),at=a.n(tt);function nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class st extends x.a.Component{constructor(...e){super(...e),nt(this,"regenerate",e=>{e.preventDefault(),this.props.onChange(this.props.id,at.a.randomBytes(256).toString("base64").substring(0,32))})}static get defaultProps(){return{disabled:!1,regenerateText:x.a.createElement(w.a,{id:"admin.regenerate",defaultMessage:"Regenerate"})}}render(){let e=null;this.props.disabled&&this.props.disabledText&&(e=x.a.createElement("div",{className:"admin-console__disabled-text"},this.props.disabledText));let t=null;this.props.regenerateHelpText&&(t=x.a.createElement("div",{className:"help-text"},this.props.regenerateHelpText));let a=this.props.value;return a||(a=x.a.createElement("span",{className:"placeholder-text"},this.props.placeholder)),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4",htmlFor:this.props.id},this.props.label),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("div",{className:"form-control disabled",id:this.props.id},a),e,x.a.createElement("div",{className:"help-text"},this.props.helpText),x.a.createElement("div",{className:"help-text"},x.a.createElement("button",{className:"btn btn-default",onClick:this.regenerate,disabled:this.props.disabled||this.props.setByEnv},this.props.regenerateText)),t,this.props.setByEnv?x.a.createElement(Se,null):null))}}nt(st,"propTypes",{id:j.a.string.isRequired,label:j.a.node.isRequired,placeholder:j.a.string,value:j.a.string.isRequired,onChange:j.a.func.isRequired,disabled:j.a.bool.isRequired,setByEnv:j.a.bool.isRequired,disabledText:j.a.node,helpText:j.a.node.isRequired,regenerateText:j.a.node.isRequired,regenerateHelpText:j.a.node});var it=a(187),rt=a(1316),ot=a(1210),lt=a(1197);function ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class dt extends x.a.Component{static get propTypes(){return{id:j.a.string.isRequired,label:j.a.node.isRequired,placeholder:j.a.string,helpText:j.a.node,value:j.a.string,onChange:j.a.func,disabled:j.a.bool,actions:j.a.shape({autocompleteUsers:j.a.func.isRequired})}}constructor(e){super(e),ct(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.value)}),ct(this,"handleUserSelected",e=>{this.props.onChange(this.props.id,e.username)}),this.userSuggestionProviders=[new rt.a(e.actions.autocompleteUsers)]}render(){return x.a.createElement(Te,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},x.a.createElement("div",{className:"admin-setting-user__dropdown"},x.a.createElement(ot.a,{id:"admin_user_setting_"+this.props.id,className:"form-control",placeholder:this.props.placeholder,value:this.props.value,onChange:this.handleChange,onItemSelected:this.handleUserSelected,listComponent:lt.a,listStyle:"bottom",providers:this.userSuggestionProviders,disabled:this.props.disabled,requiredCharacters:0,openOnFocus:!0})))}}var ut=Object(r.connect)(null,(function(e){return{actions:Object(o.bindActionCreators)({autocompleteUsers:it.b},e)}}))(dt),mt=a(1966),ht=a(1967),pt=a(328),gt=a(1145);function ft(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bt extends x.a.PureComponent{constructor(e){super(e),ft(this,"getStatus",e=>{const t=this.props.intl.formatMessage;return e.status===O.q.PENDING?x.a.createElement("span",{className:"status-icon-warning",title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},x.a.createElement(w.a,{id:"admin.jobTable.statusPending",defaultMessage:"Pending"})):e.status===O.q.IN_PROGRESS?x.a.createElement("span",{className:"status-icon-warning",title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},x.a.createElement(w.a,{id:"admin.jobTable.statusInProgress",defaultMessage:"In Progress"})):e.status===O.q.SUCCESS?x.a.createElement("span",{className:"status-icon-success",title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},x.a.createElement(w.a,{id:"admin.jobTable.statusSuccess",defaultMessage:"Success"})):e.status===O.q.ERROR?x.a.createElement("span",{className:"status-icon-error",title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},x.a.createElement(w.a,{id:"admin.jobTable.statusError",defaultMessage:"Error"})):e.status===O.q.CANCEL_REQUESTED?x.a.createElement("span",{className:"status-icon-warning",title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},x.a.createElement(w.a,{id:"admin.jobTable.statusCanceling",defaultMessage:"Canceling..."})):e.status===O.q.CANCELED?x.a.createElement("span",{className:"status-icon-error",title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},x.a.createElement(w.a,{id:"admin.jobTable.statusCanceled",defaultMessage:"Canceled"})):x.a.createElement("span",{title:t({id:"admin.jobTable.jobId",defaultMessage:"Job ID: "})+e.id},e.status)}),ft(this,"getExtraInfoText",e=>e.data&&e.data.error&&e.data.error.length>0?x.a.createElement("span",{title:e.data.error},e.data.error):this.props.getExtraInfoText?this.props.getExtraInfoText(e):x.a.createElement("span",null)),ft(this,"getRunLength",e=>{let t=e.last_activity_at-e.start_at;if(e.status===O.q.IN_PROGRESS){const a=Date.now()-e.start_at;a>t&&(t=a)}let a=U.jb("admin.jobTable.lastActivityAt","Last Activity: ")+"--";e.last_activity_at>0&&(a=U.jb("admin.jobTable.lastActivityAt","Last Activity: ")+this.props.intl.formatDate(new Date(e.last_activity_at),{year:"numeric",month:"short",day:"2-digit"})+" - "+this.props.intl.formatTime(new Date(e.last_activity_at),{hour:"2-digit",minute:"2-digit",second:"2-digit"}));var n=Math.round(t/1e3),s=Math.round(t/6e4);return t<=0||e.status===O.q.CANCELED?x.a.createElement("span",{className:"whitespace--nowrap"},"--"):n<=120?x.a.createElement("span",{className:"whitespace--nowrap",title:a},n+U.jb("admin.jobTable.runLengthSeconds"," seconds")):x.a.createElement("span",{className:"whitespace--nowrap",title:a},s+U.jb("admin.jobTable.runLengthMinutes"," minutes"))}),ft(this,"getFinishAt",(e,t)=>{if(0===t||e===O.q.PENDING||e===O.q.IN_PROGRESS||e===O.q.CANCEL_REQUESTED)return x.a.createElement("span",{className:"whitespace--nowrap"},"--");const a=new Date(t);return x.a.createElement("span",{className:"whitespace--nowrap"},x.a.createElement(Z.a,{value:a,day:"2-digit",month:"short",year:"numeric"})," - ",x.a.createElement(Z.b,{value:a,hour:"2-digit",minute:"2-digit"}))}),ft(this,"reload",()=>{this.setState({loading:!0}),this.props.actions.getJobsByType(this.props.jobType).then(()=>{this.setState({loading:!1})})}),ft(this,"handleCancelJob",async e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-job-id");await this.props.actions.cancelJob(t),this.reload()}),ft(this,"handleCreateJob",async e=>{e.preventDefault();const t={type:this.props.jobType};await this.props.actions.createJob(t),this.reload()}),ft(this,"getCancelButton",e=>{const t=this.props.intl.formatMessage;let a=null;return this.props.disabled||e.status!==O.q.PENDING&&e.status!==O.q.IN_PROGRESS||(a=x.a.createElement("span",{"data-job-id":e.id,onClick:this.handleCancelJob,className:"job-table__cancel-button",title:t({id:"admin.jobTable.cancelButton",defaultMessage:"Cancel"})},"×")),a}),this.interval=null,this.state={loading:!0}}componentDidMount(){this.props.actions.getJobsByType(this.props.jobType).then(()=>this.setState({loading:!1})),this.interval=setInterval(this.reload,15e3)}componentWillUnmount(){this.interval&&clearInterval(this.interval)}render(){var e=this.props.jobs.map(e=>x.a.createElement("tr",{key:e.id},x.a.createElement("td",{width:"30px",className:"whitespace--nowrap text-center"},this.getCancelButton(e)),x.a.createElement("td",{className:"whitespace--nowrap"},this.getStatus(e)),x.a.createElement("td",{className:"whitespace--nowrap"},this.getFinishAt(e.status,e.last_activity_at)),x.a.createElement("td",{className:"whitespace--nowrap"},this.getRunLength(e)),x.a.createElement("td",null,this.getExtraInfoText(e))));return x.a.createElement("div",{className:"job-table__panel"},x.a.createElement("div",{className:"job-table__create-button"},x.a.createElement("div",null,x.a.createElement("button",{className:"btn btn-default",onClick:this.handleCreateJob,disabled:this.props.disabled},this.props.createJobButtonText)),x.a.createElement("div",{className:"help-text"},this.props.createJobHelpText)),x.a.createElement("div",{className:"job-table__table"},x.a.createElement("table",{className:"table","data-testid":"jobTable"},x.a.createElement("thead",null,x.a.createElement("tr",null,x.a.createElement("th",{width:"30px"}),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.jobTable.headerStatus",defaultMessage:"Status"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.jobTable.headerFinishAt",defaultMessage:"Finish Time"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.jobTable.headerRunTime",defaultMessage:"Run Time"})),x.a.createElement("th",{colSpan:"3"},x.a.createElement(w.a,{id:"admin.jobTable.headerExtraInfo",defaultMessage:"Details"})))),x.a.createElement("tbody",null,e))))}}ft(bt,"propTypes",{intl:gt.a.isRequired,jobs:j.a.arrayOf(j.a.object).isRequired,getExtraInfoText:j.a.func,disabled:j.a.bool,createJobHelpText:j.a.element.isRequired,createJobButtonText:j.a.element.isRequired,jobType:j.a.string.isRequired,actions:j.a.shape({getJobsByType:j.a.func.isRequired,cancelJob:j.a.func.isRequired,createJob:j.a.func.isRequired}).isRequired});var vt=Object(pt.c)(bt);var _t=Object(r.connect)((function(e,t){return{jobs:ht.makeGetJobsByType(t.jobType)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getJobsByType:mt.getJobsByType,createJob:mt.createJob,cancelJob:mt.cancelJob},e)}}))(vt),yt=a(99),Et=a.n(yt);function St(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tt extends Te{static get propTypes(){return{id:j.a.string.isRequired,label:j.a.node.isRequired,helpText:j.a.node,uploadingText:j.a.node,onSubmit:j.a.func.isRequired,disabled:j.a.bool,fileType:j.a.string.isRequired,error:j.a.string}}constructor(e){super(e),St(this,"handleChange",()=>{const e=this.refs.fileInput.files;e&&e.length>0&&this.setState({fileSelected:!0,fileName:e[0].name})}),St(this,"handleSubmit",e=>{e.preventDefault(),Et()(this.refs.upload_button).button("loading"),this.props.onSubmit(this.props.id,this.refs.fileInput.files[0],e=>{Et()(this.refs.upload_button).button("reset"),e&&U.d(this.refs.fileInput)})}),this.state={fileName:null,serverError:e.error}}render(){let e;this.state.serverError&&(e=x.a.createElement("div",{className:"form-group has-error"},x.a.createElement("label",{className:"control-label"},this.state.serverError)));let t,a="btn";return this.state.fileSelected&&(a="btn btn-primary"),t=this.state.fileName?this.state.fileName:x.a.createElement(w.a,{id:"admin.file_upload.noFile",defaultMessage:"No file uploaded"}),x.a.createElement(Te,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},x.a.createElement("div",null,x.a.createElement("div",{className:"file__upload"},x.a.createElement("button",{className:"btn btn-default",disabled:this.props.disabled},x.a.createElement(w.a,{id:"admin.file_upload.chooseFile",defaultMessage:"Choose File"})),x.a.createElement("input",{ref:"fileInput",type:"file",disabled:this.props.disabled,accept:this.props.fileType,onChange:this.handleChange})),x.a.createElement("button",{className:a,disabled:!this.state.fileSelected,onClick:this.handleSubmit,ref:"upload_button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> ".concat(this.props.uploadingText)},x.a.createElement(w.a,{id:"admin.file_upload.uploadFile",defaultMessage:"Upload"})),x.a.createElement("div",{className:"help-text m-0"},t),e))}}class xt extends Te{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleRemove",e=>{e.preventDefault(),Et()(this.refs.remove_button).button("loading"),this.props.onSubmit(this.props.id,()=>{Et()(this.refs.remove_button).button("reset")})})}static get propTypes(){return{id:j.a.string.isRequired,label:j.a.node.isRequired,helpText:j.a.node,removeButtonText:j.a.node.isRequired,removingText:j.a.node,fileName:j.a.string.isRequired,onSubmit:j.a.func.isRequired,disabled:j.a.bool}}render(){return x.a.createElement(Te,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},x.a.createElement("div",null,x.a.createElement("div",{className:"help-text remove-filename"},this.props.fileName),x.a.createElement("button",{className:"btn btn-danger",onClick:this.handleRemove,ref:"remove_button",disabled:this.props.disabled,"data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> ".concat(this.props.removingText)},this.props.removeButtonText)))}}var wt=a(72),Ot=a.n(wt);function Ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Mt extends x.a.PureComponent{constructor(...e){super(...e),Ct(this,"renderTranslated",()=>{const{isMarkdown:e,text:t,textDefault:a,textValues:n}=this.props;return"object"==typeof t?t:e?x.a.createElement(P.b,{id:t,defaultMessage:a,values:n}):x.a.createElement(w.a,{id:t,values:n,defaultMessage:a})}),Ct(this,"renderUntranslated",()=>{if(this.props.isMarkdown){const e=Ot()(this.props.text,{breaks:!0,sanitize:!0,renderer:new P.a});return x.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}return x.a.createElement("span",null,this.props.text)})}render(){return this.props.isTranslated?this.renderTranslated():this.renderUntranslated()}}function kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function jt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(a),!0).forEach((function(t){Pt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Pt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ct(Mt,"propTypes",{isMarkdown:j.a.bool,isTranslated:j.a.bool,text:j.a.oneOfType([j.a.string,j.a.object]).isRequired,textDefault:j.a.string,textValues:j.a.object}),Ct(Mt,"defaultProps",{isTranslated:!0});class At extends x.a.Component{constructor(e){super(e),Pt(this,"handleSubmit",async e=>{if(e.preventDefault(),this.state.confirmNeededId)this.setState({showConfirmId:this.state.confirmNeededId});else{if(this.setState({saving:!0,serverError:null}),"both"===this.state.saveNeeded||"permissions"===this.state.saveNeeded){const e=Ue((this.props.schema&&this.props.schema.settings||[]).reduce((e,t)=>(t.type===O.Q.SettingsTypes.TYPE_PERMISSION&&(e[t.permissions_mapping_name]=this.state[t.key].toString()),e),{}),this.props.roles);let t=!0;if(await Promise.all(Object.values(e).map(async e=>{try{await this.props.editRole(e)}catch(e){t=!1,this.setState({saving:!1,serverError:e.message})}})),!t)return}"both"===this.state.saveNeeded||"config"===this.state.saveNeeded?this.doSubmit(At.getStateFromConfig):(this.setState({saving:!1,saveNeeded:!1,serverError:null}),this.props.setNavigationBlocked(!1))}}),Pt(this,"renderTitle",()=>this.props.schema?!1===this.props.schema.translate?x.a.createElement(A,null,this.props.schema.name||this.props.schema.id):x.a.createElement(N,{id:this.props.schema.name||this.props.schema.id,defaultMessage:this.props.schema.name_default||this.props.schema.id}):""),Pt(this,"renderBanner",e=>this.props.schema?!1===e.label.translate?x.a.createElement("span",null,e.label):"string"==typeof e.label?e.label_markdown?x.a.createElement(P.b,{id:e.label,values:e.label_values,defaultMessage:e.label_default}):x.a.createElement(w.a,{id:e.label,defaultMessage:e.label_default,values:e.label_values}):e.label:x.a.createElement("span",null,"")),Pt(this,"renderHelpText",e=>{if(!this.props.schema)return x.a.createElement("span",null,"");if(!e.help_text)return null;let t,a,n,s;return e.disabled_help_text&&this.isDisabled(e)?(t=e.disabled_help_text,a=e.disabled_help_text_markdown,n=e.disabled_help_text_values,s=e.disabled_help_text_default):(t=e.help_text,a=e.help_text_markdown,n=e.help_text_values,s=e.help_text_default),x.a.createElement(Mt,{isMarkdown:a,isTranslated:e.translate,text:t,textDefault:s,textValues:n})}),Pt(this,"renderLabel",e=>this.props.schema?!1===e.translate?e.label:U.jb(e.label,e.label_default):""),Pt(this,"isDisabled",e=>"function"==typeof e.isDisabled?e.isDisabled(this.props.config,this.state,this.props.license):Boolean(e.isDisabled)),Pt(this,"isHidden",e=>"function"==typeof e.isHidden?e.isHidden(this.props.config,this.state,this.props.license):Boolean(e.isHidden)),Pt(this,"buildButtonSetting",e=>x.a.createElement(We,{id:e.key,key:this.props.schema.id+"_text_"+e.key,requestAction:(t,a)=>{var n="ServiceSettings.SiteURL";e.sourceUrlKey&&(n=e.sourceUrlKey),e.action(e=>{const a=new Map(Object.entries(e));(this.props.schema&&this.props.schema.settings||[]).forEach(e=>{if(e.key&&e.setFromMetadataField){const t=a.get(e.setFromMetadataField);e.type===O.Q.SettingsTypes.TYPE_TEXT?this.setState({[e.key]:t,["".concat(e.key,"Error")]:null}):e.type===O.Q.SettingsTypes.TYPE_FILE_UPLOAD&&this.buildSettingFunctions[e.type]&&this.buildSettingFunctions[e.type](e).props.onSetData&&this.buildSettingFunctions[e.type](e).props.onSetData(e.key,t)}}),t&&"function"==typeof t&&t()},a,this.state[n])},helpText:this.renderHelpText(e),loadingText:U.jb(e.loading,e.loading_default),buttonText:x.a.createElement("span",null,this.renderLabel(e)),showSuccessMessage:Boolean(e.success_message),includeDetailedError:!0,disabled:this.isDisabled(e),errorMessage:{id:e.error_message,defaultMessage:e.error_message_default},successMessage:e.success_message&&{id:e.success_message,defaultMessage:e.success_message_default}})),Pt(this,"buildTextSetting",e=>{let t="input";e.type===O.Q.SettingsTypes.TYPE_NUMBER?t="number":e.type===O.Q.SettingsTypes.TYPE_LONG_TEXT&&(t="textarea");let a=this.state[e.key]||"";return e.dynamic_value&&(a=e.dynamic_value(a,this.props.config,this.state,this.props.license)),x.a.createElement(je,{key:this.props.schema.id+"_text_"+e.key,id:e.key,type:t,label:this.renderLabel(e),helpText:this.renderHelpText(e),placeholder:U.jb(e.placeholder,e.placeholder_default),value:a,disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handleChange,maxLength:e.max_length})}),Pt(this,"buildColorSetting",e=>x.a.createElement(et,{key:this.props.schema.id+"_text_"+e.key,id:e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),placeholder:U.jb(e.placeholder,e.placeholder_default),value:this.state[e.key]||"",disabled:this.isDisabled(e),onChange:this.handleChange})),Pt(this,"buildBoolSetting",e=>x.a.createElement(we,{key:this.props.schema.id+"_bool_"+e.key,id:e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),value:!this.isDisabled(e)&&this.state[e.key]||!1,disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handleChange})),Pt(this,"buildPermissionSetting",e=>x.a.createElement(we,{key:this.props.schema.id+"_bool_"+e.key,id:e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),value:!this.isDisabled(e)&&this.state[e.key]||!1,disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handlePermissionChange})),Pt(this,"buildDropdownSetting",e=>{const t="true"===this.props.config.BuildEnterpriseReady,a=[];e.options.forEach(e=>{e.isHidden&&e.isHidden(this.props.config,this.state,this.props.license,t)||a.push(e)});const n=a.map(e=>({value:e.value,text:U.jb(e.display_name,e.display_name_default)})),s=this.state[e.key]||n[0].value;let i=null;for(const e of a)if(e.help_text&&e.value===s){i=e;break}return x.a.createElement(Ye,{key:this.props.schema.id+"_dropdown_"+e.key,id:e.key,values:n,label:this.renderLabel(e),helpText:this.renderHelpText(i||e),value:s,disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handleChange})}),Pt(this,"buildLanguageSetting",e=>{const t=Le.b(),a=Object.keys(t).map(e=>({value:t[e].value,text:t[e].name,order:t[e].order})).sort((e,t)=>e.order-t.order);if(e.multiple){const t=x.a.createElement(w.a,{id:e.no_result,defaultMessage:e.no_result_default}),n=x.a.createElement(w.a,{id:e.not_present,defaultMessage:e.not_present_default});return x.a.createElement(Xe,{key:this.props.schema.id+"_language_"+e.key,id:e.key,label:this.renderLabel(e),values:a,helpText:this.renderHelpText(e),selected:this.state[e.key]&&this.state[e.key].split(",")||[],disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:(e,t)=>this.handleChange(e,t.join(",")),noResultText:t,notPresent:n})}return x.a.createElement(Ye,{key:this.props.schema.id+"_language_"+e.key,id:e.key,label:this.renderLabel(e),values:a,helpText:this.renderHelpText(e),value:this.state[e.key]||a[0].value,disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handleChange})}),Pt(this,"buildRadioSetting",e=>{const t=(e.options||[]).map(e=>({value:e.value,text:e.display_name}));return x.a.createElement(Qe,{key:this.props.schema.id+"_radio_"+e.key,id:e.key,values:t,label:this.renderLabel(e),helpText:this.renderHelpText(e),value:this.state[e.key]||t[0],disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handleChange})}),Pt(this,"buildBannerSetting",e=>this.isDisabled(e)?null:x.a.createElement("div",{className:"banner "+e.banner_type,key:this.props.schema.id+"_bool_"+e.key},x.a.createElement("div",{className:"banner__content"},x.a.createElement("span",null,"warning"===e.banner_type?x.a.createElement(Ge.a,{additionalClassName:"banner__icon"}):null,this.renderBanner(e))))),Pt(this,"buildGeneratedSetting",e=>x.a.createElement(st,{key:this.props.schema.id+"_generated_"+e.key,id:e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),regenerateHelpText:e.regenerate_help_text,placeholder:U.jb(e.placeholder,e.placeholder_default),value:this.state[e.key]||"",disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key),onChange:this.handleGeneratedChange})),Pt(this,"handleGeneratedChange",(e,t)=>{this.handleChange(e,t.replace("+","-").replace("/","_"))}),Pt(this,"handleChange",(e,t,a=!1,n=!1,s=!1)=>{const i="permissions"===this.state.saveNeeded?"both":"config",r=!1===s?this.state.clientWarning:s;let o=a?e:this.state.confirmNeededId;e!==this.state.confirmNeededId||a||(o=""),this.setState({saveNeeded:i,confirmNeededId:o,clientWarning:r,[e]:t}),n&&this.doSubmit(At.getStateFromConfig),this.props.setNavigationBlocked(!0)}),Pt(this,"handlePermissionChange",(e,t)=>{let a="permissions";"config"===this.state.saveNeeded&&(a="both"),this.setState({saveNeeded:a,[e]:t}),this.props.setNavigationBlocked(!0)}),Pt(this,"buildUsernameSetting",e=>x.a.createElement(ut,{key:this.props.schema.id+"_userautocomplete_"+e.key,id:e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),placeholder:U.jb(e.placeholder,e.placeholder_default)||U.jb("search_bar.search","Search"),value:this.state[e.key]||"",disabled:this.isDisabled(e),onChange:this.handleChange})),Pt(this,"buildJobsTableSetting",e=>x.a.createElement(_t,{key:this.props.schema.id+"_jobstable_"+e.key,jobType:e.job_type,getExtraInfoText:e.render_job,disabled:this.isDisabled(e),createJobButtonText:x.a.createElement(w.a,{id:e.label,defaultMessage:e.label_default}),createJobHelpText:x.a.createElement(P.b,{id:e.help_text,defaultMessage:e.help_text_default})})),Pt(this,"buildFileUploadSetting",e=>{const t=(t,a)=>{e.set_action(a=>{this.handleChange(t,a),this.setState({[e.key]:a,["".concat(e.key,"Error")]:null})},t=>{this.setState({[e.key]:null,["".concat(e.key,"Error")]:t.message})},a)};if(this.state[e.key]){const a=(t,a)=>{e.remove_action(()=>{this.handleChange(e.key,""),this.setState({[e.key]:null,["".concat(e.key,"Error")]:null})},t=>{a(),this.setState({[e.key]:null,["".concat(e.key,"Error")]:t.message})})};return x.a.createElement(xt,{id:this.props.schema.id,key:this.props.schema.id+"_fileupload_"+e.key,label:this.renderLabel(e),helpText:x.a.createElement(w.a,{id:e.remove_help_text,defaultMessage:e.remove_help_text_default}),removeButtonText:U.jb(e.remove_button_text,e.remove_button_text_default),removingText:U.jb(e.removing_text,e.removing_text_default),fileName:this.state[e.key],onSubmit:a,onSetData:t,disabled:this.isDisabled(e),setByEnv:this.isSetByEnv(e.key)})}return x.a.createElement(Tt,{id:e.key,key:this.props.schema.id+"_fileupload_"+e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),uploadingText:U.jb(e.uploading_text,e.uploading_text_default),disabled:this.isDisabled(e),fileType:e.fileType,onSubmit:(t,a,n)=>{e.upload_action(a,a=>{this.handleChange(t,a),this.setState({[e.key]:a,["".concat(e.key,"Error")]:null}),n&&"function"==typeof n&&n()},e=>{n&&"function"==typeof n&&n(e.message)})},onSetData:t,error:this.state.idpCertificateFileError,setByEnv:this.isSetByEnv(e.key)})}),Pt(this,"buildCustomSetting",e=>{const t=e.component,a=x.a.createElement(t,{key:this.props.schema.id+"_custom_"+e.key,id:e.key,label:this.renderLabel(e),helpText:this.renderHelpText(e),value:this.state[e.key],disabled:this.isDisabled(e),config:this.props.config,license:this.props.license,setByEnv:this.isSetByEnv(e.key),onChange:this.handleChange,registerSaveAction:this.registerSaveAction,setSaveNeeded:this.setSaveNeeded,unRegisterSaveAction:this.unRegisterSaveAction,cancelSubmit:this.cancelSubmit,showConfirm:this.state.showConfirmId===e.key});return e.showTitle?x.a.createElement(Te,{label:e.label,inputId:e.key,helpText:e.helpText},a):a}),Pt(this,"unRegisterSaveAction",e=>{const t=this.saveActions.indexOf(e);this.saveActions.splice(t,1)}),Pt(this,"registerSaveAction",e=>{this.saveActions.push(e)}),Pt(this,"setSaveNeeded",()=>{this.setState({saveNeeded:"config"}),this.props.setNavigationBlocked(!0)}),Pt(this,"renderSettings",()=>{const e=this.props.schema,t=[];let a,n;return e.settings&&e.settings.forEach(e=>{this.buildSettingFunctions[e.type]&&!this.isHidden(e)&&t.push(this.buildSettingFunctions[e.type](e))}),e.header&&(a=x.a.createElement("div",{className:"banner"},x.a.createElement(Mt,{text:e.header,isMarkdown:!0,isTranslated:this.props.schema.translate}))),e.footer&&(n=x.a.createElement("div",{className:"banner"},x.a.createElement(Mt,{text:e.footer,isMarkdown:!0,isTranslated:this.props.schema.translate}))),x.a.createElement(Oe,{container:!1},a,t,n)}),Pt(this,"closeTooltip",()=>{this.setState({errorTooltip:!1})}),Pt(this,"openTooltip",e=>{const t=e.currentTarget.querySelector(".control-label"),a=t.offsetWidth<t.scrollWidth;this.setState({errorTooltip:a})}),Pt(this,"doSubmit",async e=>{let t=JSON.parse(JSON.stringify(this.props.config));t=this.getConfigFromState(t);const{error:a}=await this.props.updateConfig(t);a?this.setState({serverError:a.message,serverErrorId:a.id}):this.setState(e(t)),this.handleSaved&&this.handleSaved(t);const n=[];for(const e of this.saveActions)n.push(e());const s=await Promise.all(n).then(e=>e.some(e=>e.error&&e.error.message));this.state.serverError||s?this.setState({saving:!1}):(this.setState({saving:!1,saveNeeded:!1,confirmNeededId:"",showConfirmId:"",clientWarning:""}),this.props.setNavigationBlocked(!1))}),Pt(this,"cancelSubmit",()=>{this.setState({showConfirmId:""})}),Pt(this,"isSetByEnv",e=>Boolean(At.getConfigValue(this.props.environmentConfig,e))),Pt(this,"hybridSchemaAndComponent",()=>{const e=this.props.schema;if(e&&e.component&&e.settings){const t=e.component;return x.a.createElement(t,this.props)}return null}),Pt(this,"render",()=>{const e=this.props.schema;if(e&&e.component&&!e.settings){const t=e.component;return x.a.createElement(t,this.props)}return e?x.a.createElement("div",{className:"wrapper--fixed "+this.state.customComponentWrapperClass},this.renderTitle(),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("form",{className:"form-horizontal",role:"form",onSubmit:this.handleSubmit},this.renderSettings()),this.hybridSchemaAndComponent())),x.a.createElement("div",{className:"admin-console-save"},x.a.createElement(be.a,{saving:this.state.saving,disabled:!this.state.saveNeeded||this.canSave&&!this.canSave(),onClick:this.handleSubmit,savingMessage:U.jb("admin.saving","Saving Config...")}),x.a.createElement("div",{className:"error-message",ref:"errorMessage",onMouseOver:this.openTooltip,onMouseOut:this.closeTooltip},x.a.createElement(ve.a,{iconClassName:"fa-exclamation-triangle",textClassName:"has-warning",error:this.state.clientWarning}),x.a.createElement(ve.a,{error:this.state.serverError})),x.a.createElement(fe.a,{show:this.state.errorTooltip,delayShow:O.Q.OVERLAY_TIME_DELAY,placement:"top",target:this.refs.errorMessage},x.a.createElement(ne.a,{id:"error-tooltip"},this.state.serverError)))):x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement(A,null,x.a.createElement(w.a,{id:"error.plugin_not_found.title",defaultMessage:"Plugin Not Found"})),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("p",null,x.a.createElement(w.a,{id:"error.plugin_not_found.desc",defaultMessage:"The plugin you are looking for does not exist."})),x.a.createElement(de.a,{to:"plugin_management"},x.a.createElement(w.a,{id:"admin.plugin.backToPlugins",defaultMessage:"Go back to the Plugins"})))))}),this.isPlugin=!1,this.saveActions=[],this.buildSettingFunctions={[O.Q.SettingsTypes.TYPE_TEXT]:this.buildTextSetting,[O.Q.SettingsTypes.TYPE_LONG_TEXT]:this.buildTextSetting,[O.Q.SettingsTypes.TYPE_NUMBER]:this.buildTextSetting,[O.Q.SettingsTypes.TYPE_COLOR]:this.buildColorSetting,[O.Q.SettingsTypes.TYPE_BOOL]:this.buildBoolSetting,[O.Q.SettingsTypes.TYPE_PERMISSION]:this.buildPermissionSetting,[O.Q.SettingsTypes.TYPE_DROPDOWN]:this.buildDropdownSetting,[O.Q.SettingsTypes.TYPE_RADIO]:this.buildRadioSetting,[O.Q.SettingsTypes.TYPE_BANNER]:this.buildBannerSetting,[O.Q.SettingsTypes.TYPE_GENERATED]:this.buildGeneratedSetting,[O.Q.SettingsTypes.TYPE_USERNAME]:this.buildUsernameSetting,[O.Q.SettingsTypes.TYPE_BUTTON]:this.buildButtonSetting,[O.Q.SettingsTypes.TYPE_LANGUAGE]:this.buildLanguageSetting,[O.Q.SettingsTypes.TYPE_JOBSTABLE]:this.buildJobsTableSetting,[O.Q.SettingsTypes.TYPE_FILE_UPLOAD]:this.buildFileUploadSetting,[O.Q.SettingsTypes.TYPE_CUSTOM]:this.buildCustomSetting},this.state={saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1,customComponentWrapperClass:"",confirmNeededId:"",showConfirmId:"",clientWarning:""}}static getDerivedStateFromProps(e,t){return e.schema&&e.schema.id!==t.prevSchemaId?jt({prevSchemaId:e.schema.id,saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1},At.getStateFromConfig(e.config,e.schema,e.roles)):null}getConfigFromState(e){const t=this.props.schema;if(t){if((t.settings||[]).forEach(t=>{if(!t.key)return;if(t.type===O.Q.SettingsTypes.TYPE_PERMISSION)return void this.setConfigValue(e,t.key,null);let a=this.getSettingValue(t);const n=At.getConfigValue(e,t.key);t.onConfigSave&&(a=t.onConfigSave(a,n)),this.setConfigValue(e,t.key,a)}),t.onConfigSave)return t.onConfigSave(e,this.props.config)}return e}static getStateFromConfig(e,t,a){let n={};if(t){(t.settings||[]).forEach(t=>{if(!t.key)return;if(t.type===O.Q.SettingsTypes.TYPE_PERMISSION){try{n[t.key]="true"===function(e,t){for(const a of function*(e,t){for(const a in e)if(e.hasOwnProperty(a)){const n=e[a].some(e=>{const a=t[e.roleName];return e.shouldHave&&!a.permissions.includes(e.permission)||!e.shouldHave&&a.permissions.includes(e.permission)});yield{value:a,allConditionsAreMet:!n}}}(Be[e],t))if(a.allConditionsAreMet)return a.value;throw new Error("No matching mapping value found for key '".concat(e,"' with the given roles."))}(t.permissions_mapping_name,a)}catch(e){n[t.key]=!1}return}let s=At.getConfigValue(e,t.key);t.onConfigLoad&&(s=t.onConfigLoad(s,e)),n[t.key]=null==s?t.default:s}),t.onConfigLoad&&(n=jt({},n,{},t.onConfigLoad(e)))}return n}getSetting(e){for(const t of this.props.schema.settings)if(t.key===e)return t;return null}getSettingValue(e){return(e.type!==O.Q.SettingsTypes.TYPE_BOOL||!this.isDisabled(e))&&(e.type===O.Q.SettingsTypes.TYPE_TEXT&&e.dynamic_value?e.dynamic_value(this.state[e.key],this.props.config,this.state,this.props.license):this.state[e.key])}static escapePathPart(e){return e.replace(/\./g,"+")}static unescapePathPart(e){return e.replace(/\+/g,".")}static getConfigValue(e,t){return t.split(".").reduce((e,t)=>e?e[At.unescapePathPart(t)]:null,e)}setConfigValue(e,t,a){!function e(t,n){const s=At.unescapePathPart(n[0]);1===n.length?t[s]=a:(null==t[s]&&(t[s]={}),e(t[s],n.slice(1)))}(e,t.split("."))}}Pt(At,"propTypes",{config:j.a.object,environmentConfig:j.a.object,setNavigationBlocked:j.a.func,schema:j.a.object,roles:j.a.object,license:j.a.object,editRole:j.a.func,updateConfig:j.a.func.isRequired});var Rt=At;function Nt(e){const t="PluginSettings.PluginStates."+At.escapePathPart(e.id)+".Enable";return{type:O.j.SettingsTypes.TYPE_BOOL,key:t,label:Object(M.b)("admin.plugin.enable_plugin"),label_default:"Enable Plugin: ",help_text:Object(M.b)("admin.plugin.enable_plugin.help"),help_text_default:"When true, this plugin is enabled."}}function Dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function It(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(a),!0).forEach((function(t){Lt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Bt=Object(r.connect)((function(){const e=Object(E.createSelector)((e,t)=>e.entities.admin.plugins[t],(e,t)=>Ho(e,t),(e,t)=>{if(!e)return null;const a=At.escapePathPart(e.id),n="PluginSettings.PluginStates."+a+".Enable";let s=[];return e.settings_schema&&e.settings_schema.settings&&(s=e.settings_schema.settings.map(s=>{const i=s.key.toLowerCase();let r=null,o="",l=s.type,c=s.display_name,d=Uo.stateIsFalse(n);return t[i]?(r=t[i].component,l=O.j.SettingsTypes.TYPE_CUSTOM):s.type===O.j.SettingsTypes.TYPE_CUSTOM&&(l=O.j.SettingsTypes.TYPE_BANNER,c=Object(U.jb)("admin.plugin.customSetting.pluginDisabledWarning","In order to view this setting, enable the plugin and click Save."),o="warning",d=Uo.stateIsTrue(n)),It({},s,{type:l,key:"PluginSettings.Plugins."+a+"."+i,help_text_markdown:!0,label:c,translate:Boolean(e.translate),isDisabled:d,banner_type:o,component:r,showTitle:!!t[i]&&t[i].options.showTitle})})),s.unshift(Nt(e)),It({},e.settings_schema,{id:e.id,name:e.name,settings:s,translate:Boolean(e.translate)})});return(t,a)=>{const n=a.match.params.plugin_id;return{schema:e(t,n),roles:Object(h.getRoles)(t)}}}))(Rt),Ut=a(325),Ft=a(18);class qt extends x.a.PureComponent{render(){return x.a.createElement(w.a,{id:"generic_icons.reload",defaultMessage:"Reload Icon"},e=>x.a.createElement("i",{className:"fa fa-refresh",title:e}))}}var Gt=a(1152);function Ht(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Wt extends x.a.PureComponent{constructor(e){super(e),Ht(this,"reload",()=>{this.setState({loadingReports:!0}),this.props.actions.getComplianceReports().then(()=>this.setState({loadingReports:!1}))}),Ht(this,"runReport",e=>{e.preventDefault(),this.setState({runningReport:!0});const t={};t.desc=this.descInput.current.value,t.emails=this.emailsInput.current.value,t.keywords=this.keywordsInput.current.value,t.start_at=Date.parse(this.fromInput.current.value),t.end_at=Date.parse(this.toInput.current.value),this.props.actions.createComplianceReport(t).then(({data:e})=>{e&&(this.emailsInput.current.value="",this.keywordsInput.current.value="",this.descInput.current.value="",this.fromInput.current.value="",this.toInput.current.value=""),this.setState({runningReport:!1}),this.props.actions.getComplianceReports()})}),this.state={loadingReports:!0},this.descInput=x.a.createRef(),this.emailsInput=x.a.createRef(),this.fromInput=x.a.createRef(),this.keywordsInput=x.a.createRef(),this.toInput=x.a.createRef()}componentDidMount(){this.props.isLicensed&&this.props.enabled&&this.props.actions.getComplianceReports().then(()=>this.setState({loadingReports:!1}))}getDateTime(e){const t=new Date(e);return x.a.createElement("span",{style:zt.date},x.a.createElement(Z.a,{value:t,day:"2-digit",month:"short",year:"numeric"})," - ",x.a.createElement(Z.b,{value:t,hour:"2-digit",minute:"2-digit"}))}render(){if(!this.props.isLicensed||!this.props.enabled)return x.a.createElement("div",null);let e=null;if(this.state.loadingReports)e=x.a.createElement(ee.a,null);else{for(var t=[],a=0;a<this.props.reports.length;a++){const e=this.props.reports[a];let n="";"adhoc"===e.type&&(n=x.a.createElement("span",null,x.a.createElement(w.a,{id:"admin.compliance_reports.from",defaultMessage:"From:"})," ",this.getDateTime(e.start_at),x.a.createElement("br",null),x.a.createElement(w.a,{id:"admin.compliance_reports.to",defaultMessage:"To:"})," ",this.getDateTime(e.end_at),x.a.createElement("br",null),x.a.createElement(w.a,{id:"admin.compliance_reports.emails",defaultMessage:"Emails:"})," ",e.emails,x.a.createElement("br",null),x.a.createElement(w.a,{id:"admin.compliance_reports.keywords",defaultMessage:"Keywords:"})," ",e.keywords));let s="",i="";"finished"===e.status?(s=x.a.createElement("a",{href:"".concat(Ft.Client4.getBaseRoute(),"/compliance/reports/").concat(e.id,"/download")},x.a.createElement(w.a,{id:"admin.compliance_table.download",defaultMessage:"Download"})),i=x.a.createElement("span",{className:"status-icon-success"},x.a.createElement(w.a,{id:"admin.compliance_table.success",defaultMessage:"Success"}))):"running"===e.status?i=x.a.createElement("span",{className:"status-icon-warning"},x.a.createElement(w.a,{id:"admin.compliance_table.pending",defaultMessage:"Pending"})):"failed"===e.status&&(i=x.a.createElement("span",{className:"status-icon-error"},x.a.createElement(w.a,{id:"admin.compliance_table.failed",defaultMessage:"Failed"})));let r=e.user_id;const o=this.props.users[e.user_id];o&&(r=o.email),t[a]=x.a.createElement("tr",{key:e.id},x.a.createElement("td",null,i),x.a.createElement("td",{style:zt.dataCell},s),x.a.createElement("td",null,this.getDateTime(e.create_at)),x.a.createElement("td",null,e.count),x.a.createElement("td",null,e.type),x.a.createElement("td",{style:zt.dataCell},e.desc),x.a.createElement("td",null,r),x.a.createElement("td",{style:zt.dataCell},n))}e=x.a.createElement("div",{style:zt.content},x.a.createElement("table",{className:"table"},x.a.createElement("thead",null,x.a.createElement("tr",null,x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.status",defaultMessage:"Status"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.files",defaultMessage:"Files"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.timestamp",defaultMessage:"Timestamp"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.records",defaultMessage:"Records"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.type",defaultMessage:"Type"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.desc",defaultMessage:"Description"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.userId",defaultMessage:"Requested By"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.compliance_table.params",defaultMessage:"Params"})))),x.a.createElement("tbody",null,t)))}let n="";return this.props.serverError&&(n=x.a.createElement("div",{className:"form-group has-error",style:zt.serverError},x.a.createElement("label",{className:"control-label"},this.props.serverError))),x.a.createElement("div",{className:"panel compliance-panel"},x.a.createElement("h4",null,x.a.createElement(w.a,{id:"admin.compliance_reports.title",defaultMessage:"Compliance Reports"})),x.a.createElement("div",{className:"row"},x.a.createElement("div",{className:"col-sm-6 col-md-4 form-group"},x.a.createElement("label",null,x.a.createElement(w.a,{id:"admin.compliance_reports.desc",defaultMessage:"Job Name:"})),x.a.createElement(Gt.a,{type:"text",className:"form-control",id:"desc",ref:this.descInput,placeholder:{id:Object(M.b)("admin.compliance_reports.desc_placeholder"),defaultMessage:'E.g. "Audit 445 for HR"'}})),x.a.createElement("div",{className:"col-sm-3 col-md-2 form-group"},x.a.createElement("label",null,x.a.createElement(w.a,{id:"admin.compliance_reports.from",defaultMessage:"From:"})),x.a.createElement(Gt.a,{type:"text",className:"form-control",id:"from",ref:this.fromInput,placeholder:{id:Object(M.b)("admin.compliance_reports.from_placeholder"),defaultMessage:'E.g. "2016-03-11"'}})),x.a.createElement("div",{className:"col-sm-3 col-md-2 form-group"},x.a.createElement("label",null,x.a.createElement(w.a,{id:"admin.compliance_reports.to",defaultMessage:"To:"})),x.a.createElement(Gt.a,{type:"text",className:"form-control",id:"to",ref:this.toInput,placeholder:{id:Object(M.b)("admin.compliance_reports.to_placeholder"),defaultMessage:'E.g. "2016-03-15"'}}))),x.a.createElement("div",{className:"row"},x.a.createElement("div",{className:"col-sm-6 col-md-4 form-group"},x.a.createElement("label",null,x.a.createElement(w.a,{id:"admin.compliance_reports.emails",defaultMessage:"Emails:"})),x.a.createElement(Gt.a,{type:"text",className:"form-control",id:"emails",ref:this.emailsInput,placeholder:{id:Object(M.b)("admin.compliance_reports.emails_placeholder"),defaultMessage:'E.g. "bill@example.com, bob@example.com"'}})),x.a.createElement("div",{className:"col-sm-6 col-md-4 form-group"},x.a.createElement("label",null,x.a.createElement(w.a,{id:"admin.compliance_reports.keywords",defaultMessage:"Keywords:"})),x.a.createElement(Gt.a,{type:"text",className:"form-control",id:"keywords",ref:this.keywordsInput,placeholder:{id:Object(M.b)("admin.compliance_reports.keywords_placeholder"),defaultMessage:'E.g. "shorting stock"'}}))),x.a.createElement("div",{className:"clearfix"},x.a.createElement("button",{id:"run-button",type:"submit",className:"btn btn-primary",onClick:this.runReport},x.a.createElement(w.a,{id:"admin.compliance_reports.run",defaultMessage:"Run Compliance Report"}))),n,x.a.createElement("div",{className:"text-right"},x.a.createElement("button",{type:"submit",className:"btn btn-link",disabled:this.state.runningReport,onClick:this.reload},x.a.createElement(qt,null),x.a.createElement(w.a,{id:"admin.compliance_reports.reload",defaultMessage:"Reload Completed Compliance Reports"}))),x.a.createElement("div",{className:"compliance-panel__table"},e))}}Ht(Wt,"propTypes",{isLicensed:j.a.bool.isRequired,enabled:j.a.bool.isRequired,reports:j.a.arrayOf(j.a.object).isRequired,users:j.a.object.isRequired,serverError:j.a.string,actions:j.a.shape({getComplianceReports:j.a.func.isRequired,createComplianceReport:j.a.func.isRequired}).isRequired});const zt={content:{margin:10},greenStatus:{color:"green"},redStatus:{color:"red"},dataCell:{whiteSpace:"nowrap"},date:{whiteSpace:"nowrap"},serverError:{marginTop:"10px"}},Yt=Object(E.createSelector)(e=>e.entities.users.profiles,e=>e.entities.admin.complianceReports,(e,t)=>{const a={};return Object.values(t).forEach(t=>{const n=e[t.user_id];n&&(a[n.id]=n)}),a});var Vt=Object(r.connect)((function(e){const t="true"===Object(m.getLicense)(e).IsLicensed;let a=!1;const n=Object(d.getConfig)(e);let s;n&&n.ComplianceSettings&&(a=n.ComplianceSettings.Enable);const i=e.requests.admin.createCompliance.error;return i&&(s=i.message),{isLicensed:t,enabled:a,reports:Object.values(Object(d.getComplianceReports)(e)).sort((e,t)=>t.create_at-e.create_at),serverError:s,users:Yt(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getComplianceReports:l.getComplianceReports,createComplianceReport:l.createComplianceReport},e)}}))(Wt),Jt=a(1533);function Xt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kt extends x.a.PureComponent{constructor(e){super(e),Xt(this,"reload",()=>{this.setState({loadingAudits:!0}),this.props.actions.getAudits().then(()=>this.setState({loadingAudits:!1}))}),Xt(this,"activityLogHeader",()=>x.a.createElement("div",{style:{clear:"both"}},x.a.createElement("h4",{style:{display:"inline-block",marginBottom:"6px"}},x.a.createElement(w.a,{id:"admin.complianceMonitoring.userActivityLogsTitle",defaultMessage:"User Activity Logs"})),x.a.createElement("button",{type:"submit",className:"btn btn-link pull-right",onClick:this.reload},x.a.createElement(qt,null),x.a.createElement(w.a,{id:"admin.audits.reload",defaultMessage:"Reload User Activity Logs"})))),Xt(this,"renderComplianceReports",()=>this.props.isLicensed?x.a.createElement(Vt,null):x.a.createElement("div",null)),this.state={loadingAudits:!0}}componentDidMount(){this.props.actions.getAudits().then(()=>this.setState({loadingAudits:!1}))}render(){let e=null;return e=this.state.loadingAudits?x.a.createElement(ee.a,null):x.a.createElement("div",null,x.a.createElement(Jt.a,{audits:this.props.audits,showUserId:!0,showIp:!0,showSession:!0})),x.a.createElement("div",null,this.renderComplianceReports(),x.a.createElement("div",{className:"panel compliance-panel"},this.activityLogHeader(),x.a.createElement("div",{className:"compliance-panel__table"},e)))}}Xt(Kt,"propTypes",{isLicensed:j.a.bool.isRequired,audits:j.a.any.isRequired,actions:j.a.shape({getAudits:j.a.func.isRequired}).isRequired});var Qt=Object(r.connect)((function(e){return{isLicensed:"true"===Object(m.getLicense)(e).Compliance,audits:Object.values(d.getAudits(e))}}),(function(e){return{actions:Object(o.bindActionCreators)({getAudits:l.getAudits},e)}}))(Kt);a(74);function $t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zt extends x.a.Component{static get propTypes(){return{id:j.a.string.isRequired,value:j.a.array.isRequired,onChange:j.a.func.isRequired,disabled:j.a.bool,setByEnv:j.a.bool.isRequired}}constructor(e){super(e),$t(this,"stringToArray",e=>e.split(",").map(e=>e.trim()).filter(Boolean)),$t(this,"arrayToString",e=>e.join(",")),$t(this,"handleChange",e=>{const t=this.stringToArray(e.target.value);this.props.onChange(this.props.id,t),this.setState({value:e.target.value})}),this.state={value:this.arrayToString(e.value)}}render(){const e=U.jb("admin.customization.customUrlSchemes","Custom URL Schemes:"),t=U.jb("admin.customization.customUrlSchemesDesc",'Allows message text to link if it begins with any of the comma-separated URL schemes listed. By default, the following schemes will create links: "http", "https", "ftp", "tel", and "mailto".');return x.a.createElement(Te,{label:e,helpText:t,inputId:this.props.id,setByEnv:this.props.setByEnv},x.a.createElement(Gt.a,{id:this.props.id,className:"form-control",type:"text",placeholder:{id:Object(M.b)("admin.customization.customUrlSchemesPlaceholder"),defaultMessage:'E.g.: "git,smtp"'},value:this.state.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}))}}function ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ta extends x.a.Component{constructor(...e){super(...e),ea(this,"handleChange",(e,t,a=!1)=>{const n=!1===t;let s="";n&&(s=x.a.createElement(w.a,{id:"admin.guest_access.disableConfirmWarning",defaultMessage:"All current guest account sessions will be revoked, and marked as inactive"})),this.props.onChange(e,t,n,a,s)})}render(){const e=x.a.createElement(w.a,{id:"admin.guest_access.enableTitle",defaultMessage:"Enable Guest Access: "}),t=x.a.createElement(P.b,{id:"admin.guest_access.enableDescription",defaultMessage:"When true, external guest can be invited to channels within teams. Please see [Permissions Schemes](../user_management/permissions/system_scheme) for which roles can invite guests."});return x.a.createElement(x.a.Fragment,null,x.a.createElement(we,{id:this.props.id,value:this.props.value,label:e,helpText:t,setByEnv:this.props.setByEnv,onChange:this.handleChange}),x.a.createElement(ge.a,{show:this.props.showConfirm&&!1===this.props.value,title:x.a.createElement(w.a,{id:"admin.guest_access.disableConfirmTitle",defaultMessage:"Save and Disable Guest Access?"}),message:x.a.createElement(w.a,{id:"admin.guest_access.disableConfirmMessage",defaultMessage:"Disabling guest access will revoke all current Guest Account sessions. Guests will no longer be able to login and new guests cannot be invited into Mattermost. Guest users will be marked as inactive in user lists. Enabling this feature will not reinstate previous guest accounts. Are you sure you wish to remove these users?"}),confirmButtonText:x.a.createElement(w.a,{id:"admin.guest_access.disableConfirmButton",defaultMessage:"Save and Disable Guest Access"}),onConfirm:()=>{this.handleChange(this.props.id,!1,!0),this.setState({showConfirm:!1})},onCancel:this.props.cancelSubmit}))}}ea(ta,"propTypes",{id:j.a.string.isRequired,value:j.a.bool.isRequired,onChange:j.a.func.isRequired,cancelSubmit:j.a.func.isRequired,disabled:j.a.bool,setByEnv:j.a.bool.isRequired,showConfirm:j.a.bool.isRequired});var aa=a(610);function na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class sa extends x.a.Component{constructor(e){super(e),na(this,"handleChange",()=>{const e=this.refs.fileInput;e&&e.files.length>0&&this.setState({fileSelected:!0,fileName:e.files[0].name})}),na(this,"handleSubmit",async e=>{e.preventDefault();const t=this.refs.fileInput;if(!t||0===t.files.length)return;const a=t.files[0];this.setState({uploading:!0});const{error:n}=await this.props.actions.uploadLicense(a);if(n)return U.d(t[0]),void this.setState({fileSelected:!1,fileName:null,serverError:n.message,uploading:!1});await this.props.actions.getLicenseConfig(),this.setState({fileSelected:!1,fileName:null,serverError:null,uploading:!1})}),na(this,"handleRemove",async e=>{e.preventDefault(),this.setState({removing:!0});const{error:t}=await this.props.actions.removeLicense();t?this.setState({fileSelected:!1,fileName:null,serverError:t.message,removing:!1}):(await this.props.actions.getLicenseConfig(),this.setState({fileSelected:!1,fileName:null,serverError:null,removing:!1}))}),this.state={fileSelected:!1,fileName:null,serverError:null,removing:!1,uploading:!1}}componentDidMount(){this.props.actions.getLicenseConfig()}render(){let e="";this.state.serverError&&(e=x.a.createElement("div",{className:"col-sm-12"},x.a.createElement("div",{className:"form-group has-error"},x.a.createElement("label",{className:"control-label"},this.state.serverError))));var t="btn";this.state.fileSelected&&(t="btn btn-primary");const{license:a}=this.props,{uploading:n}=this.state;let s,i,r;const o=x.a.createElement(x.a.Fragment,null,x.a.createElement(Z.a,{value:new Date(parseInt(a.IssuedAt,10))})," ",x.a.createElement(Z.b,{value:new Date(parseInt(a.IssuedAt,10))})),l=x.a.createElement(Z.a,{value:new Date(parseInt(a.StartsAt,10))}),c=x.a.createElement(Z.a,{value:new Date(parseInt(a.ExpiresAt,10))});if("true"!==a.IsLicensed||n){let a;s=x.a.createElement("p",null,"Mattermost Enterprise Edition. A license is required to unlock enterprise features. Start a trial subscription at ",x.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://mattermost.com/trial/?utm_medium=product&utm_source=product-trial"},"https://mattermost.com/trial/")),i="This software is offered under a commercial license.\n\nSee ENTERPRISE-EDITION-LICENSE.txt in your root install directory for details. See NOTICE.txt for information about open source software used in this system.",a=this.state.fileName?this.state.fileName:x.a.createElement(w.a,{id:"admin.license.noFile",defaultMessage:"No file uploaded"});let o=x.a.createElement(w.a,{id:"admin.license.upload",defaultMessage:"Upload"});n&&(o=x.a.createElement(w.a,{id:"admin.license.uploading",defaultMessage:"Uploading License..."})),r=x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("div",{className:"file__upload"},x.a.createElement("button",{className:"btn btn-primary"},x.a.createElement(w.a,{id:"admin.license.choose",defaultMessage:"Choose File"})),x.a.createElement("input",{ref:"fileInput",type:"file",accept:".mattermost-license",onChange:this.handleChange})),x.a.createElement("button",{className:t,disabled:!this.state.fileSelected,onClick:this.handleSubmit,id:"upload-button"},o),x.a.createElement("div",{className:"help-text m-0"},a),x.a.createElement("br",null),e,x.a.createElement("p",{className:"help-text m-0"},x.a.createElement(P.b,{id:"admin.license.uploadDesc",defaultMessage:"Upload a license key for Mattermost Enterprise Edition to upgrade this server. [Visit us online](!http://mattermost.com) to learn more about the benefits of Enterprise Edition or to purchase a key."})))}else{const e=a.SkuShortName?x.a.createElement(x.a.Fragment,null,"Edition: Mattermost Enterprise Edition ".concat(a.SkuShortName),x.a.createElement("br",null)):null;s="Mattermost Enterprise Edition. Enterprise features on this server have been unlocked with a license key and a valid subscription.",i=x.a.createElement("div",null,x.a.createElement("p",null,"This software is offered under a commercial license.\n\nSee ENTERPRISE-EDITION-LICENSE.txt in your root install directory for details. See NOTICE.txt for information about open source software used in this system.\n\nYour subscription details are as follows:"),"Name: ".concat(a.Name),x.a.createElement("br",null),"Company or organization name: ".concat(a.Company),x.a.createElement("br",null),e,"Number of users: ".concat(a.Users),x.a.createElement("br",null),"License issued: ",o,x.a.createElement("br",null),"Start date of license: ",l,x.a.createElement("br",null),"Expiry date of license: ",c,x.a.createElement("br",null),x.a.createElement("br",null),"See also ",x.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://about.mattermost.com/enterprise-edition-terms/"},"Enterprise Edition Terms of Service")," and ",x.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://about.mattermost.com/default-privacy-policy/"},"Privacy Policy."));let t=x.a.createElement(w.a,{id:"admin.license.keyRemove",defaultMessage:"Remove Enterprise License and Downgrade Server"});this.state.removing&&(t=x.a.createElement(w.a,{id:"admin.license.removing",defaultMessage:"Removing License..."})),r=x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("button",{className:"btn btn-danger",onClick:this.handleRemove,id:"remove-button"},t),x.a.createElement("br",null),x.a.createElement("br",null),x.a.createElement("p",{className:"help-text"},"If you migrate servers you may need to remove your license key to install it elsewhere. You can remove the key here, which will revert functionality to that of Team Edition."))}return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement(N,{id:"admin.license.title",defaultMessage:"Edition and License"}),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("form",{className:"form-horizontal",role:"form"},x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.license.edition",defaultMessage:"Edition: "})),x.a.createElement("div",{className:"col-sm-8"},s)),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.license.type",defaultMessage:"License: "})),x.a.createElement("div",{className:"col-sm-8"},i)),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.license.key",defaultMessage:"License Key: "})),r)))))}}na(sa,"propTypes",{license:j.a.object.isRequired,config:j.a.object,actions:j.a.shape({getLicenseConfig:j.a.func.isRequired,uploadLicense:j.a.func.isRequired,removeLicense:j.a.func.isRequired}).isRequired});var ia=Object(r.connect)(null,(function(e){return{actions:Object(o.bindActionCreators)({getLicenseConfig:aa.getLicenseConfig,uploadLicense:l.uploadLicense,removeLicense:l.removeLicense},e)}}))(sa),ra=a(1292),oa=a(1293);a(1969);const la=e=>x.a.createElement("div",{className:"AdminPanel "+e.className,id:e.id},x.a.createElement("div",{className:"header",onClick:e.onHeaderClick},x.a.createElement("div",null,x.a.createElement("h3",null,x.a.createElement(w.a,{id:e.titleId,defaultMessage:e.titleDefault})),x.a.createElement("div",{className:"mt-2"},x.a.createElement(P.b,{id:e.subtitleId,defaultMessage:e.subtitleDefault,values:e.subtitleValues}))),e.button&&x.a.createElement("div",{className:"button"},e.button)),e.children);la.propTypes={id:j.a.string,className:j.a.string,onHeaderClick:j.a.func,titleId:j.a.string.isRequired,titleDefault:j.a.string.isRequired,subtitleId:j.a.string.isRequired,subtitleDefault:j.a.string.isRequired,subtitleValues:j.a.any,button:j.a.node,children:j.a.node},la.defaultProps={className:""};var ca=la;const da=e=>{const t=x.a.createElement(de.a,{"data-testid":"".concat(e.id,"-link"),className:"btn btn-primary",to:e.url,onClick:e.disabled?e=>e.preventDefault():()=>null},x.a.createElement(w.a,{id:e.linkTextId,defaultMessage:e.linkTextDefault}));return x.a.createElement(ca,{className:"AdminPanelWithLink "+e.className,id:e.id,"data-testid":e.id,titleId:e.titleId,titleDefault:e.titleDefault,subtitleId:e.subtitleId,subtitleDefault:e.subtitleDefault,button:t},e.children)};da.propTypes={children:j.a.node,className:j.a.string,id:j.a.string,titleId:j.a.string.isRequired,titleDefault:j.a.string.isRequired,subtitleId:j.a.string.isRequired,subtitleDefault:j.a.string.isRequired,url:j.a.string.isRequired,disabled:j.a.bool.isRequired,linkTextId:j.a.string.isRequired,linkTextDefault:j.a.string.isRequired},da.defaultProps={className:""};var ua=da;function ma(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ha extends x.a.Component{constructor(e){super(e),ma(this,"renderConfirmModal",()=>{const e=x.a.createElement(w.a,{id:"admin.permissions.permissionsSchemeSummary.deleteSchemeTitle",defaultMessage:"Delete {scheme} scheme?",values:{scheme:this.props.scheme.display_name}});let t=null;this.state.serverError&&(t=x.a.createElement("div",{className:"permission-scheme-summary-error-message"},x.a.createElement("i",{className:"fa fa-exclamation-circle"})," ",this.state.serverError));const a=x.a.createElement("div",null,x.a.createElement("p",null,x.a.createElement(w.a,{id:"admin.permissions.permissionsSchemeSummary.deleteConfirmQuestion",defaultMessage:"The permissions in the teams using this scheme will reset to the defaults in the System Scheme. Are you sure you want to delete the {schemeName} scheme?",values:{schemeName:this.props.scheme.display_name}})),t),n=x.a.createElement(Fe.a,{loading:this.state.deleting,text:U.jb("admin.permissions.permissionsSchemeSummary.deleting","Deleting...")},x.a.createElement(w.a,{id:"admin.permissions.permissionsSchemeSummary.deleteConfirmButton",defaultMessage:"Yes, Delete"}));return x.a.createElement(ge.a,{show:this.state.showConfirmModal,title:e,message:a,confirmButtonText:n,onConfirm:this.handleDeleteConfirmed,onCancel:this.handleDeleteCanceled})}),ma(this,"stopPropagation",e=>{e.stopPropagation()}),ma(this,"handleDeleteCanceled",()=>{this.setState({showConfirmModal:!1})}),ma(this,"handleDeleteConfirmed",async()=>{this.setState({deleting:!0,serverError:null});const e=await this.props.actions.deleteScheme(this.props.scheme.id);e.error?this.setState({deleting:!1,serverError:e.error.message}):this.setState({deleting:!1,showConfirmModal:!1})}),ma(this,"delete",e=>{e.stopPropagation(),this.setState({showConfirmModal:!0,serverError:null})}),ma(this,"goToEdit",()=>{this.props.history.push("/admin_console/user_management/permissions/team_override_scheme/"+this.props.scheme.id)}),ma(this,"render",()=>{const e=this.props.scheme;let t=this.props.teams?this.props.teams.map(e=>x.a.createElement("span",{className:"team",key:e.id},e.display_name)):[],a=null;t.length>8&&(a=x.a.createElement(se.a,{delayShow:O.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:x.a.createElement(ne.a,{className:"team-scheme-extra-teams-overlay",id:e.id+"-extra-teams-overlay"},t.slice(8))},x.a.createElement("span",{className:"team",key:"extra-teams"},x.a.createElement(w.a,{id:"admin.permissions.permissionsSchemeSummary.moreTeams",defaultMessage:"+{number} more",values:{number:t.length-8}}))),t=t.slice(0,8));const n=this.renderConfirmModal();return x.a.createElement("div",{className:"permissions-scheme-summary","data-testid":"permissions-scheme-summary",onClick:this.goToEdit},x.a.createElement("div",{onClick:this.stopPropagation},n),x.a.createElement("div",{className:"permissions-scheme-summary--header"},x.a.createElement("div",{className:"title"},e.display_name),x.a.createElement("div",{className:"actions"},x.a.createElement(de.a,{"data-testid":"".concat(e.display_name,"-edit"),className:"edit-button",to:"/admin_console/user_management/permissions/team_override_scheme/"+e.id},x.a.createElement(w.a,{id:"admin.permissions.permissionsSchemeSummary.edit",defaultMessage:"Edit"})),"-",x.a.createElement("a",{"data-testid":"".concat(e.display_name,"-delete"),className:"delete-button",onClick:this.delete},x.a.createElement(w.a,{id:"admin.permissions.permissionsSchemeSummary.delete",defaultMessage:"Delete"})))),x.a.createElement("div",{className:"permissions-scheme-summary--description"},e.description),x.a.createElement("div",{className:"permissions-scheme-summary--teams"},t,a))}),this.state={showConfirmModal:!1,deleting:!1,serverError:null}}}ma(ha,"propTypes",{scheme:j.a.object.isRequired,teams:j.a.array,actions:j.a.shape({deleteScheme:j.a.func.isRequired}).isRequired});var pa=Object(r.connect)((function(){const e=Object(oa.makeGetSchemeTeams)();return function(t,a){return{teams:e(t,{schemeId:a.scheme.id})}}}),(function(e){return{actions:Object(o.bindActionCreators)({deleteScheme:ra.deleteScheme},e)}}))(ha);function ga(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fa extends x.a.PureComponent{constructor(e){super(e),ga(this,"loadMoreSchemes",()=>{this.setState({loadingMore:!0}),this.props.actions.loadSchemes("team",this.state.page+1,30).then(e=>{const t=[];for(const a of e.data)t.push(this.props.actions.loadSchemeTeams(a.id));Promise.all(t).then(()=>this.setState({loadingMore:!1,page:this.state.page+1}))})}),ga(this,"teamOverrideSchemesMigrationView",()=>{if(this.state.phase2MigrationIsComplete)return null;const e=x.a.createElement("a",{href:"https://docs.mattermost.com/administration/config-settings.html#jobs",rel:"noopener noreferrer",target:"_blank"},x.a.createElement(w.a,{id:"admin.permissions.documentationLinkText",defaultMessage:"documentation"}));return this.props.jobsAreEnabled&&!this.props.clusterIsEnabled?this.teamOverrideUnavalableView(Object(M.b)("admin.permissions.teamOverrideSchemesInProgress"),"Migration job in progress: Team Override Schemes are not available until the job server completes the permissions migration. Learn more in the {documentationLink}.",e):this.teamOverrideUnavalableView(Object(M.b)("admin.permissions.teamOverrideSchemesNoJobsEnabled"),"Migration job on hold: Team Override Schemes are not available until the job server can execute the permissions migration. The job will be automatically started when the job server is enabled. Learn more in the {documentationLink}.",e)}),ga(this,"teamOverrideUnavalableView",(e,t,a)=>x.a.createElement("div",{className:"team-override-unavailable"},x.a.createElement("div",{className:"team-override-unavailable__inner"},x.a.createElement(w.a,{id:e,defaultMessage:t,values:{documentationLink:a}})))),ga(this,"renderTeamOverrideSchemes",()=>{const e=Object.values(this.props.schemes).map(e=>x.a.createElement(pa,{scheme:e,history:this.props.history,key:e.id})),t="true"===this.props.license.CustomPermissionsSchemes,a=this.teamOverrideSchemesMigrationView();return!!t&&x.a.createElement(ua,{id:"team-override-schemes",className:"permissions-block",titleId:Object(M.b)("admin.permissions.teamOverrideSchemesTitle"),titleDefault:"Team Override Schemes",subtitleId:Object(M.b)("admin.permissions.teamOverrideSchemesBannerText"),subtitleDefault:"Use when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme).",url:"/admin_console/user_management/permissions/team_override_scheme",disabled:null!==a,linkTextId:Object(M.b)("admin.permissions.teamOverrideSchemesNewButton"),linkTextDefault:"New Team Override Scheme"},0===e.length&&null===a&&x.a.createElement("div",{className:"no-team-schemes"},x.a.createElement(w.a,{id:"admin.permissions.teamOverrideSchemesNoSchemes",defaultMessage:"No team override schemes created."})),a,e.length>0&&e,e.length===30*(this.state.page+1)&&x.a.createElement("button",{className:"more-schemes theme style--none color--link",onClick:this.loadMoreSchemes,disabled:this.state.loadingMore},x.a.createElement(Fe.a,{loading:this.state.loadingMore,text:U.jb("admin.permissions.loadingMoreSchemes","Loading...")},x.a.createElement(w.a,{id:"admin.permissions.loadMoreSchemes",defaultMessage:"Load more schemes"}))))}),ga(this,"render",()=>{if(this.state.loading)return x.a.createElement(ee.a,null);const e=this.teamOverrideSchemesMigrationView();return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement(N,{id:"admin.permissions.permissionSchemes",defaultMessage:"Permission Schemes"}),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"banner info"},x.a.createElement("div",{className:"banner__content"},x.a.createElement("span",null,x.a.createElement(P.b,{id:"admin.permissions.introBanner",defaultMessage:"Permission Schemes set the default permissions for Team Admins, Channel Admins and everyone else. Learn more about permission schemes in our [documentation](!https://about.mattermost.com/default-advanced-permissions)."})))),x.a.createElement(ua,{titleId:Object(M.b)("admin.permissions.systemSchemeBannerTitle"),titleDefault:"System Scheme",subtitleId:Object(M.b)("admin.permissions.systemSchemeBannerText"),subtitleDefault:"Set the default permissions inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied.",url:"/admin_console/user_management/permissions/system_scheme",disabled:null!==e,linkTextId:Object(M.b)("admin.permissions.systemSchemeBannerButton"),linkTextDefault:"Edit Scheme"}),this.renderTeamOverrideSchemes())))}),this.state={loading:!0,loadingMore:!1,page:0,phase2MigrationIsComplete:!1}}componentDidMount(){let e=!0;this.props.actions.loadSchemes("team",0,30).then(t=>{501===t.error.status_code&&(e=!1);const a=[];for(const e of t.data)a.push(this.props.actions.loadSchemeTeams(e.id));Promise.all(a).then(()=>this.setState({loading:!1,phase2MigrationIsComplete:e}))}).catch(()=>{this.setState({loading:!1,phase2MigrationIsComplete:e})})}}ga(fa,"propTypes",{schemes:j.a.object.isRequired,jobsAreEnabled:j.a.bool,clusterIsEnabled:j.a.bool,license:j.a.shape({CustomPermissionsSchemes:j.a.string}),actions:j.a.shape({loadSchemes:j.a.func.isRequired,loadSchemeTeams:j.a.func.isRequired})}),ga(fa,"defaultProps",{schemes:{}}),Object(M.b)("admin.permissions.group.delete_posts.description"),Object(M.b)("admin.permissions.group.delete_posts.name"),Object(M.b)("admin.permissions.group.integrations.description"),Object(M.b)("admin.permissions.group.integrations.name"),Object(M.b)("admin.permissions.group.posts.description"),Object(M.b)("admin.permissions.group.posts.name"),Object(M.b)("admin.permissions.group.private_channel.description"),Object(M.b)("admin.permissions.group.private_channel.name"),Object(M.b)("admin.permissions.group.public_channel.description"),Object(M.b)("admin.permissions.group.public_channel.name"),Object(M.b)("admin.permissions.group.reactions.description"),Object(M.b)("admin.permissions.group.reactions.name"),Object(M.b)("admin.permissions.group.send_invites.description"),Object(M.b)("admin.permissions.group.send_invites.name"),Object(M.b)("admin.permissions.group.teams.description"),Object(M.b)("admin.permissions.group.teams.name"),Object(M.b)("admin.permissions.group.edit_posts.description"),Object(M.b)("admin.permissions.group.edit_posts.name"),Object(M.b)("admin.permissions.group.teams_team_scope.description"),Object(M.b)("admin.permissions.group.teams_team_scope.name"),Object(M.b)("admin.permissions.permission.assign_system_admin_role.description"),Object(M.b)("admin.permissions.permission.assign_system_admin_role.name"),Object(M.b)("admin.permissions.permission.create_direct_channel.description"),Object(M.b)("admin.permissions.permission.create_direct_channel.name"),Object(M.b)("admin.permissions.permission.create_group_channel.description"),Object(M.b)("admin.permissions.permission.create_group_channel.name"),Object(M.b)("admin.permissions.permission.create_private_channel.description"),Object(M.b)("admin.permissions.permission.create_private_channel.name"),Object(M.b)("admin.permissions.permission.create_public_channel.description"),Object(M.b)("admin.permissions.permission.create_public_channel.name"),Object(M.b)("admin.permissions.permission.create_team.description"),Object(M.b)("admin.permissions.permission.create_team.name"),Object(M.b)("admin.permissions.permission.create_user_access_token.description"),Object(M.b)("admin.permissions.permission.create_user_access_token.name"),Object(M.b)("admin.permissions.permission.delete_others_posts.description"),Object(M.b)("admin.permissions.permission.delete_others_posts.name"),Object(M.b)("admin.permissions.permission.delete_post.description"),Object(M.b)("admin.permissions.permission.delete_post.name"),Object(M.b)("admin.permissions.permission.delete_private_channel.description"),Object(M.b)("admin.permissions.permission.delete_private_channel.name"),Object(M.b)("admin.permissions.permission.delete_public_channel.description"),Object(M.b)("admin.permissions.permission.delete_public_channel.name"),Object(M.b)("admin.permissions.permission.edit_other_users.description"),Object(M.b)("admin.permissions.permission.edit_other_users.name"),Object(M.b)("admin.permissions.permission.edit_post.description"),Object(M.b)("admin.permissions.permission.edit_post.name"),Object(M.b)("admin.permissions.permission.import_team.description"),Object(M.b)("admin.permissions.permission.import_team.name"),Object(M.b)("admin.permissions.permission.list_team_channels.description"),Object(M.b)("admin.permissions.permission.list_team_channels.name"),Object(M.b)("admin.permissions.permission.list_users_without_team.description"),Object(M.b)("admin.permissions.permission.list_users_without_team.name"),Object(M.b)("admin.permissions.permission.manage_channel_roles.description"),Object(M.b)("admin.permissions.permission.manage_channel_roles.name"),Object(M.b)("admin.permissions.permission.create_emojis.description"),Object(M.b)("admin.permissions.permission.create_emojis.name"),Object(M.b)("admin.permissions.permission.delete_emojis.description"),Object(M.b)("admin.permissions.permission.delete_emojis.name"),Object(M.b)("admin.permissions.permission.delete_others_emojis.description"),Object(M.b)("admin.permissions.permission.delete_others_emojis.name"),Object(M.b)("admin.permissions.permission.manage_jobs.description"),Object(M.b)("admin.permissions.permission.manage_jobs.name"),Object(M.b)("admin.permissions.permission.manage_oauth.description"),Object(M.b)("admin.permissions.permission.manage_oauth.name"),Object(M.b)("admin.permissions.permission.manage_private_channel_members.description"),Object(M.b)("admin.permissions.permission.manage_private_channel_members.name"),Object(M.b)("admin.permissions.permission.manage_private_channel_properties.description"),Object(M.b)("admin.permissions.permission.manage_private_channel_properties.name"),Object(M.b)("admin.permissions.permission.manage_public_channel_members.description"),Object(M.b)("admin.permissions.permission.manage_public_channel_members.name"),Object(M.b)("admin.permissions.permission.manage_public_channel_properties.description"),Object(M.b)("admin.permissions.permission.manage_public_channel_properties.name"),Object(M.b)("admin.permissions.permission.manage_roles.description"),Object(M.b)("admin.permissions.permission.manage_roles.name"),Object(M.b)("admin.permissions.permission.manage_slash_commands.description"),Object(M.b)("admin.permissions.permission.manage_slash_commands.name"),Object(M.b)("admin.permissions.permission.manage_system.description"),Object(M.b)("admin.permissions.permission.manage_system.name"),Object(M.b)("admin.permissions.permission.manage_team.description"),Object(M.b)("admin.permissions.permission.manage_team.name"),Object(M.b)("admin.permissions.permission.manage_team_roles.description"),Object(M.b)("admin.permissions.permission.manage_team_roles.name"),Object(M.b)("admin.permissions.permission.manage_incoming_webhooks.description"),Object(M.b)("admin.permissions.permission.manage_incoming_webhooks.name"),Object(M.b)("admin.permissions.permission.manage_outgoing_webhooks.description"),Object(M.b)("admin.permissions.permission.manage_outgoing_webhooks.name"),Object(M.b)("admin.permissions.permission.permanent_delete_user.description"),Object(M.b)("admin.permissions.permission.permanent_delete_user.name"),Object(M.b)("admin.permissions.permission.read_channel.description"),Object(M.b)("admin.permissions.permission.read_channel.name"),Object(M.b)("admin.permissions.permission.read_user_access_token.description"),Object(M.b)("admin.permissions.permission.read_user_access_token.name"),Object(M.b)("admin.permissions.permission.remove_user_from_team.description"),Object(M.b)("admin.permissions.permission.remove_user_from_team.name"),Object(M.b)("admin.permissions.permission.revoke_user_access_token.description"),Object(M.b)("admin.permissions.permission.revoke_user_access_token.name"),Object(M.b)("admin.permissions.permission.upload_file.description"),Object(M.b)("admin.permissions.permission.upload_file.name"),Object(M.b)("admin.permissions.permission.use_channel_mentions.description"),Object(M.b)("admin.permissions.permission.use_channel_mentions.name"),Object(M.b)("admin.permissions.permission.use_group_mentions.description"),Object(M.b)("admin.permissions.permission.use_group_mentions.name"),Object(M.b)("admin.permissions.permission.view_team.description"),Object(M.b)("admin.permissions.permission.view_team.name"),Object(M.b)("admin.permissions.permission.edit_others_posts.description"),Object(M.b)("admin.permissions.permission.edit_others_posts.name"),Object(M.b)("admin.permissions.permission.invite_guest.name"),Object(M.b)("admin.permissions.permission.invite_guest.description"),Object(M.b)("admin.permissions.roles.all_users.name"),Object(M.b)("admin.permissions.roles.channel_admin.name"),Object(M.b)("admin.permissions.roles.channel_user.name"),Object(M.b)("admin.permissions.roles.system_admin.name"),Object(M.b)("admin.permissions.roles.system_user.name"),Object(M.b)("admin.permissions.roles.team_admin.name"),Object(M.b)("admin.permissions.roles.team_user.name");var ba=Object(r.connect)((function(e){const t=Object(oa.getSchemes)(e),a=Object(m.getConfig)(e);return{schemes:t,jobsAreEnabled:"true"===a.RunJobs,clusterIsEnabled:"true"===a.EnableCluster}}),(function(e){return{actions:Object(o.bindActionCreators)({loadSchemes:ra.getSchemes,loadSchemeTeams:ra.getSchemeTeams},e)}}))(fa),va=a(617),_a=a.n(va),ya=a(87);function Ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ta extends x.a.PureComponent{constructor(...e){super(...e),Sa(this,"handleClick",e=>{this.props.onClick&&this.props.onClick(e),this.props.blocked&&(e.preventDefault(),this.props.actions.deferNavigation(()=>{ya.a.push(this.props.to)}))})}render(){const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(a),!0).forEach((function(t){Sa(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ea(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props);return Reflect.deleteProperty(e,"blocked"),Reflect.deleteProperty(e,"actions"),x.a.createElement(de.b,Object.assign({},e,{onClick:this.handleClick}))}}Sa(Ta,"propTypes",{blocked:j.a.bool.isRequired,to:j.a.string.isRequired,actions:j.a.shape({deferNavigation:j.a.func.isRequired}).isRequired,children:j.a.oneOfType([j.a.string,j.a.node]),className:j.a.string,onClick:j.a.func});var xa=Object(r.connect)((function(e){return{blocked:Object(y.a)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({deferNavigation:_.f},e)}}))(Ta);class wa extends x.a.PureComponent{render(){return x.a.createElement("span",this.props,x.a.createElement("svg",{width:"30px",height:"30px",viewBox:"0 0 30 30"},x.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},x.a.createElement("g",{transform:"translate(-995.000000, -1372.000000)",id:"All-Team-Members"},x.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},x.a.createElement("g",{id:"Team-Administrators",transform:"translate(0.000000, 651.000000)"},x.a.createElement("g",{id:"accordion-header"},x.a.createElement("g",{id:"accordion---expanded",transform:"translate(750.000000, 23.000000)"},x.a.createElement("path",{d:"M23.1484532,13.3124932 C23.3437659,13.1171805 23.3437659,12.7968676 23.1484532,12.6015549 L21.8515766,11.3124908 C21.6562639,11.1171781 21.3437635,11.1171781 21.1484508,11.3124908 L15.0000083,17.4609333 L8.8515659,11.3124908 C8.65625317,11.1171781 8.34375279,11.1171781 8.14844006,11.3124908 L6.85156352,12.6015549 C6.65625078,12.7968676 6.65625078,13.1171805 6.85156352,13.3124932 L14.6484454,21.1015626 C14.8437582,21.2968754 15.1562585,21.2968754 15.3515713,21.1015626 L23.1484532,13.3124932 Z",id:"",fill:"#979797"}),x.a.createElement("circle",{id:"Oval-2",stroke:"#989898",strokeWidth:"2",cx:"15",cy:"15",r:"14"})))))))))}}const Oa=e=>x.a.createElement(ca,{className:"AdminPanelTogglable "+e.className+(e.open?"":" closed"),id:e.id,titleId:e.titleId,titleDefault:e.titleDefault,subtitleId:e.subtitleId,subtitleDefault:e.subtitleDefault,onHeaderClick:e.onToggle,button:x.a.createElement(wa,null)},e.children);Oa.propTypes={children:j.a.node,className:j.a.string,id:j.a.string,open:j.a.bool,titleId:j.a.string.isRequired,titleDefault:j.a.string.isRequired,subtitleId:j.a.string.isRequired,subtitleDefault:j.a.string.isRequired,onToggle:j.a.func},Oa.defaultProps={className:"",open:!0};var Ca=Oa,Ma=a(2),ka=a.n(Ma),ja=a(1236);class Pa extends x.a.PureComponent{render(){return x.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},x.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},x.a.createElement("g",{transform:"translate(-298.000000, -1273.000000)",id:"All-Team-Members"},x.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},x.a.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},x.a.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},x.a.createElement("g",{id:"row-checkbox---@all-@channel-Mentions",transform:"translate(0.000000, 375.000000)"},x.a.createElement("g",{id:"Stacked-Group"},x.a.createElement("g",{id:"data-table/1st/row-checkbox-label-base",transform:"translate(25.000000, 5.000000)"},x.a.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},x.a.createElement("path",{d:"M19,3 C20.1,3 21,3.9 21,5 L21,19 C21,20.1 20.1,21 19,21 L5,21 C3.9,21 3,20.1 3,19 L3,5 C3,3.9 3.9,3 5,3 L19,3 Z M7,11 L7,13 L17,13 L17,11 L7,11 Z",id:"checkbox---partial"})))))))))))}}function Aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ra extends x.a.PureComponent{render(){const{value:e,id:t}=this.props;let a=null,n="";return"checked"===e?(a=x.a.createElement(ja.a,null),n="checked"):"intermediate"===e&&(a=x.a.createElement(Pa,null),n="intermediate"),x.a.createElement("div",{className:"permission-check "+n,"data-testid":t},a)}}function Na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Aa(Ra,"propTypes",{value:j.a.string.isRequired,id:j.a.string}),Aa(Ra,"defaultProps",{value:"",id:""});class Da extends x.a.Component{constructor(e){super(e),Na(this,"closeTooltip",()=>{this.setState({open:!1})}),Na(this,"openTooltip",e=>{const t=e.currentTarget.querySelector("span"),a=t.offsetWidth<t.scrollWidth;this.setState({open:a})}),Na(this,"parentPermissionClicked",e=>{const t="inherit-link-wrapper"===e.target.parentElement.parentElement.className;"permission-description"===e.target.parentElement.className||t?t&&(this.props.selectRow(this.props.id),e.stopPropagation()):e.stopPropagation()}),this.id=Object(U.o)(),this.state={open:!1}}render(){const{inherited:e,id:t,rowType:a}=this.props;let n="";n=e?x.a.createElement("span",{className:"inherit-link-wrapper"},x.a.createElement(ce.a,{id:"admin.permissions.inherited_from",values:{name:this.props.intl.formatMessage({id:"admin.permissions.roles."+e.name+".name",defaultMessage:e.display_name})}})):x.a.createElement(w.a,{id:"admin.permissions."+a+"."+t+".description",values:this.props.additionalValues});let s=x.a.createElement(fe.a,{show:this.state.open,delayShow:O.Q.OVERLAY_TIME_DELAY,placement:"top",target:this.refs.content},x.a.createElement(ne.a,{id:this.id},n));return n.props.values&&Object.keys(n.props.values).length>0&&(s=null),n=x.a.createElement("span",{className:"permission-description",onClick:this.parentPermissionClicked,ref:"content",onMouseOver:this.openTooltip,onMouseOut:this.closeTooltip},n,s),n}}Na(Da,"propTypes",{intl:gt.a.isRequired,id:j.a.string.isRequired,rowType:j.a.string.isRequired,inherited:j.a.object,selectRow:j.a.func.isRequired,additionalValues:j.a.object});var Ia=Object(pt.c)(Da);function La(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ba extends x.a.Component{constructor(...e){super(...e),La(this,"toggleSelect",()=>{this.props.readOnly||this.props.onChange(this.props.id)}),La(this,"render",()=>{const{id:e,uniqId:t,inherited:a,value:n,readOnly:s,selected:i,additionalValues:r}=this.props;let o="permission-row";return s&&(o+=" read-only"),i===e&&(o+=" selected"),x.a.createElement("div",{className:o,onClick:this.toggleSelect,id:t},x.a.createElement(Ra,{value:n,id:"".concat(t,"-checkbox")}),x.a.createElement("span",{className:"permission-name"},x.a.createElement(w.a,{id:"admin.permissions.permission."+e+".name"})),x.a.createElement(Ia,{inherited:a,id:e,selectRow:this.props.selectRow,rowType:"permission",additionalValues:r}))})}}function Ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}La(Ba,"propTypes",{id:j.a.string.isRequired,uniqId:j.a.string.isRequired,inherited:j.a.object,readOnly:j.a.bool,selected:j.a.string,selectRow:j.a.func.isRequired,value:j.a.string.isRequired,onChange:j.a.func.isRequired,additionalValues:j.a.object});const Fa=e=>{let t=[];for(const a of e)"string"==typeof a?t.push(a):t=t.concat(Fa(a.permissions));return t};class qa extends x.a.Component{constructor(e){super(e),Ua(this,"toggleExpanded",e=>{e.stopPropagation(),this.setState({expanded:!this.state.expanded})}),Ua(this,"toggleSelectRow",e=>{this.props.readOnly||this.props.onChange([e])}),Ua(this,"toggleSelectSubGroup",e=>{this.props.readOnly||this.props.onChange(e)}),Ua(this,"toggleSelectGroup",()=>{const{readOnly:e,permissions:t,role:a,onChange:n}=this.props;if(!e)if("checked"===this.getStatus(t)){const e=[];for(const a of Fa(t))this.fromParent(a)||e.push(a);this.setState({expanded:!0}),n(e)}else if(""===this.getStatus(t)){const e=[];let a=!0;if(0===this.state.prevPermissions.length)for(const n of Fa(t))this.fromParent(n)||(e.push(n),a=!1);else for(const a of Fa(t))-1===this.state.prevPermissions.indexOf(a)||this.fromParent(a)||e.push(a);n(e),this.setState({prevPermissions:[],expanded:a})}else{const e=[];for(const n of Fa(t))-1!==a.permissions.indexOf(n)||this.fromParent(n)||e.push(n);this.setState({prevPermissions:a.permissions,expanded:!1}),n(e)}}),Ua(this,"isInScope",e=>("channel_scope"!==this.props.scope||"channel_scope"===O.x[e])&&("team_scope"!==this.props.scope||"system_scope"!==O.x[e])),Ua(this,"renderPermission",(e,t)=>{if(!this.isInScope(e))return null;const a=this.fromParent(e),n=a||-1!==this.props.role.permissions.indexOf(e);return x.a.createElement(Ba,{key:e,id:e,uniqId:this.props.uniqId+"-"+e,selected:this.props.selected,selectRow:this.props.selectRow,readOnly:this.props.readOnly||a,inherited:a?this.props.parentRole:null,value:n?"checked":"",onChange:this.toggleSelectRow,additionalValues:t})}),Ua(this,"renderGroup",e=>x.a.createElement(qa,{key:e.id,id:e.id,uniqId:this.props.uniqId+"-"+e.id,selected:this.props.selected,selectRow:this.props.selectRow,readOnly:this.props.readOnly,permissions:e.permissions,additionalValues:this.props.additionalValues,role:this.props.role,parentRole:this.props.parentRole,scope:this.props.scope,onChange:this.toggleSelectSubGroup,combined:e.combined,root:!1})),Ua(this,"fromParent",e=>this.props.parentRole&&-1!==this.props.parentRole.permissions.indexOf(e)),Ua(this,"getStatus",e=>{let t=!1,a=!1;for(const n of e)if("string"==typeof n){if(!this.isInScope(n))continue;t=t||this.fromParent(n)||-1!==this.props.role.permissions.indexOf(n),a=a||!this.fromParent(n)&&-1===this.props.role.permissions.indexOf(n)}else{const e=this.getStatus(n.permissions);if("intermediate"===e)return"intermediate";"checked"===e&&(t=!0),""===e&&(a=!0)}return t&&a?"intermediate":t&&!a?"checked":""}),Ua(this,"hasPermissionsOnScope",()=>Fa(this.props.permissions).some(e=>this.isInScope(e))),Ua(this,"allPermissionsFromParent",e=>{for(const t of e)if("string"==typeof t){if(this.isInScope(t)&&!this.fromParent(t))return!1}else if(!this.allPermissionsFromParent(t.permissions))return!1;return!0}),Ua(this,"render",()=>{const{id:e,uniqId:t,permissions:a,readOnly:n,combined:s,root:i,selected:r,additionalValues:o}=this.props;if(!this.hasPermissionsOnScope())return null;const l=a.map(e=>{if("string"==typeof e){const t=o&&o[e]?o[e]:{};return this.renderPermission(e,t)}return this.renderGroup(e)});if(i)return x.a.createElement("div",{className:"permission-group-permissions "+(this.state.expanded?"open":"")},l);let c=null;this.allPermissionsFromParent(this.props.permissions)&&this.props.combined&&(c=this.props.parentRole);let d="";return r===e&&(d+=" selected"),(n||this.allPermissionsFromParent(this.props.permissions))&&(d+=" read-only"),s&&(d+=" combined"),x.a.createElement("div",{className:"permission-group"},!i&&x.a.createElement("div",{className:"permission-group-row "+d,onClick:this.toggleSelectGroup,id:t},!s&&x.a.createElement("div",{className:"fa fa-caret-right permission-arrow "+(this.state.expanded?"open":""),onClick:this.toggleExpanded}),x.a.createElement(Ra,{value:this.getStatus(this.props.permissions),id:"".concat(t,"-checkbox")}),x.a.createElement("span",{className:"permission-name"},x.a.createElement(w.a,{id:"admin.permissions.group."+e+".name"})),x.a.createElement(Ia,{inherited:c,id:e,selectRow:this.props.selectRow,rowType:"group"})),!s&&x.a.createElement("div",{className:"permission-group-permissions "+(this.state.expanded?"open":"")},l))}),this.state={expanded:!0,prevPermissions:[],selected:e.selected}}static getDerivedStateFromProps(e,t){return e.selected!==t.selected?-1!==Fa(e.permissions).indexOf(e.selected)?{expanded:!0,selected:e.selected}:{selected:e.selected}:null}}function Ga(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ua(qa,"propTypes",{id:j.a.string.isRequired,uniqId:j.a.string.isRequired,permissions:j.a.array.isRequired,readOnly:j.a.bool,role:j.a.object,parentRole:j.a.object,scope:j.a.string.isRequired,combined:j.a.bool,selected:j.a.string,selectRow:j.a.func.isRequired,root:j.a.bool,onChange:j.a.func.isRequired,additionalValues:j.a.object});class Ha extends x.a.Component{constructor(...e){super(...e),Ga(this,"render",()=>{let e;return e=this.props.timeLimit===O.j.UNSET_POST_EDIT_TIME_LIMIT?Object(M.b)("edit_post.time_limit_button.no_limit"):Object(M.b)("edit_post.time_limit_button.for_n_seconds"),x.a.createElement("button",{className:"edit-post-time-limit-button",onClick:this.props.onClick},x.a.createElement("i",{className:"fa fa-gear"}),x.a.createElement(w.a,{id:e,values:{n:this.props.timeLimit}}))})}}Ga(Ha,"propTypes",{timeLimit:j.a.number.isRequired,onClick:j.a.func});var Wa=Object(r.connect)((function(e){const{PostEditTimeLimit:t}=Object(m.getConfig)(e);return{timeLimit:parseInt(t,10)}}))(Ha),za=a(1381);function Ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Va extends x.a.Component{constructor(e){super(e),Ya(this,"save",async()=>{this.setState({saving:!0,errorMessage:""});const e=parseInt(this.state.postEditTimeLimit,10);if(e!==O.j.UNSET_POST_EDIT_TIME_LIMIT&&("NaN"===e.toString()||e<=0||e>2147483647))return this.setState({errorMessage:Object(U.jb)("edit_post.time_limit_modal.invalid_time_limit","Invalid time limit"),saving:!1}),!1;const t=JSON.parse(JSON.stringify(this.props.config));t.ServiceSettings.PostEditTimeLimit=e;const{error:a}=await this.props.actions.updateConfig(t);return a?this.setState({errorMessage:a,saving:!1}):(this.setState({saving:!1}),this.props.onClose()),!0}),Ya(this,"handleOptionChange",e=>{const{value:t}=e.target;t===O.j.ALLOW_EDIT_POST_ALWAYS?this.setState({postEditTimeLimit:O.j.UNSET_POST_EDIT_TIME_LIMIT}):this.setState({postEditTimeLimit:""})}),Ya(this,"handleSecondsChange",e=>{const{value:t}=e.target;this.setState({postEditTimeLimit:t})}),Ya(this,"render",()=>x.a.createElement(za.a,{dialogClassName:"a11y__modal admin-modal edit-post-time-limit-modal",show:this.props.show,role:"dialog","aria-labelledby":"editPostTimeModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"editPostTimeModalLabel"},x.a.createElement(w.a,{id:"edit_post.time_limit_modal.title",defaultMessage:"Configure Global Edit Post Time Limit"}))),x.a.createElement(za.a.Body,null,x.a.createElement(ce.a,{id:"edit_post.time_limit_modal.description",defaultMessage:'Setting a time limit <strong>applies to all users</strong> who have the "Edit Post" permissions in any permission scheme.'}),x.a.createElement("div",{className:"pl-3 pb-3 pt-3"},x.a.createElement("div",{className:"pt-3"},x.a.createElement("input",{id:"anytime",type:"radio",name:"limit",value:O.j.ALLOW_EDIT_POST_ALWAYS,checked:this.state.postEditTimeLimit===O.j.UNSET_POST_EDIT_TIME_LIMIT,onChange:this.handleOptionChange}),x.a.createElement("label",{htmlFor:"anytime"},x.a.createElement(w.a,{id:"edit_post.time_limit_modal.option_label_anytime",defaultMessage:"Anytime"}))),x.a.createElement("div",{className:"pt-2"},x.a.createElement("input",{id:"timelimit",type:"radio",name:"limit",value:O.j.ALLOW_EDIT_POST_TIME_LIMIT,checked:this.state.postEditTimeLimit!==O.j.UNSET_POST_EDIT_TIME_LIMIT,onChange:this.handleOptionChange}),x.a.createElement("label",{htmlFor:"timelimit"},x.a.createElement(w.a,{id:"edit_post.time_limit_modal.option_label_time_limit.preinput",defaultMessage:"Can edit for"})),x.a.createElement("input",{type:"number",className:"form-control inline",min:"0",step:"1",max:2147483647,id:"editPostTimeLimit",readOnly:this.state.postEditTimeLimit===O.j.UNSET_POST_EDIT_TIME_LIMIT,onChange:this.handleSecondsChange,value:this.state.postEditTimeLimit===O.j.UNSET_POST_EDIT_TIME_LIMIT?"":this.state.postEditTimeLimit}),x.a.createElement("label",{htmlFor:"timelimit"},x.a.createElement(w.a,{id:"edit_post.time_limit_modal.option_label_time_limit.postinput",defaultMessage:"seconds after posting"}))),x.a.createElement("div",{className:"pt-3 light"},x.a.createElement(w.a,{id:"edit_post.time_limit_modal.subscript",defaultMessage:"Set the length of time users have to edit their messages after posting."})))),x.a.createElement(za.a.Footer,null,x.a.createElement("div",{className:"edit-post-time-limit-modal__error"},this.state.errorMessage),x.a.createElement("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClose},x.a.createElement(w.a,{id:"confirm_modal.cancel",defaultMessage:"Cancel"})),x.a.createElement("button",{id:"linkModalCloseButton",type:"button",className:"btn btn-default",onClick:this.save,disabled:this.state.saving},x.a.createElement(w.a,{id:this.state.saving?Object(M.b)("save_button.saving"):Object(M.b)("edit_post.time_limit_modal.save_button"),defaultMessage:"Save Edit Time"}))))),this.state={postEditTimeLimit:parseInt(e.config.ServiceSettings.PostEditTimeLimit,10),saving:!1,errorMessage:""}}componentDidMount(){this.props.actions.getConfig()}}Ya(Va,"propTypes",{config:j.a.object.isRequired,show:j.a.bool,onClose:j.a.func.isRequired,actions:j.a.shape({updateConfig:j.a.func.isRequired,getConfig:j.a.func.isRequired}).isRequired});var Ja=Object(r.connect)((function(e){return{config:d.getConfig(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({updateConfig:l.updateConfig,getConfig:l.getConfig},e)}}))(Va);function Xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ka extends x.a.Component{constructor(e){super(e),Xa(this,"updateGroups",()=>{const{config:e,scope:t}=this.props,a=this.groups[this.groups.length-1],n=this.groups[0];"true"===e.EnableIncomingWebhooks&&-1===a.permissions.indexOf(ka.a.MANAGE_INCOMING_WEBHOOKS)&&a.permissions.push(ka.a.MANAGE_INCOMING_WEBHOOKS),"true"===e.EnableOutgoingWebhooks&&-1===a.permissions.indexOf(ka.a.MANAGE_OUTGOING_WEBHOOKS)&&a.permissions.push(ka.a.MANAGE_OUTGOING_WEBHOOKS),"true"===e.EnableOAuthServiceProvider&&-1===a.permissions.indexOf(ka.a.MANAGE_OAUTH)&&a.permissions.push(ka.a.MANAGE_OAUTH),"true"===e.EnableCommands&&-1===a.permissions.indexOf(ka.a.MANAGE_SLASH_COMMANDS)&&a.permissions.push(ka.a.MANAGE_SLASH_COMMANDS),"true"===e.EnableCustomEmoji&&-1===a.permissions.indexOf(ka.a.CREATE_EMOJIS)&&a.permissions.push(ka.a.CREATE_EMOJIS),"true"===e.EnableCustomEmoji&&-1===a.permissions.indexOf(ka.a.DELETE_EMOJIS)&&a.permissions.push(ka.a.DELETE_EMOJIS),"true"===e.EnableCustomEmoji&&-1===a.permissions.indexOf(ka.a.DELETE_OTHERS_EMOJIS)&&a.permissions.push(ka.a.DELETE_OTHERS_EMOJIS),"true"===e.EnableGuestAccounts&&-1===n.permissions.indexOf(ka.a.INVITE_GUEST)&&n.permissions.push(ka.a.INVITE_GUEST),"team_scope"===t&&"teams_team_scope"!==this.groups[0].id&&(this.groups[0].id="teams_team_scope")}),Xa(this,"openPostTimeLimitModal",()=>{this.setState({editTimeLimitModalIsVisible:!0})}),Xa(this,"closePostTimeLimitModal",()=>{this.setState({editTimeLimitModalIsVisible:!1})}),Xa(this,"toggleGroup",e=>{this.props.readOnly||this.props.onToggle(this.props.role.name,e)}),Xa(this,"render",()=>x.a.createElement("div",{className:"permissions-tree"},x.a.createElement("div",{className:"permissions-tree--header"},x.a.createElement("div",{className:"permission-name"},x.a.createElement(w.a,{id:"admin.permissions.permissionsTree.permission",defaultMessage:"Permission"})),x.a.createElement("div",{className:"permission-description"},x.a.createElement(w.a,{id:"admin.permissions.permissionsTree.description",defaultMessage:"Description"}))),x.a.createElement("div",{className:"permissions-tree--body"},x.a.createElement(qa,{key:"all",id:"all",uniqId:this.props.role.name,selected:this.props.selected,selectRow:this.props.selectRow,readOnly:this.props.readOnly,permissions:this.groups,additionalValues:this.ADDITIONAL_VALUES,role:this.props.role,parentRole:this.props.parentRole,scope:this.props.scope,combined:!1,onChange:this.toggleGroup,root:!0})),x.a.createElement(Ja,{onClose:this.closePostTimeLimitModal,show:this.state.editTimeLimitModalIsVisible}))),this.state={editTimeLimitModalIsVisible:!1},this.ADDITIONAL_VALUES={edit_post:{editTimeLimitButton:x.a.createElement(Wa,{onClick:this.openPostTimeLimitModal})}},this.groups=[{id:"teams",permissions:[{id:"send_invites",combined:!0,permissions:[ka.a.INVITE_USER,ka.a.GET_PUBLIC_LINK,ka.a.ADD_USER_TO_TEAM]},ka.a.CREATE_TEAM]},{id:"public_channel",permissions:[ka.a.CREATE_PUBLIC_CHANNEL,ka.a.MANAGE_PUBLIC_CHANNEL_PROPERTIES,ka.a.MANAGE_PUBLIC_CHANNEL_MEMBERS,ka.a.DELETE_PUBLIC_CHANNEL]},{id:"private_channel",permissions:[ka.a.CREATE_PRIVATE_CHANNEL,ka.a.MANAGE_PRIVATE_CHANNEL_PROPERTIES,ka.a.MANAGE_PRIVATE_CHANNEL_MEMBERS,ka.a.DELETE_PRIVATE_CHANNEL]},{id:"posts",permissions:[{id:"edit_posts",permissions:[ka.a.EDIT_POST,ka.a.EDIT_OTHERS_POSTS]},{id:"delete_posts",permissions:[ka.a.DELETE_POST,ka.a.DELETE_OTHERS_POSTS]},{id:"reactions",combined:!0,permissions:[ka.a.ADD_REACTION,ka.a.REMOVE_REACTION]},ka.a.USE_CHANNEL_MENTIONS,ka.a.USE_GROUP_MENTIONS]},{id:"integrations",permissions:[]}],this.updateGroups()}componentDidUpdate(e){this.props.config!==e.config&&this.updateGroups()}}Xa(Ka,"propTypes",{scope:j.a.string.isRequired,config:j.a.object.isRequired,role:j.a.object.isRequired,onToggle:j.a.func.isRequired,parentRole:j.a.object,selected:j.a.string,selectRow:j.a.func.isRequired,readOnly:j.a.bool}),Xa(Ka,"defaultProps",{role:{permissions:[]}});const Qa=[ka.a.VIEW_MEMBERS,ka.a.JOIN_PUBLIC_TEAMS,ka.a.LIST_PUBLIC_TEAMS,ka.a.JOIN_PRIVATE_TEAMS,ka.a.LIST_PRIVATE_TEAMS];var $a=Object(r.connect)((function(e){return{config:Object(m.getConfig)(e)}}))(Ka);function Za(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class en extends x.a.Component{constructor(e){super(e),Za(this,"openPostTimeLimitModal",()=>{this.setState({editTimeLimitModalIsVisible:!0})}),Za(this,"closePostTimeLimitModal",()=>{this.setState({editTimeLimitModalIsVisible:!1})}),Za(this,"toggleGroup",e=>{this.props.readOnly||this.props.onToggle(this.props.role.name,e)}),Za(this,"render",()=>x.a.createElement("div",{className:"permissions-tree guest"},x.a.createElement("div",{className:"permissions-tree--header"},x.a.createElement("div",{className:"permission-name"},x.a.createElement(w.a,{id:"admin.permissions.permissionsTree.permission",defaultMessage:"Permission"})),x.a.createElement("div",{className:"permission-description"},x.a.createElement(w.a,{id:"admin.permissions.permissionsTree.description",defaultMessage:"Description"}))),x.a.createElement("div",{className:"permissions-tree--body"},x.a.createElement(qa,{key:"all",id:"all",uniqId:this.props.role.name,selected:this.props.selected,selectRow:this.props.selectRow,readOnly:this.props.readOnly,permissions:this.permissions,additionalValues:this.ADDITIONAL_VALUES,role:this.props.role,parentRole:this.props.parentRole,scope:this.props.scope,combined:!1,onChange:this.toggleGroup,root:!0})),x.a.createElement(Ja,{onClose:this.closePostTimeLimitModal,show:this.state.editTimeLimitModalIsVisible}))),this.state={editTimeLimitModalIsVisible:!1},this.ADDITIONAL_VALUES={edit_post:{editTimeLimitButton:x.a.createElement(Wa,{onClick:this.openPostTimeLimitModal})}},this.permissions=[ka.a.CREATE_PRIVATE_CHANNEL,ka.a.EDIT_POST,ka.a.DELETE_POST,{id:"reactions",combined:!0,permissions:[ka.a.ADD_REACTION,ka.a.REMOVE_REACTION]},ka.a.USE_CHANNEL_MENTIONS,ka.a.USE_GROUP_MENTIONS]}}Za(en,"propTypes",{scope:j.a.string.isRequired,role:j.a.object.isRequired,onToggle:j.a.func.isRequired,parentRole:j.a.object,selected:j.a.string,selectRow:j.a.func.isRequired,readOnly:j.a.bool}),Za(en,"defaultProps",{role:{permissions:[]}});const tn=[ka.a.CREATE_PRIVATE_CHANNEL,ka.a.EDIT_POST,ka.a.DELETE_POST,ka.a.ADD_REACTION,ka.a.REMOVE_REACTION,ka.a.USE_CHANNEL_MENTIONS,ka.a.USE_GROUP_MENTIONS];var an=Object(r.connect)((function(e){return{config:Object(m.getConfig)(e)}}))(en);function nn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function sn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(a),!0).forEach((function(t){rn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function rn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class on extends x.a.Component{constructor(e){super(e),rn(this,"goToSelectedRow",()=>{const e=document.querySelector(".permission-row.selected,.permission-group-row.selected");return!!e&&(this.state.openRoles.all_users?e.scrollIntoView({behavior:"smooth",block:"center"}):(this.toggleRole("all_users"),setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},300)),!0)}),rn(this,"selectRow",e=>{this.setState({selectedPermission:e}),setTimeout(this.goToSelectedRow),setTimeout(()=>{this.setState({selectedPermission:null})},3e3)}),rn(this,"deriveRolesFromAllUsers",e=>({system_user:sn({},this.props.roles.system_user,{permissions:e.permissions.filter(e=>"system_scope"===O.x[e])}),team_user:sn({},this.props.roles.team_user,{permissions:e.permissions.filter(e=>"team_scope"===O.x[e])}),channel_user:sn({},this.props.roles.channel_user,{permissions:e.permissions.filter(e=>"channel_scope"===O.x[e])})})),rn(this,"deriveRolesFromGuests",e=>({system_guest:sn({},this.props.roles.system_guest,{permissions:e.permissions.filter(e=>"system_scope"===O.x[e])}),team_guest:sn({},this.props.roles.team_guest,{permissions:e.permissions.filter(e=>"team_scope"===O.x[e])}),channel_guest:sn({},this.props.roles.channel_guest,{permissions:e.permissions.filter(e=>"channel_scope"===O.x[e])})})),rn(this,"restoreExcludedPermissions",e=>{for(const t of this.props.roles.system_user.permissions)Qa.includes(t)&&e.system_user.permissions.push(t);for(const t of this.props.roles.team_user.permissions)Qa.includes(t)&&e.team_user.permissions.push(t);for(const t of this.props.roles.channel_user.permissions)Qa.includes(t)&&e.channel_user.permissions.push(t);return e}),rn(this,"restoreGuestPermissions",e=>{for(const t of this.props.roles.system_guest.permissions)tn.includes(t)||e.system_guest.permissions.push(t);for(const t of this.props.roles.team_guest.permissions)tn.includes(t)||e.team_guest.permissions.push(t);for(const t of this.props.roles.channel_guest.permissions)tn.includes(t)||e.channel_guest.permissions.push(t);return e}),rn(this,"handleSubmit",async()=>{const e=this.props.actions.editRole(this.state.roles.team_admin),t=this.props.actions.editRole(this.state.roles.channel_admin),a=this.restoreExcludedPermissions(this.deriveRolesFromAllUsers(this.state.roles.all_users)),n=this.restoreGuestPermissions(this.deriveRolesFromGuests(this.state.roles.guests)),s=[e,t,this.props.actions.editRole(a.system_user),this.props.actions.editRole(a.team_user),this.props.actions.editRole(a.channel_user)];if(this.haveGuestAccountsPermissions()){const e=this.props.actions.editRole(n.system_guest),t=this.props.actions.editRole(n.team_guest),a=this.props.actions.editRole(n.channel_guest);s.push(e,t,a)}this.setState({saving:!0});const i=await Promise.all(s);let r=null,o=!1;for(const e of i)if(e.error){r=e.error.message,o=!0;break}this.setState({serverError:r,saving:!1,saveNeeded:o}),this.props.actions.setNavigationBlocked(o)}),rn(this,"toggleRole",e=>{const t=sn({},this.state.openRoles);t[e]=!t[e],this.setState({openRoles:t})}),rn(this,"togglePermission",(e,t)=>{const a=sn({},this.state.roles),n=sn({},a[e]),s=[...n.permissions];for(const e of t)-1===s.indexOf(e)?s.push(e):s.splice(s.indexOf(e),1);n.permissions=s,a[e]=n,this.setState({roles:a,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),rn(this,"resetDefaults",()=>{const e=JSON.parse(JSON.stringify(sn({},this.state.roles)));Object.entries(O.k).forEach(([t,a])=>{e[t].permissions=a}),this.setState({roles:e,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),rn(this,"haveGuestAccountsPermissions",()=>"true"===this.props.license.GuestAccountsPermissions),rn(this,"render",()=>this.state.loaded?x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header with-back"},x.a.createElement("div",null,x.a.createElement(xa,{to:"/admin_console/user_management/permissions",className:"fa fa-angle-left back"}),x.a.createElement(w.a,{id:"admin.permissions.systemScheme",defaultMessage:"System Scheme"}))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"banner info"},x.a.createElement("div",{className:"banner__content"},x.a.createElement("span",null,x.a.createElement(P.b,{id:"admin.permissions.systemScheme.introBanner",defaultMessage:"Configure the default permissions for Team Admins, Channel Admins and other members. This scheme is inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied in specific teams."})))),this.props.license&&"true"===this.props.config.EnableGuestAccounts&&x.a.createElement(Ca,{className:"permissions-block",open:this.state.openRoles.guests,id:"all_users",onToggle:()=>this.toggleRole("guests"),titleId:Object(M.b)("admin.permissions.systemScheme.GuestsTitle"),titleDefault:"Guests",subtitleId:Object(M.b)("admin.permissions.systemScheme.GuestsDescription"),subtitleDefault:"Permissions granted to guest users."},x.a.createElement(an,{selected:this.state.selectedPermission,role:this.state.roles.guests,scope:"system_scope",onToggle:this.togglePermission,selectRow:this.selectRow,readOnly:!this.haveGuestAccountsPermissions()})),x.a.createElement(Ca,{className:"permissions-block",open:this.state.openRoles.all_users,id:"all_users",onToggle:()=>this.toggleRole("all_users"),titleId:Object(M.b)("admin.permissions.systemScheme.allMembersTitle"),titleDefault:"All Members",subtitleId:Object(M.b)("admin.permissions.systemScheme.allMembersDescription"),subtitleDefault:"Permissions granted to all members, including administrators and newly created users."},x.a.createElement($a,{selected:this.state.selectedPermission,role:this.state.roles.all_users,scope:"system_scope",onToggle:this.togglePermission,selectRow:this.selectRow})),x.a.createElement(Ca,{className:"permissions-block",open:this.state.openRoles.channel_admin,onToggle:()=>this.toggleRole("channel_admin"),titleId:Object(M.b)("admin.permissions.systemScheme.channelAdminsTitle"),titleDefault:"Channel Administrators",subtitleId:Object(M.b)("admin.permissions.systemScheme.channelAdminsDescription"),subtitleDefault:"Permissions granted to channel creators and any users promoted to Channel Administrator."},x.a.createElement($a,{parentRole:this.state.roles.all_users,role:this.state.roles.channel_admin,scope:"channel_scope",onToggle:this.togglePermission,selectRow:this.selectRow})),x.a.createElement(Ca,{className:"permissions-block",open:this.state.openRoles.team_admin,onToggle:()=>this.toggleRole("team_admin"),titleId:Object(M.b)("admin.permissions.systemScheme.teamAdminsTitle"),titleDefault:"Team Administrators",subtitleId:Object(M.b)("admin.permissions.systemScheme.teamAdminsDescription"),subtitleDefault:"Permissions granted to team creators and any users promoted to Team Administrator."},x.a.createElement($a,{parentRole:this.state.roles.all_users,role:this.state.roles.team_admin,scope:"team_scope",onToggle:this.togglePermission,selectRow:this.selectRow})),x.a.createElement(Ca,{className:"permissions-block",open:this.state.openRoles.system_admin,onToggle:()=>this.toggleRole("system_admin"),titleId:Object(M.b)("admin.permissions.systemScheme.systemAdminsTitle"),titleDefault:"System Administrators",subtitleId:Object(M.b)("admin.permissions.systemScheme.systemAdminsDescription"),subtitleDefault:"Full permissions granted to System Administrators."},x.a.createElement($a,{readOnly:!0,role:this.state.roles.system_admin,scope:"system_scope",onToggle:this.togglePermission,selectRow:this.selectRow})))),x.a.createElement("div",{className:"admin-console-save"},x.a.createElement(be.a,{saving:this.state.saving,disabled:!this.state.saveNeeded||this.canSave&&!this.canSave(),onClick:this.handleSubmit,savingMessage:Object(U.jb)("admin.saving","Saving Config...")}),x.a.createElement(xa,{className:"cancel-button",to:"/admin_console/user_management/permissions"},x.a.createElement(w.a,{id:"admin.permissions.permissionSchemes.cancel",defaultMessage:"Cancel"})),x.a.createElement("a",{"data-testid":"resetPermissionsToDefault",onClick:()=>this.setState({showResetDefaultModal:!0}),className:"cancel-button reset-defaults-btn"},x.a.createElement(w.a,{id:"admin.permissions.systemScheme.resetDefaultsButton",defaultMessage:"Reset to Defaults"})),x.a.createElement("div",{className:"error-message"},x.a.createElement(ve.a,{error:this.state.serverError}))),x.a.createElement(ge.a,{show:this.state.showResetDefaultModal,title:x.a.createElement(w.a,{id:"admin.permissions.systemScheme.resetDefaultsButtonModalTitle",defaultMessage:"Reset to Default?"}),message:x.a.createElement(w.a,{id:"admin.permissions.systemScheme.resetDefaultsButtonModalBody",defaultMessage:"This will reset all selections on this page to their default settings. Are you sure you want to reset?"}),confirmButtonText:x.a.createElement(w.a,{id:"admin.permissions.systemScheme.resetDefaultsConfirmationButton",defaultMessage:"Yes, Reset"}),onConfirm:()=>{this.resetDefaults(),this.setState({showResetDefaultModal:!1})},onCancel:()=>this.setState({showResetDefaultModal:!1})})):x.a.createElement(ee.a,null)),this.state={showResetDefaultModal:!1,loaded:!1,saving:!1,saveNeeded:!1,serverError:null,roles:{},openRoles:{guests:!0,all_users:!0,system_admin:!0,team_admin:!0,channel_admin:!0}},this.rolesNeeded=[_a.a.SYSTEM_ADMIN_ROLE,_a.a.SYSTEM_USER_ROLE,_a.a.TEAM_ADMIN_ROLE,_a.a.TEAM_USER_ROLE,_a.a.CHANNEL_ADMIN_ROLE,_a.a.CHANNEL_USER_ROLE,_a.a.SYSTEM_GUEST_ROLE,_a.a.TEAM_GUEST_ROLE,_a.a.CHANNEL_GUEST_ROLE]}componentDidMount(){this.props.actions.loadRolesIfNeeded(this.rolesNeeded),this.rolesNeeded.every(e=>this.props.roles[e])&&this.loadRolesIntoState(this.props)}componentWillReceiveProps(e){!this.state.loaded&&this.rolesNeeded.every(t=>e.roles[t])&&this.loadRolesIntoState(e)}loadRolesIntoState(e){const{system_admin:t,team_admin:a,channel_admin:n,system_user:s,team_user:i,channel_user:r,system_guest:o,team_guest:l,channel_guest:c}=e.roles;this.setState({selectedPermission:null,loaded:!0,roles:{system_admin:t,team_admin:a,channel_admin:n,all_users:{name:"all_users",displayName:"All members",permissions:s.permissions.concat(i.permissions).concat(r.permissions)},guests:{name:"guests",displayName:"Guests",permissions:o.permissions.concat(l.permissions).concat(c.permissions)}}})}}rn(on,"propTypes",{config:j.a.object.isRequired,roles:j.a.object.isRequired,license:j.a.object.isRequired,actions:j.a.shape({loadRolesIfNeeded:j.a.func.isRequired,editRole:j.a.func.isRequired,setNavigationBlocked:j.a.func.isRequired}).isRequired});var ln=Object(r.connect)((function(e){return{config:Object(m.getConfig)(e),license:Object(m.getLicense)(e),roles:Object(h.getRoles)(e),rolesRequest:e.requests.roles.getRolesByNames}}),(function(e){return{actions:Object(o.bindActionCreators)({loadRolesIfNeeded:c.loadRolesIfNeeded,editRole:c.editRole,setNavigationBlocked:_.E},e)}}))(on),cn=(a(181),a(103),a(1204)),dn=a(1238),un=a(1232);function mn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hn extends x.a.Component{constructor(e){super(e),mn(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})}),mn(this,"handleExit",()=>{this.props.onModalDismissed&&this.props.onModalDismissed()}),mn(this,"handleSubmit",e=>{e&&e.preventDefault(),0!==this.state.values.length&&(this.props.onTeamsSelected(this.state.values),this.handleHide())}),mn(this,"addValue",(e,t=!1)=>{if(this.props.modalID===O.u.ADD_TEAMS_TO_SCHEME&&null!==e.scheme_id&&""!==e.scheme_id&&!t)return void this.setState({confirmAddModal:!0,confirmAddTeam:e});const a=Object.assign([],this.state.values),n=a.map(e=>e.id);e&&e.id&&-1===n.indexOf(e.id)&&a.push(e),this.setState({values:a,confirmAddModal:!1,confirmAddTeam:null})}),mn(this,"setTeamsLoadingState",e=>{this.setState({loadingTeams:e})}),mn(this,"handlePageChange",(e,t)=>{e>t&&(this.setTeamsLoadingState(!0),this.props.actions.loadTeams(e,51).then(()=>{this.setTeamsLoadingState(!1)}))}),mn(this,"handleDelete",e=>{this.setState({values:e})}),mn(this,"search",(e,t)=>{0!==t.state.page&&t.setState({page:0}),this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,loadingTeams:!0,confirmAddModal:!1,confirmAddTeam:null}}componentDidMount(){this.props.actions.loadTeams(0,51).then(()=>{this.setTeamsLoadingState(!1)})}componentDidUpdate(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return;this.searchTimeoutId=setTimeout(async()=>{this.setTeamsLoadingState(!0),await this.props.actions.searchTeams(e),this.setTeamsLoadingState(!1)},O.Q.SEARCH_TIMEOUT_MILLISECONDS)}}renderOption(e,t,a,n){var s="";return t&&(s="more-modal__row--selected"),x.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+s,onClick:()=>a(e),onMouseMove:()=>n(e)},x.a.createElement("div",{className:"more-modal__details"},x.a.createElement("div",{className:"team-info-block"},x.a.createElement(un.a,{name:e.display_name,url:Object(U.M)(e)}),x.a.createElement("div",{className:"team-data"},x.a.createElement("div",{className:"title"},e.display_name)))),x.a.createElement("div",{className:"more-modal__actions"},x.a.createElement("div",{className:"more-modal__actions--round"},x.a.createElement("i",{className:"fa fa-plus"}))))}renderValue(e){return e.data.display_name}renderConfirmModal(e,t){const a=x.a.createElement(w.a,{id:"add_teams_to_scheme.confirmation.title",defaultMessage:"Team Override Scheme Change?"}),n=x.a.createElement(w.a,{id:"add_teams_to_scheme.confirmation.message",defaultMessage:"This team is already selected in another team scheme, are you sure you want to move it to this team scheme?"}),s=x.a.createElement(w.a,{id:"add_teams_to_scheme.confirmation.accept",defaultMessage:"Yes, Move Team"});return x.a.createElement(ge.a,{show:e,title:a,message:n,confirmButtonText:s,onCancel:()=>this.setState({confirmAddModal:!1,confirmAddTeam:null}),onConfirm:()=>this.addValue(t,!0)})}render(){const e=this.renderConfirmModal(this.state.confirmAddModal,this.state.confirmAddTeam),t=x.a.createElement(w.a,{id:"multiselect.selectTeams",defaultMessage:"Use ↑↓ to browse, ↵ to select."}),a=Object(U.jb)("multiselect.add","Add");let n=[];return this.props.teams&&(n=this.props.teams.filter(e=>0===e.delete_at),n=n.filter(e=>e.scheme_id!==this.currentSchemeId),n=n.filter(e=>-1===this.props.alreadySelected.indexOf(e.id)),n.sort((e,t)=>{const a=e.display_name.toUpperCase(),n=t.display_name.toUpperCase();return a===n?0:a>n?1:-1})),x.a.createElement(za.a,{dialogClassName:"a11y__modal more-modal more-direct-channels team-selector-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"teamSelectorModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"teamSelectorModalLabel"},x.a.createElement(P.b,{id:"add_teams_to_scheme.title",defaultMessage:"Add Teams to **Team Selection** List"}))),x.a.createElement(za.a.Body,null,e,x.a.createElement(dn.a,{key:"addTeamsToSchemeKey",options:n,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,numRemainingText:t,buttonSubmitText:a,saving:!1,loading:this.state.loadingTeams,placeholderText:Object(U.jb)("multiselect.addTeamsPlaceholder","Search and add teams")})))}}mn(hn,"propTypes",{currentSchemeId:j.a.string,alreadySelected:j.a.array,searchTerm:j.a.string.isRequired,teams:j.a.array.isRequired,onModalDismissed:j.a.func,onTeamsSelected:j.a.func,modalID:j.a.string,actions:j.a.shape({loadTeams:j.a.func.isRequired,setModalSearchTerm:j.a.func.isRequired,searchTeams:j.a.func.isRequired}).isRequired});var pn=Object(r.connect)((function(e){const t=e.views.search.modalSearch,a=Object.values(Object(b.getTeams)(e)||{}).filter(e=>e.display_name.toLowerCase().startsWith(t.toLowerCase())||e.description.toLowerCase().startsWith(t.toLowerCase()));return{searchTerm:t,teams:a}}),(function(e){return{actions:Object(o.bindActionCreators)({loadTeams:g.getTeams,setModalSearchTerm:cn.a,searchTeams:g.searchTeams},e)}}))(hn);const gn=e=>{let t;if(e.onButtonClick&&e.buttonTextId){const a=(e.buttonTextDefault||"").split(" ").join("-").toLowerCase();t=x.a.createElement("a",{className:"btn btn-primary",onClick:e.disabled?e=>e.preventDefault():e.onButtonClick,"data-testid":a},x.a.createElement(w.a,{id:e.buttonTextId,defaultMessage:e.buttonTextDefault}))}return x.a.createElement(ca,{className:"AdminPanelWithButton "+e.className,id:e.id,titleId:e.titleId,titleDefault:e.titleDefault,subtitleId:e.subtitleId,subtitleDefault:e.subtitleDefault,button:t},e.children)};gn.propTypes={children:j.a.node,className:j.a.string,id:j.a.string,titleId:j.a.string.isRequired,titleDefault:j.a.string.isRequired,subtitleId:j.a.string.isRequired,subtitleDefault:j.a.string.isRequired,onButtonClick:j.a.func,disabled:j.a.bool,buttonTextId:j.a.string,buttonTextDefault:j.a.string},gn.defaultProps={className:""};var fn=gn;class bn extends x.a.Component{render(){const e=this.props.team;return x.a.createElement("div",{className:"team",key:e.id},x.a.createElement("div",{className:"team-info-block"},x.a.createElement(un.a,{name:e.display_name,url:Object(U.M)(e)}),x.a.createElement("div",{className:"team-data"},x.a.createElement("div",{className:"title"},e.display_name))),x.a.createElement("a",{className:"remove",onClick:()=>this.props.onRemoveTeam(e.id)},x.a.createElement(w.a,{id:"admin.permissions.teamScheme.removeTeam",defaultMessage:"Remove"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(bn,"propTypes",{team:j.a.object.isRequired,onRemoveTeam:j.a.func});var vn=Object(r.connect)((function(e){return{stats:Object(b.getTeamStats)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({loadTeamStats:g.getTeamStats},e)}}))(bn);function _n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(a),!0).forEach((function(t){En(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function En(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Sn extends x.a.Component{constructor(e){super(e),En(this,"isLoaded",e=>e.schemeId?!!(null!==e.scheme&&null!==e.teams&&e.roles[e.scheme.default_team_guest_role]&&e.roles[e.scheme.default_team_user_role]&&e.roles[e.scheme.default_team_admin_role]&&e.roles[e.scheme.default_channel_guest_role]&&e.roles[e.scheme.default_channel_user_role]&&e.roles[e.scheme.default_channel_admin_role]):!!(e.roles.team_guest&&e.roles.team_user&&e.roles.team_admin&&e.roles.channel_guest&&e.roles.channel_user&&e.roles.channel_admin)),En(this,"goToSelectedRow",()=>{const e=document.querySelector(".permission-row.selected,.permission-group-row.selected");return!!e&&(this.state.openRoles.all_users?e.scrollIntoView({behavior:"smooth",block:"center"}):(this.toggleRole("all_users"),setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},300)),!0)}),En(this,"selectRow",e=>{this.setState({selectedPermission:e}),setTimeout(this.goToSelectedRow),setTimeout(()=>{this.setState({selectedPermission:null})},3e3)}),En(this,"getStateRoles",()=>{if(null!==this.state.roles)return this.state.roles;let e=null,t=null,a=null,n=null,s=null,i=null;if(this.props.schemeId)this.isLoaded(this.props)&&(e=this.props.roles[this.props.scheme.default_team_guest_role],t=this.props.roles[this.props.scheme.default_team_user_role],a=this.props.roles[this.props.scheme.default_team_admin_role],n=this.props.roles[this.props.scheme.default_channel_guest_role],s=this.props.roles[this.props.scheme.default_channel_user_role],i=this.props.roles[this.props.scheme.default_channel_admin_role]);else{if(!this.isLoaded(this.props))return null;e=this.props.roles.team_guest,t=this.props.roles.team_user,a=this.props.roles.team_admin,n=this.props.roles.channel_guest,s=this.props.roles.channel_user,i=this.props.roles.channel_admin}return{team_admin:a,channel_admin:i,team_guest:e,team_user:t,channel_guest:n,channel_user:s,all_users:{name:"all_users",displayName:"All members",permissions:t.permissions.concat(s.permissions)},guests:{name:"guests",displayName:"Guests",permissions:e.permissions.concat(n.permissions)}}}),En(this,"deriveRolesFromGuests",(e,t,a)=>({team_guest:yn({},e,{permissions:a.permissions.filter(e=>"team_scope"===O.x[e])}),channel_guest:yn({},t,{permissions:a.permissions.filter(e=>"channel_scope"===O.x[e])})})),En(this,"restoreGuestPermissions",(e,t,a)=>{for(const t of e.permissions)tn.includes(t)||a.team_guest.permissions.push(t);for(const e of t.permissions)tn.includes(e)||a.channel_guest.permissions.push(e);return a}),En(this,"deriveRolesFromAllUsers",(e,t,a)=>({team_user:yn({},e,{permissions:a.permissions.filter(e=>"team_scope"===O.x[e])}),channel_user:yn({},t,{permissions:a.permissions.filter(e=>"channel_scope"===O.x[e])})})),En(this,"restoreExcludedPermissions",(e,t,a)=>{for(const t of e.permissions)Qa.includes(t)&&a.team_user.permissions.push(t);for(const e of t.permissions)Qa.includes(e)&&a.channel_user.permissions.push(e);return a}),En(this,"handleNameChange",e=>{this.setState({schemeName:e.target.value,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),En(this,"handleDescriptionChange",e=>{this.setState({schemeDescription:e.target.value,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),En(this,"handleSubmit",async()=>{const e=this.getStateRoles();let t=e.team_admin,a=e.channel_admin;const n=e.all_users,s=e.guests,i=this.state.schemeName||this.props.scheme&&this.props.scheme.display_name||"",r=this.state.schemeDescription||this.props.scheme&&this.props.scheme.description||"";let o=null,l=null,c=null,d=null,u=null;this.setState({saving:!0});let m=this.deriveRolesFromAllUsers(e.team_user,e.channel_user,n);m=this.restoreExcludedPermissions(e.team_user,e.channel_user,m),o=m.team_user,l=m.channel_user;let h=this.deriveRolesFromGuests(e.team_guest,e.channel_guest,s);if(h=this.restoreGuestPermissions(e.team_guest,e.channel_guest,h),c=h.team_guest,d=h.channel_guest,this.props.schemeId)await this.props.actions.patchScheme(this.props.schemeId,{display_name:i,description:r}),u=this.props.schemeId;else{const e=await this.props.actions.createScheme({display_name:i,description:r,scope:"team"});if(e.error)return this.setState({serverError:e.error.message,saving:!1,saveNeeded:!0}),void this.props.actions.setNavigationBlocked(!0);const n=e.data;u=n.id,await this.props.actions.loadRolesIfNeeded([n.default_team_guest_role,n.default_team_user_role,n.default_team_admin_role,n.default_channel_guest_role,n.default_channel_user_role,n.default_channel_admin_role]),c=yn({},c,{id:this.props.roles[n.default_team_guest_role].id}),o=yn({},o,{id:this.props.roles[n.default_team_user_role].id}),t=yn({},t,{id:this.props.roles[n.default_team_admin_role].id}),d=yn({},d,{id:this.props.roles[n.default_channel_guest_role].id}),l=yn({},l,{id:this.props.roles[n.default_channel_user_role].id}),a=yn({},a,{id:this.props.roles[n.default_channel_admin_role].id})}const p=[this.props.actions.editRole(t),this.props.actions.editRole(a)],g=this.props.actions.editRole(o),f=this.props.actions.editRole(l);if(p.push(g),p.push(f),this.haveGuestAccountsPermissions()){const e=this.props.actions.editRole(c),t=this.props.actions.editRole(d);p.push(e,t)}const b=new Set((this.state.teams||this.props.teams||[]).map(e=>e.id)),v=new Set((this.props.teams||[]).map(e=>e.id)),_=new Set([...b].filter(e=>!v.has(e))),y=new Set([...v].filter(e=>!b.has(e)));for(const e of _)p.push(this.props.actions.updateTeamScheme(e,u));for(const e of y)p.push(this.props.actions.updateTeamScheme(e,""));const E=await Promise.all(p);let S=null,T=!1;for(const e of E)if(e.error){S=e.error.message,T=!0;break}this.setState({serverError:S,saving:!1,saveNeeded:T}),this.props.actions.setNavigationBlocked(T),this.props.history.push("/admin_console/user_management/permissions")}),En(this,"toggleRole",e=>{const t=yn({},this.state.openRoles);t[e]=!t[e],this.setState({openRoles:t})}),En(this,"togglePermission",(e,t)=>{const a=yn({},this.getStateRoles());let n=null;a.team_admin.name===e?n=yn({},a.team_admin):a.channel_admin.name===e?n=yn({},a.channel_admin):a.all_users.name===e?n=yn({},a.all_users):a.guests.name===e&&(n=yn({},a.guests));const s=[...n.permissions];for(const e of t)-1===s.indexOf(e)?s.push(e):s.splice(s.indexOf(e),1);n.permissions=s,a.team_admin.name===e?a.team_admin=n:a.channel_admin.name===e?a.channel_admin=n:a.all_users.name===e?a.all_users=n:a.guests.name===e&&(a.guests=n),this.setState({roles:a,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),En(this,"openAddTeam",()=>{this.setState({addTeamOpen:!0})}),En(this,"removeTeam",e=>{const t=(this.state.teams||this.props.teams).filter(t=>t.id!==e);this.setState({teams:t,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),En(this,"addTeams",e=>{const t=this.state.teams||this.props.teams||[];this.setState({teams:[...t,...e],saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),En(this,"closeAddTeam",()=>{this.setState({addTeamOpen:!1})}),En(this,"haveGuestAccountsPermissions",()=>"true"===this.props.license.GuestAccountsPermissions),En(this,"render",()=>{if(!this.isLoaded(this.props))return x.a.createElement(ee.a,null);const e=this.getStateRoles(),t=this.state.teams||this.props.teams||[],a=this.state.schemeName||this.props.scheme&&this.props.scheme.display_name||"",n=this.state.schemeDescription||this.props.scheme&&this.props.scheme.description||"";return x.a.createElement("div",{className:"wrapper--fixed"},this.state.addTeamOpen&&x.a.createElement(pn,{modalID:O.u.ADD_TEAMS_TO_SCHEME,onModalDismissed:this.closeAddTeam,onTeamsSelected:this.addTeams,currentSchemeId:this.props.schemeId,alreadySelected:t.map(e=>e.id)}),x.a.createElement("div",{className:"admin-console__header with-back"},x.a.createElement("div",null,x.a.createElement(xa,{to:"/admin_console/user_management/permissions",className:"fa fa-angle-left back"}),x.a.createElement(w.a,{id:"admin.permissions.teamScheme",defaultMessage:"Team Scheme"}))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"banner info"},x.a.createElement("div",{className:"banner__content"},x.a.createElement("span",null,x.a.createElement(P.b,{id:"admin.permissions.teamScheme.introBanner",defaultMessage:"[Team Override Schemes](!https://about.mattermost.com/default-team-override-scheme) set the permissions for Team Admins, Channel Admins and other members in specific teams. Use a Team Override Scheme when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme)."})))),x.a.createElement(ca,{titleId:Object(M.b)("admin.permissions.teamScheme.schemeDetailsTitle"),titleDefault:"Scheme Details",subtitleId:Object(M.b)("admin.permissions.teamScheme.schemeDetailsDescription"),subtitleDefault:"Set the name and description for this scheme."},x.a.createElement("div",{className:"team-scheme-details"},x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label",htmlFor:"scheme-name"},x.a.createElement(w.a,{id:"admin.permissions.teamScheme.schemeNameLabel",defaultMessage:"Scheme Name:"})),x.a.createElement(Gt.a,{id:"scheme-name",className:"form-control",type:"text",value:a,placeholder:{id:Object(M.b)("admin.permissions.teamScheme.schemeNamePlaceholder"),defaultMessage:"Scheme Name"},onChange:this.handleNameChange})),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label",htmlFor:"scheme-description"},x.a.createElement(w.a,{id:"admin.permissions.teamScheme.schemeDescriptionLabel",defaultMessage:"Scheme Description:"})),x.a.createElement("textarea",{id:"scheme-description",className:"form-control",rows:"5",value:n,placeholder:Object(U.jb)("admin.permissions.teamScheme.schemeDescriptionPlaceholder","Scheme Description"),onChange:this.handleDescriptionChange})))),x.a.createElement(fn,{className:"permissions-block",titleId:Object(M.b)("admin.permissions.teamScheme.selectTeamsTitle"),titleDefault:"Select teams to override permissions",subtitleId:Object(M.b)("admin.permissions.teamScheme.selectTeamsDescription"),subtitleDefault:"Select teams where permission exceptions are required.",onButtonClick:this.openAddTeam,buttonTextId:Object(M.b)("admin.permissions.teamScheme.addTeams"),buttonTextDefault:"Add Teams"},x.a.createElement("div",{className:"teams-list"},0===t.length&&x.a.createElement("div",{className:"no-team-schemes"},x.a.createElement(w.a,{id:"admin.permissions.teamScheme.noTeams",defaultMessage:"No team selected. Please add teams to this list."})),t.map(e=>x.a.createElement(vn,{key:e.id,team:e,onRemoveTeam:this.removeTeam})))),this.props.license&&"true"===this.props.config.EnableGuestAccounts&&x.a.createElement(Ca,{className:"permissions-block",open:this.state.openRoles.guests,id:"guests",onToggle:()=>this.toggleRole("guests"),titleId:Object(M.b)("admin.permissions.systemScheme.GuestsTitle"),titleDefault:"Guests",subtitleId:Object(M.b)("admin.permissions.systemScheme.GuestsDescription"),subtitleDefault:"Permissions granted to guest users."},x.a.createElement(an,{selected:this.state.selectedPermission,role:e.guests,scope:"team_scope",onToggle:this.togglePermission,selectRow:this.selectRow,readOnly:!this.haveGuestAccountsPermissions()})),x.a.createElement(Ca,{className:"permissions-block all_users",open:this.state.openRoles.all_users,id:"all_users",onToggle:()=>this.toggleRole("all_users"),titleId:Object(M.b)("admin.permissions.systemScheme.allMembersTitle"),titleDefault:"All Members",subtitleId:Object(M.b)("admin.permissions.systemScheme.allMembersDescription"),subtitleDefault:"Permissions granted to all members, including administrators and newly created users."},x.a.createElement($a,{selected:this.state.selectedPermission,role:e.all_users,scope:"team_scope",onToggle:this.togglePermission,selectRow:this.selectRow})),x.a.createElement(Ca,{className:"permissions-block channel_admin",open:this.state.openRoles.channel_admin,onToggle:()=>this.toggleRole("channel_admin"),titleId:Object(M.b)("admin.permissions.systemScheme.channelAdminsTitle"),titleDefault:"Channel Administrators",subtitleId:Object(M.b)("admin.permissions.systemScheme.channelAdminsDescription"),subtitleDefault:"Permissions granted to channel creators and any users promoted to Channel Administrator."},x.a.createElement($a,{parentRole:e.all_users,role:e.channel_admin,scope:"channel_scope",onToggle:this.togglePermission,selectRow:this.selectRow})),x.a.createElement(Ca,{className:"permissions-block team_admin",open:this.state.openRoles.team_admin,onToggle:()=>this.toggleRole("team_admin"),titleId:Object(M.b)("admin.permissions.systemScheme.teamAdminsTitle"),titleDefault:"Team Administrators",subtitleId:Object(M.b)("admin.permissions.systemScheme.teamAdminsDescription"),subtitleDefault:"Permissions granted to team creators and any users promoted to Team Administrator."},x.a.createElement($a,{parentRole:e.all_users,role:e.team_admin,scope:"team_scope",onToggle:this.togglePermission,selectRow:this.selectRow})))),x.a.createElement("div",{className:"admin-console-save"},x.a.createElement(be.a,{saving:this.state.saving,disabled:!this.state.saveNeeded||this.canSave&&!this.canSave(),onClick:this.handleSubmit,savingMessage:Object(U.jb)("admin.saving","Saving Config...")}),x.a.createElement(xa,{className:"cancel-button",to:"/admin_console/user_management/permissions"},x.a.createElement(w.a,{id:"admin.permissions.permissionSchemes.cancel",defaultMessage:"Cancel"})),x.a.createElement("div",{className:"error-message"},x.a.createElement(ve.a,{error:this.state.serverError}))))}),this.state={saving:!1,saveNeeded:!1,serverError:null,roles:null,teams:null,addTeamOpen:!1,selectedPermission:null,openRoles:{all_users:!0,team_admin:!0,channel_admin:!0,guests:!0}}}componentDidMount(){this.props.actions.loadRolesIfNeeded(["team_admin","team_user","channel_admin","channel_user","team_guest","channel_guest"]),this.props.schemeId&&(this.props.actions.loadScheme(this.props.schemeId).then(e=>{this.props.actions.loadRolesIfNeeded([e.data.default_team_guest_role,e.data.default_team_user_role,e.data.default_team_admin_role,e.data.default_channel_guest_role,e.data.default_channel_user_role,e.data.default_channel_admin_role])}),this.props.actions.loadSchemeTeams(this.props.schemeId))}}En(Sn,"propTypes",{schemeId:j.a.string,scheme:j.a.object,config:j.a.object.isRequired,roles:j.a.object.isRequired,license:j.a.object.isRequired,teams:j.a.array,actions:j.a.shape({loadRolesIfNeeded:j.a.func.isRequired,loadScheme:j.a.func.isRequired,loadSchemeTeams:j.a.func.isRequired,editRole:j.a.func.isRequired,patchScheme:j.a.func.isRequired,createScheme:j.a.func.isRequired,updateTeamScheme:j.a.func.isRequired,setNavigationBlocked:j.a.func.isRequired}).isRequired}),En(Sn,"defaultProps",{scheme:null});var Tn=Object(r.connect)((function(){const e=Object(oa.makeGetSchemeTeams)();return(t,a)=>{const n=a.match.params.scheme_id;return{config:Object(m.getConfig)(t),license:Object(m.getLicense)(t),schemeId:n,scheme:n?Object(oa.getScheme)(t,n):null,teams:n?e(t,{schemeId:n}):null,roles:Object(h.getRoles)(t),rolesRequest:t.requests.roles.getRolesByNames}}}),(function(e){return{actions:Object(o.bindActionCreators)({loadRolesIfNeeded:c.loadRolesIfNeeded,loadScheme:ra.getScheme,loadSchemeTeams:ra.getSchemeTeams,editRole:c.editRole,patchScheme:ra.patchScheme,updateTeamScheme:g.updateTeamScheme,createScheme:ra.createScheme,setNavigationBlocked:_.E},e)}}))(Sn),xn=a(44),wn=a(65);function On(e){const t={};return e===O.L.SYSTEM_ADMIN?t[O.M.ROLE]=O.L.SYSTEM_ADMIN:e===O.L.SYSTEM_GUEST?t[O.M.ROLE]=O.L.SYSTEM_GUEST:e===O.L.INACTIVE&&(t[O.M.INACTIVE]=!0),t}var Cn=a(1207),Mn=a(1144),kn=a(41),jn=a(1159),Pn=a(1163);function An(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Rn(e){const t=e.user&&e.user.roles?e.user.roles:"";return{user:e.user,error:null,hasPostAllRole:kn.hasPostAllRole(t),hasPostAllPublicRole:kn.hasPostAllPublicRole(t),hasUserAccessTokenRole:kn.hasUserAccessTokenRole(t),isSystemAdmin:kn.isSystemAdmin(t)}}class Nn extends x.a.PureComponent{constructor(e){super(e),An(this,"handleError",e=>{this.setState({error:e})}),An(this,"handleSystemAdminChange",e=>{"systemadmin"===e.target.name?this.setState({isSystemAdmin:!0}):"systemmember"===e.target.name&&this.setState({isSystemAdmin:!1})}),An(this,"handleUserAccessTokenChange",e=>{this.setState({hasUserAccessTokenRole:e.target.checked})}),An(this,"handlePostAllChange",e=>{this.setState({hasPostAllRole:e.target.checked})}),An(this,"handlePostAllPublicChange",e=>{this.setState({hasPostAllPublicRole:e.target.checked})}),An(this,"trackRoleChanges",(e,t)=>{kn.hasUserAccessTokenRole(e)&&!kn.hasUserAccessTokenRole(t)?Object(Ut.d)("actions","add_roles",{role:v.General.SYSTEM_USER_ACCESS_TOKEN_ROLE}):!kn.hasUserAccessTokenRole(e)&&kn.hasUserAccessTokenRole(t)&&Object(Ut.d)("actions","remove_roles",{role:v.General.SYSTEM_USER_ACCESS_TOKEN_ROLE}),kn.hasPostAllRole(e)&&!kn.hasPostAllRole(t)?Object(Ut.d)("actions","add_roles",{role:v.General.SYSTEM_POST_ALL_ROLE}):!kn.hasPostAllRole(e)&&kn.hasPostAllRole(t)&&Object(Ut.d)("actions","remove_roles",{role:v.General.SYSTEM_POST_ALL_ROLE}),kn.hasPostAllPublicRole(e)&&!kn.hasPostAllPublicRole(t)?Object(Ut.d)("actions","add_roles",{role:v.General.SYSTEM_POST_ALL_PUBLIC_ROLE}):!kn.hasPostAllPublicRole(e)&&kn.hasPostAllPublicRole(t)&&Object(Ut.d)("actions","remove_roles",{role:v.General.SYSTEM_POST_ALL_PUBLIC_ROLE})}),An(this,"handleSave",async()=>{this.setState({error:null});let e=v.General.SYSTEM_USER_ROLE;this.state.isSystemAdmin?e+=" "+v.General.SYSTEM_ADMIN_ROLE:this.state.hasUserAccessTokenRole&&(e+=" "+v.General.SYSTEM_USER_ACCESS_TOKEN_ROLE,this.state.hasPostAllRole?e+=" "+v.General.SYSTEM_POST_ALL_ROLE:this.state.hasPostAllPublicRole&&(e+=" "+v.General.SYSTEM_POST_ALL_PUBLIC_ROLE));const{data:t}=await this.props.actions.updateUserRoles(this.props.user.id,e);this.trackRoleChanges(e,this.props.user.roles),t?this.props.onModalDismissed():this.handleError(x.a.createElement(w.a,{id:"admin.manage_roles.saveError",defaultMessage:"Unable to save roles."}))}),An(this,"renderContents",()=>{const{user:e}=this.props;if(null==e)return x.a.createElement("div",null);let t,a,n=kn.getFullName(e);n?n+=" (@".concat(e.username,")"):n="@".concat(e.username),(this.state.hasUserAccessTokenRole||this.state.isSystemAdmin||e.is_bot)&&(t=x.a.createElement("div",null,x.a.createElement("p",null,x.a.createElement(P.b,{id:"admin.manage_roles.additionalRoles",defaultMessage:"Select additional permissions for the account. [Read more about roles and permissions](!https://about.mattermost.com/default-permissions)."})),x.a.createElement("div",{className:"checkbox"},x.a.createElement("label",null,x.a.createElement("input",{type:"checkbox",ref:"postall",checked:this.state.hasPostAllRole||this.state.isSystemAdmin,disabled:this.state.isSystemAdmin,onChange:this.handlePostAllChange}),x.a.createElement("strong",null,x.a.createElement(w.a,{id:"admin.manage_roles.postAllRoleTitle",defaultMessage:"post:all"})),x.a.createElement(w.a,{id:"admin.manage_roles.postAllRole",defaultMessage:"Access to post to all Mattermost channels including direct messages."}))),x.a.createElement("div",{className:"checkbox"},x.a.createElement("label",null,x.a.createElement("input",{type:"checkbox",ref:"postallpublic",checked:this.state.hasPostAllPublicRole||this.state.hasPostAllRole||this.state.isSystemAdmin,disabled:this.state.hasPostAllRole||this.state.isSystemAdmin,onChange:this.handlePostAllPublicChange}),x.a.createElement("strong",null,x.a.createElement(w.a,{id:"admin.manage_roles.postAllPublicRoleTitle",defaultMessage:"post:channels"})),x.a.createElement(w.a,{id:"admin.manage_roles.postAllPublicRole",defaultMessage:"Access to post to all Mattermost public channels."}))))),this.props.userAccessTokensEnabled&&(a=e.is_bot?x.a.createElement("div",null,x.a.createElement("div",{className:"member-row--padded member-row-lone-padding"},t)):x.a.createElement("div",null,x.a.createElement("div",{className:"checkbox"},x.a.createElement("label",null,x.a.createElement("input",{type:"checkbox",ref:"postall",checked:this.state.hasUserAccessTokenRole||this.state.isSystemAdmin,disabled:this.state.isSystemAdmin,onChange:this.handleUserAccessTokenChange}),x.a.createElement(P.b,{id:"admin.manage_roles.allowUserAccessTokens",defaultMessage:"Allow this account to generate [personal access tokens](!https://about.mattermost.com/default-user-access-tokens)."}),x.a.createElement("span",{className:"d-block pt-2 pb-2 light"},x.a.createElement(ce.a,{id:"admin.manage_roles.allowUserAccessTokensDesc",defaultMessage:"Removing this permission doesn't delete existing tokens. To delete them, go to the user's Manage Tokens menu."})))),x.a.createElement("div",{className:"member-row--padded"},t)));let s=e.email;return e.is_bot&&(s=""),x.a.createElement("div",null,x.a.createElement("div",{className:"manage-teams__user"},x.a.createElement(Pn.a,{size:"lg",username:e.username,url:Ft.Client4.getProfilePictureUrl(e.id,e.last_picture_update)}),x.a.createElement("div",{className:"manage-teams__info"},x.a.createElement("div",{className:"manage-teams__name"},n,x.a.createElement(jn.a,{show:Boolean(e.is_bot),className:"badge-admin"})),x.a.createElement("div",{className:"manage-teams__email"},s))),x.a.createElement("div",null,x.a.createElement("div",{className:"manage-row--inner"},x.a.createElement("div",{className:"radio-inline"},x.a.createElement("label",null,x.a.createElement("input",{name:"systemadmin",type:"radio",checked:this.state.isSystemAdmin,onChange:this.handleSystemAdminChange}),x.a.createElement(w.a,{id:"admin.manage_roles.systemAdmin",defaultMessage:"System Admin"}))),x.a.createElement("div",{className:"radio-inline"},x.a.createElement("label",null,x.a.createElement("input",{name:"systemmember",type:"radio",checked:!this.state.isSystemAdmin,onChange:this.handleSystemAdminChange}),x.a.createElement(w.a,{id:"admin.manage_roles.systemMember",defaultMessage:"Member"})))),a))}),this.state=Rn(e)}static getDerivedStateFromProps(e,t){const a=t.user||{},n=e.user||{};return a.id!==n.id?Rn(e):null}render(){return x.a.createElement(za.a,{show:this.props.show,onHide:this.props.onModalDismissed,dialogClassName:"a11y__modal manage-teams",role:"dialog","aria-labelledby":"manageRolesModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"manageRolesModalLabel"},x.a.createElement(w.a,{id:"admin.manage_roles.manageRolesTitle",defaultMessage:"Manage Roles"}))),x.a.createElement(za.a.Body,null,this.renderContents(),this.state.error),x.a.createElement(za.a.Footer,null,x.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.props.onModalDismissed},x.a.createElement(w.a,{id:"admin.manage_roles.cancel",defaultMessage:"Cancel"})),x.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleSave},x.a.createElement(w.a,{id:"admin.manage_roles.save",defaultMessage:"Save"}))))}}An(Nn,"propTypes",{show:j.a.bool.isRequired,user:j.a.any,userAccessTokensEnabled:j.a.bool.isRequired,onModalDismissed:j.a.func.isRequired,actions:j.a.shape({updateUserRoles:j.a.any.isRequired}).isRequired});var Dn=Object(r.connect)((function(e){return{userAccessTokensEnabled:e.entities.admin.config.ServiceSettings.EnableUserAccessTokens}}),(function(e){return{actions:Object(o.bindActionCreators)({updateUserRoles:K.updateUserRoles},e)}}))(Nn),In=a(1245),Ln=a(1156),Bn=a(1150);function Un(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fn extends x.a.Component{constructor(...e){super(...e),Un(this,"makeTeamAdmin",async()=>{const{error:e}=await this.props.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!0);e?this.props.onError(e.message):this.props.onMemberChange(this.props.teamMember.team_id)}),Un(this,"makeMember",async()=>{const{error:e}=await this.props.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!1);e?this.props.onError(e.message):this.props.onMemberChange(this.props.teamMember.team_id)}),Un(this,"removeFromTeam",()=>{this.props.handleRemoveUserFromTeam(this.props.teamMember.team_id)})}render(){const e=U.Q(this.props.teamMember.roles)||this.props.teamMember.scheme_admin,t=U.cb(this.props.user.roles),a=U.X(this.props.user),{team:n}=this.props;let s;return s=t?U.jb("admin.user_item.sysAdmin","System Admin"):e?U.jb("admin.user_item.teamAdmin","Team Admin"):a?U.jb("admin.user_item.guest","Guest"):U.jb("admin.user_item.teamMember","Team Member"),x.a.createElement(Ln.a,null,x.a.createElement("a",null,x.a.createElement("span",null,s," "),x.a.createElement("span",{className:"caret"})),x.a.createElement(Bn.a,{openLeft:!0,ariaLabel:U.jb("team_members_dropdown.menuAriaLabel","Change the role of a team member")},x.a.createElement(Bn.a.ItemAction,{show:!e&&!a,onClick:this.makeTeamAdmin,text:U.jb("admin.user_item.makeTeamAdmin","Make Team Admin")}),x.a.createElement(Bn.a.ItemAction,{show:e,onClick:this.makeMember,text:U.jb("admin.user_item.makeMember","Make Team Member")}),x.a.createElement(Bn.a.ItemAction,{show:!n.group_constrained,onClick:this.removeFromTeam,text:U.jb("team_members_dropdown.leave_team","Remove from Team")})))}}function qn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Un(Fn,"propTypes",{team:j.a.object.isRequired,user:j.a.object.isRequired,teamMember:j.a.object.isRequired,onError:j.a.func.isRequired,onMemberChange:j.a.func.isRequired,updateTeamMemberSchemeRoles:j.a.func.isRequired,handleRemoveUserFromTeam:j.a.func.isRequired});class Gn extends x.a.PureComponent{constructor(...e){super(...e),qn(this,"handleClick",e=>{e.preventDefault(),this.props.handleRemoveUserFromTeam(this.props.teamId)})}render(){return x.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClick},x.a.createElement(w.a,{id:"team_members_dropdown.leave_team",defaultMessage:"Remove from Team"}))}}function Hn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}qn(Gn,"propTypes",{teamId:j.a.string.isRequired,handleRemoveUserFromTeam:j.a.func.isRequired});class Wn extends x.a.Component{constructor(e){super(e),Hn(this,"loadTeamsAndTeamMembers",async(e=this.props.user)=>{this.getTeamMembers(e.id);const{data:t}=await this.props.actions.getTeamsForUser(e.id);this.setState({teams:Object(In.a)(t,this.props.locale)})}),Hn(this,"handleError",e=>{this.setState({error:e})}),Hn(this,"getTeamMembers",async(e=this.props.user.id)=>{const{data:t}=await this.props.actions.getTeamMembersForUser(e);t&&this.setState({teamMembers:t})}),Hn(this,"handleMemberRemove",e=>{this.setState({teams:this.state.teams.filter(t=>t.id!==e),teamMembers:this.state.teamMembers.filter(t=>t.team_id!==e)})}),Hn(this,"handleRemoveUserFromTeam",async e=>{const{actions:t,user:a}=this.props,{data:n,error:s}=await t.removeUserFromTeam(e,a.id);n?this.handleMemberRemove(e):s&&this.handleError(s.message)}),Hn(this,"handleMemberChange",()=>{this.getTeamMembers(this.props.user.id)}),Hn(this,"renderContents",()=>{const{user:e}=this.props,{teams:t,teamMembers:a}=this.state;if(!e)return x.a.createElement(ee.a,null);const n=U.Q(e.roles);let s,i=U.z(e);i?i+=" (@".concat(e.username,")"):i="@".concat(e.username),s=t&&a?t.map(t=>{const s=a.find(e=>e.team_id===t.id);if(!s)return null;let i;return i=n?x.a.createElement(Gn,{teamId:t.id,handleRemoveUserFromTeam:this.handleRemoveUserFromTeam}):x.a.createElement(Fn,{user:e,team:t,teamMember:s,onError:this.handleError,onMemberChange:this.handleMemberChange,updateTeamMemberSchemeRoles:this.props.actions.updateTeamMemberSchemeRoles,handleRemoveUserFromTeam:this.handleRemoveUserFromTeam}),x.a.createElement("div",{key:t.id,className:"manage-teams__team"},x.a.createElement("div",{className:"manage-teams__team-name"},t.display_name),x.a.createElement("div",{className:"manage-teams__team-actions"},i))}):x.a.createElement(ee.a,null);let r=null;return n&&(r=x.a.createElement("div",{className:"manage-teams__system-admin"},x.a.createElement(w.a,{id:"admin.user_item.sysAdmin",defaultMessage:"System Admin"}))),x.a.createElement("div",null,x.a.createElement("div",{className:"manage-teams__user"},x.a.createElement(Pn.a,{username:e.username,url:Ft.Client4.getProfilePictureUrl(e.id,e.last_picture_update),size:"lg"}),x.a.createElement("div",{className:"manage-teams__info"},x.a.createElement("div",{className:"manage-teams__name"},i),x.a.createElement("div",{className:"manage-teams__email"},e.email)),r),x.a.createElement("div",{className:"manage-teams__teams"},s))}),this.state={error:null,teams:null,teamMembers:null}}componentDidMount(){this.props.user&&this.loadTeamsAndTeamMembers()}UNSAFE_componentWillReceiveProps(e){(this.props.user?this.props.user.id:"")!==(e.user?e.user.id:"")&&(this.setState({teams:null,teamMembers:null}),e.user&&this.loadTeamsAndTeamMembers(e.user))}render(){return x.a.createElement(za.a,{show:this.props.show,onHide:this.props.onModalDismissed,dialogClassName:"a11y__modal manage-teams modal--overflow-visible",role:"dialog","aria-labelledby":"manageTeamsModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"manageTeamsModalLabel"},x.a.createElement(w.a,{id:"admin.user_item.manageTeams",defaultMessage:"Manage Teams"}))),x.a.createElement(za.a.Body,null,this.renderContents()))}}Hn(Wn,"propTypes",{locale:j.a.string.isRequired,onModalDismissed:j.a.func.isRequired,show:j.a.bool.isRequired,user:j.a.object,actions:j.a.shape({getTeamMembersForUser:j.a.func.isRequired,getTeamsForUser:j.a.func.isRequired,updateTeamMemberSchemeRoles:j.a.func.isRequired,removeUserFromTeam:j.a.func.isRequired}).isRequired});var zn=Object(r.connect)((function(e){return{locale:Object($.a)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getTeamMembersForUser:g.getTeamMembersForUser,getTeamsForUser:g.getTeamsForUser,updateTeamMemberSchemeRoles:g.updateTeamMemberSchemeRoles,removeUserFromTeam:g.removeUserFromTeam},e)}}))(Wn);function Yn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Vn extends x.a.PureComponent{constructor(...e){super(...e),Yn(this,"handleClick",async e=>{e.preventDefault();const t=await this.props.actions.revokeUserAccessToken(this.props.tokenId);Object(Ut.d)("system_console","revoke_user_access_token"),"error"in t&&this.props.onError(t.error.message)})}render(){return x.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClick},x.a.createElement(w.a,{id:"admin.revoke_token_button.delete",defaultMessage:"Delete"}))}}Yn(Vn,"propTypes",{actions:j.a.shape({revokeUserAccessToken:j.a.func.isRequired}).isRequired,tokenId:j.a.string.isRequired,onError:j.a.func.isRequired});var Jn=Object(r.connect)(null,(function(e){return{actions:Object(o.bindActionCreators)({revokeUserAccessToken:K.revokeUserAccessToken},e)}}))(Vn);function Xn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kn extends x.a.PureComponent{constructor(e){super(e),Xn(this,"handleError",e=>{this.setState({error:e})}),Xn(this,"renderContents",()=>{const{user:e,userAccessTokens:t}=this.props;if(!e)return x.a.createElement(ee.a,null);let a,n=kn.getFullName(e);if(n?n+=" (@".concat(e.username,")"):n="@".concat(e.username),t){const e=Object.values(t);a=0===e.length?x.a.createElement("div",{className:"manage-row__empty"},x.a.createElement(w.a,{id:"admin.manage_tokens.userAccessTokensNone",defaultMessage:"No personal access tokens."})):e.map(e=>x.a.createElement("div",{key:e.id,className:"manage-teams__team"},x.a.createElement("div",{className:"manage-teams__team-name"},x.a.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},x.a.createElement(w.a,{id:"admin.manage_tokens.userAccessTokensNameLabel",defaultMessage:"Token Description: "}),e.description),x.a.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},x.a.createElement(w.a,{id:"admin.manage_tokens.userAccessTokensIdLabel",defaultMessage:"Token ID: "}),e.id)),x.a.createElement("div",{className:"manage-teams__team-actions"},x.a.createElement(Jn,{tokenId:e.id,onError:this.handleError}))))}else a=x.a.createElement(ee.a,null);return x.a.createElement("div",null,x.a.createElement("div",{className:"manage-teams__user"},x.a.createElement(Pn.a,{username:e.username,url:Ft.Client4.getProfilePictureUrl(e.id,e.last_picture_update),size:"lg"}),x.a.createElement("div",{className:"manage-teams__info"},x.a.createElement("div",{className:"manage-teams__name"},n),x.a.createElement("div",{className:"manage-teams__email"},e.email))),x.a.createElement("div",{className:"pt-3"},x.a.createElement(P.b,{id:"admin.manage_tokens.userAccessTokensDescription",defaultMessage:"Personal access tokens function similarly to session tokens and can be used by integrations to [interact with this Mattermost server](!https://about.mattermost.com/default-api-authentication). Tokens are disabled if the user is deactivated. Learn more about [personal access tokens](!https://about.mattermost.com/default-user-access-tokens)."})),x.a.createElement("div",{className:"manage-teams__teams"},a))}),this.state={error:null}}componentDidUpdate(e){const t=this.props.user?this.props.user.id:null,a=e.user?e.user.id:null;t&&a!==t&&this.props.actions.getUserAccessTokensForUser(t,0,200)}render(){return x.a.createElement(za.a,{show:this.props.show,onHide:this.props.onModalDismissed,dialogClassName:"a11y__modal manage-teams",role:"dialog","aria-labelledby":"manageTokensModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"manageTokensModalLabel"},x.a.createElement(w.a,{id:"admin.manage_tokens.manageTokensTitle",defaultMessage:"Manage Personal Access Tokens"}))),x.a.createElement(za.a.Body,null,this.renderContents(),this.state.error))}}Xn(Kn,"propTypes",{show:j.a.bool.isRequired,user:j.a.object,userAccessTokens:j.a.object,onModalDismissed:j.a.func.isRequired,actions:j.a.shape({getUserAccessTokensForUser:j.a.func.isRequired}).isRequired});var Qn=Object(r.connect)((function(e,t){const a=t.user?t.user.id:"";return{userAccessTokens:e.entities.admin.userAccessTokensByUser[a]}}),(function(e){return{actions:Object(o.bindActionCreators)({getUserAccessTokensForUser:K.getUserAccessTokensForUser},e)}}))(Kn);function $n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zn extends x.a.Component{constructor(e){super(e),$n(this,"doSubmit",async e=>{if(e.preventDefault(),!this.props.user)return;let t="";if(this.refs.currentPassword&&(t=this.refs.currentPassword.value,""===t)){const e=x.a.createElement(w.a,{id:"admin.reset_password.missing_current",defaultMessage:"Please enter your current password."});return void this.setState({serverErrorCurrentPass:e})}const a=this.refs.password.value,{valid:n,error:s}=U.gb(a,this.props.passwordConfig);if(!n&&s)return void this.setState({serverErrorNewPass:s});this.setState({serverErrorNewPass:null});const i=await this.props.actions.updateUserPassword(this.props.user.id,t,a);"error"in i?this.setState({serverErrorCurrentPass:i.error.message}):this.props.onModalSubmit(this.props.user)}),$n(this,"doCancel",()=>{this.setState({serverErrorNewPass:null,serverErrorCurrentPass:null}),this.props.onModalDismissed()}),this.state={serverErrorNewPass:null,serverErrorCurrentPass:null}}componentWillUnmount(){this.setState({serverErrorNewPass:null,serverErrorCurrentPass:null})}render(){const e=this.props.user;if(null==e)return x.a.createElement("div",null);let t,a="input-group input-group--limit",n=null;this.state.serverErrorNewPass&&(a+=" has-error",n=x.a.createElement("div",{className:"has-error"},x.a.createElement("p",{className:"input__help error"},this.state.serverErrorNewPass))),t=e.auth_service?x.a.createElement(w.a,{id:"admin.reset_password.titleSwitch",defaultMessage:"Switch Account to Email/Password"}):x.a.createElement(w.a,{id:"admin.reset_password.titleReset",defaultMessage:"Reset Password"});let s=null,i=null,r=!0;if(this.props.currentUserId===e.id){r=!1;let e="input-group input-group--limit";this.state.serverErrorCurrentPass&&(e+=" has-error",i=x.a.createElement("div",{className:"has-error"},x.a.createElement("p",{className:"input__help error"},this.state.serverErrorCurrentPass))),s=x.a.createElement("div",{className:"col-sm-10 password__group-addon-space"},x.a.createElement("div",{className:e},x.a.createElement("span",{"data-toggle":"tooltip",title:"Current Password",className:"input-group-addon password__group-addon"},x.a.createElement(w.a,{id:"admin.reset_password.curentPassword",defaultMessage:"Current Password"})),x.a.createElement("input",{type:"password",ref:"currentPassword",className:"form-control",autoFocus:!0})))}return x.a.createElement(za.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.doCancel,role:"dialog","aria-labelledby":"resetPasswordModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"resetPasswordModalLabel"},t)),x.a.createElement("form",{role:"form",className:"form-horizontal"},x.a.createElement(za.a.Body,null,x.a.createElement("div",{className:"form-group"},s,x.a.createElement("div",{className:"col-sm-10"},x.a.createElement("div",{className:a},x.a.createElement("span",{"data-toggle":"tooltip",title:"New Password",className:"input-group-addon password__group-addon"},x.a.createElement(w.a,{id:"admin.reset_password.newPassword",defaultMessage:"New Password"})),x.a.createElement("input",{type:"password",ref:"password",className:"form-control",autoFocus:r})),n,i))),x.a.createElement(za.a.Footer,null,x.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.doCancel},x.a.createElement(w.a,{id:"admin.reset_password.cancel",defaultMessage:"Cancel"})),x.a.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary"},x.a.createElement(w.a,{id:"admin.reset_password.reset",defaultMessage:"Reset"})))))}}$n(Zn,"propTypes",{user:j.a.any,currentUserId:j.a.string.isRequired,show:j.a.bool,onModalSubmit:j.a.func.isRequired,onModalDismissed:j.a.func.isRequired,passwordConfig:j.a.shape({minimumLength:j.a.number.isRequired,requireLowercase:j.a.bool.isRequired,requireNumber:j.a.bool.isRequired,requireSymbol:j.a.bool.isRequired,requireUppercase:j.a.bool.isRequired}).isRequired,actions:j.a.shape({updateUserPassword:j.a.func.isRequired}).isRequired}),$n(Zn,"defaultProps",{show:!1});var es=Object(r.connect)((function(e){const t=Object(m.getConfig)(e);return{currentUserId:Object(f.getCurrentUserId)(e),passwordConfig:Object(U.D)(t)}}),(function(e){return{actions:Object(o.bindActionCreators)({updateUserPassword:K.updateUserPassword},e)}}))(Zn),ts=a(46);function as(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ns extends x.a.Component{constructor(e){super(e),as(this,"doSubmit",e=>{if(e.preventDefault(),this.refs.email){const e=this.refs.email.value;if(!Object(ts.isEmail)(e)){const e=x.a.createElement(w.a,{id:"user.settings.general.validEmail",defaultMessage:"Please enter a valid email address."});return void this.setState({error:e})}}const t=Object.assign({},this.props.user),a=this.refs.email.value.trim().toLowerCase();t.email=a,this.setState({error:null}),Object(_.a)(t,()=>{this.props.onModalSubmit(this.props.user)},e=>{const t=e.message?e.message:e;this.setState({error:t})})}),as(this,"doCancel",()=>{this.setState({error:null}),this.props.onModalDismissed()}),this.state={error:null}}render(){if(!this.props.user)return x.a.createElement("div",null);let e="input-group input-group--limit",t=null;this.state.error&&(e+=" has-error",t=x.a.createElement("div",{className:"has-error"},x.a.createElement("p",{className:"input__help error"},this.state.error)));const a=x.a.createElement(w.a,{id:"admin.reset_email.titleReset",defaultMessage:"Update Email"});return x.a.createElement(za.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.doCancel,role:"dialog","aria-labelledby":"resetEmailModalLabel","data-testid":"resetEmailModal"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"resetEmailModalLabel"},a)),x.a.createElement("form",{role:"form",className:"form-horizontal"},x.a.createElement(za.a.Body,null,x.a.createElement("div",{className:"form-group"},x.a.createElement("div",{className:"col-sm-10"},x.a.createElement("div",{className:e,"data-testid":"resetEmailForm"},x.a.createElement("span",{"data-toggle":"tooltip",title:"New Email",className:"input-group-addon email__group-addon"},x.a.createElement(w.a,{id:"admin.reset_email.newEmail",defaultMessage:"New Email"})),x.a.createElement("input",{type:"email",ref:"email",className:"form-control",maxLength:"128",autoFocus:!0})),t))),x.a.createElement(za.a.Footer,null,x.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.doCancel},x.a.createElement(w.a,{id:"admin.reset_email.cancel",defaultMessage:"Cancel"})),x.a.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary","data-testid":"resetEmailButton"},x.a.createElement(w.a,{id:"admin.reset_email.reset",defaultMessage:"Reset"})))))}}as(ns,"propTypes",{user:j.a.object,show:j.a.bool.isRequired,onModalSubmit:j.a.func,onModalDismissed:j.a.func,passwordConfig:j.a.object}),as(ns,"defaultProps",{show:!1});var ss=a(1528),is=a(1202);function rs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class os extends x.a.Component{constructor(e){super(e),rs(this,"onError",e=>{this.setState({error:e})}),this.state={}}render(){let e=null;this.props.actions&&(e=this.props.actions.map((e,t)=>x.a.createElement(e,Object.assign({key:t.toString(),user:this.props.user,index:this.props.index,totalUsers:this.props.totalUsers},this.props.actionProps,this.props.actionUserProps,{onError:this.onError}))));let t,a=this.props.user.email,n="more-modal__description";this.props.user.is_bot?a=null:this.props.extraInfo&&this.props.extraInfo.length>0?(a=x.a.createElement(P.b,{id:"admin.user_item.emailTitle",defaultMessage:"**Email:** {email}",values:{email:this.props.user.email}}),n=""):t=this.props.user.status?this.props.user.status:this.props.status,this.props.user.is_bot&&(t=null);let s=null,i=null;this.props.userCount>=0&&(s=U.h("userListRowName"+this.props.userCount),i=U.h("userListRowEmail"+this.props.userCount));let r=null;return this.state.error&&(r=x.a.createElement("div",{className:"has-error"},x.a.createElement("label",{className:"has-error control-label"},this.state.error.message))),x.a.createElement("div",{"data-testid":"userListRow",key:this.props.user.id,className:"more-modal__row"},x.a.createElement(is.a,{src:Ft.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:t,size:"md"}),x.a.createElement("div",{className:"more-modal__right"},x.a.createElement("div",{className:"more-modal__top"},x.a.createElement("div",{className:"more-modal__details"},x.a.createElement("div",{id:s,className:"more-modal__name"},x.a.createElement(de.a,{to:"/admin_console/user_management/user/"+this.props.user.id},U.k(this.props.user)),x.a.createElement(jn.a,{className:"badge-admin",show:Boolean(this.props.user.is_bot)})),x.a.createElement("div",{id:i,className:n},a),this.props.extraInfo),x.a.createElement("div",{className:"more-modal__actions"},e)),x.a.createElement("div",{className:"more-modal__bottom"},r)))}}rs(os,"propTypes",{user:j.a.object.isRequired,status:j.a.string,extraInfo:j.a.array,actions:j.a.arrayOf(j.a.func),actionProps:j.a.object,actionUserProps:j.a.object,index:j.a.number,totalUsers:j.a.number,userCount:j.a.number}),rs(os,"defaultProps",{extraInfo:[],actions:[],actionProps:{},actionUserProps:{}});var ls=Object(r.connect)((function(e,t){const a=t.user||{};return{status:Object(f.getStatusForUserId)(e,a.id)}}))(os),cs=a(1262),ds=a(1294);function us(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ms(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hs extends x.a.PureComponent{constructor(e){super(e),ms(this,"handleMakeActive",e=>{e.preventDefault(),this.props.actions.updateUserActive(this.props.user.id,!0).then(this.onUpdateActiveResult)}),ms(this,"handleManageTeams",e=>{e.preventDefault(),this.props.doManageTeams(this.props.user)}),ms(this,"handleManageRoles",e=>{e.preventDefault(),this.props.doManageRoles(this.props.user)}),ms(this,"handleManageTokens",e=>{e.preventDefault(),this.props.doManageTokens(this.props.user)}),ms(this,"handleResetPassword",e=>{e.preventDefault(),this.props.doPasswordReset(this.props.user)}),ms(this,"handleResetEmail",e=>{e.preventDefault(),this.props.doEmailReset(this.props.user)}),ms(this,"handleResetMfa",e=>{e.preventDefault(),Object(_.b)(this.props.user.id,null,this.props.onError)}),ms(this,"handleShowDeactivateMemberModal",async e=>{e.preventDefault(),this.shouldDisableBotsWhenOwnerIsDeactivated()&&await this.props.actions.loadBots(O.j.Integrations.START_PAGE_NUM,parseInt(O.j.Integrations.PAGE_SIZE,10)),this.setState({showDeactivateMemberModal:!0})}),ms(this,"handleDeactivateMember",()=>{this.props.actions.updateUserActive(this.props.user.id,!1).then(this.onUpdateActiveResult),this.setState({showDeactivateMemberModal:!1})}),ms(this,"onUpdateActiveResult",({error:e})=>{e&&this.props.onError(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?us(Object(a),!0).forEach((function(t){ms(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):us(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e.server_error_id},e))}),ms(this,"handleDeactivateCancel",()=>{this.setState({showDeactivateMemberModal:!1})}),ms(this,"renderDeactivateMemberModal",()=>{const e=this.props.user,t=x.a.createElement(w.a,{id:"deactivate_member_modal.title",defaultMessage:"Deactivate {username}",values:{username:this.props.user.username}}),a=x.a.createElement(P.b,{id:"deactivate_member_modal.desc",defaultMessage:"This action deactivates {username}. They will be logged out and not have access to any teams or channels on this system.\\n",values:{username:e.username}});let n;""!==e.auth_service&&e.auth_service!==O.j.EMAIL_SERVICE&&(n=x.a.createElement("strong",null,x.a.createElement("br",null),x.a.createElement("br",null),x.a.createElement(w.a,{id:"deactivate_member_modal.sso_warning",defaultMessage:"You must also deactivate this user in the SSO provider or they will be reactivated on next login or sync."})));const s=x.a.createElement(P.b,{id:"deactivate_member_modal.desc.confirm",defaultMessage:"Are you sure you want to deactivate {username}?",values:{username:e.username}});let i;if(this.shouldDisableBotsWhenOwnerIsDeactivated())for(const t of Object.values(this.props.bots))if(t.owner_id===e.id&&this.state.showDeactivateMemberModal&&0===t.delete_at){i=x.a.createElement(P.b,{id:"deactivate_member_modal.desc.for_users_with_bot_accounts",defaultMessage:"This action deactivates {username}.\\n \\n * They will be logged out and not have access to any teams or channels on this system.\\n * Bot accounts they manage will be disabled along with their integrations. To enable them again, go to [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots). [Learn more about bot accounts](!https://mattermost.com/pl/default-bot-accounts).\\n \\n \\n",values:{username:e.username,siteURL:Object(C.f)()}});break}const r=x.a.createElement("div",null,i||a,s,n),o=x.a.createElement(w.a,{id:"deactivate_member_modal.deactivate",defaultMessage:"Deactivate"});return x.a.createElement(ge.a,{show:this.state.showDeactivateMemberModal,title:t,message:r,confirmButtonClass:"btn btn-danger",confirmButtonText:o,onConfirm:this.handleDeactivateMember,onCancel:this.handleDeactivateCancel})}),ms(this,"handleShowRevokeSessionsModal",e=>{e.preventDefault(),this.setState({showRevokeSessionsModal:!0})}),ms(this,"handleRevokeSessions",async()=>{const e=this.props.currentUser,{data:t,error:a}=await this.props.actions.revokeAllSessionsForUser(this.props.user.id);t&&this.props.user.id===e.id?Object(Mn.e)():a&&this.props.onError(a),this.setState({showRevokeSessionsModal:!1})}),ms(this,"handleRevokeSessionsCancel",()=>{this.setState({showRevokeSessionsModal:!1})}),ms(this,"handlePromoteToUser",()=>{this.setState({showPromoteToUserModal:!0})}),ms(this,"handlePromoteToUserConfirm",async()=>{const{error:e}=await this.props.actions.promoteGuestToUser(this.props.user.id);e&&this.props.onError(e),this.setState({showPromoteToUserModal:!1})}),ms(this,"handlePromoteToUserCancel",()=>{this.setState({showPromoteToUserModal:!1})}),ms(this,"handleDemoteToGuest",()=>{this.setState({showDemoteToGuestModal:!0})}),ms(this,"handleDemoteToGuestConfirm",async()=>{const{error:e}=await this.props.actions.demoteUserToGuest(this.props.user.id);e&&this.props.onError(e),this.setState({showDemoteToGuestModal:!1})}),ms(this,"handleDemoteToGuestCancel",()=>{this.setState({showDemoteToGuestModal:!1})}),ms(this,"renderPromoteToUserModal",()=>{const e=x.a.createElement(w.a,{id:"promote_to_user_modal.title",defaultMessage:"Promote guest {username} to user",values:{username:this.props.user.username}}),t=x.a.createElement(w.a,{id:"promote_to_user_modal.desc",defaultMessage:"This action promotes the guest {username} to a member. It will allow the user to join public channels and interact with users outside of the channels they are currently members of. Are you sure you want to promote guest {username} to user?",values:{username:this.props.user.username}}),a=x.a.createElement(w.a,{id:"promote_to_user_modal.promote",defaultMessage:"Promote"});return x.a.createElement(ge.a,{show:this.state.showPromoteToUserModal,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:a,onConfirm:this.handlePromoteToUserConfirm,onCancel:this.handlePromoteToUserCancel})}),ms(this,"renderDemoteToGuestModal",()=>{const e=x.a.createElement(w.a,{id:"demote_to_user_modal.title",defaultMessage:"Demote User {username} to Guest",values:{username:this.props.user.username}}),t=x.a.createElement(w.a,{id:"demote_to_user_modal.desc",defaultMessage:"This action demotes the user {username} to a guest. It will restrict the user's ability to join public channels and interact with users outside of the channels they are currently members of. Are you sure you want to demote user {username} to guest?",values:{username:this.props.user.username}}),a=x.a.createElement(w.a,{id:"demote_to_user_modal.demote",defaultMessage:"Demote"});return x.a.createElement(ge.a,{show:this.state.showDemoteToGuestModal,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:a,onConfirm:this.handleDemoteToGuestConfirm,onCancel:this.handleDemoteToGuestCancel})}),ms(this,"renderRevokeSessionsModal",()=>{const e=x.a.createElement(w.a,{id:"revoke_user_sessions_modal.title",defaultMessage:"Revoke Sessions for {username}",values:{username:this.props.user.username}}),t=x.a.createElement(w.a,{id:"revoke_user_sessions_modal.desc",defaultMessage:"This action revokes all sessions for {username}. They will be logged out from all devices. Are you sure you want to revoke all sessions for {username}?",values:{username:this.props.user.username}}),a=x.a.createElement(w.a,{id:"revoke_user_sessions_modal.revoke",defaultMessage:"Revoke"});return x.a.createElement(ge.a,{show:this.state.showRevokeSessionsModal,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:a,onConfirm:this.handleRevokeSessions,onCancel:this.handleRevokeSessionsCancel})}),ms(this,"renderAccessToken",()=>{if(!this.props.enableUserAccessTokens)return null;const e=this.props.user,t=kn.hasPostAllRole(e.roles),a=kn.hasPostAllPublicRole(e.roles),n=kn.hasUserAccessTokenRole(e.roles),s=kn.isSystemAdmin(e.roles);let i="";return(n||s)&&(i=t?Object(M.b)("admin.user_item.userAccessTokenPostAll"):a?Object(M.b)("admin.user_item.userAccessTokenPostAllPublic"):Object(M.b)("admin.user_item.userAccessTokenYes")),i?x.a.createElement("div",{className:"light mt-1"},x.a.createElement(w.a,{key:"admin.user_item.userAccessToken",id:i})):null}),this.state={showDeactivateMemberModal:!1,showRevokeSessionsModal:!1,showPromoteToUserModal:!1,showDemoteToGuestModal:!1,user:null,role:null}}shouldDisableBotsWhenOwnerIsDeactivated(){return this.props.config&&this.props.config.ServiceSettings&&this.props.config.ServiceSettings.DisableBotsWhenOwnerIsDeactivated}render(){const{currentUser:e,user:t,isLicensed:a}=this.props,n=U.X(t);if(!t)return x.a.createElement("div",null);let s=x.a.createElement(w.a,{id:"admin.user_item.member",defaultMessage:"Member"});n&&(s=x.a.createElement(w.a,{id:"team_members_dropdown.guest",defaultMessage:"Guest"})),t.roles.length>0&&U.cb(t.roles)&&(s=x.a.createElement(w.a,{id:"team_members_dropdown.systemAdmin",defaultMessage:"System Admin"}));let i=!1,r=!U.cb(t.roles),o=!0,l=!0;const c=this.props.mfaEnabled&&Boolean(t.mfa_active);t.delete_at>0&&(s=x.a.createElement(w.a,{id:"admin.user_item.inactive",defaultMessage:"Inactive"}),i=!0,r=!1,o=!1,l=!1);let d=!1;t.auth_service===O.j.LDAP_SERVICE&&(d=!0);const u=this.renderDeactivateMemberModal(),m=this.renderRevokeSessionsModal(),h=this.renderPromoteToUserModal(),p=this.renderDemoteToGuestModal(),{index:g,totalUsers:f}=this.props;return x.a.createElement(x.a.Fragment,null,u,m,h,p,x.a.createElement(Ln.a,null,x.a.createElement("div",{className:"text-right"},x.a.createElement("a",null,x.a.createElement("span",null,s," "),x.a.createElement("span",{className:"caret"})),this.renderAccessToken()),x.a.createElement(Bn.a,{openLeft:!0,openUp:f>5&&f-g<=3,ariaLabel:U.jb("admin.user_item.menuAriaLabel","User Actions Menu")},x.a.createElement(Bn.a.ItemAction,{show:i,onClick:this.handleMakeActive,text:U.jb("admin.user_item.makeActive","Activate"),disabled:d}),x.a.createElement(Bn.a.ItemAction,{show:r,onClick:this.handleShowDeactivateMemberModal,text:U.jb("admin.user_item.makeInactive","Deactivate"),disabled:d}),x.a.createElement(Bn.a.ItemAction,{show:!n,onClick:this.handleManageRoles,text:U.jb("admin.user_item.manageRoles","Manage Roles")}),x.a.createElement(Bn.a.ItemAction,{show:o,onClick:this.handleManageTeams,text:U.jb("admin.user_item.manageTeams","Manage Teams")}),x.a.createElement(Bn.a.ItemAction,{show:this.props.enableUserAccessTokens,onClick:this.handleManageTokens,text:U.jb("admin.user_item.manageTokens","Manage Tokens")}),x.a.createElement(Bn.a.ItemAction,{show:c,onClick:this.handleResetMfa,text:U.jb("admin.user_item.resetMfa","Remove MFA")}),x.a.createElement(Bn.a.ItemAction,{show:Boolean(t.auth_service)&&this.props.experimentalEnableAuthenticationTransfer,onClick:this.handleResetPassword,text:U.jb("admin.user_item.switchToEmail","Switch to Email/Password")}),x.a.createElement(Bn.a.ItemAction,{show:!t.auth_service,onClick:this.handleResetPassword,text:U.jb("admin.user_item.resetPwd","Reset Password")}),x.a.createElement(Bn.a.ItemAction,{show:!t.auth_service&&t.id!==e.id,onClick:this.handleResetEmail,text:U.jb("admin.user_item.resetEmail","Update Email")}),x.a.createElement(Bn.a.ItemAction,{show:n,onClick:this.handlePromoteToUser,text:U.jb("admin.user_item.promoteToUser","Promote to User")}),x.a.createElement(Bn.a.ItemAction,{show:!n&&t.id!==e.id&&a,onClick:this.handleDemoteToGuest,text:U.jb("admin.user_item.demoteToGuest","Demote to Guest")}),x.a.createElement(Cn.a,{permissions:[v.Permissions.REVOKE_USER_ACCESS_TOKEN]},x.a.createElement(Bn.a.ItemAction,{show:l,onClick:this.handleShowRevokeSessionsModal,text:U.jb("admin.user_item.revokeSessions","Revoke Sessions")})))))}}ms(hs,"propTypes",{user:j.a.oneOfType([j.a.any,j.a.shape({mfa_active:j.a.bool.isRequired})]).isRequired,currentUser:j.a.any.isRequired,mfaEnabled:j.a.bool.isRequired,enableUserAccessTokens:j.a.bool.isRequired,experimentalEnableAuthenticationTransfer:j.a.bool.isRequired,index:j.a.number.isRequired,totalUsers:j.a.number.isRequired,config:j.a.any.isRequired,bots:j.a.any.isRequired,isLicensed:j.a.bool.isRequired,actions:j.a.shape({updateUserActive:j.a.func.isRequired,revokeAllSessionsForUser:j.a.func.isRequired,promoteGuestToUser:j.a.func.isRequired,demoteUserToGuest:j.a.func.isRequired,loadBots:j.a.func.isRequired}).isRequired,doPasswordReset:j.a.func.isRequired,doEmailReset:j.a.func.isRequired,doManageTeams:j.a.func.isRequired,doManageRoles:j.a.func.isRequired,doManageTokens:j.a.func.isRequired,onError:j.a.func.isRequired});var ps=Object(r.connect)((function(e){const t=Object(cs.getBotAccounts)(e),a=Object(m.getLicense)(e);return{isLicensed:a&&"true"===a.IsLicensed,config:d.getConfig(e),currentUser:Object(f.getCurrentUser)(e),bots:t}}),(function(e){return{actions:Object(o.bindActionCreators)({updateUserActive:K.updateUserActive,revokeAllSessionsForUser:K.revokeAllSessionsForUser,promoteGuestToUser:K.promoteGuestToUser,demoteUserToGuest:K.demoteUserToGuest,loadBots:ds.loadBots},e)}}))(hs);function gs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fs extends x.a.Component{constructor(e){super(e),gs(this,"nextPage",()=>{this.setState({page:this.state.page+1}),this.props.nextPage(this.state.page+1)}),gs(this,"previousPage",()=>{this.setState({page:this.state.page-1})}),gs(this,"search",e=>{this.props.search(e),""!==e&&this.setState({page:0})}),gs(this,"doManageTeams",e=>{this.setState({showManageTeamsModal:!0,user:e})}),gs(this,"doManageRoles",e=>{this.setState({showManageRolesModal:!0,user:e})}),gs(this,"doManageTokens",e=>{this.setState({showManageTokensModal:!0,user:e})}),gs(this,"doManageTeamsDismiss",()=>{this.setState({showManageTeamsModal:!1,user:null})}),gs(this,"doManageRolesDismiss",()=>{this.setState({showManageRolesModal:!1,user:null})}),gs(this,"doManageTokensDismiss",()=>{this.setState({showManageTokensModal:!1,user:null})}),gs(this,"doPasswordReset",e=>{this.setState({showPasswordModal:!0,user:e})}),gs(this,"doPasswordResetDismiss",()=>{this.setState({showPasswordModal:!1,user:null})}),gs(this,"doPasswordResetSubmit",e=>{this.props.actions.getUser(e.id),this.setState({showPasswordModal:!1,user:null})}),gs(this,"doEmailReset",e=>{this.setState({showEmailModal:!0,user:e})}),gs(this,"doEmailResetDismiss",()=>{this.setState({showEmailModal:!1,user:null})}),gs(this,"doEmailResetSubmit",e=>{this.props.actions.getUser(e.id),this.setState({showEmailModal:!1,user:null})}),this.state={page:0,filter:e.filter,teamId:e.teamId,showManageTeamsModal:!1,showManageRolesModal:!1,showManageTokensModal:!1,showPasswordModal:!1,showEmailModal:!1,user:null}}static getDerivedStateFromProps(e,t){return t.teamId!==e.teamId||t.filter!==e.filter?{page:0,teamId:e.teamId,filter:e.filter}:null}getInfoForUser(e){const t=[];if(e.auth_service){let a;a=e.auth_service===O.j.LDAP_SERVICE||e.auth_service===O.j.SAML_SERVICE?e.auth_service.toUpperCase():U.sb(e.auth_service),t.push(x.a.createElement(P.b,{key:"admin.user_item.authServiceNotEmail",id:"admin.user_item.authServiceNotEmail",defaultMessage:"**Sign-in Method:** {service}",values:{service:a}}))}else t.push(x.a.createElement(P.b,{key:"admin.user_item.authServiceEmail",id:"admin.user_item.authServiceEmail",defaultMessage:"**Sign-in Method:** Email"}));t.push(", ");const a=e.id;return t.push(x.a.createElement(P.b,{key:"admin.user_item.user_id",id:"admin.user_item.user_id",defaultMessage:"**User ID:** {userID}",values:{userID:a}})),this.props.mfaEnabled&&(t.push(", "),e.mfa_active?t.push(x.a.createElement(P.b,{key:"admin.user_item.mfaYes",id:"admin.user_item.mfaYes",defaultMessage:"**MFA**: Yes"})):t.push(x.a.createElement(P.b,{key:"admin.user_item.mfaNo",id:"admin.user_item.mfaNo",defaultMessage:"**MFA**: No"}))),t}renderCount(e,t,a,n,s){return t?s?x.a.createElement(w.a,{id:"system_users_list.countSearch",defaultMessage:"{count, number} {count, plural, one {user} other {users}} of {total, number} total",values:{count:e,total:t}}):0!==a||n!==t?x.a.createElement(w.a,{id:"system_users_list.countPage",defaultMessage:"{startCount, number} - {endCount, number} {count, plural, one {user} other {users}} of {total, number} total",values:{count:e,startCount:a+1,endCount:n,total:t}}):x.a.createElement(w.a,{id:"system_users_list.count",defaultMessage:"{count, number} {count, plural, one {user} other {users}}",values:{count:e}}):null}render(){const e={};if(this.props.users)for(const t of this.props.users)e[t.id]=this.getInfoForUser(t);return x.a.createElement("div",null,x.a.createElement(ss.a,Object.assign({},this.props,{renderCount:this.renderCount,extraInfo:e,actions:[ps],actionProps:{mfaEnabled:this.props.mfaEnabled,enableUserAccessTokens:this.props.enableUserAccessTokens,experimentalEnableAuthenticationTransfer:this.props.experimentalEnableAuthenticationTransfer,doPasswordReset:this.doPasswordReset,doEmailReset:this.doEmailReset,doManageTeams:this.doManageTeams,doManageRoles:this.doManageRoles,doManageTokens:this.doManageTokens},nextPage:this.nextPage,previousPage:this.previousPage,search:this.search,page:this.state.page,term:this.props.term,onTermChange:this.props.onTermChange,rowComponentType:ls})),x.a.createElement(zn,{user:this.state.user,show:this.state.showManageTeamsModal,onModalDismissed:this.doManageTeamsDismiss}),x.a.createElement(Dn,{user:this.state.user,show:this.state.showManageRolesModal,onModalDismissed:this.doManageRolesDismiss}),x.a.createElement(Qn,{user:this.state.user,show:this.state.showManageTokensModal,onModalDismissed:this.doManageTokensDismiss}),x.a.createElement(es,{user:this.state.user,show:this.state.showPasswordModal,onModalSubmit:this.doPasswordResetSubmit,onModalDismissed:this.doPasswordResetDismiss}),x.a.createElement(ns,{user:this.state.user,show:this.state.showEmailModal,onModalSubmit:this.doEmailResetSubmit,onModalDismissed:this.doEmailResetDismiss}))}}gs(fs,"propTypes",{users:j.a.arrayOf(j.a.object),usersPerPage:j.a.number,total:j.a.number,nextPage:j.a.func,search:j.a.func.isRequired,focusOnMount:j.a.bool,renderFilterRow:j.a.func,teamId:j.a.string.isRequired,filter:j.a.string.isRequired,term:j.a.string.isRequired,onTermChange:j.a.func.isRequired,mfaEnabled:j.a.bool.isRequired,enableUserAccessTokens:j.a.bool.isRequired,experimentalEnableAuthenticationTransfer:j.a.bool.isRequired,actions:j.a.shape({getUser:j.a.func.isRequired}).isRequired});function bs(e,t,a,n,s){if(t)return[];const i=function(e){return On(e)}(s);if(n){let t=[];if(t=a?Object(f.searchProfilesInTeam)(e,a,n,!1,i):Object(f.searchProfiles)(e,n,!1,i),0===t.length&&26===n.length){const a=Object(f.getUser)(e,n);a&&(t=[a])}return t}return""===a?Object(f.getProfiles)(e,i):"no_team"===a?Object(f.getProfilesWithoutTeam)(e,i):Object(f.getProfilesInTeam)(e,a,i)}var vs=Object(r.connect)((function(e,t){return{users:function(e,t,a,n,s){return bs(e,t,a,n,s).filter(e=>!e.is_bot)}(e,t.loading,t.teamId,t.term,t.filter)}}),(function(e){return{actions:Object(o.bindActionCreators)({getUser:K.getUser},e)}}))(fs);function _s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ys(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Es extends x.a.Component{constructor(e){super(e),ys(this,"loadDataForTeam",async(e,t)=>{const{getProfiles:a,loadProfilesWithoutTeam:n,loadProfilesAndTeamMembers:s,getTeamStats:i}=this.props.actions;if(this.props.searchTerm)return void this.doSearch(this.props.searchTerm,e,t);const r=On(t);e===O.E.ALL_USERS?await Promise.all([a(0,O.j.PROFILE_CHUNK_SIZE,r),Object(_.r)()]):e===O.E.NO_TEAM?await n(0,O.j.PROFILE_CHUNK_SIZE,r):await Promise.all([s(0,O.j.PROFILE_CHUNK_SIZE,e,r),i(e)]),this.setState({loading:!1})}),ys(this,"handleTeamChange",e=>{const t=e.target.value;this.loadDataForTeam(t,this.props.filter),this.props.actions.setSystemUsersSearch(this.props.searchTerm,t,this.props.filter)}),ys(this,"handleFilterChange",e=>{const t=e.target.value;this.loadDataForTeam(this.props.teamId,t),this.props.actions.setSystemUsersSearch(this.props.searchTerm,this.props.teamId,t)}),ys(this,"handleTermChange",e=>{this.props.actions.setSystemUsersSearch(e,this.props.teamId,this.props.filter)}),ys(this,"handleRevokeAllSessions",async()=>{const{data:e}=await this.props.actions.revokeSessionsForAllUsers();e?Object(Mn.e)():this.props.actions.logError({type:"critical",message:"Can't revoke all sessions"})}),ys(this,"handleRevokeAllSessionsCancel",()=>{this.setState({showRevokeAllSessionsModal:!1})}),ys(this,"handleShowRevokeAllSessionsModal",()=>{this.setState({showRevokeAllSessionsModal:!0})}),ys(this,"nextPage",async e=>{const{teamId:t,filter:a}=this.props,{getProfiles:n,loadProfilesWithoutTeam:s,loadProfilesAndTeamMembers:i}=this.props.actions,r=On(a);t===O.E.ALL_USERS?await n(e+1,50,r):t===O.E.NO_TEAM?await s(e+1,50,r):await i(e+1,50,t,r),this.setState({loading:!1})}),ys(this,"doSearch",Object(wn.debounce)(async(e,t=this.props.teamId,a=this.props.filter)=>{if(!e)return;this.setState({loading:!0});const n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(a),!0).forEach((function(t){ys(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},function(e){const t={};return e===O.L.SYSTEM_ADMIN?t[O.N.ROLE]=O.L.SYSTEM_ADMIN:e===O.L.SYSTEM_GUEST?t[O.N.ROLE]=O.L.SYSTEM_GUEST:e===O.L.INACTIVE&&(t[O.N.ALLOW_INACTIVE]=!0),t}(a),{},t&&{team_id:t},{},t===O.E.NO_TEAM&&{[O.N.WITHOUT_TEAM]:!0},{allow_inactive:!0}),{data:s}=await this.props.actions.searchProfiles(e,n);0===s.length&&26===e.length&&await this.getUserByTokenOrId(e),this.setState({loading:!1})},O.j.SEARCH_TIMEOUT_MILLISECONDS)),ys(this,"getUserById",async e=>{this.props.users[e]||await this.props.actions.getUser(e),this.setState({loading:!1})}),ys(this,"getUserByTokenOrId",async e=>{if(this.props.enableUserAccessTokens){const{data:t}=await this.props.actions.getUserAccessToken(e);if(t)return this.setState({term:t.user_id}),void this.getUserById(t.user_id)}this.getUserById(e)}),ys(this,"renderRevokeAllUsersModal",()=>{const e=x.a.createElement(w.a,{id:"admin.system_users.revoke_all_sessions_modal_title",defaultMessage:"Revoke all sessions in the system"}),t=x.a.createElement("div",null,x.a.createElement(P.b,{id:"admin.system_users.revoke_all_sessions_modal_message",defaultMessage:"This action revokes all sessions in the system. All users will be logged out from all devices. Are you sure you want to revoke all sessions?"})),a=x.a.createElement(w.a,{id:"admin.system_users.revoke_all_sessions_button",defaultMessage:"Revoke All Sessions"});return x.a.createElement(ge.a,{show:this.state.showRevokeAllSessionsModal,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:a,onConfirm:this.handleRevokeAllSessions,onCancel:this.handleRevokeAllSessionsCancel})}),ys(this,"renderFilterRow",e=>{const t=this.props.teams.map(e=>x.a.createElement("option",{key:e.id,value:e.id},e.display_name));return x.a.createElement("div",{className:"system-users__filter-row"},x.a.createElement("div",{className:"system-users__filter"},x.a.createElement(Gt.a,{id:"searchUsers",className:"form-control filter-textbox",placeholder:{id:Object(M.b)("filtered_user_list.search"),defaultMessage:"Search users"},onInput:e})),x.a.createElement("label",null,x.a.createElement("span",{className:"system-users__team-filter-label"},x.a.createElement(w.a,{id:"filtered_user_list.team",defaultMessage:"Team:"})),x.a.createElement("select",{className:"form-control system-users__team-filter",onChange:this.handleTeamChange,value:this.props.teamId},x.a.createElement("option",{value:O.E.ALL_USERS},U.jb("admin.system_users.allUsers","All Users")),x.a.createElement("option",{value:O.E.NO_TEAM},U.jb("admin.system_users.noTeams","No Teams")),t)),x.a.createElement("label",null,x.a.createElement("span",{className:"system-users__filter-label"},x.a.createElement(w.a,{id:"filtered_user_list.userStatus",defaultMessage:"User Status:"})),x.a.createElement("select",{id:"selectUserStatus",className:"form-control system-users__filter",value:this.props.filter,onChange:this.handleFilterChange},x.a.createElement("option",{value:""},U.jb("admin.system_users.allUsers","All Users")),x.a.createElement("option",{value:O.L.SYSTEM_ADMIN},U.jb("admin.system_users.system_admin","System Admin")),x.a.createElement("option",{value:O.L.SYSTEM_GUEST},U.jb("admin.system_users.guest","Guest")),x.a.createElement("option",{value:O.L.INACTIVE},U.jb("admin.system_users.inactive","Inactive")))))}),this.state={loading:!0,searching:!1,showRevokeAllSessionsModal:!1}}componentDidMount(){this.loadDataForTeam(this.props.teamId,this.props.filter),this.props.actions.getTeams(0,1e3)}componentWillUnmount(){this.props.actions.setSystemUsersSearch("","","")}render(){const e=this.renderRevokeAllUsersModal();return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement(N,{id:"admin.system_users.title",defaultMessage:"{siteName} Users",values:{siteName:this.props.siteName}}),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"more-modal__list member-list-holder"},x.a.createElement(vs,{loading:this.state.loading,renderFilterRow:this.renderFilterRow,search:this.doSearch,nextPage:this.nextPage,usersPerPage:50,total:this.props.totalUsers,teams:this.props.teams,teamId:this.props.teamId,filter:this.props.filter,term:this.props.searchTerm,onTermChange:this.handleTermChange,mfaEnabled:this.props.mfaEnabled,enableUserAccessTokens:this.props.enableUserAccessTokens,experimentalEnableAuthenticationTransfer:this.props.experimentalEnableAuthenticationTransfer})),x.a.createElement(Cn.a,{permissions:[v.Permissions.REVOKE_USER_ACCESS_TOKEN]},e,x.a.createElement("div",{className:"pt-3 pb-3"},x.a.createElement("button",{id:"revoke-all-users",className:"btn btn-default",onClick:()=>this.handleShowRevokeAllSessionsModal()},x.a.createElement(w.a,{id:"admin.system_users.revokeAllSessions",defaultMessage:"Revoke All Sessions"})))))))}}ys(Es,"propTypes",{teams:j.a.arrayOf(j.a.object).isRequired,siteName:j.a.string,mfaEnabled:j.a.bool.isRequired,enableUserAccessTokens:j.a.bool.isRequired,experimentalEnableAuthenticationTransfer:j.a.bool.isRequired,totalUsers:j.a.number.isRequired,searchTerm:j.a.string.isRequired,teamId:j.a.string.isRequired,filter:j.a.string.isRequired,users:j.a.object.isRequired,actions:j.a.shape({getTeams:j.a.func.isRequired,getTeamStats:j.a.func.isRequired,getUser:j.a.func.isRequired,getUserAccessToken:j.a.func.isRequired,loadProfilesAndTeamMembers:j.a.func.isRequired,loadProfilesWithoutTeam:j.a.func.isRequired,getProfiles:j.a.func.isRequired,setSystemUsersSearch:j.a.func.isRequired,searchProfiles:j.a.func.isRequired,revokeSessionsForAllUsers:j.a.func.isRequired,logError:j.a.func.isRequired}).isRequired});var Ss=Object(r.connect)((function(e){const t=Object(m.getConfig)(e),a=t.SiteName,n="true"===t.EnableMultifactorAuthentication,s="true"===t.EnableUserAccessTokens,i="true"===t.ExperimentalEnableAuthenticationTransfer,r=e.views.search.systemUsersSearch;let o=0,l="",c="",d="";if(r)if(l=r.term||"",c=r.team||"",d=r.filter||"",c&&c!==O.E.ALL_USERS)if(c===O.E.NO_TEAM)o=0;else{o=(e.entities.teams.stats[c]||{total_member_count:0}).total_member_count}else{const t=e.entities.admin.analytics||{[v.Stats.TOTAL_USERS]:0,[v.Stats.TOTAL_INACTIVE_USERS]:0};o=t[v.Stats.TOTAL_USERS]+t[v.Stats.TOTAL_INACTIVE_USERS]}return{teams:Object(b.getTeamsList)(e),siteName:a,mfaEnabled:n,totalUsers:o,searchTerm:l,teamId:c,filter:d,enableUserAccessTokens:s,users:Object(f.getUsers)(e),experimentalEnableAuthenticationTransfer:i}}),(function(e){return{actions:Object(o.bindActionCreators)({getTeams:g.getTeams,getTeamStats:g.getTeamStats,getUser:K.getUser,getUserAccessToken:K.getUserAccessToken,loadProfilesAndTeamMembers:it.g,setSystemUsersSearch:cn.b,loadProfilesWithoutTeam:it.k,getProfiles:K.getProfiles,searchProfiles:K.searchProfiles,revokeSessionsForAllUsers:K.revokeSessionsForAllUsers,logError:xn.logError},e)}}))(Es);a(1525),a(1970);class Ts extends x.a.Component{render(){return x.a.createElement("button",{onClick:this.props.onClick,className:"AdminButtonOutline btn btn-primary"},this.props.children)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ts,"propTypes",{onClick:j.a.func.isRequired,children:j.a.string.isRequired});a(1971);const xs=e=>(e.user.first_name||e.user.last_name)&&e.user.nickname?x.a.createElement("span",null," • "):null,ws=e=>x.a.createElement("div",{className:"AdminUserCard"},x.a.createElement("div",{className:"AdminUserCard__header"},x.a.createElement(is.a,{src:Ft.Client4.getProfilePictureUrl(e.user.id,e.user.last_picture_update),size:"xxl",wrapperClass:"admin-user-card",userId:e.user.id}),x.a.createElement("div",{className:"AdminUserCard__user-info"},x.a.createElement("span",null,e.user.first_name," ",e.user.last_name),x.a.createElement(xs,{user:e.user}),x.a.createElement("span",{className:"AdminUserCard__user-nickname"},e.user.nickname)),x.a.createElement("div",{className:"AdminUserCard__user-id"},U.jb("admin.userManagement.userDetail.userId","User ID:")," ",e.user.id)),x.a.createElement("div",{className:"AdminUserCard__body"},e.body),x.a.createElement("div",{className:"AdminUserCard__footer"},e.footer));xs.propTypes={user:j.a.shape({first_name:j.a.string,last_name:j.a.string,nickname:j.a.string,last_picture_update:j.a.number})},ws.propTypes={user:j.a.shape({first_name:j.a.string,last_name:j.a.string,nickname:j.a.string,last_picture_update:j.a.number,id:j.a.string}),body:j.a.element,footer:j.a.element};var Os=ws,Cs=a(1192),Ms=a(1222);a(1972);function ks(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function js(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ps extends x.a.PureComponent{constructor(e){super(e),js(this,"previousPage",async e=>{e.preventDefault();const t=this.state.page<1?0:this.state.page-1;this.setState({page:t,loading:!0}),this.performSearch(t)}),js(this,"nextPage",async e=>{e.preventDefault();const t=this.state.page+1;this.setState({page:t,loading:!0}),this.performSearch(t)}),js(this,"performSearch",e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(a),!0).forEach((function(t){js(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ks(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state),a=this.props.userId;delete t.page,t.loading=!0,this.setState(t),this.props.actions.getTeamsData(a).then(()=>{this.props.onPageChangedCallback&&this.props.onPageChangedCallback(this.getPaging()),this.setState({loading:!1})})}),js(this,"renderHeaderLabels",()=>x.a.createElement(x.a.Fragment,null,this.props.headerLabels.map((e,t)=>x.a.createElement("div",{key:t,className:"AbstractList__header-label",style:e.style},e.default)))),js(this,"renderRows",()=>{if(this.state.loading)return x.a.createElement("div",{className:"AbstractList__loading"},x.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"}));if(0===this.props.data.length)return x.a.createElement("div",{className:"AbstractList__empty"},x.a.createElement(w.a,{id:this.props.emptyListTextId,defaultMessage:this.props.emptyListTextDefaultMessage}));const e=this.state.page<1?0:10*this.state.page,t=this.state.page<1?10:10*(this.state.page+1);return this.props.data.slice(e,t).map(this.props.renderRow)}),js(this,"render",()=>{const{startCount:e,endCount:t,total:a}=this.getPaging(),n=t===a,s=0===this.state.page;return x.a.createElement("div",{className:"AbstractList"},x.a.createElement("div",{className:"AbstractList__header"},this.renderHeaderLabels()),x.a.createElement("div",{className:"AbstractList__body"},this.renderRows()),a>0&&x.a.createElement("div",{className:"AbstractList__footer"},x.a.createElement("div",{className:"counter"},x.a.createElement(w.a,{id:"admin.team_channel_settings.list.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number}",values:{startCount:e,endCount:t,total:a}})),x.a.createElement("button",{className:"btn btn-link prev "+(s?"disabled":""),onClick:s?()=>null:this.previousPage,disabled:s},x.a.createElement(Ms.a,null)),x.a.createElement("button",{className:"btn btn-link next "+(n?"disabled":""),onClick:n?()=>null:this.nextPage,disabled:n},x.a.createElement(Cs.a,null))))}),this.state={loading:!0,page:0}}componentDidMount(){this.performSearch(this.state.page)}getPaging(){const e=10*this.state.page+1;let t=10*this.state.page+10;const a=this.props.total;return t>a&&(t=a),{startCount:e,endCount:t,total:a}}}js(Ps,"propTypes",{userId:j.a.string.isRequired,headerLabels:j.a.arrayOf(j.a.any).isRequired,data:j.a.arrayOf(j.a.any),onPageChangedCallback:j.a.func,total:j.a.number.isRequired,renderRow:j.a.func.isRequired,emptyListTextId:j.a.string.isRequired,emptyListTextDefaultMessage:j.a.string.isRequired,actions:j.a.shape({getTeamsData:j.a.func.isRequired,removeGroup:j.a.func}).isRequired}),js(Ps,"defaultProps",{data:[]});a(1973);class As extends x.a.PureComponent{render(){return x.a.createElement("span",this.props,x.a.createElement(w.a,{id:"generic_icons.elipsisHorizontalIcon",defaultMessage:"Ellipsis Horizontal Icon"},e=>x.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},x.a.createElement("path",{d:"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"}))))}}class Rs extends x.a.Component{constructor(e){super(e),this.state={serverError:null}}render(){const{team:e}=this.props,t=e.scheme_admin,a=e.scheme_user&&!e.scheme_admin,n=e.scheme_guest,s=!t&&!n,i=!a&&!n;return x.a.createElement(Ln.a,null,x.a.createElement("button",{id:"teamListDropdown_".concat(e.id),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},x.a.createElement("span",{className:"SystemUserDetail__actions-menu-icon"},x.a.createElement(As,null))),x.a.createElement("div",null,x.a.createElement(Bn.a,{openLeft:!0,openUp:!1,ariaLabel:Object(U.jb)("team_members_dropdown.menuAriaLabel","Change the role of a team member")},x.a.createElement(Bn.a.ItemAction,{id:"makeTeamAdmin",show:s,onClick:()=>this.props.doMakeUserTeamAdmin(e.id),text:Object(U.jb)("team_members_dropdown.makeAdmin","Make Team Admin")}),x.a.createElement(Bn.a.ItemAction,{show:i,onClick:()=>this.props.doMakeUserTeamMember(e.id),text:Object(U.jb)("team_members_dropdown.makeMember","Make Team Member")}),x.a.createElement(Bn.a.ItemAction,{id:"removeFromTeam",show:!0,onClick:()=>this.props.doRemoveUserFromTeam(e.id),text:Object(U.jb)("team_members_dropdown.leave_team","Remove from Team"),buttonClass:"SystemUserDetail__action-remove-team"}))))}}function Ns(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Rs,"propTypes",{team:j.a.objectOf(j.a.string).isRequired,doRemoveUserFromTeam:j.a.func.isRequired,doMakeUserTeamAdmin:j.a.func.isRequired,doMakeUserTeamMember:j.a.func.isRequired});class Ds extends x.a.Component{constructor(...e){super(...e),Ns(this,"renderTeamType",e=>e.group_constrained?x.a.createElement(w.a,{id:"admin.systemUserDetail.teamList.teamType.groupSync",defaultMessage:"Group sync"}):e.allow_open_invite?x.a.createElement(w.a,{id:"admin.systemUserDetail.teamList.teamType.anyoneCanJoin",defaultMessage:"Anyone can join"}):x.a.createElement(w.a,{id:"admin.systemUserDetail.teamList.teamType.inviteOnly",defaultMessage:"Invite only"})),Ns(this,"renderTeamRole",e=>e.scheme_guest?x.a.createElement(w.a,{id:"admin.systemUserDetail.teamList.teamRole.guest",defaultMessage:"Guest"}):e.scheme_admin&&!e.scheme_guest?x.a.createElement(w.a,{id:"admin.systemUserDetail.teamList.teamRole.admin",defaultMessage:"Team Admin"}):!e.scheme_user||e.scheme_guest||e.scheme_admin?null:x.a.createElement(w.a,{id:"admin.systemUserDetail.teamList.teamRole.member",defaultMessage:"Team Member"})),Ns(this,"render",()=>{const{team:e}=this.props,t=U.M(e);return x.a.createElement("div",{className:"TeamRow"},x.a.createElement("div",{className:"TeamRow__row"},x.a.createElement("div",{className:"TeamRow__team-name"},x.a.createElement("div",{className:"col-sm-auto"},x.a.createElement(un.a,{size:"sm",url:t,name:e.display_name})),x.a.createElement("div",{className:"col-md-auto"},x.a.createElement("b",null,e.display_name),e.description&&x.a.createElement("div",{className:"overflow--ellipsis text-nowrap TeamRow__team-description"},e.description))),x.a.createElement("span",{className:"TeamRow__description"},this.renderTeamType(e)),x.a.createElement("span",{className:"TeamRow__description"},this.renderTeamRole(e)),x.a.createElement("span",{className:"TeamRow__actions"},x.a.createElement(Rs,{team:e,doRemoveUserFromTeam:this.props.doRemoveUserFromTeam,doMakeUserTeamAdmin:this.props.doMakeUserTeamAdmin,doMakeUserTeamMember:this.props.doMakeUserTeamMember}))))})}}function Is(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ls(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ns(Ds,"propTypes",{team:j.a.objectOf(j.a.string).isRequired,onRowClick:j.a.func,doRemoveUserFromTeam:j.a.func.isRequired,doMakeUserTeamAdmin:j.a.func.isRequired,doMakeUserTeamMember:j.a.func.isRequired});const Bs=[{id:Object(M.b)("admin.systemUserDetail.teamList.header.name"),default:"Name",style:{flexGrow:1,minWidth:"284px",marginLeft:"16px"}},{id:Object(M.b)("admin.systemUserDetail.teamList.header.type"),default:"Type",style:{width:"150px"}},{id:Object(M.b)("admin.systemUserDetail.teamList.header.role"),default:"Role",style:{width:"150px"}},{style:{width:"150px"}}];class Us extends x.a.Component{constructor(e){super(e),Ls(this,"getTeamsAndMemberships",async(e=this.props.userId)=>{const t=await this.props.actions.getTeamsData(e),a=await this.props.actions.getTeamMembersForUser(e);return Promise.all([t,a]).then(this.mergeTeamsWithMemberships).then(e=>{this.setState({teamsWithMemberships:e}),this.props.userDetailCallback(e)})}),Ls(this,"mergeTeamsWithMemberships",e=>{const t=e[0].data,a=e[1].data;let n=t.map(e=>{const t=a.filter(t=>t.team_id===e.id);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(a),!0).forEach((function(t){Ls(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Is(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{},t[0])});return n=Object(In.a)(n,this.props.locale),n}),Ls(this,"doRemoveUserFromTeam",async e=>{const{error:t}=await this.props.actions.removeUserFromTeam(e,this.props.userId);t?this.setState({serverError:t.message}):this.getTeamsAndMemberships()}),Ls(this,"doMakeUserTeamAdmin",async e=>{const{error:t}=await this.props.actions.updateTeamMemberSchemeRoles(e,this.props.userId,!0,!0);t?this.setState({serverError:t.message}):this.getTeamsAndMemberships()}),Ls(this,"doMakeUserTeamMember",async e=>{const{error:t}=await this.props.actions.updateTeamMemberSchemeRoles(e,this.props.userId,!0,!1);t?this.setState({serverError:t.message}):this.getTeamsAndMemberships()}),Ls(this,"renderRow",e=>x.a.createElement(Ds,{key:e.id,team:e,doRemoveUserFromTeam:this.doRemoveUserFromTeam,doMakeUserTeamAdmin:this.doMakeUserTeamAdmin,doMakeUserTeamMember:this.doMakeUserTeamMember})),this.state={teamsWithMemberships:[],serverError:null}}componentDidMount(){this.getTeamsAndMemberships()}componentDidUpdate(e){e.refreshTeams!==this.props.refreshTeams&&this.getTeamsAndMemberships()}render(){let e=null;return this.state.serverError&&(e=x.a.createElement("div",{className:"SystemUserDetail__error has-error"},x.a.createElement("label",{className:"has-error control-label"},this.state.serverError))),x.a.createElement(x.a.Fragment,null,x.a.createElement("div",null,e),x.a.createElement(Ps,{headerLabels:Bs,renderRow:this.renderRow,total:this.state.teamsWithMemberships.length,data:this.state.teamsWithMemberships,actions:this.props.actions,emptyListTextId:this.props.emptyListTextId,emptyListTextDefaultMessage:this.props.emptyListTextDefaultMessage,userId:this.props.userId}))}}Ls(Us,"propTypes",{userId:j.a.string.isRequired,locale:j.a.string.isRequired,emptyListTextId:j.a.string,emptyListTextDefaultMessage:j.a.string,actions:j.a.shape({getTeamsData:j.a.func.isRequired,getTeamMembersForUser:j.a.func.isRequired,removeUserFromTeam:j.a.func.isRequired,updateTeamMemberSchemeRoles:j.a.func.isRequired}).isRequired,userDetailCallback:j.a.func.isRequired,refreshTeams:j.a.bool}),Ls(Us,"defaultProps",{emptyListTextId:Object(M.b)("admin.team_settings.team_list.no_teams_found"),emptyListTextDefaultMessage:"No teams found",refreshTeams:!1});var Fs=Object(r.connect)((function(e){return{locale:Object($.a)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getTeamsData:g.getTeamsForUser,getTeamMembersForUser:g.getTeamMembersForUser,removeUserFromTeam:g.removeUserFromTeam,updateTeamMemberSchemeRoles:g.updateTeamMemberSchemeRoles},e)}}))(Us);class qs extends x.a.PureComponent{render(){return x.a.createElement("span",this.props,x.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24"},x.a.createElement("path",{fill:"inherit",d:"M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6M20 6L12 11L4 6H20M20 18H4V8L12 13L20 8V18Z"})))}}class Gs extends x.a.PureComponent{render(){return x.a.createElement("span",this.props,x.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24"},x.a.createElement("path",{fill:"inherit",d:"M12,15C12.81,15 13.5,14.7 14.11,14.11C14.7,13.5 15,12.81 15,12C15,11.19 14.7,10.5 14.11,9.89C13.5,9.3 12.81,9 12,9C11.19,9 10.5,9.3 9.89,9.89C9.3,10.5 9,11.19 9,12C9,12.81 9.3,13.5 9.89,14.11C10.5,14.7 11.19,15 12,15M12,2C14.75,2 17.1,3 19.05,4.95C21,6.9 22,9.25 22,12V13.45C22,14.45 21.65,15.3 21,16C20.3,16.67 19.5,17 18.5,17C17.3,17 16.31,16.5 15.56,15.5C14.56,16.5 13.38,17 12,17C10.63,17 9.45,16.5 8.46,15.54C7.5,14.55 7,13.38 7,12C7,10.63 7.5,9.45 8.46,8.46C9.45,7.5 10.63,7 12,7C13.38,7 14.55,7.5 15.54,8.46C16.5,9.45 17,10.63 17,12V13.45C17,13.86 17.16,14.22 17.46,14.53C17.76,14.84 18.11,15 18.5,15C18.92,15 19.27,14.84 19.57,14.53C19.87,14.22 20,13.86 20,13.45V12C20,9.81 19.23,7.93 17.65,6.35C16.07,4.77 14.19,4 12,4C9.81,4 7.93,4.77 6.35,6.35C4.77,7.93 4,9.81 4,12C4,14.19 4.77,16.07 6.35,17.65C7.93,19.23 9.81,20 12,20H17V22H12C9.25,22 6.9,21 4.95,19.05C3,17.1 2,14.75 2,12C2,9.25 3,6.9 4.95,4.95C6.9,3 9.25,2 12,2Z"})))}}class Hs extends x.a.PureComponent{render(){return x.a.createElement("span",this.props,x.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24"},x.a.createElement("path",{fill:"inherit",d:"M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,21C15.75,20 19,15.54 19,11.22V6.3L12,3.18L5,6.3V11.22C5,15.54 8.25,20 12,21Z"})))}}a(1974);function Ws(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class zs extends x.a.PureComponent{constructor(e){super(e),Ws(this,"setTeamsData",e=>{const t=e.map(e=>e.team_id);this.setState({teams:e}),this.setState({teamIds:t}),this.setState({refreshTeams:!1})}),Ws(this,"openAddTeam",()=>{this.setState({addTeamOpen:!0})}),Ws(this,"addTeams",e=>{const t=[];for(const a of e)t.push(this.props.actions.addUserToTeam(a.id,this.props.user.id));Promise.all(t).finally(this.setState({refreshTeams:!0}))}),Ws(this,"closeAddTeam",()=>{this.setState({addTeamOpen:!1})}),Ws(this,"doPasswordReset",e=>{this.setState({showPasswordModal:!0,user:e})}),Ws(this,"doPasswordResetDismiss",()=>{this.setState({showPasswordModal:!1})}),Ws(this,"doPasswordResetSubmit",()=>{this.setState({showPasswordModal:!1})}),Ws(this,"handleMakeActive",e=>{e.preventDefault(),this.props.actions.updateUserActive(this.props.user.id,!0).then(this.onUpdateActiveResult)}),Ws(this,"handleShowDeactivateMemberModal",e=>{e.preventDefault(),this.setState({showDeactivateMemberModal:!0})}),Ws(this,"handleDeactivateMember",()=>{this.props.actions.updateUserActive(this.props.user.id,!1).then(this.onUpdateActiveResult),this.setState({showDeactivateMemberModal:!1})}),Ws(this,"onUpdateActiveResult",({error:e})=>{e&&this.setState({error:e})}),Ws(this,"handleDeactivateCancel",()=>{this.setState({showDeactivateMemberModal:!1})}),Ws(this,"handleResetMfa",e=>{e.preventDefault(),Object(_.b)(this.props.user.id,null,null)}),Ws(this,"handleEmailChange",e=>{const t=e.target.value!==this.props.user.email;this.setState({user:{email:e.target.value},saveNeeded:t}),this.props.actions.setNavigationBlocked(t)}),Ws(this,"handleSubmit",e=>{if(e.preventDefault(),this.state.user.email!==this.props.user.email){if(!Object(ts.isEmail)(this.state.user.email))return void this.setState({serverError:"Invalid Email address"});const e=Object.assign({},this.props.user),t=this.state.user.email.trim().toLowerCase();e.email=t,this.setState({serverError:null}),Object(_.a)(e,()=>{this.props.history.push("/admin_console/user_management/users")},e=>{const t=e.message?e.message:e;this.setState({serverError:t})}),this.setState({saving:!1,saveNeeded:!1,serverError:null}),this.props.actions.setNavigationBlocked(!1)}}),Ws(this,"renderDeactivateMemberModal",e=>{const t=x.a.createElement(w.a,{id:"deactivate_member_modal.title",defaultMessage:"Deactivate {username}",values:{username:e.username}});let a;""!==e.auth_service&&e.auth_service!==O.j.EMAIL_SERVICE&&(a=x.a.createElement("strong",null,x.a.createElement("br",null),x.a.createElement("br",null),x.a.createElement(w.a,{id:"deactivate_member_modal.sso_warning",defaultMessage:"You must also deactivate this user in the SSO provider or they will be reactivated on next login or sync."})));const n=x.a.createElement("div",null,x.a.createElement(w.a,{id:"deactivate_member_modal.desc",defaultMessage:"This action deactivates {username}. They will be logged out and not have access to any teams or channels on this system. Are you sure you want to deactivate {username}?",values:{username:e.username}}),a),s=x.a.createElement(w.a,{id:"deactivate_member_modal.deactivate",defaultMessage:"Deactivate"});return x.a.createElement(ge.a,{show:this.state.showDeactivateMemberModal,title:t,message:n,confirmButtonClass:"btn btn-danger",confirmButtonText:s,onConfirm:this.handleDeactivateMember,onCancel:this.handleDeactivateCancel})}),Ws(this,"renderActivateDeactivate",()=>this.props.user.delete_at>0?x.a.createElement(Ts,{onClick:this.handleMakeActive,className:"admin-btn-default"},U.jb("admin.user_item.makeActive","Activate")):x.a.createElement(Ts,{onClick:this.handleShowDeactivateMemberModal,className:"admin-btn-default"},U.jb("admin.user_item.makeInactive","Deactivate"))),Ws(this,"renderRemoveMFA",()=>this.props.user.mfa_active?x.a.createElement(Ts,{onClick:this.handleResetMfa,className:"admin-btn-default"},U.jb("admin.user_item.resetMfa","Remove MFA")):null),this.state={teams:null,teamIds:null,loading:!1,searching:!1,showPasswordModal:!1,showDeactivateMemberModal:!1,saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1,customComponentWrapperClass:"",user:{email:this.props.user.email},addTeamOpen:!1,refreshTeams:!0}}getAuthenticationText(){const{user:e,mfaEnabled:t}=this.props;let a;if(e.auth_service){let t;t=e.auth_service===O.j.LDAP_SERVICE||e.auth_service===O.j.SAML_SERVICE?e.auth_service.toUpperCase():U.sb(e.auth_service),a=t}else a=U.jb("admin.userManagement.userDetail.email","Email");return t&&e.mfa_active&&(a+=", ",a+=U.jb("admin.userManagement.userDetail.mfa","MFA")),a}render(){const{user:e}=this.props;let t,a=x.a.createElement(w.a,{id:"admin.user_item.member",defaultMessage:"Member"});return e.id?(e.id&&(t=this.renderDeactivateMemberModal(e),e.delete_at>0&&(a=x.a.createElement(w.a,{id:"admin.user_item.inactive",defaultMessage:"Inactive"})),e.roles.length>0&&U.cb(e.roles)&&(a=x.a.createElement(w.a,{id:"team_members_dropdown.systemAdmin",defaultMessage:"System Admin"})),e.roles.length>0&&U.X(e)&&(a=x.a.createElement(w.a,{id:"team_members_dropdown.guest",defaultMessage:"Guest"}))),x.a.createElement("div",{className:"SystemUserDetail wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header with-back"},x.a.createElement("div",null,x.a.createElement(xa,{to:"/admin_console/user_management/users",className:"fa fa-angle-left back"}),x.a.createElement(w.a,{id:"admin.systemUserDetail.title",defaultMessage:"User Configuration"}))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement(Os,{user:e,body:x.a.createElement(x.a.Fragment,null,x.a.createElement("span",{className:"SystemUserDetail__position"},e.position),x.a.createElement("span",{className:"SystemUserDetail__field-label"},U.jb("admin.userManagement.userDetail.email","Email")),x.a.createElement("div",null,x.a.createElement(qs,{className:"SystemUserDetail__field-icon"}),x.a.createElement("input",{className:"SystemUserDetail__input form-control",type:"text",value:this.state.user.email,onChange:this.handleEmailChange})),x.a.createElement("span",{className:"SystemUserDetail__field-label"},U.jb("admin.userManagement.userDetail.username","Username")),x.a.createElement("div",null,x.a.createElement(Gs,{className:"SystemUserDetail__field-icon"}),x.a.createElement("span",{className:"SystemUserDetail__field-text"},e.username)),x.a.createElement("span",{className:"SystemUserDetail__field-label"},U.jb("admin.userManagement.userDetail.authenticationMethod","Authentication Method")),x.a.createElement("div",{className:"SystemUserDetail__field-text"},x.a.createElement(Hs,{className:"SystemUserDetail__field-icon"}),x.a.createElement("span",{className:"SystemUserDetail__field-text"},this.getAuthenticationText())),x.a.createElement("span",{className:"SystemUserDetail__field-label"},U.jb("admin.userManagement.userDetail.role","Role")),x.a.createElement("p",null,a)),footer:x.a.createElement(x.a.Fragment,null,x.a.createElement(Ts,{onClick:this.doPasswordReset,className:"admin-btn-default"},U.jb("admin.user_item.resetPwd","Reset Password")),this.renderActivateDeactivate(),this.renderRemoveMFA())}),x.a.createElement(ca,{subtitleId:Object(M.b)("admin.userManagement.userDetail.teamsSubtitle"),subtitleDefault:"Teams to which this user belongs",titleId:Object(M.b)("admin.userManagement.userDetail.teamsTitle"),titleDefault:"Team Membership",button:x.a.createElement("div",{className:"add-team-button"},x.a.createElement("button",{className:"btn btn-primary",onClick:this.openAddTeam},x.a.createElement(w.a,{id:"admin.userManagement.userDetail.addTeam",defaultMessage:"Add Team"})))},x.a.createElement(Fs,{userId:this.props.user.id,userDetailCallback:this.setTeamsData,refreshTeams:this.state.refreshTeams})))),x.a.createElement("div",{className:"admin-console-save"},x.a.createElement(be.a,{saving:this.state.saving,disabled:!this.state.saveNeeded||this.canSave&&!this.canSave(),onClick:this.handleSubmit,savingMessage:U.jb("admin.saving","Saving Config...")}),x.a.createElement("div",{className:"error-message",ref:"errorMessage",onMouseOver:this.openTooltip,onMouseOut:this.closeTooltip},x.a.createElement(ve.a,{error:this.state.serverError})),x.a.createElement(fe.a,{show:this.state.errorTooltip,delayShow:O.j.OVERLAY_TIME_DELAY,placement:"top",target:this.refs.errorMessage},x.a.createElement(ne.a,{id:"error-tooltip"},this.state.serverError))),x.a.createElement(es,{user:e,show:this.state.showPasswordModal,onModalSubmit:this.doPasswordResetSubmit,onModalDismissed:this.doPasswordResetDismiss}),t,this.state.addTeamOpen&&x.a.createElement(pn,{onModalDismissed:this.closeAddTeam,onTeamsSelected:this.addTeams,alreadySelected:this.state.teamIds}))):x.a.createElement(u.a,{to:{pathname:"/admin_console/user_management/users"}})}}Ws(zs,"propTypes",{user:j.a.object.isRequired,mfaEnabled:j.a.bool.isRequired,actions:j.a.shape({updateUserActive:j.a.func.isRequired,setNavigationBlocked:j.a.func.isRequired,addUserToTeam:j.a.func.isRequired}).isRequired}),Ws(zs,"defaultProps",{user:{email:null},mfaEnabled:!1});var Ys=Object(r.connect)((function(e,t){const a=Object(m.getConfig)(e),n=t.match.params.user_id;return{user:Object(f.getUser)(e,n),mfaEnabled:"true"===a.EnableMultifactorAuthentication,navigationBlocked:Object(y.a)(e),showNavigationPrompt:Object(y.c)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getUser:f.getUser,getProfiles:f.getProfiles,updateUserActive:K.updateUserActive,setNavigationBlocked:_.E,deferNavigation:_.f,cancelNavigation:_.d,confirmNavigation:_.e,addUserToTeam:g.addUserToTeam},e)}}))(zs);function Vs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Js extends x.a.PureComponent{constructor(e){super(e),Vs(this,"nextPage",e=>{e.preventDefault(),this.setState({nextDisabled:!0}),this.nextTimeoutId=setTimeout(()=>this.setState({nextDisabled:!1}),500),this.props.nextPage()}),Vs(this,"previousPage",e=>{e.preventDefault(),this.props.previousPage()}),this.logPanel=x.a.createRef(),this.state={nextDisabled:!1}}componentDidMount(){const e=this.logPanel.current;e.scrollTop=e.scrollHeight,e.focus()}componentDidUpdate(){const e=this.logPanel.current;e.scrollTop=e.scrollHeight}render(){let e,t,a=null;this.props.logs.length>=this.props.perPage&&(e=x.a.createElement("button",{className:"btn btn-default filter-control filter-control__next pull-right",onClick:this.nextPage,disabled:this.state.nextDisabled},x.a.createElement(w.a,{id:"admin.logs.next",defaultMessage:"Next"}),x.a.createElement(Cs.a,{additionalClassName:"ml-2"}))),this.props.page>0&&(t=x.a.createElement("button",{className:"btn btn-default filter-control filter-control__prev",onClick:this.previousPage},x.a.createElement(w.a,{id:"generic_icons.previous",defaultMessage:"Previous Icon"},e=>x.a.createElement("i",{className:"fa fa-angle-left",title:e})),x.a.createElement(w.a,{id:"admin.logs.prev",defaultMessage:"Previous"}))),a=[];for(let e=0;e<this.props.logs.length;e++){const t={whiteSpace:"nowrap",fontFamily:"monospace"};this.props.logs[e].indexOf("[EROR]")>0&&(t.color="red"),a.push(x.a.createElement("br",{key:"br_"+e})),a.push(x.a.createElement("span",{key:"log_"+e,style:t},this.props.logs[e]))}return x.a.createElement("div",null,x.a.createElement("div",{tabIndex:"-1",ref:this.logPanel,className:"log__panel"},a),x.a.createElement("div",{className:"pt-3 pb-3 filter-controls"},t,e))}}function Xs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Vs(Js,"propTypes",{logs:j.a.arrayOf(j.a.string).isRequired,page:j.a.number.isRequired,perPage:j.a.number.isRequired,nextPage:j.a.func.isRequired,previousPage:j.a.func.isRequired});class Ks extends x.a.Component{constructor(e){super(e),Xs(this,"nextPage",()=>{this.setState({page:this.state.page+1})}),Xs(this,"previousPage",()=>{this.setState({page:this.state.page-1})}),Xs(this,"reload",()=>{this.setState({loadingLogs:!0}),this.props.actions.getLogs(this.state.page,this.state.perPage).then(()=>this.setState({loadingLogs:!1}))}),this.state={loadingLogs:!0,page:0,perPage:1e3}}componentDidMount(){this.props.actions.getLogs(this.state.page,this.state.perPage).then(()=>this.setState({loadingLogs:!1}))}componentDidUpdate(e,t){this.state.page!==t.page&&this.props.actions.getLogs(this.state.page,this.state.perPage).then(()=>this.setState({loadingLogs:!1}))}render(){let e=null;return e=this.state.loadingLogs?x.a.createElement(ee.a,null):x.a.createElement(Js,Object.assign({},this.props,{nextPage:this.nextPage,previousPage:this.previousPage,page:this.state.page,perPage:this.state.perPage})),x.a.createElement("div",{className:"wrapper--admin"},x.a.createElement(N,{id:"admin.logs.title",defaultMessage:"Server Logs"}),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"banner"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(w.a,{id:"admin.logs.bannerDesc",defaultMessage:"To look up users by User ID or Token ID, go to Reporting > Users and paste the ID into the search filter."}))),x.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.reload},x.a.createElement(w.a,{id:"admin.logs.reload",defaultMessage:"Reload"})),e)))}}Xs(Ks,"propTypes",{logs:j.a.arrayOf(j.a.string).isRequired,nextPage:j.a.func,actions:j.a.shape({getLogs:j.a.func.isRequired}).isRequired});var Qs=Object(r.connect)((function(e){return{logs:d.getLogs(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getLogs:l.getLogs},e)}}))(Ks);function $s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zs extends x.a.PureComponent{constructor(e){super(e),$s(this,"handleImageChange",()=>{const e=Et()(this.refs.fileInput);e.prop("files").length>0&&(this.props.setSaveNeeded(),this.setState({brandImage:e.prop("files")[0],deleteBrandImage:!1}))}),$s(this,"handleDeleteButtonPressed",()=>{this.setState({deleteBrandImage:!0,brandImage:null,brandImageExists:!1}),this.props.setSaveNeeded()}),$s(this,"handleSave",async()=>{let e;return this.setState({error:""}),this.state.deleteBrandImage?await Object(_.g)(()=>{this.setState({deleteBrandImage:!1,brandImageExists:!1,brandImage:null})},t=>{e=t,this.setState({error:t.message})}):this.state.brandImage&&await Object(_.K)(this.state.brandImage,()=>{this.setState({brandImageExists:!0,brandImage:null,brandImageTimestamp:Date.now()})},t=>{e=t,this.setState({error:t.message})}),{error:e}}),this.state={deleteBrandImage:!1,brandImage:null,brandImageExists:!1,brandImageTimestamp:Date.now(),error:""}}componentDidMount(){fetch(Ft.Client4.getBrandImageUrl(this.state.brandImageTimestamp)).then(e=>{200===e.status?this.setState({brandImageExists:!0}):this.setState({brandImageExists:!1})}),this.props.registerSaveAction(this.handleSave)}componentWillUnmount(){this.props.unRegisterSaveAction(this.handleSave)}componentDidUpdate(){if(this.refs.image){const e=new FileReader,t=this.refs.image;e.onload=e=>{Et()(t).attr("src",e.target.result)},e.readAsDataURL(this.state.brandImage)}}render(){let e="btn";this.props.disabled||(e+=" btn-default");let t=null;if(this.state.brandImage)t=x.a.createElement("div",{className:"remove-image__img mb-5"},x.a.createElement("img",{ref:"image",alt:"brand image",src:""}));else if(this.state.brandImageExists){let e;this.props.disabled||(e=x.a.createElement(se.a,{delayShow:O.j.OVERLAY_TIME_DELAY,placement:"right",overlay:x.a.createElement(ne.a,{id:"removeIcon"},x.a.createElement("div",{"aria-hidden":!0},x.a.createElement(w.a,{id:"admin.team.removeBrandImage",defaultMessage:"Remove brand image"})))},x.a.createElement("button",{className:"remove-image__btn",onClick:this.handleDeleteButtonPressed},x.a.createElement("span",{"aria-hidden":!0},"×")))),t=x.a.createElement("div",{className:"remove-image__img mb-5"},x.a.createElement("img",{alt:"brand image",src:Ft.Client4.getBrandImageUrl(this.state.brandImageTimestamp)}),e)}else t=x.a.createElement("p",{className:"mt-2"},x.a.createElement(w.a,{id:"admin.team.noBrandImage",defaultMessage:"No brand image uploaded"}));return x.a.createElement("div",{"data-testid":this.props.id,className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.team.brandImageTitle",defaultMessage:"Custom Brand Image:"})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("div",{className:"remove-image"},t)),x.a.createElement("div",{className:"col-sm-4"}),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("div",{className:"file__upload mt-5"},x.a.createElement("button",{className:e,disabled:this.props.disabled},x.a.createElement(w.a,{id:"admin.team.chooseImage",defaultMessage:"Select Image"})),x.a.createElement("input",{ref:"fileInput",type:"file",accept:".jpg,.png,.bmp",disabled:this.props.disabled,onChange:this.handleImageChange})),x.a.createElement("br",null),x.a.createElement(ve.a,{error:this.state.error}),x.a.createElement("p",{className:"help-text m-0"},x.a.createElement(ce.a,{id:"admin.team.uploadDesc",defaultMessage:'Customize your user experience by adding a custom image to your login screen. See examples at <a href="http://docs.mattermost.com/administration/config-settings.html#custom-branding" target="_blank">docs.mattermost.com/administration/config-settings.html#custom-branding</a>.'}))))}}$s(Zs,"propTypes",{id:j.a.string,disabled:j.a.bool.isRequired,setSaveNeeded:j.a.func.isRequired,registerSaveAction:j.a.func.isRequired,unRegisterSaveAction:j.a.func.isRequired});a(192);var ei=a(1180);function ti(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ai extends x.a.Component{constructor(e){super(e),ti(this,"onRowClick",()=>{this.props.onCheckToggle(this.props.primary_key)}),ti(this,"linkHandler",async e=>{e.stopPropagation(),e.preventDefault(),this.setState({loading:!0}),await this.props.actions.link(this.props.primary_key),this.setState({loading:!1})}),ti(this,"unlinkHandler",async e=>{e.stopPropagation(),e.preventDefault(),this.setState({loading:!0}),await this.props.actions.unlink(this.props.primary_key),this.setState({loading:!1})}),ti(this,"renderActions",()=>this.props.mattermost_group_id?this.props.has_syncables?x.a.createElement(de.a,{to:"/admin_console/user_management/groups/"+this.props.mattermost_group_id,id:"".concat(this.props.name,"_edit")},x.a.createElement(w.a,{id:"admin.group_settings.group_row.edit",defaultMessage:"Edit"})):x.a.createElement(de.a,{to:"/admin_console/user_management/groups/"+this.props.mattermost_group_id,id:"".concat(this.props.name,"_configure")},x.a.createElement(w.a,{id:"admin.group_settings.group_row.configure",defaultMessage:"Configure"})):null),ti(this,"renderLinked",()=>this.state.loading?x.a.createElement("a",{href:"#"},this.props.mattermost_group_id&&x.a.createElement(ei.a,{text:Object(U.jb)("admin.group_settings.group_row.unlinking","Unlinking")}),!this.props.mattermost_group_id&&x.a.createElement(ei.a,{text:Object(U.jb)("admin.group_settings.group_row.linking","Linking")})):this.props.mattermost_group_id?this.props.failed?x.a.createElement("a",{href:"#",onClick:this.unlinkHandler,className:"warning"},x.a.createElement("i",{className:"icon fa fa-exclamation-triangle"}),x.a.createElement(w.a,{id:"admin.group_settings.group_row.unlink_failed",defaultMessage:"Unlink failed"})):x.a.createElement("a",{href:"#",onClick:this.unlinkHandler},x.a.createElement("i",{className:"icon fa fa-link"}),x.a.createElement(w.a,{id:"admin.group_settings.group_row.linked",defaultMessage:"Linked"})):this.props.failed?x.a.createElement("a",{href:"#",onClick:this.linkHandler,className:"warning"},x.a.createElement("i",{className:"icon fa fa-exclamation-triangle"}),x.a.createElement(w.a,{id:"admin.group_settings.group_row.link_failed",defaultMessage:"Link failed"})):x.a.createElement("a",{href:"#",onClick:this.linkHandler},x.a.createElement("i",{className:"icon fa fa-unlink"}),x.a.createElement(w.a,{id:"admin.group_settings.group_row.not_linked",defaultMessage:"Not Linked"}))),ti(this,"render",()=>x.a.createElement("div",{id:"".concat(this.props.name,"_group"),className:"group "+(this.props.checked?"checked":""),onClick:this.onRowClick},x.a.createElement("div",{className:"group-row"},x.a.createElement("div",{className:"group-name"},x.a.createElement("div",{className:"group-check "+(this.props.checked?"checked":"")},this.props.checked&&x.a.createElement(ja.a,null)),x.a.createElement("span",null,this.props.name)),x.a.createElement("div",{className:"group-content"},x.a.createElement("span",{className:"group-description"},this.renderLinked()),x.a.createElement("span",{className:"group-actions"},this.renderActions()))))),this.state={loading:!1}}}ti(ai,"propTypes",{primary_key:j.a.string.isRequired,name:j.a.string.isRequired,mattermost_group_id:j.a.string,has_syncables:j.a.bool,checked:j.a.bool,failed:j.a.bool,onCheckToggle:j.a.func,actions:j.a.shape({link:j.a.func.isRequired,unlink:j.a.func.isRequired}).isRequired});var ni=a(1219);function si(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ii(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?si(Object(a),!0).forEach((function(t){ri(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):si(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ri(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const oi={filterIsConfigured:{filter:"is:configured",option:{is_configured:!0}},filterIsUnconfigured:{filter:"is:notconfigured",option:{is_configured:!1}},filterIsLinked:{filter:"is:linked",option:{is_linked:!0}},filterIsUnlinked:{filter:"is:notlinked",option:{is_linked:!1}}};class li extends x.a.PureComponent{constructor(e){super(e),ri(this,"closeFilters",()=>{this.setState({showFilters:!1})}),ri(this,"previousPage",async e=>{e.preventDefault();const t=this.state.page<1?0:this.state.page-1;this.setState({checked:{},page:t,loading:!0}),this.searchGroups(t)}),ri(this,"nextPage",async e=>{e.preventDefault();const t=this.state.page+1;this.setState({checked:{},page:t,loading:!0}),this.searchGroups(t)}),ri(this,"onCheckToggle",e=>{const t=ii({},this.state.checked);t[e]=!t[e],this.setState({checked:t})}),ri(this,"linkSelectedGroups",()=>{for(const e of this.props.groups)this.state.checked[e.primary_key]&&!e.mattermost_group_id&&this.props.actions.link(e.primary_key)}),ri(this,"unlinkSelectedGroups",()=>{for(const e of this.props.groups)this.state.checked[e.primary_key]&&e.mattermost_group_id&&this.props.actions.unlink(e.primary_key)}),ri(this,"selectionActionButtonType",()=>{let e=!1;for(const t of this.props.groups)if(this.state.checked[t.primary_key]){if(!t.mattermost_group_id)return"link";e=!0}return e?"unlink":"disabled"}),ri(this,"renderSelectionActionButton",()=>{switch(this.selectionActionButtonType()){case"link":return x.a.createElement("button",{className:"btn btn-primary",onClick:this.linkSelectedGroups},x.a.createElement("i",{className:"icon fa fa-link"}),x.a.createElement(w.a,{id:"admin.group_settings.groups_list.link_selected",defaultMessage:"Link Selected Groups"}));case"unlink":return x.a.createElement("button",{className:"btn btn-primary",onClick:this.unlinkSelectedGroups},x.a.createElement("i",{className:"icon fa fa-unlink"}),x.a.createElement(w.a,{id:"admin.group_settings.groups_list.unlink_selected",defaultMessage:"Unlink Selected Groups"}));default:return x.a.createElement("button",{className:"btn btn-inactive disabled"},x.a.createElement("i",{className:"icon fa fa-link"}),x.a.createElement(w.a,{id:"admin.group_settings.groups_list.link_selected",defaultMessage:"Link Selected Groups"}))}}),ri(this,"renderRows",()=>this.state.loading?x.a.createElement("div",{className:"groups-list-loading"},x.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"})):0===this.props.groups.length?x.a.createElement("div",{className:"groups-list-empty"},x.a.createElement(w.a,{id:"admin.group_settings.groups_list.no_groups_found",defaultMessage:"No groups found"})):this.props.groups.map(e=>x.a.createElement(ai,{key:e.primary_key,primary_key:e.primary_key,name:e.name,mattermost_group_id:e.mattermost_group_id,has_syncables:e.has_syncables,failed:e.failed,checked:Boolean(this.state.checked[e.primary_key]),onCheckToggle:this.onCheckToggle,actions:{link:this.props.actions.link,unlink:this.props.actions.unlink}}))),ri(this,"regex",e=>new RegExp("(".concat(e,")"),"i")),ri(this,"searchGroups",e=>{let{searchString:t}=this.state;const a=ii({},this.state);delete a.page,delete a.checked;let n=t,s={q:""};Object.entries(oi).forEach(([e,i])=>{const r=this.regex(i.filter);r.test(t)?(a[e]=!0,n=n.replace(r,""),s=Object.assign(s,i.option)):this.state[e]&&(t+=" "+i.filter)}),s.q=n.trim(),a.searchString=t,a.showFilters=!1,a.loading=!0,a.showFilters=!1,this.setState(a),this.props.actions.getLdapGroups(e,200,s).then(()=>{this.setState({loading:!1})})}),ri(this,"handleGroupSearchKeyUp",e=>{const{key:t}=e,{searchString:a}=this.state;t===O.j.KeyCodes.ENTER[0]&&(this.setState({page:0}),this.searchGroups());const n={};Object.entries(oi).forEach(([e,t])=>{this.regex(t.filter).test(a)||(n[e]=!1)}),this.setState(n)}),ri(this,"newSearchString",(e,t,a)=>{let n=e;const{filter:s}=oi[t],i=this.regex(s),r=i.test(e);return r&&!a&&(n=e.replace(i,"").trim()),!r&&a&&(n+=" "+s),n.replace(/\s{2,}/g," ")}),ri(this,"handleFilterCheck",e=>{let{searchString:t}=this.state;e.forEach(e=>{t=this.newSearchString(t,e[0],e[1]),this.setState({[e[0]]:e[1]})}),this.setState({searchString:t})}),ri(this,"renderSearchFilters",()=>x.a.createElement("div",{id:"group-filters",className:"group-search-filters",onClick:e=>{e.nativeEvent.stopImmediatePropagation()}},x.a.createElement("div",{className:"filter-row"},x.a.createElement("span",{className:"filter-check "+(this.state.filterIsLinked?"checked":""),onClick:()=>this.handleFilterCheck([["filterIsLinked",!this.state.filterIsLinked],["filterIsUnlinked",!1]])},this.state.filterIsLinked&&x.a.createElement(ja.a,null)),x.a.createElement("span",null,x.a.createElement(w.a,{id:"admin.group_settings.filters.isLinked",defaultMessage:"Is Linked"}))),x.a.createElement("div",{className:"filter-row"},x.a.createElement("span",{className:"filter-check "+(this.state.filterIsUnlinked?"checked":""),onClick:()=>this.handleFilterCheck([["filterIsUnlinked",!this.state.filterIsUnlinked],["filterIsLinked",!1]])},this.state.filterIsUnlinked&&x.a.createElement(ja.a,null)),x.a.createElement("span",null,x.a.createElement(w.a,{id:"admin.group_settings.filters.isUnlinked",defaultMessage:"Is Not Linked"}))),x.a.createElement("div",{className:"filter-row"},x.a.createElement("span",{className:"filter-check "+(this.state.filterIsConfigured?"checked":""),onClick:()=>this.handleFilterCheck([["filterIsConfigured",!this.state.filterIsConfigured],["filterIsUnconfigured",!1]])},this.state.filterIsConfigured&&x.a.createElement(ja.a,null)),x.a.createElement("span",null,x.a.createElement(w.a,{id:"admin.group_settings.filters.isConfigured",defaultMessage:"Is Configured"}))),x.a.createElement("div",{className:"filter-row"},x.a.createElement("span",{className:"filter-check "+(this.state.filterIsUnconfigured?"checked":""),onClick:()=>this.handleFilterCheck([["filterIsUnconfigured",!this.state.filterIsUnconfigured],["filterIsConfigured",!1]])},this.state.filterIsUnconfigured&&x.a.createElement(ja.a,null)),x.a.createElement("span",null,x.a.createElement(w.a,{id:"admin.group_settings.filters.isUnconfigured",defaultMessage:"Is Not Configured"}))),x.a.createElement("a",{onClick:()=>{this.setState({page:0}),this.searchGroups(0)},className:"btn btn-primary search-groups-btn"},x.a.createElement(w.a,{id:"search_bar.search",defaultMessage:"Search"})))),ri(this,"resetFiltersAndSearch",()=>{const e={showFilters:!1,searchString:"",loading:!0,page:0};Object.entries(oi).forEach(([t])=>{e[t]=!1}),this.setState(e),this.props.actions.getLdapGroups(this.state.page,200,{q:""}).then(()=>{this.setState({loading:!1})})}),ri(this,"render",()=>{const e=200*this.state.page+1;let t=200*this.state.page+200;const a=this.props.total;t>a&&(t=a);const n=t===a,s=0===this.state.page;return x.a.createElement("div",{className:"groups-list"},x.a.createElement("div",{className:"groups-list--global-actions"},x.a.createElement("div",{className:"group-list-search"},x.a.createElement("input",{type:"text",placeholder:U.jb("search_bar.search","Search"),onKeyUp:this.handleGroupSearchKeyUp,onChange:e=>this.setState({searchString:e.target.value}),value:this.state.searchString}),x.a.createElement(ni.a,{className:"search__icon","aria-hidden":"true"}),x.a.createElement("i",{className:"fa fa-times-circle group-filter-action "+(this.state.searchString.length?"":"hidden"),onClick:this.resetFiltersAndSearch}),x.a.createElement("i",{className:"fa fa-caret-down group-filter-action "+(this.state.showFilters?"hidden":""),onClick:()=>{document.addEventListener("click",this.closeFilters,{once:!0}),this.setState({showFilters:!0})}})),this.state.showFilters&&this.renderSearchFilters(),x.a.createElement("div",{className:"group-list-link-unlink"},this.renderSelectionActionButton())),x.a.createElement("div",{className:"groups-list--header"},x.a.createElement("div",{className:"group-name"},x.a.createElement(w.a,{id:"admin.group_settings.groups_list.nameHeader",defaultMessage:"Name"})),x.a.createElement("div",{className:"group-content"},x.a.createElement("div",{className:"group-description"},x.a.createElement(w.a,{id:"admin.group_settings.groups_list.mappingHeader",defaultMessage:"Mattermost Linking"})),x.a.createElement("div",{className:"group-actions"}))),x.a.createElement("div",{id:"groups-list--body",className:"groups-list--body"},this.renderRows()),a>0&&x.a.createElement("div",{className:"groups-list--footer"},x.a.createElement("div",{className:"counter"},x.a.createElement(w.a,{id:"admin.group_settings.groups_list.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number}",values:{startCount:e,endCount:t,total:a}})),x.a.createElement("button",{className:"btn btn-link prev "+(s?"disabled":""),onClick:s?null:this.previousPage,disabled:s},x.a.createElement(Ms.a,null)),x.a.createElement("button",{className:"btn btn-link next "+(n?"disabled":""),onClick:n?null:this.nextPage,disabled:n},x.a.createElement(Cs.a,null))))}),this.state={checked:{},loading:!0,page:0,showFilters:!1,searchString:""},Object.entries(oi).forEach(([e])=>{this.state[e]=!1})}componentDidMount(){this.props.actions.getLdapGroups(this.state.page,200).then(()=>{this.setState({loading:!1})})}}ri(li,"propTypes",{groups:j.a.arrayOf(j.a.object),total:j.a.number,actions:j.a.shape({getLdapGroups:j.a.func.isRequired,link:j.a.func.isRequired,unlink:j.a.func.isRequired}).isRequired}),ri(li,"defaultProps",{groups:[]});const ci=Object(E.createSelector)(d.getLdapGroups,e=>{const t=Object.values(e);return t.sort((e,t)=>e.name.localeCompare(t.name)),t});var di=Object(r.connect)((function(e){return{groups:ci(e),total:Object(d.getLdapGroupsCount)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({getLdapGroups:l.getLdapGroups,link:l.linkLdapGroup,unlink:l.unlinkLdapGroup},e)}}))(li);class ui extends x.a.PureComponent{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"render",()=>{const e=Object(C.f)();return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header"},x.a.createElement(w.a,{id:"admin.group_settings.groupsPageTitle",defaultMessage:"Groups (Beta)"})),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"banner info"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(P.b,{id:"admin.group_settings.introBanner",defaultMessage:"Groups are a way to organize users and apply actions to all users within that group.\nFor more information on Groups, please see [documentation](!https://www.mattermost.com/default-ad-ldap-groups)."}))),x.a.createElement(ca,{id:"ldap_groups",titleId:Object(M.b)("admin.group_settings.ldapGroupsTitle"),titleDefault:"AD/LDAP Groups",subtitleId:Object(M.b)("admin.group_settings.ldapGroupsDescription"),subtitleDefault:"Connect AD/LDAP and create groups in Mattermost. To get started, configure group attributes on the [AD/LDAP] (".concat(e,"/admin_console/authentication/ldap) configuration page."),subtitleValues:{siteURL:e}},x.a.createElement(di,null)))))})}}var mi=a(1199),hi=a(1200),pi=a(1212),gi=a(1213);function fi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bi extends x.a.PureComponent{constructor(e){super(e),fi(this,"removeItem",()=>{this.props.onRemoveItem(this.props.id,this.props.type),this.setState({showConfirmationModal:!1})}),fi(this,"changeRoles",()=>{this.props.onChangeRoles(this.props.id,this.props.type,!this.props.schemeAdmin)}),fi(this,"toggleCollapse",()=>{this.props.onToggleCollapse(this.props.id)}),fi(this,"displayAssignedRolesDropdown",()=>{const{schemeAdmin:e,name:t}=this.props,a=x.a.createElement(w.a,{id:"admin.group_teams_and_channels_row.channelAdmin",defaultMessage:"Channel Admin"}),n=x.a.createElement(w.a,{id:"admin.group_teams_and_channels_row.teamAdmin",defaultMessage:"Team Admin"}),s=x.a.createElement(w.a,{id:"admin.group_teams_and_channels_row.member",defaultMessage:"Member"});let i=null;if(!Object(S.isNil)(e)){let r=s,o=this.props.type.includes("team")?n:a;e&&(r=this.props.type.includes("team")?n:a,o=s),i=x.a.createElement("div",null,x.a.createElement(Ln.a,null,x.a.createElement("div",{"data-testid":"".concat(t,"_current_role")},x.a.createElement("a",null,x.a.createElement("span",null,r," "),x.a.createElement("span",{className:"caret"}))),x.a.createElement(Bn.a,{openLeft:!0,openUp:!0,ariaLabel:Object(U.jb)("admin.team_channel_settings.group_row.memberRole","Member Role")},x.a.createElement(Bn.a.ItemAction,{testid:"".concat(t,"_role_to_be"),onClick:this.changeRoles,text:o}))))}return i}),fi(this,"render",()=>{let e="",t=null;this.props.hasChildren&&(t=x.a.createElement("i",{className:"fa "+(this.props.collapsed?"fa-caret-right":"fa-caret-down"),onClick:this.toggleCollapse}),e+=" has-clidren"),this.props.collapsed&&(e+=" collapsed");let a=null,n=null;switch(this.props.type){case"public-team":n=x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.publicTeam",defaultMessage:"Team"});break;case"private-team":n=x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.privateTeam",defaultMessage:"Team (Private)"})}switch(this.props.type){case"public-channel":a=x.a.createElement("span",{className:"channel-icon"},x.a.createElement(pi.a,{className:"icon icon__globe"})),n=x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.publicChannel",defaultMessage:"Channel"});break;case"private-channel":a=x.a.createElement("span",{className:"channel-icon"},x.a.createElement(gi.a,{className:"icon icon__lock"})),n=x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.privateChannel",defaultMessage:"Channel (Private)"})}const s=this.props.type.split("-")[1];return x.a.createElement("tr",{className:"group-teams-and-channels-row"+e},x.a.createElement(ge.a,{show:this.state.showConfirmationModal,title:x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_header",defaultMessage:"Remove Membership from the {name} {displayType}?",values:{name:this.props.name,displayType:s}}),message:x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_body",defaultMessage:"Removing this membership will prevent future users in this group from being added to the {name} {displayType}.",values:{name:this.props.name,displayType:s}}),confirmButtonText:x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_button",defaultMessage:"Yes, Remove"}),onConfirm:this.removeItem,onCancel:()=>this.setState({showConfirmationModal:!1})}),x.a.createElement("td",null,x.a.createElement("span",{className:"arrow-icon"},t),a,x.a.createElement("span",{className:me()({"name-no-arrow":Object(S.isNil)(t)&&Object(S.isNil)(a)})},this.props.name)),x.a.createElement("td",{className:"type"},n),x.a.createElement("td",null,this.displayAssignedRolesDropdown()),x.a.createElement("td",{className:"text-right"},x.a.createElement("button",{className:"btn btn-link",onClick:()=>this.setState({showConfirmationModal:!0})},x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels_row.remove",defaultMessage:"Remove"}))))}),this.state={showConfirmationModal:!1}}}function vi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}fi(bi,"propTypes",{id:j.a.string.isRequired,type:j.a.string.isRequired,name:j.a.string.isRequired,hasChildren:j.a.bool,collapsed:j.a.bool,onRemoveItem:j.a.func.isRequired,onToggleCollapse:j.a.func.isRequired,onChangeRoles:j.a.func.isRequired,schemeAdmin:j.a.bool});class yi extends x.a.PureComponent{constructor(e){super(e),_i(this,"onToggleCollapse",e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(a),!0).forEach((function(t){_i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state.collapsed);t[e]=!t[e],this.setState({collapsed:t})}),_i(this,"onRemoveItem",async(e,t)=>{"public-team"===t||"private-team"===t?(await this.props.unlink(this.props.id,e,v.Groups.SYNCABLE_TYPE_TEAM),await this.props.getGroupSyncables(this.props.id,v.Groups.SYNCABLE_TYPE_TEAM),await this.props.getGroupSyncables(this.props.id,v.Groups.SYNCABLE_TYPE_CHANNEL)):(await this.props.unlink(this.props.id,e,v.Groups.SYNCABLE_TYPE_CHANNEL),await this.props.getGroupSyncables(this.props.id,v.Groups.SYNCABLE_TYPE_CHANNEL))}),_i(this,"onChangeRoles",async(e,t,a)=>{this.props.onChangeRoles(e,t,a)}),_i(this,"teamsAndChannelsToEntries",(e,t)=>{const a=[],n=new Set,s=[];e.forEach(e=>{n.add(e.team_id),s.push({type:"O"===e.team_type?"public-team":"private-team",hasChildren:t.some(t=>t.team_id===e.team_id),name:e.team_display_name,collapsed:this.state.collapsed[e.team_id],id:e.team_id,schemeAdmin:e.scheme_admin})});const i={};return t.forEach(e=>{i[e.team_id]=i[e.team_id]||[],i[e.team_id].push({type:"O"===e.channel_type?"public-channel":"private-channel",name:e.channel_display_name,id:e.channel_id,schemeAdmin:e.scheme_admin}),n.has(e.team_id)||(n.add(e.team_id),s.push({type:"O"===e.team_type?"public-team":"private-team",hasChildren:!0,name:e.team_display_name,collapsed:this.state.collapsed[e.team_id],id:e.team_id}))}),s.sort((e,t)=>e.name&&t.name?e.name.localeCompare(t.name):0),s.forEach(e=>{if(a.push(e),e.hasChildren&&!e.collapsed){const t=i[e.id];t.sort((e,t)=>e.name.localeCompare(t.name)),a.push(...t)}}),a}),_i(this,"render",()=>{const e=this.teamsAndChannelsToEntries(this.props.teams,this.props.channels);return this.props.loading?x.a.createElement("div",{className:"group-teams-and-channels"},x.a.createElement("div",{className:"group-teams-and-channels-loading"},x.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"}))):0===e.length?x.a.createElement("div",{className:"group-teams-and-channels"},x.a.createElement("div",{className:"group-teams-and-channels-empty"},x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_teams_and_channels.no-teams-or-channels-speicified",defaultMessage:"No teams or channels specified yet"}))):x.a.createElement("div",{className:"AdminPanel__content"},x.a.createElement("table",{id:"team_and_channel_membership_table",className:"AdminPanel__table group-teams-and-channels"},x.a.createElement("thead",{className:"group-teams-and-channels--header"},x.a.createElement("tr",null,x.a.createElement("th",{width:"30%"},x.a.createElement(w.a,{id:"admin.group_settings.group_profile.group_teams_and_channels.name",defaultMessage:"Name"})),x.a.createElement("th",{width:"25%"},x.a.createElement(w.a,{id:"admin.group_settings.group_profile.group_teams_and_channels.type",defaultMessage:"Type"})),x.a.createElement("th",{width:"25%"},x.a.createElement(w.a,{id:"admin.group_settings.group_profile.group_teams_and_channels.assignedRoles",defaultMessage:"Assigned Roles"})),x.a.createElement("th",{width:"20%"}))),x.a.createElement("tbody",{className:"group-teams-and-channels--body"},e.map(e=>x.a.createElement(bi,Object.assign({key:e.id,onRemoveItem:this.onRemoveItem,onChangeRoles:this.onChangeRoles,onToggleCollapse:this.onToggleCollapse},e))))))}),this.state={collapsed:{}}}}function Ei(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}_i(yi,"propTypes",{id:j.a.string.isRequired,teams:j.a.arrayOf(j.a.object),channels:j.a.arrayOf(j.a.object),loading:j.a.bool.isRequired,getGroupSyncables:j.a.func.isRequired,unlink:j.a.func.isRequired,onChangeRoles:j.a.func.isRequired});class Si extends x.a.PureComponent{constructor(...e){super(...e),Ei(this,"render",()=>x.a.createElement("div",{className:"group-users-row"},x.a.createElement(Pn.a,{username:this.props.username,url:Ft.Client4.getProfilePictureUrl(this.props.userId,this.props.lastPictureUpdate),size:"lg"}),x.a.createElement("div",{className:"user-data"},x.a.createElement("div",{className:"name-row"},x.a.createElement("span",{className:"username"},"@"+this.props.username),"-",x.a.createElement("span",{className:"display-name"},this.props.displayName)),x.a.createElement("div",null,x.a.createElement("span",{className:"email-label"},x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_users.email",defaultMessage:"Email:"})),x.a.createElement("span",{className:"email"},this.props.email)))))}}function Ti(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ei(Si,"propTypes",{username:j.a.string.isRequired,displayName:j.a.string.isRequired,email:j.a.string.isRequired,userId:j.a.string.isRequired,lastPictureUpdate:j.a.number.isRequired});class xi extends x.a.PureComponent{constructor(e){super(e),Ti(this,"previousPage",async()=>{const e=this.state.page<1?0:this.state.page-1;this.setState({page:e,loading:!0}),await this.props.getMembers(this.props.groupID,e,20),this.setState({loading:!1})}),Ti(this,"nextPage",async()=>{const e=20*(this.state.page+1)>=this.props.total?this.state.page:this.state.page+1;this.setState({page:e,loading:!0}),await this.props.getMembers(this.props.groupID,e,20),this.setState({loading:!1})}),Ti(this,"renderRows",()=>0===this.props.members.length?x.a.createElement("div",{className:"group-users-empty"},x.a.createElement(w.a,{id:"admin.group_settings.group_details.group_users.no-users-found",defaultMessage:"No users found"})):this.props.members.map(e=>x.a.createElement(Si,{key:e.id,username:e.username,displayName:e.first_name+" "+e.last_name,email:e.email,userId:e.id,lastPictureUpdate:e.last_picture_update}))),Ti(this,"renderPagination",()=>{if(0===this.props.members.length)return x.a.createElement("div",{className:"group-users--footer empty"});const e=20*this.state.page+1;let t=20*this.state.page+20;const a=this.props.total;t>a&&(t=a);const n=t===a,s=0===this.state.page;return x.a.createElement("div",{className:"group-users--footer"},x.a.createElement("div",{className:"counter"},x.a.createElement(w.a,{id:"admin.group_settings.groups_list.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number}",values:{startCount:e,endCount:t,total:a}})),x.a.createElement("button",{className:"btn btn-link prev "+(s?"disabled":""),onClick:this.previousPage,disabled:s},x.a.createElement(Ms.a,null)),x.a.createElement("button",{className:"btn btn-link next "+(n?"disabled":""),onClick:this.nextPage,disabled:n},x.a.createElement(Cs.a,null)))}),Ti(this,"render",()=>x.a.createElement("div",{className:"group-users"},x.a.createElement("div",{className:"group-users--header"},x.a.createElement(P.b,{id:"admin.group_settings.group_profile.group_users.ldapConnector",defaultMessage:"AD/LDAP Connector is configured to sync and manage this group and its users. [Click here to view]({siteURL}/admin_console/authentication/ldap)",values:{siteURL:Object(C.f)()}})),x.a.createElement("div",{className:"group-users--body"},x.a.createElement("div",{className:"group-users-loading "+(this.state.loading?"active":"")},x.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"})),this.renderRows()),this.renderPagination())),this.state={loading:!0,page:0}}componentDidMount(){this.props.getMembers(this.props.groupID,0,20).then(()=>{this.setState({loading:!1})})}}function wi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ti(xi,"propTypes",{groupID:j.a.string.isRequired,members:j.a.arrayOf(j.a.object),total:j.a.number.isRequired,getMembers:j.a.func.isRequired});class Oi extends x.a.Component{constructor(e){super(e),wi(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})}),wi(this,"handleExit",()=>{this.props.onModalDismissed&&this.props.onModalDismissed()}),wi(this,"handleSubmit",e=>{e&&e.preventDefault(),0!==this.state.values.length&&(this.props.onChannelsSelected(this.state.values),this.handleHide())}),wi(this,"addValue",e=>{const t=Object.assign([],this.state.values);e&&e.id&&-1===t.findIndex(t=>t.id===e.id)&&t.push(e),this.setState({values:t})}),wi(this,"setChannelsLoadingState",e=>{this.setState({loadingChannels:e})}),wi(this,"handlePageChange",(e,t)=>{e>t&&(this.setChannelsLoadingState(!0),this.props.actions.loadChannels(e,51,this.props.groupID,!0).then(e=>{const t=[...this.state.channels],a=this.state.channels.map(e=>e.id);e.data.forEach(e=>{a.includes(e.id)||t.push(e)}),this.setState({channels:t.sort(U.f)}),this.setChannelsLoadingState(!1)}))}),wi(this,"handleDelete",e=>{this.setState({values:e})}),wi(this,"search",(e,t)=>{0!==t.state.page&&t.setState({page:0}),this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,loadingChannels:!0,channels:[]}}componentDidMount(){this.props.actions.loadChannels(0,51,this.props.groupID,!0).then(e=>{this.setState({channels:e.data.sort(U.f)}),this.setChannelsLoadingState(!1)})}componentDidUpdate(e){if(e.searchTerm!==this.props.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;""===e?this.props.actions.loadChannels(0,51,this.props.groupID,!0).then(e=>{this.setState({channels:e.data.sort(U.f)}),this.setChannelsLoadingState(!1)}):this.searchTimeoutId=setTimeout(async()=>{this.setChannelsLoadingState(!0);const t=await this.props.actions.searchChannels(e,this.props.groupID,!0);this.setState({channels:t.data}),this.setChannelsLoadingState(!1)},O.Q.SEARCH_TIMEOUT_MILLISECONDS)}}renderOption(e,t,a,n){let s="";return t&&(s="more-modal__row--selected"),x.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+s,onClick:()=>a(e),onMouseMove:()=>n(e)},x.a.createElement("div",{className:"more-modal__details"},"P"===e.type&&x.a.createElement("i",{className:"icon icon-globe"}),"O"===e.type&&x.a.createElement("i",{className:"icon icon-lock-outline"}),x.a.createElement("span",{className:"channel-name"},e.display_name),x.a.createElement("span",{className:"team-name"},"("+e.team_display_name+")")),x.a.createElement("div",{className:"more-modal__actions"},x.a.createElement("div",{className:"more-modal__actions--round"},x.a.createElement("i",{className:"fa fa-plus"}))))}renderValue(e){return e.data.display_name+" ("+e.data.team_display_name+")"}render(){const e=x.a.createElement(w.a,{id:"multiselect.selectChannels",defaultMessage:"Use ↑↓ to browse, ↵ to select."}),t=Object(U.jb)("multiselect.add","Add");return x.a.createElement(za.a,{dialogClassName:"a11y__modal more-modal more-direct-channels channel-selector-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelSelectorModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"channelSelectorModalLabel"},x.a.createElement(P.b,{id:"add_channels_to_scheme.title",defaultMessage:"Add Channels to **Channel Selection** List"}))),x.a.createElement(za.a.Body,null,x.a.createElement(dn.a,{key:"addChannelsToSchemeKey",options:this.state.channels,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,numRemainingText:e,buttonSubmitText:t,saving:!1,loading:this.state.loadingChannels,placeholderText:Object(U.jb)("multiselect.addChannelsPlaceholder","Search and add channels")})))}}wi(Oi,"propTypes",{searchTerm:j.a.string.isRequired,onModalDismissed:j.a.func,onChannelsSelected:j.a.func,groupID:j.a.string.isRequired,actions:j.a.shape({loadChannels:j.a.func.isRequired,setModalSearchTerm:j.a.func.isRequired,searchChannels:j.a.func.isRequired}).isRequired});var Ci=Object(r.connect)((function(e){return{searchTerm:e.views.search.modalSearch}}),(function(e){return{actions:Object(o.bindActionCreators)({loadChannels:p.getAllChannels,setModalSearchTerm:cn.a,searchChannels:p.searchAllChannels},e)}}))(Oi);function Mi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ki extends x.a.PureComponent{constructor(...e){super(...e),Mi(this,"render",()=>{const{name:e,title:t,titleDefault:a,customID:n}=this.props;return x.a.createElement("div",{className:"group-profile form-horizontal",id:n},x.a.createElement("div",{className:"group-profile-field form-group mb-0"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:t,defaultMessage:a})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("input",{type:"text",className:"form-control",value:e,disabled:!0}))))})}}Mi(ki,"propTypes",{name:j.a.string.isRequired,title:j.a.string.isRequired,titleDefault:j.a.string.isRequired,customID:j.a.string});const ji=e=>{const{onToggle:t,toggled:a,disabled:n,onText:s,offText:i}=e;return x.a.createElement("button",{type:"button",onClick:t,className:"btn btn-lg btn-toggle ".concat(a&&"active"," ").concat(n&&"disabled"),"aria-pressed":a?"true":"false"},x.a.createElement("div",{className:"handle"}),function(e,t,a){if(e&&!t||!e&&!a)return null;return x.a.createElement("div",{className:"bg-text ".concat(e?"on":"off")},e?t:a)}(a,s,i))};ji.propTypes={onToggle:j.a.func.isRequired,toggled:j.a.bool,disabled:j.a.bool,onText:j.a.node,offText:j.a.node};var Pi=ji;class Ai extends x.a.PureComponent{render(){const{title:e,subTitle:t,singleLine:a,toggled:n,onToggle:s,children:i,offText:r,onText:o,disabled:l,last:c,id:d}=this.props;return x.a.createElement("div",null,x.a.createElement("div",{className:"line-switch d-flex flex-sm-column flex-md-row align-items-sm-start align-items-center justify-content-md-between"},x.a.createElement("label",{className:"line-switch__label"},e),x.a.createElement("div",{"data-testid":d,className:"line-switch__toggle"},x.a.createElement(Pi,{disabled:l,onToggle:s,toggled:n,onText:o,offText:r}))),x.a.createElement("div",{className:"row"},x.a.createElement("div",{className:"col-sm-10"},x.a.createElement("div",{className:"help-text-small help-text-no-padding ".concat(a?"help-text-single-line":"")},t))),i,!c&&x.a.createElement("div",{className:"section-separator"},x.a.createElement("hr",{className:"separator__hr"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ai,"propTypes",{title:j.a.node.isRequired,last:j.a.bool,toggled:j.a.bool.isRequired,disabled:j.a.bool,singleLine:j.a.bool,subTitle:j.a.node.isRequired,onToggle:j.a.func.isRequired,children:j.a.node,offText:j.a.node,onText:j.a.node,id:j.a.string});const Ri=({isDefault:e,allowReference:t,onToggle:a})=>x.a.createElement(Ai,{disabled:e,toggled:t,last:!0,onToggle:()=>{e||a(!t)},singleLine:!1,title:x.a.createElement(w.a,{id:"admin.team_settings.team_details.groupDetailsToggle",defaultMessage:"Enable Group Mention"}),subTitle:x.a.createElement(P.b,{id:"admin.team_settings.team_details.groupDetailsToggleDescr",defaultMessage:"When enabled, the group can be mentioned in other channels and teams. This may result in the group member list being visible to all users."})});Ri.propTypes={isDefault:j.a.bool.isRequired,allowReference:j.a.bool.isRequired,onToggle:j.a.func.isRequired};const Ni=({displayname:e,name:t,allowReference:a,onToggle:n})=>x.a.createElement(ca,{id:"group_profile",titleId:Object(M.b)("admin.group_settings.group_detail.groupProfileTitle"),titleDefault:"Group Profile",subtitleId:Object(M.b)("admin.group_settings.group_detail.groupProfileDescription"),subtitleDefault:"The name for this group."},x.a.createElement(ki,{name:e,title:Object(M.b)("admin.group_settings.group_details.group_profile.name"),titleDefault:"Name:",customID:"GroupDisplayName"}),x.a.createElement("div",{className:"group-settings"},x.a.createElement("div",{className:"group-settings--body"},x.a.createElement("div",{className:"section-separator"},x.a.createElement("hr",{className:"separator__hr"})),x.a.createElement(Ri,{isDefault:!1,allowReference:a,onToggle:n}))),a&&x.a.createElement(ki,{name:"@"+t,title:Object(M.b)("admin.group_settings.group_details.group_mention.name"),titleDefault:"Group Mention:",customID:"GroupMention"}));function Di(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ni.propTypes={displayname:j.a.string.isRequired,name:j.a.string.isRequired,allowReference:j.a.bool.isRequired,onToggle:j.a.func.isRequired};class Ii extends x.a.PureComponent{constructor(e){super(e),Di(this,"openAddChannel",()=>{this.setState({addChannelOpen:!0})}),Di(this,"closeAddChannel",()=>{this.setState({addChannelOpen:!1})}),Di(this,"openAddTeam",()=>{this.setState({addTeamOpen:!0})}),Di(this,"closeAddTeam",()=>{this.setState({addTeamOpen:!1})}),Di(this,"addTeams",e=>{const t=[];for(const a of e)t.push(this.props.actions.link(this.props.groupID,a.id,v.Groups.SYNCABLE_TYPE_TEAM,{auto_add:!0}));return Promise.all(t).finally(()=>this.props.actions.getGroupSyncables(this.props.groupID,v.Groups.SYNCABLE_TYPE_TEAM))}),Di(this,"addChannels",async e=>{const t=[];for(const a of e)t.push(this.props.actions.link(this.props.groupID,a.id,v.Groups.SYNCABLE_TYPE_CHANNEL,{auto_add:!0}));return Promise.all(t).finally(()=>{this.props.actions.getGroupSyncables(this.props.groupID,v.Groups.SYNCABLE_TYPE_CHANNEL),this.props.actions.getGroupSyncables(this.props.groupID,v.Groups.SYNCABLE_TYPE_TEAM)})}),Di(this,"onChangeRoles",async(e,t,a)=>{this.setState({loadingTeamsAndChannels:!0}),"public-team"===t||"private-team"===t?(await this.props.actions.patchGroupSyncable(this.props.groupID,e,v.Groups.SYNCABLE_TYPE_TEAM,{scheme_admin:a}),await this.props.actions.getGroupSyncables(this.props.groupID,v.Groups.SYNCABLE_TYPE_TEAM)):(await this.props.actions.patchGroupSyncable(this.props.groupID,e,v.Groups.SYNCABLE_TYPE_CHANNEL,{scheme_admin:a}),await this.props.actions.getGroupSyncables(this.props.groupID,v.Groups.SYNCABLE_TYPE_CHANNEL)),this.setState({loadingTeamsAndChannels:!1})}),Di(this,"onToggle",async e=>{this.setState({allowReference:e}),this.props.actions.patchGroup(this.props.groupID,{allow_reference:e})}),Di(this,"render",()=>{const{group:e,members:t,groupTeams:a,groupChannels:n,memberCount:s}=this.props,{allowReference:i}=this.state;return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header with-back"},x.a.createElement("div",null,x.a.createElement(xa,{to:"/admin_console/user_management/groups",className:"fa fa-angle-left back"}),x.a.createElement(w.a,{id:"admin.group_settings.group_detail.group_configuration",defaultMessage:"Group Configuration"}))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement("div",{className:"banner info"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(w.a,{id:"admin.group_settings.group_detail.introBanner",defaultMessage:"Configure default teams and channels and view users belonging to this group."}))),x.a.createElement(Ni,{displayname:e.display_name,name:e.name,allowReference:i,onToggle:this.onToggle}),x.a.createElement(ca,{id:"group_teams_and_channels",titleId:Object(M.b)("admin.group_settings.group_detail.groupTeamsAndChannelsTitle"),titleDefault:"Team and Channel Membership",subtitleId:Object(M.b)("admin.group_settings.group_detail.groupTeamsAndChannelsDescription"),subtitleDefault:"Set default teams and channels for group members. Teams added will include default channels, town-square, and off-topic. Adding a channel without setting the team will add the implied team to the listing below.",button:x.a.createElement("div",{className:"group-profile-add-menu"},x.a.createElement(Ln.a,null,x.a.createElement("button",{id:"add_team_or_channel",className:"btn btn-primary"},x.a.createElement(w.a,{id:"admin.group_settings.group_details.add_team_or_channel",defaultMessage:"Add Team or Channel"}),x.a.createElement("i",{className:"fa fa-caret-down"})),x.a.createElement(Bn.a,{ariaLabel:Object(U.jb)("admin.group_settings.group_details.menuAriaLabel","Add Team or Channel Menu")},x.a.createElement(Bn.a.ItemAction,{id:"add_team",onClick:this.openAddTeam,text:Object(U.jb)("admin.group_settings.group_details.add_team","Add Team")}),x.a.createElement(Bn.a.ItemAction,{id:"add_channel",onClick:this.openAddChannel,text:Object(U.jb)("admin.group_settings.group_details.add_channel","Add Channel")}))))},x.a.createElement(yi,{id:this.props.groupID,teams:a,channels:n,loading:this.state.loadingTeamsAndChannels,getGroupSyncables:this.props.actions.getGroupSyncables,unlink:this.props.actions.unlink,onChangeRoles:this.onChangeRoles})),this.state.addTeamOpen&&x.a.createElement(pn,{onModalDismissed:this.closeAddTeam,onTeamsSelected:this.addTeams,alreadySelected:this.props.groupTeams.map(e=>e.team_id)}),this.state.addChannelOpen&&x.a.createElement(Ci,{onModalDismissed:this.closeAddChannel,onChannelsSelected:this.addChannels,alreadySelected:this.props.groupChannels.map(e=>e.channel_id),groupID:this.props.groupID}),x.a.createElement(ca,{id:"group_users",titleId:Object(M.b)("admin.group_settings.group_detail.groupUsersTitle"),titleDefault:"Users",subtitleId:Object(M.b)("admin.group_settings.group_detail.groupUsersDescription"),subtitleDefault:"Listing of users in Mattermost associated with this group."},x.a.createElement(xi,{members:t,total:s,groupID:this.props.groupID,getMembers:this.props.actions.getMembers})))))}),this.state={loadingTeamsAndChannels:!0,addTeamOpen:!1,addChannelOpen:!1,allowReference:Boolean(e.group.allow_reference)}}componentDidMount(){const{groupID:e,actions:t,group:a}=this.props;t.getGroup(e),Promise.all([t.getGroupSyncables(e,v.Groups.SYNCABLE_TYPE_TEAM),t.getGroupSyncables(e,v.Groups.SYNCABLE_TYPE_CHANNEL)]).then(()=>{this.setState({loadingTeamsAndChannels:!1,group:a,allowReference:Boolean(this.props.group.allow_reference)})})}}Di(Ii,"propTypes",{groupID:j.a.string.isRequired,group:j.a.object,groupTeams:j.a.arrayOf(j.a.object),groupChannels:j.a.arrayOf(j.a.object),members:j.a.arrayOf(j.a.object),memberCount:j.a.number.isRequired,actions:j.a.shape({getGroup:j.a.func.isRequired,getMembers:j.a.func.isRequired,getGroupSyncables:j.a.func.isRequired,link:j.a.func.isRequired,unlink:j.a.func.isRequired,patchGroupSyncable:j.a.func.isRequired,patchGroup:j.a.func.isRequired}).isRequired}),Di(Ii,"defaultProps",{members:[],groupTeams:[],groupChannels:[],group:{name:"",display_name:"",allow_reference:!1},memberCount:0});var Li=Object(r.connect)((function(e,t){const a=t.match.params.group_id;return{groupID:a,group:Object(hi.getGroup)(e,a),groupTeams:Object(hi.getGroupTeams)(e,a),groupChannels:Object(hi.getGroupChannels)(e,a),members:Object(hi.getGroupMembers)(e,a),memberCount:Object(hi.getGroupMemberCount)(e,a)}}),(function(e){return{actions:Object(o.bindActionCreators)({getGroup:mi.getGroup,getMembers:mi.getGroupMembers,getGroupSyncables:mi.getGroupSyncables,link:mi.linkGroupSyncable,unlink:mi.unlinkGroupSyncable,patchGroupSyncable:mi.patchGroupSyncable,patchGroup:mi.patchGroup},e)}}))(Ii);function Bi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ui extends x.a.Component{constructor(...e){super(...e),Bi(this,"handleRowClick",()=>{const{team:e,onRowClick:t}=this.props;t(e.id)}),Bi(this,"renderManagementMethodText",()=>{const{team:e}=this.props;return e.group_constrained?x.a.createElement(w.a,{id:"admin.team_settings.team_row.managementMethod.groupSync",defaultMessage:"Group Sync"}):e.allow_open_invite?x.a.createElement(w.a,{id:"admin.team_settings.team_row.managementMethod.anyoneCanJoin",defaultMessage:"Anyone Can Join"}):x.a.createElement(w.a,{id:"admin.team_settings.team_row.managementMethod.inviteOnly",defaultMessage:"Invite Only"})}),Bi(this,"render",()=>{const{team:e}=this.props,t=U.M(e);return x.a.createElement("div",{className:"group",onClick:this.handleRowClick},x.a.createElement("div",{className:"group-row group-row-large"},x.a.createElement("div",{className:"group-name adjusted center-row row-content"},x.a.createElement(un.a,{size:"sm",url:t,name:e.display_name}),x.a.createElement("div",null,x.a.createElement("b",{"data-testid":"team-display-name"},e.display_name),e.description&&x.a.createElement("div",{className:"overflow--ellipsis text-nowrap team-descr-list-column"},e.description))),x.a.createElement("div",{className:"group-content"},x.a.createElement("span",{className:"group-description adjusted row-content"},this.renderManagementMethodText()),x.a.createElement("span",{"data-testid":"".concat(e.display_name,"edit"),className:"group-actions"},x.a.createElement(de.a,{to:"/admin_console/user_management/teams/".concat(e.id)},x.a.createElement(w.a,{id:"admin.team_settings.team_row.configure",defaultMessage:"Edit"}))))))})}}function Fi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Bi(Ui,"propTypes",{team:j.a.object.isRequired,onRowClick:j.a.func.isRequired});class Gi extends x.a.PureComponent{constructor(e){super(e),qi(this,"previousPage",async e=>{e.preventDefault();const t=this.state.page<1?0:this.state.page-1;this.setState({page:t,loading:!0}),this.performSearch(t)}),qi(this,"nextPage",async e=>{e.preventDefault();const t=this.state.page+1;this.setState({page:t,loading:!0}),this.performSearch(t)}),qi(this,"renderRows",()=>{if(this.state.loading)return x.a.createElement("div",{className:"groups-list-loading"},x.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"}));if(0===this.props.data.length)return x.a.createElement("div",{className:"groups-list-empty"},x.a.createElement(w.a,{id:this.props.emptyListTextId,defaultMessage:this.props.emptyListTextDefaultMessage}));const e=10*this.state.page;return this.props.data.slice(e,e+10).map(this.props.renderRow)}),qi(this,"performSearch",e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(a),!0).forEach((function(t){qi(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state);delete t.page,t.loading=!0,this.setState(t),this.props.actions.getData(e,10).then(e=>{this.props.onPageChangedCallback&&this.props.onPageChangedCallback(this.getPaging(),e),this.setState({loading:!1})})}),qi(this,"render",()=>{const{startCount:e,endCount:t,total:a}=this.getPaging(),n=t===a,s=0===this.state.page;return x.a.createElement("div",{className:"groups-list groups-list-no-padding"},this.props.header,x.a.createElement("div",{id:"groups-list--body",className:"groups-list--body"},this.renderRows()),a>0&&x.a.createElement("div",{className:"groups-list--footer"},x.a.createElement("div",{className:"counter"},x.a.createElement(w.a,{id:"admin.team_channel_settings.list.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number}",values:{startCount:e,endCount:t,total:a}})),x.a.createElement("button",{className:"btn btn-link prev "+(s?"disabled":""),onClick:s?null:this.previousPage,disabled:s},x.a.createElement(Ms.a,null)),x.a.createElement("button",{className:"btn btn-link next "+(n?"disabled":""),onClick:n?null:this.nextPage,disabled:n,"data-testid":"page-link-next"},x.a.createElement(Cs.a,null))))}),this.state={loading:!0,page:0}}componentDidMount(){this.performSearch(this.state.page)}getPaging(){const e=10*this.state.page+1;let t=10*this.state.page+10;const a=this.props.total;return t>a&&(t=a),{startCount:e,endCount:t,total:a}}}function Hi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}qi(Gi,"propTypes",{data:j.a.arrayOf(j.a.object),onPageChangedCallback:j.a.func,total:j.a.number.isRequired,header:j.a.node.isRequired,renderRow:j.a.func.isRequired,emptyListTextId:j.a.string.isRequired,emptyListTextDefaultMessage:j.a.string.isRequired,actions:j.a.shape({getData:j.a.func.isRequired,removeGroup:j.a.func}).isRequired}),qi(Gi,"defaultProps",{data:[]});class Wi extends x.a.PureComponent{constructor(e){super(e),Hi(this,"searchBar",()=>x.a.createElement("div",{className:"groups-list--global-actions"},x.a.createElement("div",{className:"group-list-search"},x.a.createElement("input",{type:"text",placeholder:U.jb("search_bar.search","Search"),onKeyUp:this.handleTeamSearchKeyUp,onChange:this.searchBarChangeHandler,value:this.state.searchString,"data-testid":"search-input"}),x.a.createElement(ni.a,{id:"searchIcon",className:"search__icon","aria-hidden":"true"}),x.a.createElement("i",{className:"fa fa-times-circle group-filter-action "+(this.state.searchString.length?"":"hidden"),onClick:this.resetSearch,"data-testid":"clear-search"})))),Hi(this,"searchBarChangeHandler",e=>{this.setState({searchString:e.target.value})}),Hi(this,"handleTeamSearchKeyUp",async e=>{const{key:t}=e,{searchString:a}=this.state;if(t===O.j.KeyCodes.ENTER[0]&&a.length>1){const e=await this.props.actions.searchTeams(a,0,10);this.setState({searchMode:!0,teams:e.data.teams,searchTotalCount:e.data.total_count,pageResetKey:Date.now()})}0===a.length&&this.resetSearch()}),Hi(this,"getDataBySearch",async(e,t)=>{if(this.state.searchString.length>1){const a=await this.props.actions.searchTeams(this.state.searchString,e,t);return new Array(e*t).concat(a.data.teams)}return[]}),Hi(this,"resetSearch",()=>{this.setState({searchString:"",teams:[],searchMode:!1,searchTotalCount:0,pageResetKey:Date.now()})}),Hi(this,"onPageChangedCallback",(e,t)=>{this.state.searchMode&&this.setState({teams:t})}),Hi(this,"renderRow",e=>x.a.createElement(Ui,{key:e.id,team:e,onRowClick:this.onTeamClick})),Hi(this,"onTeamClick",e=>{ya.a.push("/admin_console/user_management/teams/".concat(e))}),this.state={searchString:"",teams:[],searchTotalCount:0,pageResetKey:0}}header(){return x.a.createElement(x.a.Fragment,null,this.searchBar(),x.a.createElement("div",{className:"groups-list--header"},x.a.createElement("div",{className:"group-name adjusted"},x.a.createElement(w.a,{id:"admin.team_settings.team_list.nameHeader",defaultMessage:"Name"})),x.a.createElement("div",{className:"group-content"},x.a.createElement("div",{className:"group-description adjusted"},x.a.createElement(w.a,{id:"admin.team_settings.team_list.mappingHeader",defaultMessage:"Management"})),x.a.createElement("div",{className:"group-actions"}))))}render(){const e=Object(S.cloneDeep)(this.props);return this.state.searchMode&&(e.actions.getData=this.getDataBySearch),x.a.createElement(Gi,Object.assign({header:this.header(),renderRow:this.renderRow},e,{key:this.state.pageResetKey,onPageChangedCallback:this.onPageChangedCallback,data:this.state.searchMode?this.state.teams:this.props.data,total:this.state.searchMode?this.state.searchTotalCount:this.props.total}))}}Hi(Wi,"propTypes",{actions:j.a.shape({searchTeams:j.a.func.isRequired,getData:j.a.func.isRequired}).isRequired,data:j.a.array,total:j.a.number});const zi=Object(E.createSelector)(b.getTeams,e=>Object.values(e).sort((e,t)=>e.display_name.localeCompare(t.display_name)));var Yi=Object(r.connect)((function(e){return{data:zi(e),total:e.entities.teams.totalCount||0,emptyListTextId:Object(M.b)("admin.team_settings.team_list.no_teams_found"),emptyListTextDefaultMessage:"No teams found"}}),(function(e){return{actions:Object(o.bindActionCreators)({getData:(e,t)=>Object(g.getTeams)(e,t,!0),searchTeams:g.searchTeams},e)}}))(Wi);function Vi(e){return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header"},x.a.createElement(w.a,{id:"admin.team_settings.groupsPageTitle",defaultMessage:"{siteName} Teams",values:{siteName:e.siteName}})),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement(ca,{id:"teams",titleId:Object(M.b)("admin.team_settings.title"),titleDefault:"Teams",subtitleId:Object(M.b)("admin.team_settings.description"),subtitleDefault:"Manage team settings."},x.a.createElement(Yi,null)))))}Vi.propTypes={siteName:j.a.string.isRequired};var Ji=Object(r.connect)((function(e){return{siteName:Object(m.getConfig)(e).SiteName}}))(Vi);class Xi extends x.a.PureComponent{render(){const{amount:e,inChannel:t}=this.props,a=x.a.createElement(w.a,{id:"admin.team_channel_settings.removeConfirmModal.title",defaultMessage:"Save and remove {amount, number} {amount, plural, one {user} other {users}}?",values:{amount:e}}),n=t?Object(M.b)("admin.team_channel_settings.removeConfirmModal.messageGroup"):Object(M.b)("admin.team_channel_settings.removeConfirmModal.messageChannel"),s=x.a.createElement(w.a,{id:n,defaultMessage:t?"{amount, number} {amount, plural, one {user} other {users}} will be removed. They are not in groups linked to this channel. Are you sure you wish to remove these users?":"{amount, number} {amount, plural, one {user} other {users}} will be removed. They are not in groups linked to this group. Are you sure you wish to remove these users?",values:{amount:e}}),i=x.a.createElement(w.a,{id:"admin.team_channel_settings.removeConfirmModal.remove",defaultMessage:"Save and remove {amount, plural, one {user} other {users}}",values:{amount:e}}),{show:r,onConfirm:o,onCancel:l}=this.props;return x.a.createElement(ge.a,{show:r,title:a,message:s,modalClass:"discard-changes-modal",confirmButtonClass:"btn btn-primary",confirmButtonText:i,onConfirm:o,onCancel:l})}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Xi,"propTypes",{show:j.a.bool.isRequired,onConfirm:j.a.func.isRequired,onCancel:j.a.func.isRequired,inChannel:j.a.bool.isRequired,amount:j.a.number.isRequired});var Ki=a(1254);function Qi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $i extends x.a.PureComponent{constructor(...e){super(...e),Qi(this,"renderRolesColumn",e=>e.roles.split(" ").map(e=>U.jb("admin.permissions.roles."+e+".name",e)).join(", ")),Qi(this,"renderGroupsColumn",e=>{const t=e.groups||[];return 1===t.length?t[0].display_name:x.a.createElement(se.a,{placement:"top",overlay:x.a.createElement(ne.a,{id:"groupsTooltip"},t.map(e=>e.display_name).join(", "))},x.a.createElement("a",{href:"#"},x.a.createElement(w.a,{id:Object(M.b)("team_channel_settings.group.group_user_row.numberOfGroups"),defaultMessage:"{amount, number} {amount, plural, one {Group} other {Groups}}",values:{amount:t.length}})))}),Qi(this,"render",()=>{const{user:e,lastPictureUpdate:t,displayName:a}=this.props;return x.a.createElement("div",{className:"group"},x.a.createElement("div",{className:"group-row roc",style:{padding:"30px 0px"}},x.a.createElement("div",{className:"group-name col-sm-8"},x.a.createElement("div",{className:"col-sm-2"},x.a.createElement(Pn.a,{username:e.username,url:Ft.Client4.getProfilePictureUrl(e.id,t),size:"lg"})),x.a.createElement("div",{className:"col-sm-10"},x.a.createElement("div",{className:"row"},x.a.createElement("b",null,"@"+e.username," "),"-"," ",a),x.a.createElement("div",{className:"row email-group-row"},e.email))),x.a.createElement("span",{className:"col-sm-2 group-user-removal-column group-description"},this.renderRolesColumn(e)),x.a.createElement("span",{className:"col-sm-2 group-user-removal-column group-description group-description-link"},this.renderGroupsColumn(e))))})}}function Zi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Qi($i,"propTypes",{displayName:j.a.string.isRequired,user:j.a.any.isRequired,lastPictureUpdate:j.a.number.isRequired});class er extends x.a.PureComponent{constructor(...e){super(...e),Zi(this,"state",{page:0}),Zi(this,"previousPage",async()=>{const e=this.state.page<1?0:this.state.page-1;this.setState({page:e})}),Zi(this,"nextPage",async()=>{const e=10*(this.state.page+1)>=this.props.total?this.state.page:this.state.page+1;this.setState({page:e})}),Zi(this,"renderRow",e=>x.a.createElement($i,{key:e.id,user:e,displayName:e.first_name+" "+e.last_name,lastPictureUpdate:e.last_picture_update||0})),Zi(this,"renderRows",()=>{const e=10*this.state.page;return this.props.members.slice(e,e+10).map(this.renderRow)}),Zi(this,"renderPagination",()=>{const{page:e}=this.state,t=10*e+1;let a=10*e+10;const n=this.props.total;a>n&&(a=n);const s=a===n,i=0===e;return x.a.createElement("div",{className:"groups-list--footer"},x.a.createElement("div",{className:"counter"},x.a.createElement(w.a,{id:"admin.team_channel_settings.list.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number}",values:{startCount:t,endCount:a,total:n}})),x.a.createElement("button",{className:"btn btn-link prev "+(i?"disabled":""),onClick:this.previousPage,disabled:i},x.a.createElement(Ms.a,null)),x.a.createElement("button",{className:"btn btn-link next "+(s?"disabled":""),onClick:this.nextPage,disabled:s},x.a.createElement(Cs.a,null)))}),Zi(this,"render",()=>x.a.createElement("div",{className:"groups-list groups-list-less-padding"},x.a.createElement("div",{className:"groups-list--header"},x.a.createElement("div",{className:"group-name"},x.a.createElement(w.a,{id:"admin.team_channel_settings.user_list.nameHeader",defaultMessage:"Name"})),x.a.createElement("div",{className:"group-content"},x.a.createElement("div",{className:"group-description group-users--header-padded"},x.a.createElement(w.a,{id:"admin.team_channel_settings.user_list.roleHeader",defaultMessage:"Role"})),x.a.createElement("div",{className:"group-description group-users--header-padded"},x.a.createElement(w.a,{id:"admin.team_channel_settings.user_list.groupsHeader",defaultMessage:"Groups"})))),x.a.createElement("div",{className:"groups-list--body"},this.renderRows()),this.renderPagination()))}}function tr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Zi(er,"propTypes",{members:j.a.oneOfType([j.a.any,j.a.arrayOf(j.a.shape({last_picture_update:j.a.number}))]).isRequired,total:j.a.number.isRequired});class ar extends x.a.PureComponent{constructor(e){super(e),tr(this,"handleHide",()=>{this.setState({show:!1})}),tr(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),this.state={values:[],show:!0}}render(){const{users:e,total:t}=this.props,a=x.a.createElement(P.b,{id:"admin.team_channel_settings.usersToBeRemovedModal.title",defaultMessage:"**{total, number} {total, plural, one {User} other {Users}}** To Be Removed",values:{total:t}}),n=x.a.createElement(w.a,{id:"admin.team_channel_settings.usersToBeRemovedModal.message",defaultMessage:"The members listed below are not in any of the groups currently linked to this team. Because this team is set to be managed by group sync they will all be removed once saved."}),s=x.a.createElement(w.a,{id:"admin.team_channel_settings.usersToBeRemovedModal.close",defaultMessage:"Close"});return x.a.createElement(za.a,{dialogClassName:"a11y__modal settings-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,id:"confirmModal",role:"dialog","aria-labelledby":"confirmModalLabel"},x.a.createElement(za.a.Header,{closeButton:!0},x.a.createElement(za.a.Title,{componentClass:"h1",id:"confirmModalLabel"},a)),x.a.createElement(za.a.Body,null,x.a.createElement("div",{className:"group-users-to-remove-modal-description"},n),x.a.createElement(er,{members:e,total:t})),x.a.createElement(za.a.Footer,null,x.a.createElement("button",{autoFocus:!0,type:"button",className:"btn btn-primary",onClick:this.handleHide,id:"closeModalButton"},s)))}}tr(ar,"propTypes",{total:j.a.number.isRequired,users:j.a.arrayOf(j.a.object).isRequired,onHide:j.a.func});const nr=({warning:e,isChannel:t=!1})=>{let a=x.a.createElement(w.a,{id:"admin.team_channel_settings.need_groups",defaultMessage:"You must add at least one group to manage this team by sync group members."});return t&&(a=x.a.createElement(w.a,{id:"admin.team_channel_settings.need_groups_channel",defaultMessage:"You must add at least one group to manage this channel by sync group members."})),x.a.createElement(ve.a,{iconClassName:"fa-exclamation-".concat(e?"circle":"triangle"),textClassName:"has-".concat(e?"warning":"error"),error:a})},sr=()=>x.a.createElement(ve.a,{error:x.a.createElement(w.a,{id:"admin.team_channel_settings.need_domains",defaultMessage:"Please specify allowed email domains."})});nr.propTypes={warning:k.bool,isChannel:k.bool};class ir extends x.a.PureComponent{render(){const{total:e,users:t}=this.props;return x.a.createElement(ve.a,{iconClassName:"fa-exclamation-triangle",textClassName:"has-warning",error:x.a.createElement("span",null,x.a.createElement(w.a,{id:"admin.team_channel_settings.users_will_be_removed",defaultMessage:"{amount, number} {amount, plural, one {User} other {Users}} will be removed from this team. They are not in groups linked to this team.",values:{amount:e}}),x.a.createElement(Ki.a,{className:"btn btn-link",dialogType:ar,dialogProps:{total:e,users:t}},x.a.createElement(w.a,{id:"admin.team_channel_settings.view_removed_users",defaultMessage:"View These Users"})))})}}function rr({saveNeeded:e,onClick:t,saving:a,serverError:n,cancelLink:s}){return x.a.createElement("div",{className:"admin-console-save"},x.a.createElement(be.a,{saving:a,disabled:!e,onClick:t,savingMessage:Object(U.jb)("admin.team_channel_settings.saving","Saving Config...")}),x.a.createElement(xa,{className:"cancel-button",to:s},x.a.createElement(w.a,{id:"admin.team_channel_settings.cancel",defaultMessage:"Cancel"})),x.a.createElement("div",{className:"error-message"},n))}function or({team:e}){const t=U.M(e);return x.a.createElement(ca,{id:"team_profile",titleId:Object(M.b)("admin.team_settings.team_detail.profileTitle"),titleDefault:"Team Profile",subtitleId:Object(M.b)("admin.team_settings.team_detail.profileDescription"),subtitleDefault:"Summary of the team, including team name and description."},x.a.createElement("div",{className:"group-teams-and-channels"},x.a.createElement("div",{className:"group-teams-and-channels--body"},x.a.createElement("div",{className:"row"},x.a.createElement("div",{className:"col-sm-2 large-team-image-col"},x.a.createElement(un.a,{name:e.display_name,size:"lg",url:t})),x.a.createElement("div",{className:"col-sm-10 team-desc-col"},x.a.createElement("div",{className:"row row-bottom-padding"},x.a.createElement(P.b,{id:"admin.team_settings.team_detail.teamName",defaultMessage:"**Team Name**:"}),x.a.createElement("br",null),e.display_name),x.a.createElement("div",{className:"row"},x.a.createElement(P.b,{id:"admin.team_settings.team_detail.teamDescription",defaultMessage:"**Team Description**:"}),x.a.createElement("br",null),e.description||x.a.createElement("span",{className:"greyed-out"},U.jb("admin.team_settings.team_detail.profileNoDescription","No team description added."))))))))}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ir,"propTypes",{users:k.arrayOf(k.object).isRequired,total:k.number.isRequired}),rr.propTypes={saving:j.a.bool.isRequired,saveNeeded:j.a.bool.isRequired,onClick:j.a.func.isRequired,cancelLink:j.a.string.isRequired,serverError:j.a.node},or.propTypes={team:j.a.object.isRequired};const lr=({syncChecked:e,allAllowedChecked:t,allowedDomainsChecked:a,allowedDomains:n,onToggle:s})=>x.a.createElement(Ai,{toggled:e,last:e,onToggle:()=>s(!e,t,a,n),title:x.a.createElement(w.a,{id:"admin.team_settings.team_details.syncGroupMembers",defaultMessage:"Sync Group Members"}),subTitle:x.a.createElement(P.b,{id:"admin.team_settings.team_details.syncGroupMembersDescr",defaultMessage:"When enabled, adding and removing users from groups will add or remove them from this team. The only way of inviting members to this team is by adding the groups they belong to. [Learn More](!https://www.mattermost.com/pl/default-ldap-group-constrained-team-channel.html)"})});lr.propTypes={syncChecked:j.a.bool.isRequired,allAllowedChecked:j.a.bool.isRequired,allowedDomainsChecked:j.a.bool.isRequired,allowedDomains:j.a.string.isRequired,onToggle:j.a.func.isRequired};const cr=({syncChecked:e,allAllowedChecked:t,allowedDomainsChecked:a,allowedDomains:n,onToggle:s})=>!e&&x.a.createElement(Ai,{toggled:t,singleLine:!0,onToggle:()=>s(e,!t,a,n),title:x.a.createElement(w.a,{id:"admin.team_settings.team_details.anyoneCanJoin",defaultMessage:"Anyone can join this team"}),subTitle:x.a.createElement(w.a,{id:"admin.team_settings.team_details.anyoneCanJoinDescr",defaultMessage:"This team can be discovered allowing anyone with an account to join this team."})});cr.propTypes={syncChecked:j.a.bool.isRequired,allAllowedChecked:j.a.bool.isRequired,allowedDomainsChecked:j.a.bool.isRequired,allowedDomains:j.a.string.isRequired,onToggle:j.a.func.isRequired};const dr=({syncChecked:e,allAllowedChecked:t,allowedDomainsChecked:a,allowedDomains:n,onToggle:s})=>!e&&x.a.createElement(Ai,{toggled:a,last:!0,onToggle:()=>s(e,t,!a,n),singleLine:!0,title:x.a.createElement(w.a,{id:"admin.team_settings.team_details.specificDomains",defaultMessage:"Only specific email domains can join this team"}),subTitle:x.a.createElement(w.a,{id:"admin.team_settings.team_details.specificDomainsDescr",defaultMessage:"Users can only join the team if their email matches one of the specified domains"})},x.a.createElement("div",{className:"help-text csvDomains"},x.a.createElement(w.a,{id:"admin.team_settings.team_details.csvDomains",defaultMessage:"Comma Separated Email Domain List"})),x.a.createElement("input",{type:"text",value:n,placeholder:"mattermost.org",className:"form-control",onChange:n=>s(e,t,a,n.currentTarget.value)}));dr.propTypes={syncChecked:j.a.bool.isRequired,allAllowedChecked:j.a.bool.isRequired,allowedDomainsChecked:j.a.bool.isRequired,allowedDomains:j.a.string.isRequired,onToggle:j.a.func.isRequired};const ur=({allAllowedChecked:e,syncChecked:t,allowedDomains:a,allowedDomainsChecked:n,onToggle:s})=>x.a.createElement(ca,{id:"team_manage",titleId:Object(M.b)("admin.team_settings.team_detail.manageTitle"),titleDefault:"Team Management",subtitleId:Object(M.b)("admin.team_settings.team_detail.manageDescription"),subtitleDefault:"Choose between inviting members manually or syncing members automatically from groups."},x.a.createElement("div",{className:"group-teams-and-channels"},x.a.createElement("div",{className:"group-teams-and-channels--body"},x.a.createElement(lr,{allAllowedChecked:e,allowedDomainsChecked:n,allowedDomains:a,syncChecked:t,onToggle:s}),x.a.createElement(cr,{allAllowedChecked:e,allowedDomainsChecked:n,allowedDomains:a,syncChecked:t,onToggle:s}),x.a.createElement(dr,{allAllowedChecked:e,allowedDomainsChecked:n,allowedDomains:a,syncChecked:t,onToggle:s}))));ur.propTypes={syncChecked:j.a.bool.isRequired,allAllowedChecked:j.a.bool.isRequired,allowedDomainsChecked:j.a.bool.isRequired,onToggle:j.a.func.isRequired,allowedDomains:j.a.string.isRequired};var mr=a(1299);function hr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pr extends x.a.Component{constructor(...e){super(...e),hr(this,"removeGroup",()=>{this.props.removeGroup(this.props.group.id)}),hr(this,"setNewGroupRole",()=>{this.props.setNewGroupRole(this.props.group.id)}),hr(this,"displayCurrentRole",()=>{const{group:e,type:t}=this.props,a=x.a.createElement(w.a,{id:"admin.team_channel_settings.group_row.channelAdmin",defaultMessage:"Channel Admin"}),n=x.a.createElement(w.a,{id:"admin.team_channel_settings.group_row.teamAdmin",defaultMessage:"Team Admin"}),s=x.a.createElement(w.a,{id:"admin.team_channel_settings.group_row.member",defaultMessage:"Member"});return e.scheme_admin&&"channel"===t?a:e.scheme_admin&&"team"===t?n:s}),hr(this,"displayRoleToBe",()=>{const{group:e,type:t}=this.props;return e.scheme_admin||"channel"!==t?e.scheme_admin||"team"!==t?Object(U.jb)("admin.team_channel_settings.group_row.member","Member"):Object(U.jb)("admin.team_channel_settings.group_row.teamAdmin","Team Admin"):Object(U.jb)("admin.team_channel_settings.group_row.channelAdmin","Channel Admin")}),hr(this,"render",()=>{const{group:e}=this.props;return x.a.createElement("div",{id:"group",className:"group"},x.a.createElement("div",{id:"group-row",className:"group-row"},x.a.createElement("span",{className:"group-name row-content"},e.display_name||e.name),x.a.createElement("span",{className:"group-description row-content"},x.a.createElement(w.a,{id:"admin.team_channel_settings.group_row.members",defaultMessage:"{memberCount, number} {memberCount, plural, one {member} other {members}}",values:{memberCount:e.member_count}})),x.a.createElement("div",{className:"group-description row-content roles"},x.a.createElement(Ln.a,null,x.a.createElement("div",null,x.a.createElement("a",{"data-testid":"current-role"},x.a.createElement("span",null,this.displayCurrentRole()),x.a.createElement("span",{className:"caret"}))),x.a.createElement(Bn.a,{id:"role-to-be-menu",openLeft:!0,openUp:!1,ariaLabel:Object(U.jb)("admin.team_channel_settings.group_row.memberRole","Member Role")},x.a.createElement(Bn.a.ItemAction,{id:"role-to-be",onClick:this.setNewGroupRole,text:this.displayRoleToBe()})))),x.a.createElement("span",{id:"group-actions",className:"group-actions"},x.a.createElement("a",{href:"#",onClick:this.removeGroup},x.a.createElement(w.a,{id:"admin.team_channel_settings.group_row.remove",defaultMessage:"Remove"})))))})}}function gr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}hr(pr,"propTypes",{group:j.a.any.isRequired,removeGroup:j.a.func.isRequired,key:j.a.string,setNewGroupRole:j.a.func.isRequired,type:j.a.string.isRequired});const fr=()=>x.a.createElement("div",{className:"groups-list--header"},x.a.createElement("div",{className:"group-name group-name-adjusted"},x.a.createElement(w.a,{id:"admin.team_channel_settings.group_list.nameHeader",defaultMessage:"Name"})),x.a.createElement("div",{className:"group-content"},x.a.createElement("div",{className:"group-description group-description-adjusted"},x.a.createElement(w.a,{id:"admin.team_channel_settings.group_list.membersHeader",defaultMessage:"Member Count"})),x.a.createElement("div",{className:"group-description group-description-adjusted"},x.a.createElement(w.a,{id:"admin.team_channel_settings.group_list.rolesHeader",defaultMessage:"Roles"})),x.a.createElement("div",{className:"group-actions"})));class br extends x.a.PureComponent{constructor(...e){super(...e),gr(this,"renderRow",e=>x.a.createElement(pr,{key:e.id,group:e,removeGroup:this.props.removeGroup,setNewGroupRole:this.props.setNewGroupRole,type:this.props.type}))}render(){return x.a.createElement(Gi,Object.assign({header:x.a.createElement(fr,null),renderRow:this.renderRow},this.props))}}gr(br,"propTypes",{data:j.a.arrayOf(j.a.any),onPageChangedCallback:j.a.func,total:j.a.number.isRequired,emptyListTextId:j.a.string.isRequired,emptyListTextDefaultMessage:j.a.string.isRequired,actions:j.a.shape({getData:j.a.func.isRequired}).isRequired,removeGroup:j.a.func.isRequired,setNewGroupRole:j.a.func.isRequired,type:j.a.string.isRequired,channel:j.a.any});var vr=Object(r.connect)((function(e,{groups:t,totalGroups:a,isModeSync:n,onGroupRemoved:s,setNewGroupRole:i}){return{data:t,removeGroup:s,setNewGroupRole:i,emptyListTextId:n?Object(M.b)("admin.team_channel_settings.group_list.no-synced-groups"):Object(M.b)("admin.team_channel_settings.group_list.no-groups"),emptyListTextDefaultMessage:n?"At least one group must be specified":"No groups specified yet",total:a}}),(function(){return{actions:{getData:()=>Promise.resolve()}}}))(br);const _r=({onGroupRemoved:e,syncChecked:t,team:a,onAddCallback:n,totalGroups:s,groups:i,removedGroups:r,setNewGroupRole:o})=>x.a.createElement(ca,{id:"team_groups",titleId:t?Object(M.b)("admin.team_settings.team_detail.syncedGroupsTitle"):Object(M.b)("admin.team_settings.team_detail.groupsTitle"),titleDefault:t?"Synced Groups":"Groups",subtitleId:t?Object(M.b)("admin.team_settings.team_detail.syncedGroupsDescription"):Object(M.b)("admin.team_settings.team_detail.groupsDescription"),subtitleDefault:t?"Add and remove team members based on their group membership.":"Group members will be added to the team.",button:x.a.createElement(Ki.a,{className:"btn btn-primary",dialogType:mr.a,dialogProps:{team:a,onAddCallback:n,skipCommit:!0,excludeGroups:i,includeGroups:r}},x.a.createElement(w.a,{id:"admin.team_settings.team_details.add_group",defaultMessage:"Add Group"}))},x.a.createElement(vr,{team:a,isModeSync:t,groups:i,totalGroups:s,onGroupRemoved:e,setNewGroupRole:o,type:"team"}));function yr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Er(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}_r.propTypes={syncChecked:j.a.bool.isRequired,team:j.a.object.isRequired,totalGroups:j.a.number.isRequired,groups:j.a.arrayOf(j.a.object).isRequired,removedGroups:j.a.arrayOf(j.a.object).isRequired,onAddCallback:j.a.func.isRequired,onGroupRemoved:j.a.func.isRequired,setNewGroupRole:j.a.func.isRequired};class Sr extends x.a.Component{constructor(e){super(e),Er(this,"setNewGroupRole",e=>{const t=Object(S.cloneDeep)(this.state.groups).map(t=>(t.id===e&&(t.scheme_admin=!t.scheme_admin),t));this.processGroupsChange(t)}),Er(this,"handleSubmit",async()=>{this.setState({showRemoveConfirmation:!1,saving:!0});const{groups:e,allAllowedChecked:t,allowedDomainsChecked:a,allowedDomains:n,syncChecked:s}=this.state;let i=null,r=!1;const{team:o,groups:l,teamID:c,actions:d}=this.props;if(a&&0===n.trim().length)r=!0,i=x.a.createElement(sr,null);else if(0===this.state.groups.length&&s)i=x.a.createElement(nr,null),r=!0;else{const r=d.patchTeam(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(a),!0).forEach((function(t){Er(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,{group_constrained:s,allowed_domains:a?n:"",allow_open_invite:t})),u=e.filter(e=>l.some(t=>t.id===e.id&&t.scheme_admin!==e.scheme_admin)).map(e=>d.patchGroupSyncable(e.id,c,v.Groups.SYNCABLE_TYPE_TEAM,{scheme_admin:e.scheme_admin})),m=l.filter(t=>!e.some(e=>e.id===t.id)).map(e=>d.unlinkGroupSyncable(e.id,c,v.Groups.SYNCABLE_TYPE_TEAM)),h=e.filter(e=>!l.some(t=>t.id===e.id)).map(e=>d.linkGroupSyncable(e.id,c,v.Groups.SYNCABLE_TYPE_TEAM,{auto_add:!0,scheme_admin:e.scheme_admin})),p=(await Promise.all([r,...u,...m,...h])).find(e=>e.error);p?i=x.a.createElement(ve.a,{error:p.error.message}):await d.getGroups(c)}this.setState({serverError:i,saving:!1,saveNeeded:r}),d.setNavigationBlocked(r)}),Er(this,"setToggles",(e,t,a,n)=>{this.setState({saveNeeded:!0,syncChecked:e,allAllowedChecked:!e&&t,allowedDomainsChecked:!e&&a,allowedDomains:n},()=>this.processGroupsChange(this.state.groups)),this.props.actions.setNavigationBlocked(!0)}),Er(this,"handleGroupRemoved",e=>{const t=this.state.groups.filter(t=>t.id!==e);this.setState({totalGroups:this.state.totalGroups-1}),this.processGroupsChange(t)}),Er(this,"handleGroupChange",e=>{const t=[...this.state.groups,...e.map(e=>this.props.allGroups[e])];this.setState({totalGroups:this.state.totalGroups+e.length}),this.processGroupsChange(t)}),Er(this,"hideRemoveUsersModal",()=>{this.setState({showRemoveConfirmation:!1})}),Er(this,"showRemoveUsersModal",()=>{this.state.usersToRemove>0?this.setState({showRemoveConfirmation:!0}):this.handleSubmit()}),Er(this,"render",()=>{const{team:e}=this.props,{totalGroups:t,saving:a,saveNeeded:n,serverError:s,groups:i,allAllowedChecked:r,allowedDomainsChecked:o,allowedDomains:l,syncChecked:c,showRemoveConfirmation:d,usersToRemove:u}=this.state,m=this.props.groups.filter(e=>!i.find(t=>t.id===e.id));return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header with-back"},x.a.createElement("div",null,x.a.createElement(xa,{to:"/admin_console/user_management/teams",className:"fa fa-angle-left back"}),x.a.createElement(w.a,{id:"admin.team_settings.team_detail.group_configuration",defaultMessage:"Team Configuration"}))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement(Xi,{amount:u,inChannel:!1,show:d,onCancel:this.hideRemoveUsersModal,onConfirm:this.handleSubmit}),x.a.createElement(or,{team:e}),x.a.createElement(ur,{allAllowedChecked:r,allowedDomainsChecked:o,allowedDomains:l,syncChecked:c,onToggle:this.setToggles}),x.a.createElement(_r,{syncChecked:c,team:e,groups:i,removedGroups:m,totalGroups:t,onAddCallback:this.handleGroupChange,onGroupRemoved:this.handleGroupRemoved,setNewGroupRole:this.setNewGroupRole}))),x.a.createElement(rr,{saving:a,cancelLink:"/admin_console/user_management/teams",saveNeeded:n,onClick:this.showRemoveUsersModal,serverError:s}))});const t=e.team;this.state={groups:e.groups,syncChecked:Boolean(t.group_constrained),allAllowedChecked:t.allow_open_invite,allowedDomainsChecked:Boolean(t.allowed_domains&&""!==t.allowed_domains),allowedDomains:t.allowed_domains||"",saving:!1,showRemoveConfirmation:!1,usersToRemove:0,totalGroups:e.totalGroups,saveNeeded:!1,serverError:null}}componentDidUpdate(e){const{totalGroups:t,team:a}=this.props;e.team.id===a.id&&t===e.totalGroups||this.setState({totalGroups:t,syncChecked:Boolean(a.group_constrained),allAllowedChecked:a.allow_open_invite,allowedDomainsChecked:Boolean(a.allowed_domains&&""!==a.allowed_domains),allowedDomains:a.allowed_domains||""})}componentDidMount(){const{teamID:e,actions:t}=this.props;t.getTeam(e).then(()=>t.getGroups(e)).then(()=>this.setState({groups:this.props.groups}))}async processGroupsChange(e){const{teamID:t,actions:a}=this.props;a.setNavigationBlocked(!0);let n=null,s=0;if(this.state.syncChecked)try{if(0===e.length)n=x.a.createElement(nr,{warning:!0});else{const i=await a.membersMinusGroupMembers(t,e.map(e=>e.id));s=i.data.total_count,s>0&&(n=x.a.createElement(ir,{total:s,users:i.data.users}))}}catch(e){n=e}this.setState({groups:e,usersToRemove:s,saveNeeded:!0,serverError:n})}}Er(Sr,"propTypes",{teamID:j.a.string.isRequired,team:j.a.object.isRequired,totalGroups:j.a.number.isRequired,groups:j.a.arrayOf(j.a.object),allGroups:j.a.object.isRequired,actions:j.a.shape({setNavigationBlocked:j.a.func.isRequired,getTeam:j.a.func.isRequired,linkGroupSyncable:j.a.func.isRequired,unlinkGroupSyncable:j.a.func.isRequired,membersMinusGroupMembers:j.a.func.isRequired,getGroups:j.a.func.isRequired,patchTeam:j.a.func.isRequired,patchGroupSyncable:j.a.func.isRequired}).isRequired}),Er(Sr,"defaultProps",{team:{display_name:"",id:""}});var Tr=Object(r.connect)((function(e,t){const a=t.match.params.team_id,n=Object(b.getTeam)(e,a),s=Object(hi.getGroupsAssociatedToTeam)(e,a),i=Object(hi.getAllGroups)(e,a);return{team:n,groups:s,totalGroups:s.length,allGroups:i,teamID:a}}),(function(e){return{actions:Object(o.bindActionCreators)({getTeam:g.getTeam,getGroups:mi.getGroupsAssociatedToTeam,patchTeam:g.patchTeam,linkGroupSyncable:mi.linkGroupSyncable,unlinkGroupSyncable:mi.unlinkGroupSyncable,membersMinusGroupMembers:g.membersMinusGroupMembers,setNavigationBlocked:_.E,patchGroupSyncable:mi.patchGroupSyncable},e)}}))(Sr),xr=a(12);function wr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Or extends x.a.Component{constructor(...e){super(...e),wr(this,"handleRowClick",()=>{const{channel:e,onRowClick:t}=this.props;t(e.id)})}render(){const{channel:e}=this.props;return x.a.createElement("div",{className:"group",onClick:this.handleRowClick},x.a.createElement("div",{className:"group-row"},x.a.createElement("span",{className:"group-name overflow--ellipsis row-content","data-testid":"channel-display-name"},e.type===O.j.PRIVATE_CHANNEL?x.a.createElement(gi.a,{className:"channel-icon channel-icon__lock"}):x.a.createElement(pi.a,{className:"channel-icon channel-icon__globe"}),e.display_name),x.a.createElement("span",{className:"group-description row-content"},e.team_display_name),x.a.createElement("span",{className:"group-description adjusted row-content"},x.a.createElement(w.a,{id:"admin.channel_settings.channel_row.managementMethod.".concat(e.group_constrained?"group":"manual"),defaultMessage:e.group_constrained?"Group Sync":"Manual Invites"})),x.a.createElement("span",{className:"group-actions","data-testid":"".concat(e.display_name,"edit")},x.a.createElement(de.a,{to:"/admin_console/user_management/channels/".concat(e.id)},x.a.createElement(w.a,{id:"admin.channel_settings.channel_row.configure",defaultMessage:"Edit"})))))}}function Cr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Mr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}wr(Or,"propTypes",{channel:j.a.any.isRequired,onRowClick:j.a.func.isRequired});class kr extends x.a.PureComponent{constructor(e){super(e),Mr(this,"searchBar",()=>x.a.createElement("div",{className:"groups-list--global-actions"},x.a.createElement("div",{className:"group-list-search"},x.a.createElement("input",{type:"text",placeholder:U.jb("search_bar.search","Search"),onKeyUp:this.handleChannelSearchKeyUp,onChange:this.searchBarChangeHandler,value:this.state.searchString,"data-testid":"search-input"}),x.a.createElement(ni.a,{id:"searchIcon",className:"search__icon","aria-hidden":"true"}),x.a.createElement("i",{className:"fa fa-times-circle group-filter-action "+(this.state.searchString.length?"":"hidden"),onClick:this.resetSearch,"data-testid":"clear-search"})))),Mr(this,"searchBarChangeHandler",e=>{this.setState({searchString:e.target.value})}),Mr(this,"handleChannelSearchKeyUp",async e=>{const{key:t}=e,{searchString:a}=this.state;if(t===O.j.KeyCodes.ENTER[0]&&a.length>1){const e=await this.props.actions.searchAllChannels(a,"",!1,0,10);"data"in e&&this.setState({searchMode:!0,channels:e.data.channels,searchTotalCount:e.data.total_count,pageResetKey:Date.now()})}0===a.length&&this.resetSearch()}),Mr(this,"getDataBySearch",async(e,t,a,n)=>{const s=await this.props.actions.searchAllChannels(this.state.searchString,"",!1,e,t),i=new Array(e*t);return"data"in s?i.concat(s.data.channels):[]}),Mr(this,"resetSearch",()=>{this.setState({searchString:"",channels:[],searchMode:!1,searchTotalCount:0,pageResetKey:Date.now()})}),Mr(this,"onPageChangedCallback",(e,t)=>{this.state.searchMode&&this.setState({channels:t})}),Mr(this,"renderRow",e=>x.a.createElement(Or,{key:e.id,channel:e,onRowClick:this.onChannelClick})),Mr(this,"onChannelClick",e=>{ya.a.push("/admin_console/user_management/channels/".concat(e))}),this.state={searchString:"",channels:[],searchTotalCount:0,pageResetKey:0,searchMode:!1}}header(){return x.a.createElement(x.a.Fragment,null,this.searchBar(),x.a.createElement("div",{className:"groups-list--header"},x.a.createElement("div",{className:"group-name adjusted"},x.a.createElement(w.a,{id:"admin.channel_settings.channel_list.nameHeader",defaultMessage:"Name"})),x.a.createElement("div",{className:"group-content"},x.a.createElement("div",{className:"group-description"},x.a.createElement(w.a,{id:"admin.channel_settings.channel_list.teamHeader",defaultMessage:"Team"})),x.a.createElement("div",{className:"group-description adjusted"},x.a.createElement(w.a,{id:"admin.channel_settings.channel_list.managementHeader",defaultMessage:"Management"})),x.a.createElement("div",{className:"group-actions"}))))}render(){const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(a),!0).forEach((function(t){Mr(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props);return this.state.searchMode&&(e.actions.getData=this.getDataBySearch),x.a.createElement(Gi,Object.assign({header:this.header(),renderRow:this.renderRow},e,{key:this.state.pageResetKey,onPageChangedCallback:this.onPageChangedCallback,data:this.state.searchMode?this.state.channels:this.props.data,total:this.state.searchMode?this.state.searchTotalCount:this.props.total}))}}Mr(kr,"propTypes",{actions:j.a.shape({searchAllChannels:j.a.func.isRequired,getData:j.a.func.isRequired}).isRequired,data:j.a.arrayOf(j.a.shape({id:j.a.string.isRequired,display_name:j.a.string.isRequired})),total:j.a.number,removeGroup:j.a.func,onPageChangedCallback:j.a.func,emptyListTextId:j.a.string,emptyListTextDefaultMessage:j.a.string});const jr=(e,t)=>e.display_name.localeCompare(t.display_name),Pr=Object(E.createSelector)(xr.getAllChannels,e=>Object.values(e).filter(e=>(e.type===O.j.OPEN_CHANNEL||e.type===O.j.PRIVATE_CHANNEL)&&0===e.delete_at).sort(jr));var Ar=Object(r.connect)((function(e){return{data:Pr(e),total:e.entities.channels.totalCount,emptyListTextId:Object(M.b)("admin.channel_settings.channel_list.no_channels_found"),emptyListTextDefaultMessage:"No channels found"}}),(function(e){return{actions:Object(o.bindActionCreators)({getData:p.getAllChannelsWithCount,searchAllChannels:p.searchAllChannels},e)}}))(kr);function Rr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(a),!0).forEach((function(t){Dr(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Dr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ir extends x.a.Component{constructor(e){super(e),Dr(this,"onPageChangedCallback",({startCount:e,endCount:t,total:a})=>{this.setState({startCount:e,endCount:t,total:a})}),Dr(this,"render",()=>x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header"},x.a.createElement(w.a,{id:"admin.channel_settings.groupsPageTitle",defaultMessage:"{siteName} Channels",values:{siteName:this.props.siteName}})),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement(ca,{id:"channels",titleId:Object(M.b)("admin.channel_settings.title"),titleDefault:"Channels",subtitleId:Object(M.b)("admin.channel_settings.description"),subtitleDefault:"Manage channel settings.",subtitleValues:Nr({},this.state)},x.a.createElement(Ar,{onPageChangedCallback:this.onPageChangedCallback})))))),this.state={startCount:0,endCount:1,total:0}}}Dr(Ir,"propTypes",{siteName:j.a.string.isRequired});var Lr=Object(r.connect)((function(e){return{siteName:Object(m.getConfig)(e).SiteName}}))(Ir);class Br extends x.a.PureComponent{render(){const{displayName:e,toPublic:t}=this.props,a=t?Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPublicMessage"):Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPrivateMessage"),n=t?Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPublicTitle"):Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPrivateTitle"),s=t?Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPublicConfirm"):Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPrivateConfirm"),i=x.a.createElement(w.a,{id:n,defaultMessage:t?"Convert {displayName} to a public channel?":"Convert {displayName} to a private channel?",values:{displayName:e}}),r=x.a.createElement(P.b,{id:a,defaultMessage:t?"When you convert **{displayName}** to a public channel, history and membership are preserved. Public channels are discoverable and can by joined by users on the system without invitation.  \n \nAre you sure you want to convert **{displayName}** to a public channel?":"When you convert **{displayName}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.  \n \nAre you sure you want to convert **{displayName}** to a private channel?",values:{displayName:e}}),o=x.a.createElement(w.a,{id:s,defaultMessage:t?"Yes, convert to public channel":"Yes, convert to private channel"}),l=x.a.createElement(w.a,{id:"admin.team_channel_settings.convertConfirmModal.cancel",defaultMessage:"No, cancel"}),{show:c,onConfirm:d,onCancel:u}=this.props;return x.a.createElement(ge.a,{show:c,title:i,message:r,modalClass:"discard-changes-modal",confirmButtonClass:"btn btn-primary",confirmButtonText:o,cancelButtonClass:"bnt bnt-link",cancelButtonText:l,onConfirm:d,onCancel:u})}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Br,"propTypes",{show:j.a.bool.isRequired,onConfirm:j.a.func.isRequired,onCancel:j.a.func.isRequired,displayName:j.a.string.isRequired,toPublic:j.a.bool.isRequired});class Ur extends x.a.PureComponent{render(){const{show:e,onConfirm:t,onCancel:a,displayName:n,toPublic:s,removeAmount:i}=this.props,r=s?Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPublicMessage"):Object(M.b)("admin.team_channel_settings.convertConfirmModal.toPrivateMessage"),o=s?Object(M.b)("admin.team_channel_settings.convertAndRemoveConfirmModal.toPublicTitle"):Object(M.b)("admin.team_channel_settings.convertAndRemoveConfirmModal.toPrivateTitle"),l=s?Object(M.b)("admin.team_channel_settings.convertAndRemoveConfirmModal.toPublicConfirm"):Object(M.b)("admin.team_channel_settings.convertAndRemoveConfirmModal.toPrivateConfirm"),c=x.a.createElement(w.a,{id:o,defaultMessage:s?"Convert channel to public and remove {amount, number} {amount, plural, one {user} other {users}}?":"Convert channel to private and remove {amount, number} {amount, plural, one {user} other {users}}?",values:{displayName:n,amount:i}}),d=x.a.createElement("div",null,x.a.createElement("p",null,x.a.createElement(P.b,{id:r,defaultMessage:s?"When you convert **{displayName}** to a public channel, history and membership are preserved. Public channels are discoverable and can by joined by users on the system without invitation.  \n \nAre you sure you want to convert **{displayName}** to a public channel?":"When you convert **{displayName}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.  \n \nAre you sure you want to convert **{displayName}** to a private channel?",values:{displayName:n}})),x.a.createElement("p",null,x.a.createElement(w.a,{id:"admin.team_channel_settings.removeConfirmModal.messageChannel",defaultMessage:"{amount, number} {amount, plural, one {user} other {users}} will be removed. They are not in groups linked to this channel. Are you sure you wish to remove these users?",values:{amount:i}}))),u=x.a.createElement(w.a,{id:l,defaultMessage:s?"Yes, convert channel to public and remove {amount, number} {amount, plural, one {user} other {users}}":"Yes, convert channel to private and remove {amount, number} {amount, plural, one {user} other {users}}",values:{amount:i}}),m=x.a.createElement(w.a,{id:"admin.team_channel_settings.convertAndRemoveConfirmModal.cancel",defaultMessage:"No, cancel"});return x.a.createElement(ge.a,{show:e,title:c,message:d,modalClass:"discard-changes-modal",confirmButtonClass:"btn btn-primary",confirmButtonText:u,cancelButtonClass:"bnt bnt-link",cancelButtonText:m,onConfirm:t,onCancel:a})}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ur,"propTypes",{show:j.a.bool.isRequired,onConfirm:j.a.func.isRequired,onCancel:j.a.func.isRequired,displayName:j.a.string.isRequired,toPublic:j.a.bool.isRequired,removeAmount:j.a.number.isRequired});const Fr=e=>{const{isPublic:t,isSynced:a,isDefault:n,onToggle:s}=e;return x.a.createElement(Ai,{disabled:n,toggled:a,last:a,onToggle:()=>{n||s(!a,t)},title:x.a.createElement(w.a,{id:"admin.channel_settings.channel_details.syncGroupMembers",defaultMessage:"Sync Group Members"}),subTitle:x.a.createElement(P.b,{id:"admin.channel_settings.channel_details.syncGroupMembersDescr",defaultMessage:"When enabled, adding and removing users from groups will add or remove them from this channel. The only way of inviting members to this channel is by adding the groups they belong to. [Learn More](!https://www.mattermost.com/pl/default-ldap-group-constrained-team-channel.html)"})})};Fr.propTypes={isPublic:j.a.bool.isRequired,isSynced:j.a.bool.isRequired,isDefault:j.a.bool.isRequired,onToggle:j.a.func.isRequired};const qr=e=>{const{isPublic:t,isSynced:a,isDefault:n,onToggle:s}=e;return a?null:x.a.createElement(Ai,{id:"allow-all-toggle",disabled:n,toggled:t,last:!0,onToggle:()=>{n||s(a,!t)},title:x.a.createElement(w.a,{id:"admin.channel_settings.channel_details.isPublic",defaultMessage:"Public channel or private channel"}),subTitle:n?x.a.createElement(w.a,{id:"admin.channel_settings.channel_details.isDefaultDescr",defaultMessage:"This default channel cannot be converted into a private channel."}):x.a.createElement(w.a,{id:"admin.channel_settings.channel_details.isPublicDescr",defaultMessage:"If `public` the channel is discoverable and any user can join, or if `private` invitations are required. Toggle to convert public channels to private. When Group Sync is enabled, private channels cannot be converted to public."}),onText:x.a.createElement(w.a,{id:"channel_toggle_button.public",defaultMessage:"Public"}),offText:x.a.createElement(w.a,{id:"channel_toggle_button.private",defaultMessage:"Private"})})};qr.propTypes={isPublic:j.a.bool.isRequired,isSynced:j.a.bool.isRequired,isDefault:j.a.bool.isRequired,onToggle:j.a.func.isRequired};const Gr=e=>{const{isPublic:t,isSynced:a,isDefault:n,onToggle:s}=e;return x.a.createElement(ca,{id:"channel_manage",titleId:Object(M.b)("admin.channel_settings.channel_detail.manageTitle"),titleDefault:"Channel Management",subtitleId:Object(M.b)("admin.channel_settings.channel_detail.manageDescription"),subtitleDefault:"Choose between inviting members manually or syncing members automatically from groups."},x.a.createElement("div",{className:"group-teams-and-channels"},x.a.createElement("div",{className:"group-teams-and-channels--body"},x.a.createElement(Fr,{isPublic:t,isSynced:a,isDefault:n,onToggle:s}),x.a.createElement(qr,{isPublic:t,isSynced:a,isDefault:n,onToggle:s}))))};Gr.propTypes={isPublic:j.a.bool.isRequired,isSynced:j.a.bool.isRequired,isDefault:j.a.bool.isRequired,onToggle:j.a.func.isRequired};var Hr=a(1300);const Wr=e=>{const{onGroupRemoved:t,onAddCallback:a,totalGroups:n,groups:s,removedGroups:i,channel:r,synced:o,setNewGroupRole:l}=e;return x.a.createElement(ca,{id:"channel_groups",titleId:o?Object(M.b)("admin.channel_settings.channel_detail.syncedGroupsTitle"):Object(M.b)("admin.channel_settings.channel_detail.groupsTitle"),titleDefault:o?"Synced Groups":"Groups",subtitleId:o?Object(M.b)("admin.channel_settings.channel_detail.syncedGroupsDescription"):Object(M.b)("admin.channel_settings.channel_detail.groupsDescription"),subtitleDefault:o?"Add and remove channel members based on their group membership.":"Select groups to be added to this channel.",button:x.a.createElement(Ki.a,{className:"btn btn-primary",dialogType:Hr.a,dialogProps:{channel:r,onAddCallback:a,skipCommit:!0,includeGroups:i,excludeGroups:s}},x.a.createElement(w.a,{id:"admin.channel_settings.channel_details.add_group",defaultMessage:"Add Group"}))},r.id&&x.a.createElement(vr,{channel:r,groups:s,totalGroups:n,onGroupRemoved:t,setNewGroupRole:l,isModeSync:o,type:"channel"}))};Wr.propTypes={synced:j.a.bool.isRequired,channel:j.a.any.isRequired,onAddCallback:j.a.func.isRequired,totalGroups:j.a.number.isRequired,groups:j.a.arrayOf(j.a.any).isRequired,removedGroups:j.a.arrayOf(j.a.object).isRequired,onGroupRemoved:j.a.func.isRequired,setNewGroupRole:j.a.func.isRequired};const zr=e=>{const{team:t,channel:a}=e;return x.a.createElement(ca,{id:"channel_profile",titleId:Object(M.b)("admin.channel_settings.channel_detail.profileTitle"),titleDefault:"Channel Profile",subtitleId:Object(M.b)("admin.channel_settings.channel_detail.profileDescription"),subtitleDefault:"Summary of the channel, including the channel name."},x.a.createElement("div",{className:"group-teams-and-channels"},x.a.createElement("div",{className:"group-teams-and-channels--body"},x.a.createElement(P.b,{id:"admin.channel_settings.channel_detail.channelName",defaultMessage:"**Name**"}),x.a.createElement("br",null),a.display_name,x.a.createElement("br",null),x.a.createElement(P.b,{id:"admin.channel_settings.channel_detail.channelTeam",defaultMessage:"**Team**"}),x.a.createElement("br",null),t.display_name)))};zr.propTypes={channel:j.a.any.isRequired,team:j.a.any.isRequired};var Yr=a(1418);function Vr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Jr=/\./g,Xr=Object(Yr.defineMessages)({[v.Permissions.CHANNEL_MODERATED_PERMISSIONS.CREATE_POST]:{title:{id:Object(M.b)("admin.channel_settings.channel_moderation.createPosts"),defaultMessage:"Create Posts"},description:{id:Object(M.b)("admin.channel_settings.channel_moderation.createPostsDesc"),defaultMessage:"The ability for members and guests to create posts in the channel."},descriptionMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.createPostsDescMembers"),defaultMessage:"The ability for members to create posts in the channel."},disabledGuests:{id:Object(M.b)("admin.channel_settings.channel_moderation.createPosts.disabledGuest"),defaultMessage:"Create posts for guests are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.createPosts.disabledMember"),defaultMessage:"Create posts for members are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledBoth:{id:Object(M.b)("admin.channel_settings.channel_moderation.createPosts.disabledBoth"),defaultMessage:"Create posts for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link})."}},[v.Permissions.CHANNEL_MODERATED_PERMISSIONS.CREATE_REACTIONS]:{title:{id:Object(M.b)("admin.channel_settings.channel_moderation.postReactions"),defaultMessage:"Post Reactions"},description:{id:Object(M.b)("admin.channel_settings.channel_moderation.postReactionsDesc"),defaultMessage:"The ability for members and guests to post reactions."},descriptionMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.postReactionsDescMembers"),defaultMessage:"The ability for members to post reactions."},disabledGuests:{id:Object(M.b)("admin.channel_settings.channel_moderation.postReactions.disabledGuest"),defaultMessage:"Post reactions for guests are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.postReactions.disabledMember"),defaultMessage:"Post reactions for members are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledBoth:{id:Object(M.b)("admin.channel_settings.channel_moderation.postReactions.disabledBoth"),defaultMessage:"Post reactions for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link})."}},[v.Permissions.CHANNEL_MODERATED_PERMISSIONS.MANAGE_MEMBERS]:{title:{id:Object(M.b)("admin.channel_settings.channel_moderation.manageMembers"),defaultMessage:"Manage Members"},description:{id:Object(M.b)("admin.channel_settings.channel_moderation.manageMembersDesc"),defaultMessage:"The ability for members to add and remove people."},disabledGuests:{id:Object(M.b)("admin.channel_settings.channel_moderation.manageMembers.disabledGuest"),defaultMessage:"Manage members for guests are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.manageMembers.disabledMember"),defaultMessage:"Manage members for members are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledBoth:{id:Object(M.b)("admin.channel_settings.channel_moderation.manageMembers.disabledBoth"),defaultMessage:"Manage members for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link})."}},[v.Permissions.CHANNEL_MODERATED_PERMISSIONS.USE_CHANNEL_MENTIONS]:{title:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions"),defaultMessage:"Channel Mentions"},description:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentionsDesc"),defaultMessage:"The ability for members and guests to use @all, @here and @channel."},descriptionMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentionsDescMembers"),defaultMessage:"The ability for members to use @all, @here and @channel."},disabledGuests:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions.disabledGuest"),defaultMessage:"Channel mentions for guests are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions.disabledMember"),defaultMessage:"Channel mentions for members are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledBoth:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions.disabledBoth"),defaultMessage:"Channel mentions for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link})."},disabledGuestsDueToCreatePosts:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions.disabledGuestsDueToCreatePosts"),defaultMessage:"Guests can not use channel mentions without the ability to create posts."},disabledMembersDueToCreatePosts:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions.disabledMemberDueToCreatePosts"),defaultMessage:"Members can not use channel mentions without the ability to create posts."},disabledBothDueToCreatePosts:{id:Object(M.b)("admin.channel_settings.channel_moderation.channelMentions.disabledBothDueToCreatePosts"),defaultMessage:"Guests and members can not use channel mentions without the ability to create posts."}},title:{id:Object(M.b)("admin.channel_settings.channel_moderation.title"),defaultMessage:"Channel Moderation (Beta)"},subtitle:{id:Object(M.b)("admin.channel_settings.channel_moderation.subtitle"),defaultMessage:"Manage the actions available to channel members and guests."},subtitleMembers:{id:Object(M.b)("admin.channel_settings.channel_moderation.subtitleMembers"),defaultMessage:"Manage the actions available to channel members."},permissions:{id:Object(M.b)("admin.channel_settings.channel_moderation.permissions"),defaultMessage:"Permissions"},guests:{id:Object(M.b)("admin.channel_settings.channel_moderation.guests"),defaultMessage:"Guests"},members:{id:Object(M.b)("admin.channel_settings.channel_moderation.members"),defaultMessage:"Members"}}),Kr=e=>{let t=Xr[e.name].description.id,a=Xr[e.name].description.defaultMessage;return!e.guestAccountsEnabled&&Xr[e.name].descriptionMembers&&(t=Xr[e.name].descriptionMembers.id,a=Xr[e.name].descriptionMembers.defaultMessage),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement("label",{"data-testid":Xr[e.name].title.id.replace(Jr,"-")},x.a.createElement(w.a,{id:Xr[e.name].title.id,defaultMessage:Xr[e.name].title.defaultMessage})),x.a.createElement("div",{"data-testid":Xr[e.name].description.id.replace(Jr,"-")},x.a.createElement(w.a,{id:t,defaultMessage:a})),e.errorMessages),e.guestAccountsEnabled&&x.a.createElement("td",null,!Object(S.isNil)(e.guests)&&x.a.createElement("button",{"data-testid":"".concat(e.name,"-").concat(v.Roles.GUESTS),className:me()("checkbox",{checked:e.guests&&!e.guestsDisabled,disabled:e.guestsDisabled}),onClick:()=>e.onClick(e.name,v.Roles.GUESTS),disabled:e.guestsDisabled},e.guests&&!e.guestsDisabled&&x.a.createElement(ja.a,null))),x.a.createElement("td",null,!Object(S.isNil)(e.members)&&x.a.createElement("button",{"data-testid":"".concat(e.name,"-").concat(v.Roles.MEMBERS),className:me()("checkbox",{checked:e.members&&!e.membersDisabled,disabled:e.membersDisabled}),onClick:()=>e.onClick(e.name,v.Roles.MEMBERS),disabled:e.membersDisabled},e.members&&!e.membersDisabled&&x.a.createElement(ja.a,null))))};Kr.propTypes={name:j.a.string.isRequired,guests:j.a.bool,members:j.a.bool.isRequired,guestsDisabled:j.a.bool,membersDisabled:j.a.bool.isRequired,onClick:j.a.func.isRequired,errorMessages:j.a.any,guestAccountsEnabled:j.a.bool.isRequired};class Qr extends x.a.Component{constructor(...e){super(...e),Vr(this,"errorMessagesToDisplay",e=>{var t,a;const n=[],s=!Object(S.isNil)(null===(t=e.roles.guests)||void 0===t?void 0:t.enabled)&&!(null===(a=e.roles.guests)||void 0===a?void 0:a.enabled)&&this.props.guestAccountsEnabled,i=!e.roles.members.enabled;let r,o="";if(e.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.USE_CHANNEL_MENTIONS){const t=this.props.channelPermissions&&this.props.channelPermissions.find(e=>e.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.CREATE_POST);if(!t.roles.guests.value&&this.props.guestAccountsEnabled&&!t.roles.members.value)return n.push(x.a.createElement("div",{"data-testid":Xr[e.name].disabledBothDueToCreatePosts.id.replace(Jr,"-"),key:Xr[e.name].disabledBothDueToCreatePosts.id},x.a.createElement(w.a,{id:Xr[e.name].disabledBothDueToCreatePosts.id,defaultMessage:Xr[e.name].disabledBothDueToCreatePosts.defaultMessage}))),n;!t.roles.guests.value&&this.props.guestAccountsEnabled?o="disabledGuestsDueToCreatePosts":t.roles.members.value||(o="disabledMembersDueToCreatePosts"),""!==o&&n.push(x.a.createElement("div",{"data-testid":Xr[e.name][o].id.replace(Jr,"-"),key:Xr[e.name][o].id},x.a.createElement(w.a,{id:Xr[e.name][o].id,defaultMessage:Xr[e.name][o].defaultMessage})))}if(s&&i&&n.length<=0?r="disabledBoth":s&&"disabledGuestsDueToCreatePosts"!==o?r="disabledGuests":i&&"disabledMembersDueToCreatePosts"!==o&&(r="disabledMembers"),r){let t="System Scheme",a="system_scheme";this.props.teamSchemeID&&(t=this.props.teamSchemeDisplayName+" Team Scheme",a="team_override_scheme/".concat(this.props.teamSchemeID)),n.push(x.a.createElement("div",{"data-testid":Xr[e.name][r].id.replace(Jr,"-"),key:Xr[e.name][r].id},x.a.createElement(P.b,{id:Xr[e.name][r].id,defaultMessage:Xr[e.name][r].defaultMessage,values:{scheme_name:t,scheme_link:a}})))}return n}),Vr(this,"render",()=>{const{channelPermissions:e,guestAccountsEnabled:t,onChannelPermissionsChanged:a}=this.props;return x.a.createElement(ca,{id:"channel_moderation",titleId:Xr.title.id,titleDefault:Xr.title.defaultMessage,subtitleId:t?Xr.subtitle.id:Xr.subtitleMembers.id,subtitleDefault:t?Xr.subtitle.defaultMessage:Xr.subtitleMembers.defaultMessage},x.a.createElement("div",{className:"channel-moderation"},x.a.createElement("div",{className:"channel-moderation--body"},x.a.createElement("table",{id:"channel_moderation_table",className:"channel-moderation--table"},x.a.createElement("thead",null,x.a.createElement("tr",null,x.a.createElement("th",null,x.a.createElement(w.a,{id:Xr.permissions.id,defaultMessage:Xr.permissions.defaultMessage})),t&&x.a.createElement("th",null,x.a.createElement(w.a,{id:Xr.guests.id,defaultMessage:Xr.guests.defaultMessage})),x.a.createElement("th",null,x.a.createElement(w.a,{id:Xr.members.id,defaultMessage:Xr.members.defaultMessage})))),x.a.createElement("tbody",null,null==e?void 0:e.map(e=>{var n,s;return x.a.createElement(Kr,{key:e.name,name:e.name,guests:null===(n=e.roles.guests)||void 0===n?void 0:n.value,guestsDisabled:!(null===(s=e.roles.guests)||void 0===s?void 0:s.enabled),members:e.roles.members.value,membersDisabled:!e.roles.members.enabled,onClick:a,errorMessages:this.errorMessagesToDisplay(e),guestAccountsEnabled:t})}))))))})}}function $r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Zr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(a),!0).forEach((function(t){eo(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function eo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Vr(Qr,"propTypes",{channelPermissions:j.a.any,onChannelPermissionsChanged:j.a.func.isRequired,teamSchemeID:j.a.string,teamSchemeDisplayName:j.a.string,guestAccountsEnabled:j.a.bool.isRequired});class to extends x.a.Component{constructor(e){super(e),eo(this,"setToggles",(e,t)=>{const{channel:a}=this.props,n=a.type===O.Q.OPEN_CHANNEL;this.setState({saveNeeded:!0,isSynced:e,isPublic:t,isPrivacyChanging:t!==n},()=>this.processGroupsChange(this.state.groups)),this.props.actions.setNavigationBlocked(!0)}),eo(this,"handleGroupRemoved",e=>{const t=this.state.groups.filter(t=>t.id!==e);this.setState({totalGroups:this.state.totalGroups-1}),this.processGroupsChange(t)}),eo(this,"setNewGroupRole",e=>{const t=Object(S.cloneDeep)(this.state.groups).map(t=>(t.id===e&&(t.scheme_admin=!t.scheme_admin),t));this.processGroupsChange(t)}),eo(this,"channelPermissionsChanged",(e,t)=>{const a=this.state.channelPermissions.findIndex(t=>t.name===e),n=!this.state.channelPermissions[a].roles[t].value;let s=[...this.state.channelPermissions];if(e===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.CREATE_POST){var i;const e=(null===(i=this.props.channelPermissions.find(e=>e.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.USE_CHANNEL_MENTIONS))||void 0===i?void 0:i.roles)[t];s=s.map(a=>a.name!==v.Permissions.CHANNEL_MODERATED_PERMISSIONS.USE_CHANNEL_MENTIONS||n?a.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.USE_CHANNEL_MENTIONS?{name:a.name,roles:Zr({},a.roles,{[t]:{value:null==e?void 0:e.value,enabled:null==e?void 0:e.enabled}})}:a:{name:a.name,roles:Zr({},a.roles,{[t]:{value:!1,enabled:!1}})})}s[a]=Zr({},s[a],{roles:Zr({},s[a].roles,{[t]:Zr({},s[a].roles[t],{value:n})})}),this.setState({channelPermissions:s,saveNeeded:!0}),this.props.actions.setNavigationBlocked(!0)}),eo(this,"handleGroupChange",e=>{const t=[...this.state.groups,...e.map(e=>this.props.allGroups[e])];this.setState({totalGroups:this.state.totalGroups+e.length}),this.processGroupsChange(t)}),eo(this,"hideConvertConfirmModal",()=>{this.setState({showConvertConfirmModal:!1})}),eo(this,"hideRemoveConfirmModal",()=>{this.setState({showRemoveConfirmModal:!1})}),eo(this,"hideConvertAndRemoveConfirmModal",()=>{this.setState({showConvertAndRemoveConfirmModal:!1})}),eo(this,"onSave",()=>{const{channel:e}=this.props,{isSynced:t,usersToRemove:a}=this.state;let{isPublic:n,isPrivacyChanging:s}=this.state;const i=e.type===O.Q.OPEN_CHANNEL;t&&(n=!1,s=i,this.setState({isPublic:n,isPrivacyChanging:s})),s&&a>0?this.setState({showConvertAndRemoveConfirmModal:!0}):s&&0===a?this.setState({showConvertConfirmModal:!0}):!s&&a>0?this.setState({showRemoveConfirmModal:!0}):this.handleSubmit()}),eo(this,"handleSubmit",async()=>{this.setState({showConvertConfirmModal:!1,showRemoveConfirmModal:!1,showConvertAndRemoveConfirmModal:!1,saving:!0});const{groups:e,isSynced:t,isPublic:a,isPrivacyChanging:n,channelPermissions:s}=this.state;let i=null,r=!1;const{groups:o,channelID:l,actions:c,channel:d}=this.props;if(0===this.state.groups.length&&t)return i=x.a.createElement(nr,{isChannel:!0}),r=!0,this.setState({serverError:i,saving:!1,saveNeeded:r}),void c.setNavigationBlocked(r);const u=[];if(n){const e=c.updateChannelPrivacy(d.id,a?O.Q.OPEN_CHANNEL:O.Q.PRIVATE_CHANNEL);u.push(e.then(e=>"error"in e?e:c.patchChannel(d.id,Zr({},d,{group_constrained:t}))))}else u.push(c.patchChannel(d.id,Zr({},d,{group_constrained:t})));const m=e.filter(e=>o.some(t=>t.id===e.id&&t.scheme_admin!==e.scheme_admin)).map(e=>c.patchGroupSyncable(e.id,l,v.Groups.SYNCABLE_TYPE_CHANNEL,{scheme_admin:e.scheme_admin})),h=o.filter(t=>!e.some(e=>e.id===t.id)).map(e=>c.unlinkGroupSyncable(e.id,l,v.Groups.SYNCABLE_TYPE_CHANNEL)),p=e.filter(e=>!o.some(t=>t.id===e.id)).map(e=>c.linkGroupSyncable(e.id,l,v.Groups.SYNCABLE_TYPE_CHANNEL,{auto_add:!0,scheme_admin:e.scheme_admin})),g=(await Promise.all([...u,...m,...h,...p])).find(e=>"error"in e);if(g&&"error"in g)i=x.a.createElement(ve.a,{error:g.error.message});else{const e=[c.getGroups(l)];n&&e.push(c.getChannelModerations(l).then(()=>{const e=s.findIndex(e=>e.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.MANAGE_MEMBERS);if(s){const t=this.props.channelPermissions.find(e=>e.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.MANAGE_MEMBERS);s[e]=t||s[e]}this.setState({channelPermissions:s})})),await Promise.all(e)}const f=s.map(e=>({name:e.name,roles:Zr({},e.roles.members&&e.roles.members.enabled&&{members:e.roles.members.value},{},e.roles.guests&&e.roles.guests.enabled&&{guests:e.roles.guests.value})})),b=await c.patchChannelModerations(l,f);b.error&&(i=x.a.createElement(ve.a,{error:b.error.message})),this.restrictChannelMentions();let _=n;null==i&&(_=!1),this.setState({serverError:i,saving:!1,saveNeeded:r,isPrivacyChanging:_}),c.setNavigationBlocked(r)}),eo(this,"render",()=>{const{totalGroups:e,saving:t,saveNeeded:a,serverError:n,isSynced:s,isPublic:i,isDefault:r,groups:o,showConvertConfirmModal:l,showRemoveConfirmModal:c,showConvertAndRemoveConfirmModal:d,usersToRemove:u,channelPermissions:m,teamScheme:h}=this.state,{channel:p,team:g}=this.props,f=this.props.groups.filter(e=>!o.find(t=>t.id===e.id));return x.a.createElement("div",{className:"wrapper--fixed"},x.a.createElement("div",{className:"admin-console__header with-back"},x.a.createElement("div",null,x.a.createElement(xa,{to:"/admin_console/user_management/channels",className:"fa fa-angle-left back"}),x.a.createElement(w.a,{id:"admin.channel_settings.channel_detail.channel_configuration",defaultMessage:"Channel Configuration"}))),x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement("div",{className:"admin-console__content"},x.a.createElement(zr,{channel:p,team:g}),x.a.createElement(Br,{show:l,onCancel:this.hideConvertConfirmModal,onConfirm:this.handleSubmit,displayName:p.display_name||"",toPublic:i}),x.a.createElement(Xi,{show:c,onCancel:this.hideRemoveConfirmModal,onConfirm:this.handleSubmit,inChannel:!0,amount:u}),x.a.createElement(Ur,{show:d,onCancel:this.hideConvertAndRemoveConfirmModal,onConfirm:this.handleSubmit,displayName:p.display_name||"",toPublic:i,removeAmount:u}),x.a.createElement(Gr,{isPublic:i,isSynced:s,isDefault:r,onToggle:this.setToggles}),x.a.createElement(Qr,{channelPermissions:m,onChannelPermissionsChanged:this.channelPermissionsChanged,teamSchemeID:null==h?void 0:h.id,teamSchemeDisplayName:null==h?void 0:h.display_name,guestAccountsEnabled:this.props.guestAccountsEnabled}),x.a.createElement(Wr,{synced:s,channel:p,totalGroups:e,groups:o,removedGroups:f,onAddCallback:this.handleGroupChange,onGroupRemoved:this.handleGroupRemoved,setNewGroupRole:this.setNewGroupRole}))),x.a.createElement(rr,{saving:t,saveNeeded:a,onClick:this.onSave,serverError:n,cancelLink:"/admin_console/user_management/channels"}))}),this.state={isSynced:Boolean(e.channel.group_constrained),isPublic:e.channel.type===O.Q.OPEN_CHANNEL,isDefault:e.channel.name===O.Q.DEFAULT_CHANNEL,isPrivacyChanging:!1,saving:!1,totalGroups:e.totalGroups,showConvertConfirmModal:!1,showRemoveConfirmModal:!1,showConvertAndRemoveConfirmModal:!1,usersToRemove:0,groups:e.groups,saveNeeded:!1,serverError:null,channelPermissions:e.channelPermissions,teamScheme:e.teamScheme}}componentDidUpdate(e){const{channel:t,totalGroups:a,actions:n}=this.props;t.id===e.channel.id&&a===e.totalGroups||this.setState({totalGroups:a,isSynced:Boolean(t.group_constrained),isPublic:t.type===O.Q.OPEN_CHANNEL,isDefault:t.name===O.Q.DEFAULT_CHANNEL}),e.team.id||e.channel.team_id||!t.team_id||n.getTeam(t.team_id).then(async e=>{e.data&&e.data.scheme_id&&await n.loadScheme(e.data.scheme_id)}).then(()=>this.setState({teamScheme:this.props.teamScheme}))}async componentDidMount(){const{channelID:e,channel:t,actions:a}=this.props,n=[];e&&(n.push(a.getGroups(e).then(()=>a.getChannel(e)).then(()=>this.setState({groups:this.props.groups}))),n.push(a.getChannelModerations(e).then(()=>this.restrictChannelMentions()))),t.team_id&&n.push(a.getTeam(t.team_id).then(async e=>{e.data&&e.data.scheme_id&&await a.loadScheme(e.data.scheme_id)}).then(()=>this.setState({teamScheme:this.props.teamScheme}))),await Promise.all(n)}restrictChannelMentions(){var e;let t=this.props.channelPermissions;const a=null===(e=t.find(e=>e.name===v.Permissions.CHANNEL_MODERATED_PERMISSIONS.CREATE_POST))||void 0===e?void 0:e.roles;for(const e of Object.keys(a))t=t.map(t=>t.name!==v.Permissions.CHANNEL_MODERATED_PERMISSIONS.USE_CHANNEL_MENTIONS||a[e].value&&a[e].enabled?t:{name:t.name,roles:Zr({},t.roles,{[e]:{value:!1,enabled:!1}})});this.setState({channelPermissions:t})}async processGroupsChange(e){const{actions:t,channelID:a}=this.props;t.setNavigationBlocked(!0);let n=null,s=0;if(this.state.isSynced)try{if(0===e.length)n=x.a.createElement(nr,{warning:!0,isChannel:!0});else{if(!a)return;const i=await t.membersMinusGroupMembers(a,e.map(e=>e.id));"data"in i&&(s=i.data.total_count,s>0&&(n=x.a.createElement(ir,{total:s,users:i.data.users})))}}catch(e){n=e}this.setState({groups:e,usersToRemove:s,saveNeeded:!0,serverError:n})}}eo(to,"propTypes",{channelID:j.a.string.isRequired,channel:j.a.any.isRequired,team:j.a.any.isRequired,groups:j.a.arrayOf(j.a.any).isRequired,totalGroups:j.a.number.isRequired,channelPermissions:j.a.any,allGroups:j.a.objectOf(j.a.any).isRequired,teamScheme:j.a.any,guestAccountsEnabled:j.a.bool.isRequired,actions:j.a.shape({getGroups:j.a.func.isRequired,linkGroupSyncable:j.a.func.isRequired,unlinkGroupSyncable:j.a.func.isRequired,membersMinusGroupMembers:j.a.func.isRequired,setNavigationBlocked:j.a.func.isRequired,getChannel:j.a.func.isRequired,getTeam:j.a.func.isRequired,getChannelModerations:j.a.func.isRequired,patchChannel:j.a.func.isRequired,updateChannelPrivacy:j.a.func.isRequired,patchGroupSyncable:j.a.func.isRequired,patchChannelModerations:j.a.func.isRequired,loadScheme:j.a.func.isRequired}).isRequired});var ao=Object(r.connect)((function(e,t){const a="true"===Object(m.getConfig)(e).EnableGuestAccounts,n=t.match.params.channel_id,s=Object(xr.getChannel)(e,n)||{},i=Object(b.getTeam)(e,s.team_id)||{},r=Object(hi.getGroupsAssociatedToChannel)(e,n);return{channel:s,team:i,allGroups:Object(hi.getAllGroups)(e,s.team_id),totalGroups:r.length,groups:r,channelID:n,channelPermissions:Object(xr.getChannelModerations)(e,n),teamScheme:Object(oa.getScheme)(e,i.scheme_id),guestAccountsEnabled:a}}),(function(e){return{actions:Object(o.bindActionCreators)({loadScheme:ra.getScheme,patchChannelModerations:p.patchChannelModerations,getChannelModerations:p.getChannelModerations,getChannel:p.getChannel,getTeam:g.getTeam,getGroups:mi.getGroupsAssociatedToChannel,linkGroupSyncable:mi.linkGroupSyncable,unlinkGroupSyncable:mi.unlinkGroupSyncable,membersMinusGroupMembers:p.membersMinusGroupMembers,patchChannel:p.patchChannel,setNavigationBlocked:_.E,updateChannelPrivacy:p.updateChannelPrivacy,patchGroupSyncable:mi.patchGroupSyncable},e)}}))(to);function no(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function so(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function io(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ro(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const oo="csv",lo="actiance",co="globalrelay";function uo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ho=a(1975),po=a.n(ho),go=a(1976),fo=a.n(go);class bo extends x.a.Component{render(){var e=x.a.createElement("img",{alt:"version mismatch",className:"cluster-status",src:po.a}),t=x.a.createElement("img",{alt:"config mismatch",className:"cluster-status",src:po.a}),a="",n="",s=!1;this.props.clusterInfos.length&&(a=this.props.clusterInfos[0].version,n=this.props.clusterInfos[0].config_hash,s=1===this.props.clusterInfos.length),this.props.clusterInfos.map(s=>(s.version!==a&&(e=x.a.createElement("img",{alt:"version mismatch",className:"cluster-status",src:fo.a})),s.config_hash!==n&&(t=x.a.createElement("img",{alt:"config mismatch",className:"cluster-status",src:fo.a})),null));var i=this.props.clusterInfos.map(a=>{var n=null;return""===a.hostname&&(a.hostname=U.jb("admin.cluster.unknown","unknown")),""===a.version&&(a.version=U.jb("admin.cluster.unknown","unknown")),""===a.config_hash&&(a.config_hash=U.jb("admin.cluster.unknown","unknown")),n=s?x.a.createElement("img",{alt:"Cluster status",className:"cluster-status",src:fo.a}):x.a.createElement("img",{alt:"Cluster status",className:"cluster-status",src:po.a}),x.a.createElement("tr",{key:a.ipaddress},x.a.createElement("td",{style:vo.clusterCell},n),x.a.createElement("td",{style:vo.clusterCell},a.hostname),x.a.createElement("td",{style:vo.clusterCell},e," ",a.version),x.a.createElement("td",{style:vo.clusterCell},x.a.createElement("div",{className:"config-hash"},t," ",a.config_hash)),x.a.createElement("td",{style:vo.clusterCell},a.ipaddress))});return x.a.createElement("div",{className:"cluster-panel__table",style:vo.clusterTable},x.a.createElement("div",{className:"text-right"},x.a.createElement("button",{type:"submit",className:"btn btn-link",onClick:this.props.reload},x.a.createElement(qt,null),x.a.createElement(w.a,{id:"admin.cluster.status_table.reload",defaultMessage:" Reload Cluster Status"}))),x.a.createElement("table",{className:"table"},x.a.createElement("thead",null,x.a.createElement("tr",null,x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.cluster.status_table.status",defaultMessage:"Status"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.cluster.status_table.hostname",defaultMessage:"Hostname"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.cluster.status_table.version",defaultMessage:"Version"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.cluster.status_table.config_hash",defaultMessage:"Config File MD5"})),x.a.createElement("th",null,x.a.createElement(w.a,{id:"admin.cluster.status_table.url",defaultMessage:"Gossip Address"})))),x.a.createElement("tbody",null,i)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(bo,"propTypes",{clusterInfos:j.a.array.isRequired,reload:j.a.func.isRequired});const vo={clusterTable:{margin:10,marginBottom:30},clusterCell:{whiteSpace:"nowrap"}};function _o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yo extends x.a.Component{constructor(e){super(e),_o(this,"load",()=>{Object(_.n)(e=>{this.setState({clusterInfos:e})},null)}),_o(this,"reload",e=>{e&&e.preventDefault(),this.setState({clusterInfos:null}),this.load()}),this.interval=null,this.state={clusterInfos:null}}componentDidMount(){this.load(),this.interval=setInterval(this.load,15e3)}componentWillUnmount(){this.interval&&clearInterval(this.interval)}render(){return null==this.state.clusterInfos?x.a.createElement(ee.a,null):x.a.createElement(bo,{clusterInfos:this.state.clusterInfos,reload:this.reload})}}function Eo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const So={configLoadedFromCluster:{marginBottom:10},warning:{marginBottom:10}};function To(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wo extends Ee{constructor(e){super(e),xo(this,"getConfigFromState",e=>(e.SupportSettings.CustomTermsOfServiceEnabled=this.state.termsEnabled,e.SupportSettings.CustomTermsOfServiceReAcceptancePeriod=this.parseIntNonZero(this.state.reAcceptancePeriod,O.j.DEFAULT_TERMS_OF_SERVICE_RE_ACCEPTANCE_PERIOD),e)),xo(this,"doSubmit",async e=>{if(this.setState({saving:!0,serverError:null}),this.state.termsEnabled&&(this.state.receivedTermsText!==this.state.termsText||!this.props.config.SupportSettings.CustomTermsOfServiceEnabled)){const t=await this.props.actions.createTermsOfService(this.state.termsText);if(t.error)return void this.handleAPIError(t.error,e)}let t=JSON.parse(JSON.stringify(this.props.config));t=this.getConfigFromState(t);const{data:a,error:n}=await this.props.updateConfig(t);a?(this.setState(this.getStateFromConfig(a)),this.setState({saveNeeded:!1,saving:!1}),this.props.setNavigationBlocked(!1),e&&e(),this.handleSaved&&this.handleSaved(t)):n&&this.handleAPIError(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?To(Object(a),!0).forEach((function(t){xo(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):To(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:n.server_error_id},n),e,t)}),xo(this,"handleAPIError",(e,t,a)=>{this.setState({saving:!1,serverError:e.message,serverErrorId:e.id}),t&&t(),this.handleSaved&&a&&this.handleSaved(a)}),xo(this,"getTermsOfService",async()=>{this.setState({loadingTermsText:!0});const e=await this.props.actions.getTermsOfService();e.data&&this.setState({termsText:e.data.text,receivedTermsText:e.data.text}),this.setState({loadingTermsText:!1})}),xo(this,"handleTermsTextChange",(e,t)=>{this.handleChange("termsText",t)}),xo(this,"handleTermsEnabledChange",(e,t)=>{this.handleChange("termsEnabled",t)}),xo(this,"handleReAcceptancePeriodChange",(e,t)=>{this.handleChange("reAcceptancePeriod",t)}),xo(this,"renderSettings",()=>this.state.loadingTermsText?x.a.createElement(ee.a,null):x.a.createElement(Oe,null,x.a.createElement(we,{key:"customTermsOfServiceEnabled",id:"SupportSettings.CustomTermsOfServiceEnabled",label:x.a.createElement(w.a,{id:"admin.support.enableTermsOfServiceTitle",defaultMessage:"Enable Custom Terms of Service"}),helpText:x.a.createElement(P.b,{id:"admin.support.enableTermsOfServiceHelp",defaultMessage:"When true, new users must accept the terms of service before accessing any Mattermost teams on desktop, web or mobile. Existing users must accept them after login or a page refresh.\\n \\nTo update terms of service link displayed in account creation and login pages, go to [Site Configuration > Customization](../site_config/customization)."}),value:this.state.termsEnabled,disabled:!(this.props.license.IsLicensed&&"true"===this.props.license.CustomTermsOfService),onChange:this.handleTermsEnabledChange,setByEnv:this.isSetByEnv("SupportSettings.CustomTermsOfServiceEnabled")}),x.a.createElement(je,{key:"customTermsOfServiceText",id:"SupportSettings.CustomTermsOfServiceText",type:"textarea",label:x.a.createElement(w.a,{id:"admin.support.termsOfServiceTextTitle",defaultMessage:"Custom Terms of Service Text"}),helpText:x.a.createElement(w.a,{id:"admin.support.termsOfServiceTextHelp",defaultMessage:"Text that will appear in your custom Terms of Service. Supports Markdown-formatted text."}),disabled:!this.state.termsEnabled,onChange:this.handleTermsTextChange,setByEnv:this.isSetByEnv("SupportSettings.CustomTermsOfServiceText"),value:this.state.termsText,maxLength:O.j.MAX_TERMS_OF_SERVICE_TEXT_LENGTH}),x.a.createElement(je,{key:"customTermsOfServiceReAcceptancePeriod",id:"SupportSettings.CustomTermsOfServiceReAcceptancePeriod",type:"number",label:x.a.createElement(w.a,{id:"admin.support.termsOfServiceReAcceptanceTitle",defaultMessage:"Re-Acceptance Period:"}),helpText:x.a.createElement(w.a,{id:"admin.support.termsOfServiceReAcceptanceHelp",defaultMessage:"The number of days before Terms of Service acceptance expires, and the terms must be re-accepted."}),disabled:!this.state.termsEnabled,value:this.state.reAcceptancePeriod,onChange:this.handleReAcceptancePeriodChange,setByEnv:this.isSetByEnv("SupportSettings.CustomTermsOfServiceReAcceptancePeriod")}))),this.state={termsEnabled:e.config.SupportSettings.CustomTermsOfServiceEnabled,reAcceptancePeriod:e.config.SupportSettings.CustomTermsOfServiceReAcceptancePeriod,loadingTermsText:!0,receivedTermsText:"",termsText:"",saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1}}getStateFromConfig(e){return{termsEnabled:e.SupportSettings.CustomTermsOfServiceEnabled,reAcceptancePeriod:e.SupportSettings.CustomTermsOfServiceReAcceptancePeriod}}componentDidMount(){this.getTermsOfService()}renderTitle(){return x.a.createElement(w.a,{id:"admin.support.termsOfServiceTitle",defaultMessage:"Custom Terms of Service (Beta)"})}}xo(wo,"propTypes",{actions:j.a.shape({getTermsOfService:j.a.func.isRequired,createTermsOfService:j.a.func.isRequired}).isRequired,config:j.a.object,license:j.a.object,setNavigationBlocked:j.a.func,updateConfig:j.a.func});var Oo=Object(r.connect)(null,(function(e){return{actions:Object(o.bindActionCreators)({getTermsOfService:K.getTermsOfService,createTermsOfService:K.createTermsOfService},e)}}))(wo);const Co=x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.connectionSecurityNone",defaultMessage:"None"})),x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.connectionSecurityNoneDescription",defaultMessage:"Mattermost will connect over an insecure connection."}))),Mo=x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.connectionSecurityTls",defaultMessage:"TLS"})),x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.connectionSecurityTlsDescription",defaultMessage:"Encrypts the communication between Mattermost and your server."}))),ko=x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.connectionSecurityStart",defaultMessage:"STARTTLS"})),x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.connectionSecurityStartDescription",defaultMessage:"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS."}))),jo=x.a.createElement("table",{className:"table table-bordered",cellPadding:"5"},x.a.createElement("tbody",null,Co,Mo,ko)),Po=x.a.createElement("table",{className:"table table-bordered",cellPadding:"5"},x.a.createElement("tbody",null,Co,Mo,ko)),Ao=x.a.createElement("table",{className:"table table-bordered",cellPadding:"5"},x.a.createElement("tbody",null,Co,Mo)),Ro=x.a.createElement("div",null,x.a.createElement("table",{className:"table table-bordered",cellPadding:"5"},x.a.createElement("tbody",null,x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.webserverModeGzip",defaultMessage:"gzip"})),x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.webserverModeGzipDescription",defaultMessage:"The Mattermost server will serve static files compressed with gzip."}))),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.webserverModeUncompressed",defaultMessage:"Uncompressed"})),x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.webserverModeUncompressedDescription",defaultMessage:"The Mattermost server will serve static files uncompressed."}))),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.webserverModeDisabled",defaultMessage:"Disabled"})),x.a.createElement("td",null,x.a.createElement(w.a,{id:"admin.webserverModeDisabledDescription",defaultMessage:"The Mattermost server will not serve static files."}))))),x.a.createElement("p",{className:"help-text"},x.a.createElement(w.a,{id:"admin.webserverModeHelpText",defaultMessage:"gzip compression applies to static content files. It is recommended to enable gzip to improve performance unless your environment has specific restrictions, such as a web proxy that distributes gzip files poorly."}))),No=[{value:"DEBUG",display_name:"DEBUG",display_name_default:"DEBUG"},{value:"INFO",display_name:"INFO",display_name_default:"INFO"},{value:"ERROR",display_name:"ERROR",display_name_default:"ERROR"}];function Do(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Io(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(a),!0).forEach((function(t){Lo(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Do(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Lo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Bo=Math.pow(1024,2),Uo={isnt:e=>(t,a,n,s)=>!e(t,a,n,s),both:(...e)=>(t,a,n)=>{for(const s of e)if(!s(t,a,n))return!1;return!0},either:(...e)=>(t,a,n,s)=>{for(const i of e)if(i(t,a,n,s))return!0;return!1},stateMatches:(e,t)=>(a,n)=>n[e].match(t),stateEquals:(e,t)=>(a,n)=>n[e]===t,stateIsTrue:e=>(t,a)=>Boolean(a[e]),stateIsFalse:e=>(t,a)=>!a[e],configIsTrue:(e,t)=>a=>Boolean(a[e][t]),configIsFalse:(e,t)=>a=>!a[e][t],enterpriseReady:(e,t,a,n)=>n,licensed:(e,t,a)=>"true"===a.IsLicensed,licensedForFeature:e=>(t,a,n)=>n.IsLicensed&&"true"===n[e]},Fo={about:{icon:"fa-info-circle",sectionTitle:Object(M.b)("admin.sidebar.about"),sectionTitleDefault:"About",license:{url:"about/license",title:Object(M.b)("admin.sidebar.license"),title_default:"Edition and License",isHidden:Uo.either(Uo.isnt(Uo.enterpriseReady),Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")),searchableStrings:["admin.license.title","admin.license.uploadDesc","admin.license.keyRemove","admin.license.edition","admin.license.type","admin.license.key","Mattermost Enterprise Edition. Unlock enterprise features in this software through the purchase of a subscription from ","This software is offered under a commercial license.\n\nSee ENTERPRISE-EDITION-LICENSE.txt in your root install directory for details. See NOTICE.txt for information about open source software used in this system."],schema:{id:"LicenseSettings",component:ia}}},reporting:{icon:"fa-bar-chart",sectionTitle:Object(M.b)("admin.sidebar.reporting"),sectionTitleDefault:"Reporting",system_analytics:{url:"reporting/system_analytics",title:Object(M.b)("admin.sidebar.siteStatistics"),title_default:"Site Statistics",searchableStrings:["analytics.system.title","analytics.system.totalPosts","analytics.system.activeUsers","analytics.system.totalSessions","analytics.system.totalCommands","analytics.system.totalIncomingWebhooks","analytics.system.totalOutgoingWebhooks","analytics.system.totalWebsockets","analytics.system.totalMasterDbConnections","analytics.system.totalReadDbConnections","analytics.system.postTypes","analytics.system.channelTypes","analytics.system.totalUsers","analytics.system.totalTeams","analytics.system.totalChannels","analytics.system.dailyActiveUsers","analytics.system.monthlyActiveUsers"],schema:{id:"SystemAnalytics",component:X}},team_statistics:{url:"reporting/team_statistics",title:Object(M.b)("admin.sidebar.teamStatistics"),title_default:"Team Statistics",searchableStrings:[["analytics.team.title",{team:""}],"analytics.system.info","analytics.team.totalPosts","analytics.team.activeUsers","analytics.team.totalUsers","analytics.team.publicChannels","analytics.team.privateGroups","analytics.team.recentUsers","analytics.team.newlyCreated"],schema:{id:"TeamAnalytics",component:le}},server_logs:{url:"reporting/server_logs",title:Object(M.b)("admin.sidebar.logs"),title_default:"Server Logs",searchableStrings:["admin.logs.bannerDesc","admin.logs.title"],schema:{id:"ServerLogs",component:Qs}}},user_management:{icon:"fa-users",sectionTitle:Object(M.b)("admin.sidebar.userManagement"),sectionTitleDefault:"User Management",system_user_detail:{url:"user_management/user/:user_id",schema:{id:"SystemUserDetail",component:Ys}},system_users:{url:"user_management/users",title:Object(M.b)("admin.sidebar.users"),title_default:"Users",searchableStrings:[["admin.system_users.title",{siteName:""}]],schema:{id:"SystemUsers",component:Ss}},group_detail:{url:"user_management/groups/:group_id",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("LDAPGroups"))),schema:{id:"GroupDetail",component:Li}},groups:{url:"user_management/groups",title:Object(M.b)("admin.sidebar.groups"),title_default:"Groups (Beta)",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("LDAPGroups"))),schema:{id:"Groups",component:ui}},team_detail:{url:"user_management/teams/:team_id",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("LDAPGroups"))),schema:{id:"TeamDetail",component:Tr}},teams:{url:"user_management/teams",title:Object(M.b)("admin.sidebar.teams"),title_default:"Teams",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("LDAPGroups"))),schema:{id:"Teams",component:Ji}},channel_detail:{url:"user_management/channels/:channel_id",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("LDAPGroups"))),schema:{id:"ChannelDetail",component:ao}},channel:{url:"user_management/channels",title:Object(M.b)("admin.sidebar.channels"),title_default:"Channels",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("LDAPGroups"))),schema:{id:"Channels",component:Lr}},systemScheme:{url:"user_management/permissions/system_scheme",isHidden:Uo.isnt(Uo.licensed),schema:{id:"PermissionSystemScheme",component:ln}},teamSchemeDetail:{url:"user_management/permissions/team_override_scheme/:scheme_id",isHidden:Uo.either(Uo.isnt(Uo.licensed),Uo.isnt(Uo.licensedForFeature("CustomPermissionsSchemes"))),schema:{id:"PermissionSystemScheme",component:Tn}},teamScheme:{url:"user_management/permissions/team_override_scheme",isHidden:Uo.either(Uo.isnt(Uo.licensed),Uo.isnt(Uo.licensedForFeature("CustomPermissionsSchemes"))),schema:{id:"PermissionSystemScheme",component:Tn}},permissions:{url:"user_management/permissions/",title:Object(M.b)("admin.sidebar.permissions"),title_default:"Permissions",isHidden:Uo.isnt(Uo.licensed),searchableStrings:["admin.permissions.documentationLinkText","admin.permissions.teamOverrideSchemesNoSchemes","admin.permissions.loadMoreSchemes","admin.permissions.introBanner","admin.permissions.systemSchemeBannerTitle","admin.permissions.systemSchemeBannerText","admin.permissions.systemSchemeBannerButton","admin.permissions.teamOverrideSchemesTitle","admin.permissions.teamOverrideSchemesBannerText","admin.permissions.teamOverrideSchemesNewButton"],schema:{id:"PermissionSchemes",component:ba}}},environment:{icon:"fa-server",sectionTitle:Object(M.b)("admin.sidebar.environment"),sectionTitleDefault:"Environment",web_server:{url:"environment/web_server",title:Object(M.b)("admin.sidebar.webServer"),title_default:"Web Server",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"ServiceSettings",name:Object(M.b)("admin.environment.webServer"),name_default:"Web Server",settings:[{type:O.j.SettingsTypes.TYPE_BANNER,label:Object(M.b)("admin.rate.noteDescription"),label_default:"Changing properties in this section will require a server restart before taking effect.",banner_type:"info"},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.SiteURL",label:Object(M.b)("admin.service.siteURL"),label_default:"Site URL:",help_text:Object(M.b)("admin.service.siteURLDescription"),help_text_default:"The URL that users will use to access Mattermost. Standard ports, such as 80 and 443, can be omitted, but non-standard ports are required. For example: http://example.com:8065. This setting is required.\n \nMattermost may be hosted at a subpath. For example: http://example.com:8065/company/mattermost. A restart is required before the server will work correctly.",help_text_markdown:!0,placeholder:Object(M.b)("admin.service.siteURLExample"),placeholder_default:'E.g.: "http://example.com:8065"'},{type:O.j.SettingsTypes.TYPE_BUTTON,key:"TestSiteURL",action:_.H,label:Object(M.b)("admin.service.testSiteURL"),label_default:"Test Live URL",loading:Object(M.b)("admin.service.testSiteURLTesting"),loading_default:"Testing...",error_message:Object(M.b)("admin.service.testSiteURLFail"),error_message_default:"Test unsuccessful: {error}",success_message:Object(M.b)("admin.service.testSiteURLSuccess"),success_message_default:"Test successful. This is a valid URL."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.ListenAddress",label:Object(M.b)("admin.service.listenAddress"),label_default:"Listen Address:",placeholder:Object(M.b)("admin.service.listenExample"),placeholder_default:'E.g.: ":8065"',help_text:Object(M.b)("admin.service.listenDescription"),help_text_default:'The address and port to which to bind and listen. Specifying ":8065" will bind to all network interfaces. Specifying "127.0.0.1:8065" will only bind to the network interface having that IP address. If you choose a port of a lower level (called "system ports" or "well-known ports", in the range of 0-1023), you must have permissions to bind to that port. On Linux you can use: "sudo setcap cap_net_bind_service=+ep ./bin/mattermost" to allow Mattermost to bind to well-known ports.'},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.Forward80To443",label:Object(M.b)("admin.service.forward80To443"),label_default:"Forward port 80 to 443:",help_text:Object(M.b)("admin.service.forward80To443Description"),help_text_default:"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.",disabled_help_text:Object(M.b)("admin.service.forward80To443Description.disabled"),disabled_help_text_default:"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.\n \nThis setting cannot be enabled until your server is [listening](#ListenAddress) on port 443.",disabled_help_text_markdown:!0,isDisabled:Uo.isnt(Uo.stateMatches("ServiceSettings.ListenAddress",/:443$/))},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"ServiceSettings.ConnectionSecurity",label:Object(M.b)("admin.connectionSecurityTitle"),label_default:"Connection Security:",help_text:Ao,options:[{value:"",display_name:Object(M.b)("admin.connectionSecurityNone"),display_name_default:"None"},{value:"TLS",display_name:Object(M.b)("admin.connectionSecurityTls"),display_name_default:"TLS (Recommended)"}]},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.TLSCertFile",label:Object(M.b)("admin.service.tlsCertFile"),label_default:"TLS Certificate File:",help_text:Object(M.b)("admin.service.tlsCertFileDescription"),help_text_default:"The certificate file to use.",isDisabled:Uo.stateIsTrue("ServiceSettings.UseLetsEncrypt")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.TLSKeyFile",label:Object(M.b)("admin.service.tlsKeyFile"),label_default:"TLS Key File:",help_text:Object(M.b)("admin.service.tlsKeyFileDescription"),help_text_default:"The private key file to use.",isDisabled:Uo.stateIsTrue("ServiceSettings.UseLetsEncrypt")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.UseLetsEncrypt",label:Object(M.b)("admin.service.useLetsEncrypt"),label_default:"Use Let's Encrypt:",help_text:Object(M.b)("admin.service.useLetsEncryptDescription"),help_text_default:"Enable the automatic retrieval of certificates from Let's Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.",disabled_help_text:Object(M.b)("admin.service.useLetsEncryptDescription.disabled"),disabled_help_text_default:"Enable the automatic retrieval of certificates from Let's Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.\n \nThis setting cannot be enabled unless the [Forward port 80 to 443](#Forward80To443) setting is set to true.",disabled_help_text_markdown:!0,isDisabled:Uo.stateIsFalse("ServiceSettings.Forward80To443")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.LetsEncryptCertificateCacheFile",label:Object(M.b)("admin.service.letsEncryptCertificateCacheFile"),label_default:"Let's Encrypt Certificate Cache File:",help_text:Object(M.b)("admin.service.letsEncryptCertificateCacheFileDescription"),help_text_default:"Certificates retrieved and other data about the Let's Encrypt service will be stored in this file.",isDisabled:Uo.stateIsFalse("ServiceSettings.UseLetsEncrypt")},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.ReadTimeout",label:Object(M.b)("admin.service.readTimeout"),label_default:"Read Timeout:",help_text:Object(M.b)("admin.service.readTimeoutDescription"),help_text_default:"Maximum time allowed from when the connection is accepted to when the request body is fully read."},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.WriteTimeout",label:Object(M.b)("admin.service.writeTimeout"),label_default:"Write Timeout:",help_text:Object(M.b)("admin.service.writeTimeoutDescription"),help_text_default:"If using HTTP (insecure), this is the maximum time allowed from the end of reading the request headers until the response is written. If using HTTPS, it is the total time from when the connection is accepted until the response is written."},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"ServiceSettings.WebserverMode",label:Object(M.b)("admin.webserverModeTitle"),label_default:"Webserver Mode:",help_text:Ro,options:[{value:"gzip",display_name:Object(M.b)("admin.webserverModeGzip"),display_name_default:"gzip"},{value:"uncompressed",display_name:Object(M.b)("admin.webserverModeUncompressed"),display_name_default:"Uncompressed"},{value:"disabled",display_name:Object(M.b)("admin.webserverModeDisabled"),display_name_default:"Disabled"}]},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableInsecureOutgoingConnections",label:Object(M.b)("admin.service.insecureTlsTitle"),label_default:"Enable Insecure Outgoing Connections: ",help_text:Object(M.b)("admin.service.insecureTlsDesc"),help_text_default:"When true, any outgoing HTTPS requests will accept unverified, self-signed certificates. For example, outgoing webhooks to a server with a self-signed TLS certificate, using any domain, will be allowed. Note that this makes these connections susceptible to man-in-the-middle attacks."},{type:O.j.SettingsTypes.TYPE_BUTTON,action:_.A,key:"ReloadConfigButton",label:Object(M.b)("admin.reload.button"),label_default:"Reload Configuration From Disk",help_text:Object(M.b)("admin.reload.reloadDescription"),help_text_default:'Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating "config.json" to the new desired configuration and using the {featureName} feature to load the new settings while the server is running. The administrator should then use the {recycleDatabaseConnections} feature to recycle the database connections based on the new settings.',help_text_values:{featureName:x.a.createElement("b",null,x.a.createElement(w.a,{id:"admin.reload.reloadDescription.featureName",defaultMessage:"Reload Configuration from Disk"})),recycleDatabaseConnections:x.a.createElement("a",{href:"../environment/database"},x.a.createElement("b",null,x.a.createElement(w.a,{id:"admin.reload.reloadDescription.recycleDatabaseConnections",defaultMessage:"Environment > Database > Recycle Database Connections"})))},error_message:Object(M.b)("admin.reload.reloadFail"),error_message_default:"Reload unsuccessful: {error}"},{type:O.j.SettingsTypes.TYPE_BUTTON,key:"PurgeButton",action:_.t,label:Object(M.b)("admin.purge.button"),label_default:"Purge All Caches",help_text:Object(M.b)("admin.purge.purgeDescription"),help_text_default:"This will purge all the in-memory caches for things like sessions, accounts, channels, etc. Deployments using High Availability will attempt to purge all the servers in the cluster.  Purging the caches may adversely impact performance.",error_message:Object(M.b)("admin.purge.purgeFail"),error_message_default:"Purging unsuccessful: {error}"}]}},database:{url:"environment/database",title:Object(M.b)("admin.sidebar.database"),title_default:"Database",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),searchableStrings:["admin.database.title",["admin.recycle.recycleDescription",{featureName:"",reloadConfiguration:""}],"admin.recycle.recycleDescription.featureName","admin.recycle.recycleDescription.reloadConfiguration","admin.recycle.button","admin.sql.noteDescription","admin.sql.driverName","admin.sql.driverNameDescription","admin.sql.dataSource","admin.sql.dataSourceDescription","admin.sql.maxConnectionsTitle","admin.sql.maxConnectionsDescription","admin.sql.maxOpenTitle","admin.sql.maxOpenDescription","admin.sql.queryTimeoutTitle","admin.sql.queryTimeoutDescription","admin.sql.connMaxLifetimeTitle","admin.sql.connMaxLifetimeDescription","admin.sql.traceTitle","admin.sql.traceDescription"],schema:{id:"DatabaseSettings",component:class extends Ee{constructor(...e){super(...e),uo(this,"getConfigFromState",e=>(e.SqlSettings.MaxIdleConns=this.parseIntNonZero(this.state.maxIdleConns),e.SqlSettings.MaxOpenConns=this.parseIntNonZero(this.state.maxOpenConns),e.SqlSettings.Trace=this.state.trace,e.SqlSettings.QueryTimeout=this.parseIntNonZero(this.state.queryTimeout),e.SqlSettings.ConnMaxLifetimeMilliseconds=this.parseIntNonNegative(this.state.connMaxLifetimeMilliseconds),e.ServiceSettings.MinimumHashtagLength=this.parseIntNonZero(this.state.minimumHashtagLength,3,2),e)),uo(this,"renderSettings",()=>{const e="**********"+this.state.dataSource.substring(this.state.dataSource.indexOf("@"));let t=x.a.createElement("div",null);return"true"===this.props.license.IsLicensed&&(t=x.a.createElement(We,{requestAction:_.x,helpText:x.a.createElement(w.a,{id:"admin.recycle.recycleDescription",defaultMessage:'Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating "config.json" to the new desired configuration and using the {reloadConfiguration} feature to load the new settings while the server is running. The administrator should then use {featureName} feature to recycle the database connections based on the new settings.',values:{featureName:x.a.createElement("b",null,x.a.createElement(w.a,{id:"admin.recycle.recycleDescription.featureName",defaultMessage:"Recycle Database Connections"})),reloadConfiguration:x.a.createElement("a",{href:"../environment/web_server"},x.a.createElement("b",null,x.a.createElement(w.a,{id:"admin.recycle.recycleDescription.reloadConfiguration",defaultMessage:"Environment > Web Server > Reload Configuration from Disk"})))}}),buttonText:x.a.createElement(w.a,{id:"admin.recycle.button",defaultMessage:"Recycle Database Connections"}),showSuccessMessage:!1,errorMessage:{id:Object(M.b)("admin.recycle.reloadFail"),defaultMessage:"Recycling unsuccessful: {error}"},includeDetailedError:!0})),x.a.createElement(Oe,null,x.a.createElement("div",{className:"banner"},x.a.createElement(w.a,{id:"admin.sql.noteDescription",defaultMessage:"Changing properties in this section will require a server restart before taking effect."})),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"DriverName"},x.a.createElement(w.a,{id:"admin.sql.driverName",defaultMessage:"Driver Name:"})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("input",{type:"text",className:"form-control",value:this.state.driverName,disabled:!0}),x.a.createElement("div",{className:"help-text"},x.a.createElement(w.a,{id:"admin.sql.driverNameDescription",defaultMessage:"Set the database driver in the config.json file."})))),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"DataSource"},x.a.createElement(w.a,{id:"admin.sql.dataSource",defaultMessage:"Data Source:"})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("input",{type:"text",className:"form-control",value:e,disabled:!0}),x.a.createElement("div",{className:"help-text"},x.a.createElement(w.a,{id:"admin.sql.dataSourceDescription",defaultMessage:"Set the database source in the config.json file."})))),x.a.createElement(je,{id:"maxIdleConns",label:x.a.createElement(w.a,{id:"admin.sql.maxConnectionsTitle",defaultMessage:"Maximum Idle Connections:"}),placeholder:U.jb("admin.sql.maxConnectionsExample",'E.g.: "10"'),helpText:x.a.createElement(w.a,{id:"admin.sql.maxConnectionsDescription",defaultMessage:"Maximum number of idle connections held open to the database."}),value:this.state.maxIdleConns,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.MaxIdleConns")}),x.a.createElement(je,{id:"maxOpenConns",label:x.a.createElement(w.a,{id:"admin.sql.maxOpenTitle",defaultMessage:"Maximum Open Connections:"}),placeholder:U.jb("admin.sql.maxOpenExample",'E.g.: "10"'),helpText:x.a.createElement(w.a,{id:"admin.sql.maxOpenDescription",defaultMessage:"Maximum number of open connections held open to the database."}),value:this.state.maxOpenConns,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.MaxOpenConns")}),x.a.createElement(je,{id:"queryTimeout",label:x.a.createElement(w.a,{id:"admin.sql.queryTimeoutTitle",defaultMessage:"Query Timeout:"}),placeholder:U.jb("admin.sql.queryTimeoutExample",'E.g.: "30"'),helpText:x.a.createElement(w.a,{id:"admin.sql.queryTimeoutDescription",defaultMessage:"The number of seconds to wait for a response from the database after opening a connection and sending the query. Errors that you see in the UI or in the logs as a result of a query timeout can vary depending on the type of query."}),value:this.state.queryTimeout,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.QueryTimeout")}),x.a.createElement(je,{id:"connMaxLifetimeMilliseconds",label:x.a.createElement(w.a,{id:"admin.sql.connMaxLifetimeTitle",defaultMessage:"Maximum Connection Lifetime:"}),placeholder:U.jb("admin.sql.connMaxLifetimeExample",'E.g.: "3600000"'),helpText:x.a.createElement(w.a,{id:"admin.sql.connMaxLifetimeDescription",defaultMessage:"Maximum lifetime for a connection to the database in milliseconds."}),value:this.state.connMaxLifetimeMilliseconds,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.ConnMaxLifetimeMilliseconds")}),x.a.createElement(je,{id:"minimumHashtagLength",label:x.a.createElement(w.a,{id:"admin.service.minimumHashtagLengthTitle",defaultMessage:"Minimum Hashtag Length:"}),placeholder:U.jb("admin.service.minimumHashtagLengthExample",'E.g.: "3"'),helpText:x.a.createElement(P.b,{id:"admin.service.minimumHashtagLengthDescription",defaultMessage:"Minimum number of characters in a hashtag. This must be greater than or equal to 2. MySQL databases must be configured to support searching strings shorter than three characters, [see documentation](!https://dev.mysql.com/doc/refman/8.0/en/fulltext-fine-tuning.html)."}),value:this.state.minimumHashtagLength,onChange:this.handleChange,setByEnv:this.isSetByEnv("ServiceSettings.MinimumHashtagLength")}),x.a.createElement(we,{id:"trace",label:x.a.createElement(w.a,{id:"admin.sql.traceTitle",defaultMessage:"SQL Statement Logging: "}),helpText:x.a.createElement(w.a,{id:"admin.sql.traceDescription",defaultMessage:"(Development Mode) When true, executing SQL statements are written to the log."}),value:this.state.trace,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.Trace")}),t)})}getStateFromConfig(e){return{driverName:e.SqlSettings.DriverName,dataSource:e.SqlSettings.DataSource,maxIdleConns:e.SqlSettings.MaxIdleConns,maxOpenConns:e.SqlSettings.MaxOpenConns,trace:e.SqlSettings.Trace,queryTimeout:e.SqlSettings.QueryTimeout,connMaxLifetimeMilliseconds:e.SqlSettings.ConnMaxLifetimeMilliseconds,minimumHashtagLength:e.ServiceSettings.MinimumHashtagLength}}renderTitle(){return x.a.createElement(w.a,{id:"admin.database.title",defaultMessage:"Database Settings"})}}}},elasticsearch:{url:"environment/elasticsearch",title:Object(M.b)("admin.sidebar.elasticsearch"),title_default:"Elasticsearch",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("Elasticsearch")),Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")),searchableStrings:["admin.elasticsearch.title","admin.elasticsearch.enableIndexingTitle",["admin.elasticsearch.enableIndexingDescription",{documentationLink:""}],"admin.elasticsearch.enableIndexingDescription.documentationLinkText","admin.elasticsearch.connectionUrlTitle",["admin.elasticsearch.connectionUrlDescription",{documentationLink:""}],"admin.elasticsearch.connectionUrlExample.documentationLinkText","admin.elasticsearch.skipTLSVerificationTitle","admin.elasticsearch.skipTLSVerificationDescription","admin.elasticsearch.usernameTitle","admin.elasticsearch.usernameDescription","admin.elasticsearch.passwordTitle","admin.elasticsearch.passwordDescription","admin.elasticsearch.sniffTitle","admin.elasticsearch.sniffDescription","admin.elasticsearch.testHelpText","admin.elasticsearch.elasticsearch_test_button","admin.elasticsearch.bulkIndexingTitle","admin.elasticsearch.createJob.help","admin.elasticsearch.purgeIndexesHelpText","admin.elasticsearch.purgeIndexesButton","admin.elasticsearch.purgeIndexesButton.label","admin.elasticsearch.enableSearchingTitle","admin.elasticsearch.enableSearchingDescription"],schema:{id:"ElasticSearchSettings",component:class extends Ee{constructor(...e){super(...e),mo(this,"getConfigFromState",e=>(e.ElasticsearchSettings.ConnectionUrl=this.state.connectionUrl,e.ElasticsearchSettings.SkipTLSVerification=this.state.skipTLSVerification,e.ElasticsearchSettings.Username=this.state.username,e.ElasticsearchSettings.Password=this.state.password,e.ElasticsearchSettings.Sniff=this.state.sniff,e.ElasticsearchSettings.EnableIndexing=this.state.enableIndexing,e.ElasticsearchSettings.EnableSearching=this.state.enableSearching,e.ElasticsearchSettings.EnableAutocomplete=this.state.enableAutocomplete,e)),mo(this,"handleSettingChanged",(e,t)=>{"enableIndexing"===e&&(!1===t?this.setState({enableSearching:!1,enableAutocomplete:!1}):this.setState({canSave:!1,configTested:!1})),"connectionUrl"!==e&&"skipTLSVerification"!==e&&"username"!==e&&"password"!==e&&"sniff"!==e||this.setState({configTested:!1,canSave:!1}),"enableSearching"!==e&&"enableAutocomplete"!==e&&this.setState({canPurgeAndIndex:!1}),this.handleChange(e,t)}),mo(this,"handleSaved",()=>{this.setState({canPurgeAndIndex:this.state.enableIndexing})}),mo(this,"canSave",()=>this.state.canSave),mo(this,"doTestConfig",(e,t)=>{const a=JSON.parse(JSON.stringify(this.props.config));this.getConfigFromState(a),Object(_.i)(a,()=>{this.setState({configTested:!0,canSave:!0}),e(),this.doSubmit()},e=>{this.setState({configTested:!1,canSave:!1}),t(e)})}),mo(this,"renderSettings",()=>x.a.createElement(Oe,null,x.a.createElement(we,{id:"enableIndexing",label:x.a.createElement(w.a,{id:"admin.elasticsearch.enableIndexingTitle",defaultMessage:"Enable Elasticsearch Indexing:"}),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.enableIndexingDescription",defaultMessage:'When true, indexing of new posts occurs automatically. Search queries will use database search until "Enable Elasticsearch for search queries" is enabled. {documentationLink}',values:{documentationLink:x.a.createElement("a",{href:"https://about.mattermost.com/default-elasticsearch-documentation/",rel:"noopener noreferrer",target:"_blank"},x.a.createElement(w.a,{id:"admin.elasticsearch.enableIndexingDescription.documentationLinkText",defaultMessage:"Learn more about Elasticsearch in our documentation."}))}}),value:this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.EnableIndexing")}),x.a.createElement(je,{id:"connectionUrl",label:x.a.createElement(w.a,{id:"admin.elasticsearch.connectionUrlTitle",defaultMessage:"Server Connection Address:"}),placeholder:U.jb("admin.elasticsearch.connectionUrlExample",'E.g.: "https://elasticsearch.example.org:9200"'),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.connectionUrlDescription",defaultMessage:"The address of the Elasticsearch server. {documentationLink}",values:{documentationLink:x.a.createElement("a",{href:"https://about.mattermost.com/default-elasticsearch-server-setup/",rel:"noopener noreferrer",target:"_blank"},x.a.createElement(w.a,{id:"admin.elasticsearch.connectionUrlExample.documentationLinkText",defaultMessage:"Please see documentation with server setup instructions."}))}}),value:this.state.connectionUrl,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.ConnectionUrl")}),x.a.createElement(we,{id:"skipTLSVerification",label:x.a.createElement(w.a,{id:"admin.elasticsearch.skipTLSVerificationTitle",defaultMessage:"Skip TLS Verification:"}),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.skipTLSVerificationDescription",defaultMessage:"When true, Mattermost will not require the Elasticsearch certificate to be signed by a trusted Certificate Authority."}),value:this.state.skipTLSVerification,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.SkipTLSVerification")}),x.a.createElement(je,{id:"username",label:x.a.createElement(w.a,{id:"admin.elasticsearch.usernameTitle",defaultMessage:"Server Username:"}),placeholder:U.jb("admin.elasticsearch.usernameExample",'E.g.: "elastic"'),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.usernameDescription",defaultMessage:"(Optional) The username to authenticate to the Elasticsearch server."}),value:this.state.username,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.Username")}),x.a.createElement(je,{id:"password",label:x.a.createElement(w.a,{id:"admin.elasticsearch.passwordTitle",defaultMessage:"Server Password:"}),placeholder:U.jb("admin.elasticsearch.password",'E.g.: "yourpassword"'),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.passwordDescription",defaultMessage:"(Optional) The password to authenticate to the Elasticsearch server."}),value:this.state.password,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.Password")}),x.a.createElement(we,{id:"sniff",label:x.a.createElement(w.a,{id:"admin.elasticsearch.sniffTitle",defaultMessage:"Enable Cluster Sniffing:"}),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.sniffDescription",defaultMessage:"When true, sniffing finds and connects to all data nodes in your cluster automatically."}),value:this.state.sniff,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.Sniff")}),x.a.createElement(We,{id:"testConfig",requestAction:this.doTestConfig,helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.testHelpText",defaultMessage:"Tests if the Mattermost server can connect to the Elasticsearch server specified. Testing the connection only saves the configuration if the test is successful. See log file for more detailed error messages."}),buttonText:x.a.createElement(w.a,{id:"admin.elasticsearch.elasticsearch_test_button",defaultMessage:"Test Connection"}),successMessage:{id:Object(M.b)("admin.elasticsearch.testConfigSuccess"),defaultMessage:"Test successful. Configuration saved."},disabled:!this.state.enableIndexing}),x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"control-label col-sm-4"},x.a.createElement(w.a,{id:"admin.elasticsearch.bulkIndexingTitle",defaultMessage:"Bulk Indexing:"})),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("div",{className:"job-table-setting"},x.a.createElement(_t,{jobType:O.r.ELASTICSEARCH_POST_INDEXING,disabled:!this.state.canPurgeAndIndex,createJobButtonText:x.a.createElement(w.a,{id:"admin.elasticsearch.createJob.title",defaultMessage:"Index Now"}),createJobHelpText:x.a.createElement(w.a,{id:"admin.elasticsearch.createJob.help",defaultMessage:"All users, channels and posts in the database will be indexed from oldest to newest. Elasticsearch is available during indexing but search results may be incomplete until the indexing job is complete."}),getExtraInfoText:this.getExtraInfo})))),x.a.createElement(We,{id:"purgeIndexesSection",requestAction:_.h,helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.purgeIndexesHelpText",defaultMessage:"Purging will entirely remove the indexes on the Elasticsearch server. Search results may be incomplete until a bulk index of the existing database is rebuilt."}),buttonText:x.a.createElement(w.a,{id:"admin.elasticsearch.purgeIndexesButton",defaultMessage:"Purge Index"}),successMessage:{id:Object(M.b)("admin.elasticsearch.purgeIndexesButton.success"),defaultMessage:"Indexes purged successfully."},errorMessage:{id:Object(M.b)("admin.elasticsearch.purgeIndexesButton.error"),defaultMessage:"Failed to purge indexes: {error}"},disabled:!this.state.canPurgeAndIndex,label:x.a.createElement(w.a,{id:"admin.elasticsearch.purgeIndexesButton.label",defaultMessage:"Purge Indexes:"})}),x.a.createElement(we,{id:"enableSearching",label:x.a.createElement(w.a,{id:"admin.elasticsearch.enableSearchingTitle",defaultMessage:"Enable Elasticsearch for search queries:"}),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.enableSearchingDescription",defaultMessage:"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all search queries using the latest index. Search results may be incomplete until a bulk index of the existing post database is finished. When false, database search is used."}),value:this.state.enableSearching,disabled:!this.state.enableIndexing||!this.state.configTested,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.EnableSearching")}),x.a.createElement(we,{id:"enableAutocomplete",label:x.a.createElement(w.a,{id:"admin.elasticsearch.enableAutocompleteTitle",defaultMessage:"Enable Elasticsearch for autocomplete queries:"}),helpText:x.a.createElement(w.a,{id:"admin.elasticsearch.enableAutocompleteDescription",defaultMessage:"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all autocompletion queries on users and channels using the latest index. Autocompletion results may be incomplete until a bulk index of the existing users and channels database is finished. When false, database autocomplete is used."}),value:this.state.enableAutocomplete,disabled:!this.state.enableIndexing||!this.state.configTested,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.EnableAutocomplete")})))}getStateFromConfig(e){return{connectionUrl:e.ElasticsearchSettings.ConnectionUrl,skipTLSVerification:e.ElasticsearchSettings.SkipTLSVerification,username:e.ElasticsearchSettings.Username,password:e.ElasticsearchSettings.Password,sniff:e.ElasticsearchSettings.Sniff,enableIndexing:e.ElasticsearchSettings.EnableIndexing,enableSearching:e.ElasticsearchSettings.EnableSearching,enableAutocomplete:e.ElasticsearchSettings.EnableAutocomplete,configTested:!0,canSave:!0,canPurgeAndIndex:e.ElasticsearchSettings.EnableIndexing}}getExtraInfo(e){return e.status===O.q.IN_PROGRESS?x.a.createElement(w.a,{id:"admin.elasticsearch.percentComplete",defaultMessage:"{percent}% Complete",values:{percent:Number(e.progress)}}):null}renderTitle(){return x.a.createElement(w.a,{id:"admin.elasticsearch.title",defaultMessage:"Elasticsearch"})}}}},storage:{url:"environment/file_storage",title:Object(M.b)("admin.sidebar.fileStorage"),title_default:"File Storage",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"FileSettings",name:Object(M.b)("admin.environment.fileStorage"),name_default:"File Storage",settings:[{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"FileSettings.DriverName",label:Object(M.b)("admin.image.storeTitle"),label_default:"File Storage System:",help_text:Object(M.b)("admin.image.storeDescription"),help_text_default:'Storage system where files and image attachments are saved.\n \nSelecting "Amazon S3" enables fields to enter your Amazon credentials and bucket details.\n \nSelecting "Local File System" enables the field to specify a local file directory.',help_text_markdown:!0,options:[{value:"local",display_name:Object(M.b)("admin.image.storeLocal"),display_name_default:"Local File System"},{value:"amazons3",display_name:Object(M.b)("admin.image.storeAmazonS3"),display_name_default:"Amazon S3"}]},{type:O.j.SettingsTypes.TYPE_TEXT,key:"FileSettings.Directory",label:Object(M.b)("admin.image.localTitle"),label_default:"Local Storage Directory:",help_text:Object(M.b)("admin.image.localDescription"),help_text_default:"Directory to which files and images are written. If blank, defaults to ./data/.",placeholder:Object(M.b)("admin.image.localExample"),placeholder_default:'E.g.: "./data/"',isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","local"))},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"FileSettings.MaxFileSize",label:Object(M.b)("admin.image.maxFileSizeTitle"),label_default:"Maximum File Size:",help_text:Object(M.b)("admin.image.maxFileSizeDescription"),help_text_default:"Maximum file size for message attachments in megabytes. Caution: Verify server memory can support your setting choice. Large file sizes increase the risk of server crashes and failed uploads due to network interruptions.",placeholder:Object(M.b)("admin.image.maxFileSizeExample"),placeholder_default:"50",onConfigLoad:e=>e/Bo,onConfigSave:e=>e*Bo},{type:O.j.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3Bucket",label:Object(M.b)("admin.image.amazonS3BucketTitle"),label_default:"Amazon S3 Bucket:",help_text:Object(M.b)("admin.image.amazonS3BucketDescription"),help_text_default:"Name you selected for your S3 bucket in AWS.",placeholder:Object(M.b)("admin.image.amazonS3BucketExample"),placeholder_default:'E.g.: "mattermost-media"',isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3Region",label:Object(M.b)("admin.image.amazonS3RegionTitle"),label_default:"Amazon S3 Region:",help_text:Object(M.b)("admin.image.amazonS3RegionDescription"),help_text_default:'AWS region you selected when creating your S3 bucket. If no region is set, Mattermost attempts to get the appropriate region from AWS, or sets it to "us-east-1" if none found.',placeholder:Object(M.b)("admin.image.amazonS3RegionExample"),placeholder_default:'E.g.: "us-east-1"',isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3AccessKeyId",label:Object(M.b)("admin.image.amazonS3IdTitle"),label_default:"Amazon S3 Access Key ID:",help_text:Object(M.b)("admin.image.amazonS3IdDescription"),help_text_markdown:!0,help_text_default:"(Optional) Only required if you do not want to authenticate to S3 using an [IAM role](!https://about.mattermost.com/default-iam-role). Enter the Access Key ID provided by your Amazon EC2 administrator.",placeholder:Object(M.b)("admin.image.amazonS3IdExample"),placeholder_default:'E.g.: "AKIADTOVBGERKLCBV"',isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3Endpoint",label:Object(M.b)("admin.image.amazonS3EndpointTitle"),label_default:"Amazon S3 Endpoint:",help_text:Object(M.b)("admin.image.amazonS3EndpointDescription"),help_text_default:'Hostname of your S3 Compatible Storage provider. Defaults to "s3.amazonaws.com".',placeholder:Object(M.b)("admin.image.amazonS3EndpointExample"),placeholder_default:'E.g.: "s3.amazonaws.com"',isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3SecretAccessKey",label:Object(M.b)("admin.image.amazonS3SecretTitle"),label_default:"Amazon S3 Secret Access Key:",help_text:Object(M.b)("admin.image.amazonS3SecretDescription"),help_text_default:"(Optional) The secret access key associated with your Amazon S3 Access Key ID.",placeholder:Object(M.b)("admin.image.amazonS3SecretExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.AmazonS3SSL",label:Object(M.b)("admin.image.amazonS3SSLTitle"),label_default:"Enable Secure Amazon S3 Connections:",help_text:Object(M.b)("admin.image.amazonS3SSLDescription"),help_text_default:"When false, allow insecure connections to Amazon S3. Defaults to secure connections only.",isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.AmazonS3SSE",label:Object(M.b)("admin.image.amazonS3SSETitle"),label_default:"Enable Server-Side Encryption for Amazon S3:",help_text:Object(M.b)("admin.image.amazonS3SSEDescription"),help_text_markdown:!0,help_text_default:"When true, encrypt files in Amazon S3 using server-side encryption with Amazon S3-managed keys. See [documentation](!https://about.mattermost.com/default-server-side-encryption) to learn more.",isHidden:Uo.isnt(Uo.licensedForFeature("Compliance")),isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.AmazonS3Trace",label:Object(M.b)("admin.image.amazonS3TraceTitle"),label_default:"Enable Amazon S3 Debugging:",help_text:Object(M.b)("admin.image.amazonS3TraceDescription"),help_text_default:"(Development Mode) When true, log additional debugging information to the system logs.",isDisabled:Uo.isnt(Uo.stateEquals("FileSettings.DriverName","amazons3"))},{type:O.j.SettingsTypes.TYPE_BUTTON,action:_.G,key:"TestS3Connection",label:Object(M.b)("admin.s3.connectionS3Test"),label_default:"Test Connection",loading:Object(M.b)("admin.s3.testing"),loading_default:"Testing...",error_message:Object(M.b)("admin.s3.s3Fail"),error_message_default:"Connection unsuccessful: {error}",success_message:Object(M.b)("admin.s3.s3Success"),success_message_default:"Connection was successful"}]}},image_proxy:{url:"environment/image_proxy",title:Object(M.b)("admin.sidebar.imageProxy"),title_default:"Image Proxy",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"ImageProxy",name:Object(M.b)("admin.environment.imageProxy"),name_default:"Image Proxy",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ImageProxySettings.Enable",label:Object(M.b)("admin.image.enableProxy"),label_default:"Enable Image Proxy:",help_text:Object(M.b)("admin.image.enableProxyDescription"),help_text_default:"When true, enables an image proxy for loading all Markdown images."},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"ImageProxySettings.ImageProxyType",label:Object(M.b)("admin.image.proxyType"),label_default:"Image Proxy Type:",help_text:Object(M.b)("admin.image.proxyTypeDescription"),help_text_default:"Configure an image proxy to load all Markdown images through a proxy. The image proxy prevents users from making insecure image requests, provides caching for increased performance, and automates image adjustments such as resizing. See [documentation](!https://about.mattermost.com/default-image-proxy-documentation) to learn more.",help_text_markdown:!0,options:[{value:"atmos/camo",display_name:Object(M.b)("atmos/camo"),display_name_default:"atmos/camo"},{value:"local",display_name:Object(M.b)("local"),display_name_default:"local"}],isDisabled:Uo.stateIsFalse("ImageProxySettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ImageProxySettings.RemoteImageProxyURL",label:Object(M.b)("admin.image.proxyURL"),label_default:"Remote Image Proxy URL:",help_text:Object(M.b)("admin.image.proxyURLDescription"),help_text_default:"URL of your remote image proxy server.",isDisabled:Uo.either(Uo.stateIsFalse("ImageProxySettings.Enable"),Uo.stateEquals("ImageProxySettings.ImageProxyType","local"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ImageProxySettings.RemoteImageProxyOptions",label:Object(M.b)("admin.image.proxyOptions"),label_default:"Remote Image Proxy Options:",help_text:Object(M.b)("admin.image.proxyOptionsDescription"),help_text_default:"Additional options such as the URL signing key. Refer to your image proxy documentation to learn more about what options are supported.",isDisabled:Uo.either(Uo.stateIsFalse("ImageProxySettings.Enable"),Uo.stateEquals("ImageProxySettings.ImageProxyType","local"))}]}},smtp:{url:"environment/smtp",title:Object(M.b)("admin.sidebar.smtp"),title_default:"SMTP",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"SMTP",name:Object(M.b)("admin.environment.smtp"),name_default:"SMTP",settings:[{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.SMTPServer",label:Object(M.b)("admin.environment.smtp.smtpServer.title"),label_default:"SMTP Server:",placeholder:Object(M.b)("admin.environment.smtp.smtpServer.placeholder"),placeholder_default:'Ex: "smtp.yourcompany.com", "email-smtp.us-east-1.amazonaws.com"',help_text:Object(M.b)("admin.environment.smtp.smtpServer.description"),help_text_default:"Location of SMTP email server."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.SMTPPort",label:Object(M.b)("admin.environment.smtp.smtpPort.title"),label_default:"SMTP Server Port:",placeholder:Object(M.b)("admin.environment.smtp.smtpPort.placeholder"),placeholder_default:'Ex: "25", "465", "587"',help_text:Object(M.b)("admin.environment.smtp.smtpPort.description"),help_text_default:"Port of SMTP email server."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSMTPAuth",label:Object(M.b)("admin.environment.smtp.smtpAuth.title"),label_default:"Enable SMTP Authentication:",help_text:Object(M.b)("admin.environment.smtp.smtpAuth.description"),help_text_default:"When true, SMTP Authentication is enabled."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.SMTPUsername",label:Object(M.b)("admin.environment.smtp.smtpUsername.title"),label_default:"SMTP Server Username:",placeholder:Object(M.b)("admin.environment.smtp.smtpUsername.placeholder"),placeholder_default:'Ex: "admin@yourcompany.com", "AKIADTOVBGERKLCBV"',help_text:Object(M.b)("admin.environment.smtp.smtpUsername.description"),help_text_default:"Obtain this credential from administrator setting up your email server.",isDisabled:Uo.stateIsFalse("EmailSettings.EnableSMTPAuth")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.SMTPPassword",label:Object(M.b)("admin.environment.smtp.smtpPassword.title"),label_default:"SMTP Server Password:",placeholder:Object(M.b)("admin.environment.smtp.smtpPassword.placeholder"),placeholder_default:'Ex: "yourpassword", "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',help_text:Object(M.b)("admin.environment.smtp.smtpPassword.description"),help_text_default:"Obtain this credential from administrator setting up your email server.",isDisabled:Uo.stateIsFalse("EmailSettings.EnableSMTPAuth")},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"EmailSettings.ConnectionSecurity",label:Object(M.b)("admin.environment.smtp.connectionSecurity.title"),label_default:"Connection Security:",help_text:jo,options:[{value:"",display_name:Object(M.b)("admin.environment.smtp.connectionSecurity.option.none"),display_name_default:"None"},{value:"TLS",display_name:Object(M.b)("admin.environment.smtp.connectionSecurity.option.tls"),display_name_default:"TLS (Recommended)"},{value:"STARTTLS",display_name:Object(M.b)("admin.environment.smtp.connectionSecurity.option.starttls"),display_name_default:"STARTTLS"}]},{type:O.j.SettingsTypes.TYPE_BUTTON,action:_.I,key:"TestSmtpConnection",label:Object(M.b)("admin.environment.smtp.connectionSmtpTest"),label_default:"Test Connection",loading:Object(M.b)("admin.environment.smtp.testing"),loading_default:"Testing...",error_message:Object(M.b)("admin.environment.smtp.smtpFail"),error_message_default:"Connection unsuccessful: {error}",success_message:Object(M.b)("admin.environment.smtp.smtpSuccess"),success_message_default:"No errors were reported while sending an email. Please check your inbox to make sure."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.SkipServerCertificateVerification",label:Object(M.b)("admin.environment.smtp.skipServerCertificateVerification.title"),label_default:"Skip Server Certificate Verification:",help_text:Object(M.b)("admin.environment.smtp.skipServerCertificateVerification.description"),help_text_default:"When true, Mattermost will not verify the email server certificate."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableSecurityFixAlert",label:Object(M.b)("admin.environment.smtp.enableSecurityFixAlert.title"),label_default:"Enable Security Alerts:",help_text:Object(M.b)("admin.environment.smtp.enableSecurityFixAlert.description"),help_text_default:"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled."}]}},push_notification_server:{url:"environment/push_notification_server",title:Object(M.b)("admin.sidebar.pushNotificationServer"),title_default:"Push Notification Server",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),searchableStrings:["admin.environment.pushNotificationServer","admin.email.pushTitle","admin.email.pushServerTitle","admin.email.pushContentTitle","admin.email.pushContentDesc"],schema:{id:"PushNotificationsSettings",component:class extends Ee{constructor(...e){super(...e),so(this,"canSave",()=>"mhpns"!==this.state.pushNotificationServerType||this.state.agree),so(this,"handleAgreeChange",e=>{this.setState({agree:e.target.checked})}),so(this,"handleDropdownChange",(e,t)=>{"pushNotificationServerType"===e&&(this.setState({agree:!1}),"mhpns"===t?this.setState({pushNotificationServer:O.Q.MHPNS}):"mtpns"===t?this.setState({pushNotificationServer:O.Q.MTPNS}):"custom"!==t||"mtpns"!==this.state.pushNotificationServerType&&"mhpns"!==this.state.pushNotificationServerType||this.setState({pushNotificationServer:""})),this.handleChange(e,t)}),so(this,"getConfigFromState",e=>(e.EmailSettings.SendPushNotifications="off"!==this.state.pushNotificationServerType,e.EmailSettings.PushNotificationServer=this.state.pushNotificationServer.trim(),e.TeamSettings.MaxNotificationsPerChannel=this.state.maxNotificationsPerChannel,e)),so(this,"isPushNotificationServerSetByEnv",()=>this.isSetByEnv("EmailSettings.SendPushNotifications")||this.isSetByEnv("EmailSettings.PushNotificationServer")),so(this,"renderSettings",()=>{const e=[];e.push({value:"off",text:U.jb("admin.email.pushOff","Do not send push notifications")}),"true"===this.props.license.IsLicensed&&"true"===this.props.license.MHPNS&&e.push({value:"mhpns",text:U.jb("admin.email.mhpns","Use HPNS connection with uptime SLA to send notifications to iOS and Android apps")}),e.push({value:"mtpns",text:U.jb("admin.email.mtpns","Use TPNS connection to send notifications to iOS and Android apps")}),e.push({value:"custom",text:U.jb("admin.email.selfPush","Manually enter Push Notification Service location")});let t,a=null,n=null;return"off"===this.state.pushNotificationServerType?a=x.a.createElement(P.b,{id:"admin.email.pushOffHelp",defaultMessage:"Please see [documentation on push notifications](!https://about.mattermost.com/default-mobile-push-notifications/) to learn more about setup options."}):n="mhpns"===this.state.pushNotificationServerType?x.a.createElement(P.b,{id:"admin.email.mhpnsHelp",defaultMessage:"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about the [Mattermost Hosted Push Notification Service](!https://about.mattermost.com/default-hpns/)."}):"mtpns"===this.state.pushNotificationServerType?x.a.createElement(P.b,{id:"admin.email.mtpnsHelp",defaultMessage:"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about the [Mattermost Test Push Notification Service](!https://about.mattermost.com/default-tpns/)."}):x.a.createElement(P.b,{id:"admin.email.easHelp",defaultMessage:"Learn more about compiling and deploying your own mobile apps from an [Enterprise App Store](!https://about.mattermost.com/default-enterprise-app-store)."}),"mhpns"===this.state.pushNotificationServerType&&(t=x.a.createElement("div",{className:"form-group"},x.a.createElement("div",{className:"col-sm-4"}),x.a.createElement("div",{className:"col-sm-8"},x.a.createElement("input",{type:"checkbox",ref:"agree",checked:this.state.agree,onChange:this.handleAgreeChange}),x.a.createElement(P.b,{id:"admin.email.agreeHPNS",defaultMessage:" I understand and accept the Mattermost Hosted Push Notification Service [Terms of Service](!https://about.mattermost.com/hpns-terms/) and [Privacy Policy](!https://about.mattermost.com/hpns-privacy/)."})))),x.a.createElement(Oe,null,x.a.createElement(Ye,{id:"pushNotificationServerType",values:e,label:x.a.createElement(w.a,{id:"admin.email.pushTitle",defaultMessage:"Enable Push Notifications: "}),value:this.state.pushNotificationServerType,onChange:this.handleDropdownChange,helpText:a,setByEnv:this.isPushNotificationServerSetByEnv()}),t,x.a.createElement(je,{id:"pushNotificationServer",label:x.a.createElement(w.a,{id:"admin.email.pushServerTitle",defaultMessage:"Push Notification Server:"}),placeholder:U.jb("admin.email.pushServerEx",'E.g.: "https://push-test.mattermost.com"'),helpText:n,value:this.state.pushNotificationServer,onChange:this.handleChange,disabled:"custom"!==this.state.pushNotificationServerType,setByEnv:this.isSetByEnv("EmailSettings.PushNotificationServer")}),x.a.createElement(je,{id:"maxNotificationsPerChannel",type:"number",label:x.a.createElement(w.a,{id:"admin.team.maxNotificationsPerChannelTitle",defaultMessage:"Max Notifications Per Channel:"}),placeholder:U.jb("admin.team.maxNotificationsPerChannelExample",'E.g.: "1000"'),helpText:x.a.createElement(P.b,{id:"admin.team.maxNotificationsPerChannelDescription",defaultMessage:"Maximum total number of users in a channel before users typing messages, @all, @here, and @channel no longer send notifications because of performance."}),value:this.state.maxNotificationsPerChannel,onChange:this.handleChange,setByEnv:this.isSetByEnv("TeamSettings.MaxNotificationsPerChannel")}))})}getStateFromConfig(e){let t="custom",a=!1;e.EmailSettings.SendPushNotifications?e.EmailSettings.PushNotificationServer===O.Q.MHPNS&&"true"===this.props.license.IsLicensed&&"true"===this.props.license.MHPNS?(t="mhpns",a=!0):e.EmailSettings.PushNotificationServer===O.Q.MTPNS&&(t="mtpns"):t="off";let n=e.EmailSettings.PushNotificationServer;return"mtpns"===t?n=O.Q.MTPNS:"mhpns"===t&&(n=O.Q.MHPNS),{pushNotificationServerType:t,pushNotificationServer:n,maxNotificationsPerChannel:e.TeamSettings.MaxNotificationsPerChannel,agree:a}}renderTitle(){return x.a.createElement(w.a,{id:"admin.environment.pushNotificationServer",defaultMessage:"Push Notification Server"})}}}},high_availability:{url:"environment/high_availability",title:Object(M.b)("admin.sidebar.highAvailability"),title_default:"High Availability",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("Cluster")),Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")),searchableStrings:["admin.advance.cluster","admin.cluster.noteDescription","admin.cluster.enableTitle","admin.cluster.enableDescription","admin.cluster.ClusterName","admin.cluster.ClusterNameDesc","admin.cluster.OverrideHostname","admin.cluster.OverrideHostnameDesc","admin.cluster.UseIpAddress","admin.cluster.UseIpAddressDesc","admin.cluster.UseExperimentalGossip","admin.cluster.UseExperimentalGossipDesc","admin.cluster.GossipPort","admin.cluster.GossipPortDesc","admin.cluster.StreamingPort","admin.cluster.StreamingPortDesc"],schema:{id:"ClusterSettings",component:class extends Ee{constructor(...e){super(...e),Eo(this,"getConfigFromState",e=>(e.ClusterSettings.Enable=this.state.Enable,e.ClusterSettings.ClusterName=this.state.ClusterName,e.ClusterSettings.OverrideHostname=this.state.OverrideHostname,e.ClusterSettings.UseIpAddress=this.state.UseIpAddress,e.ClusterSettings.UseExperimentalGossip=this.state.UseExperimentalGossip,e.ClusterSettings.GossipPort=this.parseIntNonZero(this.state.GossipPort,8074),e.ClusterSettings.StreamingPort=this.parseIntNonZero(this.state.StreamingPort,8075),e)),Eo(this,"overrideHandleChange",(e,t)=>{this.setState({showWarning:!0}),this.handleChange(e,t)}),Eo(this,"renderSettings",()=>{if(!("true"===this.props.license.IsLicensed&&"true"===this.props.license.Cluster))return null;var e=null;Ft.Client4.clusterId&&(e=x.a.createElement("div",{style:So.configLoadedFromCluster,className:"alert alert-warning"},x.a.createElement(Ge.a,null),x.a.createElement(P.b,{id:"admin.cluster.loadedFrom",defaultMessage:"This configuration file was loaded from Node ID {clusterId}. Please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html) if you are accessing the System Console through a load balancer and experiencing issues.",values:{clusterId:Ft.Client4.clusterId}})));var t=null;this.state.showWarning&&(t=x.a.createElement("div",{style:So.warning,className:"alert alert-warning"},x.a.createElement(Ge.a,null),x.a.createElement(P.b,{id:"admin.cluster.should_not_change",defaultMessage:"WARNING: These settings may not sync with the other servers in the cluster. High Availability inter-node communication will not start until you modify the config.json to be identical on all servers and restart Mattermost. Please see the [documentation](!http://docs.mattermost.com/deployment/cluster.html) on how to add or remove a server from the cluster. If you are accessing the System Console through a load balancer and experiencing issues, please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html)."})));var a=null;return this.state.Enable&&(a=x.a.createElement(yo,null)),x.a.createElement(Oe,null,e,a,x.a.createElement("div",{className:"banner"},x.a.createElement(w.a,{id:"admin.cluster.noteDescription",defaultMessage:"Changing properties in this section will require a server restart before taking effect."})),t,x.a.createElement(we,{id:"Enable",label:x.a.createElement(w.a,{id:"admin.cluster.enableTitle",defaultMessage:"Enable High Availability Mode:"}),helpText:x.a.createElement(P.b,{id:"admin.cluster.enableDescription",defaultMessage:"When true, Mattermost will run in High Availability mode. Please see [documentation](!http://docs.mattermost.com/deployment/cluster.html) to learn more about configuring High Availability for Mattermost."}),value:this.state.Enable,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.Enable")}),x.a.createElement(je,{id:"ClusterName",label:x.a.createElement(w.a,{id:"admin.cluster.ClusterName",defaultMessage:"Cluster Name:"}),placeholder:U.jb("admin.cluster.ClusterNameEx",'E.g.: "Production" or "Staging"'),helpText:x.a.createElement(w.a,{id:"admin.cluster.ClusterNameDesc",defaultMessage:"The cluster to join by name.  Only nodes with the same cluster name will join together.  This is to support Blue-Green deployments or staging pointing to the same database."}),value:this.state.ClusterName,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.ClusterName")}),x.a.createElement(je,{id:"OverrideHostname",label:x.a.createElement(w.a,{id:"admin.cluster.OverrideHostname",defaultMessage:"Override Hostname:"}),placeholder:U.jb("admin.cluster.OverrideHostnameEx",'E.g.: "app-server-01"'),helpText:x.a.createElement(w.a,{id:"admin.cluster.OverrideHostnameDesc",defaultMessage:"The default value of <blank> will attempt to get the Hostname from the OS or use the IP Address.  You can override the hostname of this server with this property.  It is not recommended to override the Hostname unless needed. This property can also be set to a specific IP Address if needed."}),value:this.state.OverrideHostname,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.OverrideHostname")}),x.a.createElement(we,{id:"UseIpAddress",label:x.a.createElement(w.a,{id:"admin.cluster.UseIpAddress",defaultMessage:"Use IP Address:"}),helpText:x.a.createElement(ce.a,{id:"admin.cluster.UseIpAddressDesc",defaultMessage:"When true, the cluster will attempt to communicate via IP Address vs using the hostname."}),value:this.state.UseIpAddress,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.UseIpAddress")}),x.a.createElement(we,{id:"UseExperimentalGossip",label:x.a.createElement(w.a,{id:"admin.cluster.UseExperimentalGossip",defaultMessage:"Use Experimental Gossip:"}),helpText:x.a.createElement(ce.a,{id:"admin.cluster.UseExperimentalGossipDesc",defaultMessage:"When true, the server will attempt to communicate via the gossip protocol over the gossip port.  When false the server will attempt to communicate over the streaming port. When false the gossip port and protocol are still used to determine cluster health."}),value:this.state.UseExperimentalGossip,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.UseExperimentalGossip")}),x.a.createElement(je,{id:"GossipPort",label:x.a.createElement(w.a,{id:"admin.cluster.GossipPort",defaultMessage:"Gossip Port:"}),placeholder:U.jb("admin.cluster.GossipPortEx",'E.g.: "8074"'),helpText:x.a.createElement(w.a,{id:"admin.cluster.GossipPortDesc",defaultMessage:"The port used for the gossip protocol.  Both UDP and TCP should be allowed on this port."}),value:this.state.GossipPort,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.GossipPort")}),x.a.createElement(je,{id:"StreamingPort",label:x.a.createElement(w.a,{id:"admin.cluster.StreamingPort",defaultMessage:"Streaming Port:"}),placeholder:U.jb("admin.cluster.StreamingPortEx",'E.g.: "8075"'),helpText:x.a.createElement(w.a,{id:"admin.cluster.StreamingPortDesc",defaultMessage:"The port used for streaming data between servers."}),value:this.state.StreamingPort,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.StreamingPort")}))})}getStateFromConfig(e){const t=e.ClusterSettings;return{Enable:t.Enable,ClusterName:t.ClusterName,OverrideHostname:t.OverrideHostname,UseIpAddress:t.UseIpAddress,UseExperimentalGossip:t.UseExperimentalGossip,GossipPort:t.GossipPort,StreamingPort:t.StreamingPort,showWarning:!1}}renderTitle(){return x.a.createElement(w.a,{id:"admin.advance.cluster",defaultMessage:"High Availability"})}}}},rate_limiting:{url:"environment/rate_limiting",title:Object(M.b)("admin.sidebar.rateLimiting"),title_default:"Rate Limiting",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"ServiceSettings",name:Object(M.b)("admin.rate.title"),name_default:"Rate Limiting",settings:[{type:O.j.SettingsTypes.TYPE_BANNER,label:Object(M.b)("admin.rate.noteDescription"),label_default:"Changing properties other than Site URL in this section will require a server restart before taking effect.",banner_type:"info"},{type:O.j.SettingsTypes.TYPE_BOOL,key:"RateLimitSettings.Enable",label:Object(M.b)("admin.rate.enableLimiterTitle"),label_default:"Enable Rate Limiting:",help_text:Object(M.b)("admin.rate.enableLimiterDescription"),help_text_default:"When true, APIs are throttled at rates specified below."},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"RateLimitSettings.PerSec",label:Object(M.b)("admin.rate.queriesTitle"),label_default:"Maximum Queries per Second:",placeholder:Object(M.b)("admin.rate.queriesExample"),placeholder_default:'E.g.: "10"',help_text:Object(M.b)("admin.rate.queriesDescription"),help_text_default:"Throttles API at this number of requests per second.",isDisabled:Uo.stateEquals("RateLimitSettings.Enable",!1)},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"RateLimitSettings.MaxBurst",label:Object(M.b)("admin.rate.maxBurst"),label_default:"Maximum Burst Size:",placeholder:Object(M.b)("admin.rate.maxBurstExample"),placeholder_default:'E.g.: "100"',help_text:Object(M.b)("admin.rate.maxBurstDescription"),help_text_default:"Maximum number of requests allowed beyond the per second query limit.",isDisabled:Uo.stateEquals("RateLimitSettings.Enable",!1)},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"RateLimitSettings.MemoryStoreSize",label:Object(M.b)("admin.rate.memoryTitle"),label_default:"Memory Store Size:",placeholder:Object(M.b)("admin.rate.memoryExample"),placeholder_default:'E.g.: "10000"',help_text:Object(M.b)("admin.rate.memoryDescription"),help_text_default:'Maximum number of users sessions connected to the system as determined by "Vary rate limit by remote address" and "Vary rate limit by HTTP header".',isDisabled:Uo.stateEquals("RateLimitSettings.Enable",!1)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"RateLimitSettings.VaryByRemoteAddr",label:Object(M.b)("admin.rate.remoteTitle"),label_default:"Vary rate limit by remote address:",help_text:Object(M.b)("admin.rate.remoteDescription"),help_text_default:"When true, rate limit API access by IP address.",isDisabled:Uo.stateEquals("RateLimitSettings.Enable",!1)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"RateLimitSettings.VaryByUser",label:Object(M.b)("admin.rate.varyByUser"),label_default:"Vary rate limit by user:",help_text:Object(M.b)("admin.rate.varyByUserDescription"),help_text_default:"When true, rate limit API access by user athentication token.",isDisabled:Uo.stateEquals("RateLimitSettings.Enable",!1)},{type:O.j.SettingsTypes.TYPE_TEXT,key:"RateLimitSettings.VaryByHeader",label:Object(M.b)("admin.rate.httpHeaderTitle"),label_default:"Vary rate limit by HTTP header:",placeholder:Object(M.b)("admin.rate.httpHeaderExample"),placeholder_default:'E.g.: "X-Real-IP", "X-Forwarded-For"',help_text:Object(M.b)("admin.rate.httpHeaderDescription"),help_text_default:'When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring NGINX set to "X-Real-IP", when configuring AmazonELB set to "X-Forwarded-For").',isDisabled:Uo.either(Uo.stateEquals("RateLimitSettings.Enable",!1),Uo.stateEquals("RateLimitSettings.VaryByRemoteAddr",!0))}]}},logging:{url:"environment/logging",title:Object(M.b)("admin.sidebar.logging"),title_default:"Logging",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"LogSettings",name:Object(M.b)("admin.general.log"),name_default:"Logging",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableConsole",label:Object(M.b)("admin.log.consoleTitle"),label_default:"Output logs to console: ",help_text:Object(M.b)("admin.log.consoleDescription"),help_text_default:"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout). Changing this setting requires a server restart before taking effect."},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"LogSettings.ConsoleLevel",label:Object(M.b)("admin.log.levelTitle"),label_default:"Console Log Level:",help_text:Object(M.b)("admin.log.levelDescription"),help_text_default:"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.",options:No,isDisabled:Uo.stateIsFalse("LogSettings.EnableConsole")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LogSettings.ConsoleJson",label:Object(M.b)("admin.log.consoleJsonTitle"),label_default:"Output console logs as JSON:",help_text:Object(M.b)("admin.log.jsonDescription"),help_text_default:"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.",isDisabled:Uo.stateIsFalse("LogSettings.EnableConsole")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableFile",label:Object(M.b)("admin.log.fileTitle"),label_default:"Output logs to file: ",help_text:Object(M.b)("admin.log.fileDescription"),help_text_default:"Typically set to true in production. When true, logged events are written to the mattermost.log file in the directory specified in the File Log Directory field. The logs are rotated at 10,000 lines and archived to a file in the same directory, and given a name with a datestamp and serial number. For example, mattermost.2017-03-31.001. Changing this setting requires a server restart before taking effect."},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"LogSettings.FileLevel",label:Object(M.b)("admin.log.fileLevelTitle"),label_default:"File Log Level:",help_text:Object(M.b)("admin.log.fileLevelDescription"),help_text_default:"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.",options:No,isDisabled:Uo.stateIsFalse("LogSettings.EnableFile")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LogSettings.FileJson",label:Object(M.b)("admin.log.fileJsonTitle"),label_default:"Output file logs as JSON:",help_text:Object(M.b)("admin.log.jsonDescription"),help_text_default:"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.",isDisabled:Uo.stateIsFalse("LogSettings.EnableFile")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LogSettings.FileLocation",label:Object(M.b)("admin.log.locationTitle"),label_default:"File Log Directory:",help_text:Object(M.b)("admin.log.locationDescription"),help_text_default:"The location of the log files. If blank, they are stored in the ./logs directory. The path that you set must exist and Mattermost must have write permissions in it. Changing this setting requires a server restart before taking effect.",placeholder:Object(M.b)("admin.log.locationPlaceholder"),placeholder_default:"Enter your file location",isDisabled:Uo.stateIsFalse("LogSettings.EnableFile")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableWebhookDebugging",label:Object(M.b)("admin.log.enableWebhookDebugging"),label_default:"Enable Webhook Debugging:",help_text:Object(M.b)("admin.log.enableWebhookDebuggingDescription"),help_text_default:'When true, sends webhook debug messages to the server logs. To also output the request body of incoming webhooks, set {boldedLogLevel} to "DEBUG".',help_text_values:{boldedLogLevel:x.a.createElement("strong",null,x.a.createElement(w.a,{id:"admin.log.logLevel",defaultMessage:"Log Level"}))}},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableDiagnostics",label:Object(M.b)("admin.log.enableDiagnostics"),label_default:"Enable Diagnostics and Error Reporting:",help_text:Object(M.b)("admin.log.enableDiagnosticsDescription"),help_text_default:"Enable this feature to improve the quality and performance of Mattermost by sending error reporting and diagnostic information to Mattermost, Inc. Read our [privacy policy](!https://about.mattermost.com/default-privacy-policy/) to learn more.",help_text_markdown:!0,onConfigSave:(e,t)=>(t&&t!==e&&Object(Ut.d)("ui","diagnostics_disabled"),e)}]}},session_lengths:{url:"environment/session_lengths",title:Object(M.b)("admin.sidebar.sessionLengths"),title_default:"Session Lengths",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"SessionLengths",name:Object(M.b)("admin.environment.sessionLengths"),name_default:"Session Lengths",settings:[{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionLengthWebInDays",label:Object(M.b)("admin.service.webSessionDays"),label_default:"Session Length AD/LDAP and Email (days):",help_text:Object(M.b)("admin.service.webSessionDaysDesc"),help_text_default:"The number of days from the last time a user entered their credentials to the expiry of the users session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.",placeholder:Object(M.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionLengthMobileInDays",label:Object(M.b)("admin.service.mobileSessionDays"),label_default:"Session Length Mobile (days):",help_text:Object(M.b)("admin.service.mobileSessionDaysDesc"),help_text_default:"The number of days from the last time a user entered their credentials to the expiry of the users session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.",placeholder:Object(M.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionLengthSSOInDays",label:Object(M.b)("admin.service.ssoSessionDays"),label_default:"Session Length SSO (days):",help_text:Object(M.b)("admin.service.ssoSessionDaysDesc"),help_text_default:"The number of days from the last time a user entered their credentials to the expiry of the users session. If the authentication method is SAML or GitLab, the user may automatically be logged back in to Mattermost if they are already logged in to SAML or GitLab. After changing this setting, the setting will take effect after the next time the user enters their credentials.",placeholder:Object(M.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionCacheInMinutes",label:Object(M.b)("admin.service.sessionCache"),label_default:"Session Cache (minutes):",help_text:Object(M.b)("admin.service.sessionCacheDesc"),help_text_default:"The number of minutes to cache a session in memory.",placeholder:Object(M.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionIdleTimeoutInMinutes",label:Object(M.b)("admin.service.sessionIdleTimeout"),label_default:"Session Idle Timeout (minutes):",help_text:Object(M.b)("admin.service.sessionIdleTimeoutDesc"),help_text_default:"The number of minutes from the last time a user was active on the system to the expiry of the user's session. Once expired, the user will need to log in to continue. Minimum is 5 minutes, and 0 is unlimited.\n \nApplies to the desktop app and browsers. For mobile apps, use an EMM provider to lock the app when not in use. In High Availability mode, enable IP hash load balancing for reliable timeout measurement.",help_text_markdown:!0,placeholder:Object(M.b)("admin.service.sessionIdleTimeoutEx"),placeholder_default:'E.g.: "60"',isHidden:Uo.isnt(Uo.licensedForFeature("Compliance")),onConfigSave:e=>0!==e&&e<5?5:e}]}},metrics:{url:"environment/performance_monitoring",title:Object(M.b)("admin.sidebar.metrics"),title_default:"Performance Monitoring",isHidden:Uo.either(Uo.isnt(Uo.licensedForFeature("Metrics")),Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")),schema:{id:"MetricsSettings",name:Object(M.b)("admin.advance.metrics"),name_default:"Performance Monitoring",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"MetricsSettings.Enable",label:Object(M.b)("admin.metrics.enableTitle"),label_default:"Enable Performance Monitoring:",help_text:Object(M.b)("admin.metrics.enableDescription"),help_text_default:"When true, Mattermost will enable performance monitoring collection and profiling. Please see [documentation](!http://docs.mattermost.com/deployment/metrics.html) to learn more about configuring performance monitoring for Mattermost.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_TEXT,key:"MetricsSettings.ListenAddress",label:Object(M.b)("admin.metrics.listenAddressTitle"),label_default:"Listen Address:",placeholder:Object(M.b)("admin.metrics.listenAddressEx"),placeholder_default:'E.g.: ":8067"',help_text:Object(M.b)("admin.metrics.listenAddressDesc"),help_text_default:"The address the server will listen on to expose performance metrics."}]}},developer:{url:"environment/developer",title:Object(M.b)("admin.sidebar.developer"),title_default:"Developer",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"ServiceSettings",name:Object(M.b)("admin.developer.title"),name_default:"Developer Settings",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableTesting",label:Object(M.b)("admin.service.testingTitle"),label_default:"Enable Testing Commands:",help_text:Object(M.b)("admin.service.testingDescription"),help_text_default:"When true, /test slash command is enabled to load test accounts, data and text formatting. Changing this requires a server restart before taking effect."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableDeveloper",label:Object(M.b)("admin.service.developerTitle"),label_default:"Enable Developer Mode: ",help_text:Object(M.b)("admin.service.developerDesc"),help_text_default:"When true, JavaScript errors are shown in a purple bar at the top of the user interface. Not recommended for use in production."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.AllowedUntrustedInternalConnections",label:Object(M.b)("admin.service.internalConnectionsTitle"),label_default:"Allow untrusted internal connections to: ",placeholder:Object(M.b)("admin.service.internalConnectionsEx"),placeholder_default:"webhooks.internal.example.com 127.0.0.1 10.0.16.0/28",help_text:Object(M.b)("admin.service.internalConnectionsDesc"),help_text_default:"A whitelist of local network addresses that can be requested by the Mattermost server on behalf of a client. Care should be used when configuring this setting to prevent unintended access to your local network. See [documentation](!https://mattermost.com/pl/default-allow-untrusted-internal-connections) to learn more.",help_text_markdown:!0}]}}},site:{icon:"fa-cogs",sectionTitle:Object(M.b)("admin.sidebar.site"),sectionTitleDefault:"Site Configuration",customization:{url:"site_config/customization",title:Object(M.b)("admin.sidebar.customization"),title_default:"Customization",schema:{id:"Customization",name:Object(M.b)("admin.site.customization"),name_default:"Customization",settings:[{type:O.j.SettingsTypes.TYPE_TEXT,key:"TeamSettings.SiteName",label:Object(M.b)("admin.team.siteNameTitle"),label_default:"Site Name:",help_text:Object(M.b)("admin.team.siteNameDescription"),help_text_default:'Name of service shown in login screens and UI. When not specified, it defaults to "Mattermost".',placeholder:Object(M.b)("admin.team.siteNameExample"),placeholder_default:'E.g.: "Mattermost"',max_length:O.j.MAX_SITENAME_LENGTH},{type:O.j.SettingsTypes.TYPE_TEXT,key:"TeamSettings.CustomDescriptionText",label:Object(M.b)("admin.team.brandDescriptionTitle"),label_default:"Site Description: ",help_text:Object(M.b)("admin.team.brandDescriptionHelp"),help_text_default:'Description of service shown in login screens and UI. When not specified, "All team communication in one place, searchable and accessible anywhere" is displayed.',placeholder:Object(M.b)("web.root.signup_info"),placeholder_default:"All team communication in one place, searchable and accessible anywhere"},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableCustomBrand",label:Object(M.b)("admin.team.brandTitle"),label_default:"Enable Custom Branding: ",help_text:Object(M.b)("admin.team.brandDesc"),help_text_default:"Enable custom branding to show an image of your choice, uploaded below, and some help text, written below, on the login page."},{type:O.j.SettingsTypes.TYPE_CUSTOM,component:Zs,isDisabled:Uo.stateIsFalse("TeamSettings.EnableCustomBrand"),key:"CustomBrandImage"},{type:O.j.SettingsTypes.TYPE_LONG_TEXT,key:"TeamSettings.CustomBrandText",label:Object(M.b)("admin.team.brandTextTitle"),label_default:"Custom Brand Text:",help_text:Object(M.b)("admin.team.brandTextDescription"),help_text_default:"Text that will appear below your custom brand image on your login screen. Supports Markdown-formatted text. Maximum 500 characters allowed.",isDisabled:Uo.stateIsFalse("TeamSettings.EnableCustomBrand"),max_length:O.j.MAX_CUSTOM_BRAND_TEXT_LENGTH},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SupportSettings.HelpLink",label:Object(M.b)("admin.support.helpTitle"),label_default:"Help Link:",help_text:Object(M.b)("admin.support.helpDesc"),help_text_default:"The URL for the Help link on the Mattermost login page, sign-up pages, and Main Menu. If this field is empty, the Help link is hidden from users."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SupportSettings.SupportEmail",label:Object(M.b)("admin.support.emailTitle"),label_default:"Support Email:",help_text:Object(M.b)("admin.support.emailHelp"),help_text_default:"Email address displayed on email notifications and during tutorial for end users to ask support questions."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SupportSettings.TermsOfServiceLink",label:Object(M.b)("admin.support.termsTitle"),label_default:"Terms of Service Link:",help_text:Object(M.b)("admin.support.termsDesc"),help_text_default:'Link to the terms under which users may use your online service. By default, this includes the "Mattermost Conditions of Use (End Users)" explaining the terms under which Mattermost software is provided to end users. If you change the default link to add your own terms for using the service you provide, your new terms must include a link to the default terms so end users are aware of the Mattermost Conditions of Use (End User) for Mattermost software.'},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SupportSettings.PrivacyPolicyLink",label:Object(M.b)("admin.support.privacyTitle"),label_default:"Privacy Policy Link:",help_text:Object(M.b)("admin.support.privacyDesc"),help_text_default:"The URL for the Privacy link on the login and sign-up pages. If this field is empty, the Privacy link is hidden from users."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SupportSettings.AboutLink",label:Object(M.b)("admin.support.aboutTitle"),label_default:"About Link:",help_text:Object(M.b)("admin.support.aboutDesc"),help_text_default:"The URL for the About link on the Mattermost login and sign-up pages. If this field is empty, the About link is hidden from users."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SupportSettings.ReportAProblemLink",label:Object(M.b)("admin.support.problemTitle"),label_default:"Report a Problem Link:",help_text:Object(M.b)("admin.support.problemDesc"),help_text_default:"The URL for the Report a Problem link in the Main Menu. If this field is empty, the link is removed from the Main Menu."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"NativeAppSettings.AppDownloadLink",label:Object(M.b)("admin.customization.appDownloadLinkTitle"),label_default:"Mattermost Apps Download Page Link:",help_text:Object(M.b)("admin.customization.appDownloadLinkDesc"),help_text_default:'Add a link to a download page for the Mattermost apps. When a link is present, an option to "Download Mattermost Apps" will be added in the Main Menu so users can find the download page. Leave this field blank to hide the option from the Main Menu.'},{type:O.j.SettingsTypes.TYPE_TEXT,key:"NativeAppSettings.AndroidAppDownloadLink",label:Object(M.b)("admin.customization.androidAppDownloadLinkTitle"),label_default:"Android App Download Link:",help_text:Object(M.b)("admin.customization.androidAppDownloadLinkDesc"),help_text_default:"Add a link to download the Android app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"NativeAppSettings.IosAppDownloadLink",label:Object(M.b)("admin.customization.iosAppDownloadLinkTitle"),label_default:"iOS App Download Link:",help_text:Object(M.b)("admin.customization.iosAppDownloadLinkDesc"),help_text_default:"Add a link to download the iOS app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing."}]}},localization:{url:"site_config/localization",title:Object(M.b)("admin.sidebar.localization"),title_default:"Localization",schema:{id:"LocalizationSettings",name:Object(M.b)("admin.site.localization"),name_default:"Localization",settings:[{type:O.j.SettingsTypes.TYPE_LANGUAGE,key:"LocalizationSettings.DefaultServerLocale",label:Object(M.b)("admin.general.localization.serverLocaleTitle"),label_default:"Default Server Language:",help_text:Object(M.b)("admin.general.localization.serverLocaleDescription"),help_text_default:"Default language for system messages. Changing this will require a server restart before taking effect."},{type:O.j.SettingsTypes.TYPE_LANGUAGE,key:"LocalizationSettings.DefaultClientLocale",label:Object(M.b)("admin.general.localization.clientLocaleTitle"),label_default:"Default Client Language:",help_text:Object(M.b)("admin.general.localization.clientLocaleDescription"),help_text_default:"Default language for newly created users and pages where the user hasn't logged in."},{type:O.j.SettingsTypes.TYPE_LANGUAGE,key:"LocalizationSettings.AvailableLocales",label:Object(M.b)("admin.general.localization.availableLocalesTitle"),label_default:"Available Languages:",help_text:Object(M.b)("admin.general.localization.availableLocalesDescription"),help_text_markdown:!0,help_text_default:"Set which languages are available for users in Account Settings (leave this field blank to have all supported languages available). If you're manually adding new languages, the **Default Client Language** must be added before saving this setting.\n \nWould like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute.",multiple:!0,no_result:Object(M.b)("admin.general.localization.availableLocalesNoResults"),no_result_default:"No results found",not_present:Object(M.b)("admin.general.localization.availableLocalesNotPresent"),not_present_default:"The default client language must be included in the available list"}]}},users_and_teams:{url:"site_config/users_and_teams",title:Object(M.b)("admin.sidebar.usersAndTeams"),title_default:"Users and Teams",schema:{id:"UserAndTeamsSettings",name:Object(M.b)("admin.site.usersAndTeams"),name_default:"Users and Teams",settings:[{type:O.j.SettingsTypes.TYPE_PERMISSION,key:"TeamSettings.EnableTeamCreation",label:Object(M.b)("admin.team.teamCreationTitle"),label_default:"Enable Team Creation: ",help_text:Object(M.b)("admin.team.teamCreationDescription"),help_text_default:"When false, only System Administrators can create teams.",permissions_mapping_name:"enableTeamCreation",isHidden:Uo.licensed},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"TeamSettings.MaxUsersPerTeam",label:Object(M.b)("admin.team.maxUsersTitle"),label_default:"Max Users Per Team:",help_text:Object(M.b)("admin.team.maxUsersDescription"),help_text_default:"Maximum total number of users per team, including both active and inactive users.",placeholder:Object(M.b)("admin.team.maxUsersExample"),placeholder_default:'E.g.: "25"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"TeamSettings.MaxChannelsPerTeam",label:Object(M.b)("admin.team.maxChannelsTitle"),label_default:"Max Channels Per Team:",help_text:Object(M.b)("admin.team.maxChannelsDescription"),help_text_default:"Maximum total number of channels per team, including both active and archived channels.",placeholder:Object(M.b)("admin.team.maxChannelsExample"),placeholder_default:'E.g.: "100"'},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"TeamSettings.RestrictDirectMessage",label:Object(M.b)("admin.team.restrictDirectMessage"),label_default:"Enable users to open Direct Message channels with:",help_text:Object(M.b)("admin.team.restrictDirectMessageDesc"),help_text_default:'"Any user on the Mattermost server" enables users to open a Direct Message channel with any user on the server, even if they are not on any teams together. "Any member of the team" limits the ability in the Direct Messages "More" menu to only open Direct Message channels with users who are in the same team.\n \nNote: This setting only affects the UI, not permissions on the server.',options:[{value:"any",display_name:Object(M.b)("admin.team.restrict_direct_message_any"),display_name_default:"Any user on the Mattermost server"},{value:"team",display_name:Object(M.b)("admin.team.restrict_direct_message_team"),display_name_default:"Any member of the team"}]},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"TeamSettings.TeammateNameDisplay",label:Object(M.b)("admin.team.teammateNameDisplay"),label_default:"Teammate Name Display:",help_text:Object(M.b)("admin.team.teammateNameDisplayDesc"),help_text_default:"Set how to display users' names in posts and the Direct Messages list.",options:[{value:O.j.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME,display_name:Object(M.b)("admin.team.showUsername"),display_name_default:"Show username (default)"},{value:O.j.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME,display_name:Object(M.b)("admin.team.showNickname"),display_name_default:"Show nickname if one exists, otherwise show first and last name"},{value:O.j.TEAMMATE_NAME_DISPLAY.SHOW_FULLNAME,display_name:Object(M.b)("admin.team.showFullname"),display_name_default:"Show first and last name"}]},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.LockTeammateNameDisplay",label:Object(M.b)("admin.lockTeammateNameDisplay"),label_default:"Lock Teammate Name Display for all users: ",help_text:Object(M.b)("admin.lockTeammateNameDisplayHelpText"),help_text_default:"When true, disables users' ability to change settings under Main Menu > Account Settings > Display > Teammate Name Display.",isHidden:Uo.isnt(Uo.licensedForFeature("LockTeammateNameDisplay"))},{type:O.j.SettingsTypes.TYPE_PERMISSION,key:"TeamSettings.EditOthersPosts",label:Object(M.b)("admin.team.editOthersPostsTitle"),label_default:"Allow Team Administrators to edit others posts:",help_text:Object(M.b)("admin.team.editOthersPostsDesc"),help_text_default:"When true, Team Administrators and System Administrators can edit other user's posts.  When false, only System Administrators can edit other user's posts.",permissions_mapping_name:"editOthersPosts",isHidden:Uo.licensed},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.ExperimentalViewArchivedChannels",label:Object(M.b)("admin.viewArchivedChannelsTitle"),label_default:"Allow users to view archived channels: ",help_text:Object(M.b)("admin.viewArchivedChannelsHelpText"),help_text_default:"(Beta) When true, allows users to view, share and search for content of channels that have been archived. Users can only view the content in channels of which they were a member before the channel was archived."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"PrivacySettings.ShowEmailAddress",label:Object(M.b)("admin.privacy.showEmailTitle"),label_default:"Show Email Address:",help_text:Object(M.b)("admin.privacy.showEmailDescription"),help_text_default:"When false, hides the email address of members from everyone except System Administrators."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"PrivacySettings.ShowFullName",label:Object(M.b)("admin.privacy.showFullNameTitle"),label_default:"Show Full Name:",help_text:Object(M.b)("admin.privacy.showFullNameDescription"),help_text_default:"When false, hides the full name of members from everyone except System Administrators. Username is shown in place of full name."}]}},notifications:{url:"environment/notifications",title:Object(M.b)("admin.sidebar.notifications"),title_default:"Notifications",schema:{id:"notifications",name:Object(M.b)("admin.environment.notifications"),name_default:"Notifications",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableConfirmNotificationsToChannel",label:Object(M.b)("admin.environment.notifications.enableConfirmNotificationsToChannel.label"),label_default:"Show @channel and @all confirmation dialog:",help_text:Object(M.b)("admin.environment.notifications.enableConfirmNotificationsToChannel.help"),help_text_default:"When true, users will be prompted to confirm when posting @channel and @all in channels with over five members. When false, no confirmation is required."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.SendEmailNotifications",label:Object(M.b)("admin.environment.notifications.enable.label"),label_default:"Enable Email Notifications:",help_text:Object(M.b)("admin.environment.notifications.enable.help"),help_text_default:"Typically set to true in production. When true, Mattermost attempts to send email notifications. When false, email invitations and user account setting change emails are still sent as long as the SMTP server is configured. Developers may set this field to false to skip email setup for faster development."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnablePreviewModeBanner",label:Object(M.b)("admin.environment.notifications.enablePreviewModeBanner.label"),label_default:"Enable Preview Mode Banner:",help_text:Object(M.b)("admin.environment.notifications.enablePreviewModeBanner.help"),help_text_default:"When true, the Preview Mode banner is displayed so users are aware that email notifications are disabled. When false, the Preview Mode banner is not displayed to users.",isDisabled:Uo.either(Uo.stateIsTrue("EmailSettings.SendEmailNotifications"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableEmailBatching",label:Object(M.b)("admin.environment.notifications.enableEmailBatching.label"),label_default:"Enable Email Batching:",help_text:Object(M.b)("admin.environment.notifications.enableEmailBatching.help"),help_text_default:"When true, users will have email notifications for multiple direct messages and mentions combined into a single email. Batching will occur at a default interval of 15 minutes, configurable in Account Settings > Notifications.",isDisabled:Uo.either(Uo.stateIsFalse("EmailSettings.SendEmailNotifications"),Uo.configIsTrue("ClusterSettings","Enable"),Uo.configIsFalse("ServiceSettings","SiteURL"))},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"EmailSettings.EmailNotificationContentsType",label:Object(M.b)("admin.environment.notifications.contents.label"),label_default:"Email Notification Contents:",help_text:Object(M.b)("admin.environment.notifications.contents.help"),help_text_default:"**Send full message contents** - Sender name and channel are included in email notifications. Typically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email.\n  **Send generic description with only sender name** - Only the name of the person who sent the message, with no information about channel name or message contents are included in email notifications. Typically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensedForFeature("EmailNotificationContents")),options:[{value:"full",display_name:Object(M.b)("admin.environment.notifications.contents.full"),display_name_default:"Send full message contents"},{value:"generic",display_name:Object(M.b)("admin.environment.notifications.contents.generic"),display_name_default:"Send generic description with only sender name"}]},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.FeedbackName",label:Object(M.b)("admin.environment.notifications.notificationDisplay.label"),label_default:"Notification Display Name:",placeholder:Object(M.b)("admin.environment.notifications.notificationDisplay.placeholder"),placeholder_default:'Ex: "Mattermost Notification", "System", "No-Reply"',help_text:Object(M.b)("admin.environment.notifications.notificationDisplay.help"),help_text_default:"Display name on email account used when sending notification emails from Mattermost.",isDisabled:Uo.stateIsFalse("EmailSettings.SendEmailNotifications")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.FeedbackEmail",label:Object(M.b)("admin.environment.notifications.feedbackEmail.label"),label_default:"Notification From Address:",placeholder:Object(M.b)("admin.environment.notifications.feedbackEmail.placeholder"),placeholder_default:'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"',help_text:Object(M.b)("admin.environment.notifications.feedbackEmail.help"),help_text_default:"Email address displayed on email account used when sending notification emails from Mattermost.",isDisabled:Uo.stateIsFalse("EmailSettings.SendEmailNotifications"),isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.ReplyToAddress",label:Object(M.b)("admin.environment.notifications.replyToAddress.label"),label_default:"Notification Reply-To Address:",placeholder:Object(M.b)("admin.environment.notifications.replyToAddress.placeholder"),placeholder_default:'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"',help_text:Object(M.b)("admin.environment.notifications.replyToAddress.help"),help_text_default:"Email address used in the Reply-To header when sending notification emails from Mattermost.",isDisabled:Uo.stateIsFalse("EmailSettings.SendEmailNotifications")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.FeedbackOrganization",label:Object(M.b)("admin.environment.notifications.feedbackOrganization.label"),label_default:"Notification Footer Mailing Address:",placeholder:Object(M.b)("admin.environment.notifications.feedbackOrganization.placeholder"),placeholder_default:'Ex: "© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA"',help_text:Object(M.b)("admin.environment.notifications.feedbackOrganization.help"),help_text_default:'Organization name and address displayed on email notifications from Mattermost, such as "© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA". If the field is left empty, the organization name and address will not be displayed.',isDisabled:Uo.stateIsFalse("EmailSettings.SendEmailNotifications")},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"EmailSettings.PushNotificationContents",label:Object(M.b)("admin.environment.notifications.pushContents.label"),label_default:"Push Notification Contents:",help_text:Object(M.b)("admin.environment.notifications.pushContents.help"),help_text_default:"**Generic description with only sender name** - Includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\n **Generic description with sender and channel names** - Includes the name of the person who sent the message and the channel it was sent in, but not the message contents.\n **Full message content sent in the notification payload** - Includes the message contents in the push notification payload that is relayed through Apple's Push Notification Service (APNS) or Google's Firebase Cloud Messaging (FCM). It is **highly recommended** this option only be used with an \"https\" protocol to encrypt the connection and protect confidential information sent in messages.",help_text_markdown:!0,isHidden:Uo.licensedForFeature("IDLoadedPushNotifications"),options:[{value:"generic_no_channel",display_name:Object(M.b)("admin.environment.notifications.pushContents.genericNoChannel"),display_name_default:"Generic description with only sender name"},{value:"generic",display_name:Object(M.b)("admin.environment.notifications.pushContents.generic"),display_name_default:"Generic description with sender and channel names"},{value:"full",display_name:Object(M.b)("admin.environment.notifications.pushContents.full"),display_name_default:"Full message content sent in the notification payload"}]},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"EmailSettings.PushNotificationContents",label:Object(M.b)("admin.environment.notifications.pushContents.label"),label_default:"Push Notification Contents:",help_text:Object(M.b)("admin.environment.notifications.pushContents.withIdLoaded.help"),help_text_default:"**Generic description with only sender name** - Includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\n **Generic description with sender and channel names** - Includes the name of the person who sent the message and the channel it was sent in, but not the message contents.\n **Full message content sent in the notification payload** - Includes the message contents in the push notification payload that is relayed through Apple's Push Notification Service (APNS) or Google's Firebase Cloud Messaging (FCM). It is **highly recommended** this option only be used with an \"https\" protocol to encrypt the connection and protect confidential information sent in messages.\n **Full message content fetched from the server on receipt** - The notification payload relayed through APNS or FCM contains no message content, instead it contains a unique message ID used to fetch message content from the server when a push notification is received by a device. If the server cannot be reached, a generic notification will be displayed.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensedForFeature("IDLoadedPushNotifications")),options:[{value:"generic_no_channel",display_name:Object(M.b)("admin.environment.notifications.pushContents.genericNoChannel"),display_name_default:"Generic description with only sender name"},{value:"generic",display_name:Object(M.b)("admin.environment.notifications.pushContents.generic"),display_name_default:"Generic description with sender and channel names"},{value:"full",display_name:Object(M.b)("admin.environment.notifications.pushContents.full"),display_name_default:"Full message content sent in the notification payload"},{value:"id_loaded",display_name:Object(M.b)("admin.environment.notifications.pushContents.idLoaded"),display_name_default:"Full message content fetched from the server on receipt"}]}]}},announcement_banner:{url:"site_config/announcement_banner",title:Object(M.b)("admin.sidebar.announcement"),title_default:"Announcement Banner",isHidden:Uo.isnt(Uo.licensed),schema:{id:"AnnouncementSettings",name:Object(M.b)("admin.site.announcementBanner"),name_default:"Announcement Banner",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"AnnouncementSettings.EnableBanner",label:Object(M.b)("admin.customization.announcement.enableBannerTitle"),label_default:"Enable Announcement Banner:",help_text:Object(M.b)("admin.customization.announcement.enableBannerDesc"),help_text_default:"Enable an announcement banner across all teams."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"AnnouncementSettings.BannerText",label:Object(M.b)("admin.customization.announcement.bannerTextTitle"),label_default:"Banner Text:",help_text:Object(M.b)("admin.customization.announcement.bannerTextDesc"),help_text_default:"Text that will appear in the announcement banner.",isDisabled:Uo.stateIsFalse("AnnouncementSettings.EnableBanner")},{type:O.j.SettingsTypes.TYPE_COLOR,key:"AnnouncementSettings.BannerColor",label:Object(M.b)("admin.customization.announcement.bannerColorTitle"),label_default:"Banner Color:",isDisabled:Uo.stateIsFalse("AnnouncementSettings.EnableBanner")},{type:O.j.SettingsTypes.TYPE_COLOR,key:"AnnouncementSettings.BannerTextColor",label:Object(M.b)("admin.customization.announcement.bannerTextColorTitle"),label_default:"Banner Text Color:",isDisabled:Uo.stateIsFalse("AnnouncementSettings.EnableBanner")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"AnnouncementSettings.AllowBannerDismissal",label:Object(M.b)("admin.customization.announcement.allowBannerDismissalTitle"),label_default:"Allow Banner Dismissal:",help_text:Object(M.b)("admin.customization.announcement.allowBannerDismissalDesc"),help_text_default:"When true, users can dismiss the banner until its next update. When false, the banner is permanently visible until it is turned off by the System Admin.",isDisabled:Uo.stateIsFalse("AnnouncementSettings.EnableBanner")}]}},emoji:{url:"site_config/emoji",title:Object(M.b)("admin.sidebar.emoji"),title_default:"Emoji",schema:{id:"EmojiSettings",name:Object(M.b)("admin.site.emoji"),name_default:"Emoji",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableEmojiPicker",label:Object(M.b)("admin.customization.enableEmojiPickerTitle"),label_default:"Enable Emoji Picker:",help_text:Object(M.b)("admin.customization.enableEmojiPickerDesc"),help_text_default:"The emoji picker allows users to select emoji to add as reactions or use in messages. Enabling the emoji picker with a large number of custom emoji may slow down performance."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableCustomEmoji",label:Object(M.b)("admin.customization.enableCustomEmojiTitle"),label_default:"Enable Custom Emoji:",help_text:Object(M.b)("admin.customization.enableCustomEmojiDesc"),help_text_default:'Enable users to create custom emoji for use in messages. When enabled, Custom Emoji settings can be accessed by switching to a team and clicking the three dots above the channel sidebar, and selecting "Custom Emoji".'}]}},posts:{url:"site_config/posts",title:Object(M.b)("admin.sidebar.posts"),title_default:"Posts",schema:{id:"PostSettings",name:Object(M.b)("admin.site.posts"),name_default:"Posts",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableLinkPreviews",label:Object(M.b)("admin.customization.enableLinkPreviewsTitle"),label_default:"Enable Link Previews:",help_text:Object(M.b)("admin.customization.enableLinkPreviewsDesc"),help_text_default:"Display a preview of website content, image links and YouTube links below the message when available. The server must be connected to the internet and have access through the firewall (if applicable) to the websites from which previews are expected. Users can disable these previews from Account Settings > Display > Website Link Previews."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableSVGs",label:Object(M.b)("admin.customization.enableSVGsTitle"),label_default:"Enable SVGs:",help_text:Object(M.b)("admin.customization.enableSVGsDesc"),help_text_default:"Enable previews for SVG file attachments and allow them to appear in messages."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableLatex",label:Object(M.b)("admin.customization.enableLatexTitle"),label_default:"Enable Latex Rendering:",help_text:Object(M.b)("admin.customization.enableLatexDesc"),help_text_default:"Enable rending of Latex code. If false, Latex code will be highlighted only."},{type:O.j.SettingsTypes.TYPE_CUSTOM,component:Zt,key:"DisplaySettings.CustomUrlSchemes"},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.GoogleDeveloperKey",label:Object(M.b)("admin.service.googleTitle"),label_default:"Google API Key:",placeholder:Object(M.b)("admin.service.googleExample"),placeholder_default:'E.g.: "7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV"',help_text:Object(M.b)("admin.service.googleDescription"),help_text_default:"Set this key to enable the display of titles for embedded YouTube video previews. Without the key, YouTube previews will still be created based on hyperlinks appearing in messages or comments but they will not show the video title. View a [Google Developers Tutorial](!https://www.youtube.com/watch?v=Im69kzhpR3I) for instructions on how to obtain a key and add YouTube Data API v3 as a service to your key.",help_text_markdown:!0,isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")}]}},file_sharing_downloads:{url:"site_config/file_sharing_downloads",title:Object(M.b)("admin.sidebar.fileSharingDownloads"),title_default:"File Sharing and Downloads",schema:{id:"FileSharingDownloads",name:Object(M.b)("admin.site.fileSharingDownloads"),name_default:"File Sharing and Downloads",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnableFileAttachments",label:Object(M.b)("admin.file.enableFileAttachments"),label_default:"Allow File Sharing:",help_text:Object(M.b)("admin.file.enableFileAttachmentsDesc"),help_text_default:"When false, disables file sharing on the server. All file and image uploads on messages are forbidden across clients and devices, including mobile."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnableMobileUpload",label:Object(M.b)("admin.file.enableMobileUploadTitle"),label_default:"Allow File Uploads on Mobile:",help_text:Object(M.b)("admin.file.enableMobileUploadDesc"),help_text_default:"When false, disables file uploads on mobile apps. If Allow File Sharing is set to true, users can still upload files from a mobile web browser.",isHidden:Uo.isnt(Uo.licensedForFeature("Compliance"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnableMobileDownload",label:Object(M.b)("admin.file.enableMobileDownloadTitle"),label_default:"Allow File Downloads on Mobile:",help_text:Object(M.b)("admin.file.enableMobileDownloadDesc"),help_text_default:"When false, disables file downloads on mobile apps. Users can still download files from a mobile web browser.",isHidden:Uo.isnt(Uo.licensedForFeature("Compliance"))}]}},public_links:{url:"site_config/public_links",title:Object(M.b)("admin.sidebar.publicLinks"),title_default:"Public Links",schema:{id:"PublicLinkSettings",name:Object(M.b)("admin.site.public_links"),name_default:"Public Links",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnablePublicLink",label:Object(M.b)("admin.image.shareTitle"),label_default:"Enable Public File Links: ",help_text:Object(M.b)("admin.image.shareDescription"),help_text_default:"Allow users to share public links to files and images."},{type:O.j.SettingsTypes.TYPE_GENERATED,key:"FileSettings.PublicLinkSalt",label:Object(M.b)("admin.image.publicLinkTitle"),label_default:"Public Link Salt:",help_text:Object(M.b)("admin.image.publicLinkDescription"),help_text_default:'32-character salt added to signing of public image links. Randomly generated on install. Click "Regenerate" to create new salt.'}]}}},authentication:{icon:"fa-shield",sectionTitle:Object(M.b)("admin.sidebar.authentication"),sectionTitleDefault:"Authentication",signup:{url:"authentication/signup",title:Object(M.b)("admin.sidebar.signup"),title_default:"Signup",schema:{id:"SignupSettings",name:Object(M.b)("admin.authentication.signup"),name_default:"Signup",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableUserCreation",label:Object(M.b)("admin.team.userCreationTitle"),label_default:"Enable Account Creation: ",help_text:Object(M.b)("admin.team.userCreationDescription"),help_text_default:"When false, the ability to create accounts is disabled. The create account button displays error when pressed."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"TeamSettings.RestrictCreationToDomains",label:Object(M.b)("admin.team.restrictTitle"),label_default:"Restrict account creation to specified email domains:",help_text:Object(M.b)("admin.team.restrictDescription"),help_text_default:'User accounts can only be created from a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org"). This setting only affects email login for users.',placeholder:Object(M.b)("admin.team.restrictExample"),placeholder_default:'E.g.: "corp.mattermost.com, mattermost.org"',isHidden:Uo.licensed},{type:O.j.SettingsTypes.TYPE_TEXT,key:"TeamSettings.RestrictCreationToDomains",label:Object(M.b)("admin.team.restrictTitle"),label_default:"Restrict account creation to specified email domains:",help_text:Object(M.b)("admin.team.restrictGuestDescription"),help_text_default:'User accounts can only be created from a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org"). This setting only affects email login for users. For Guest users, please add domains under Signup > Guest Access.',placeholder:Object(M.b)("admin.team.restrictExample"),placeholder_default:'E.g.: "corp.mattermost.com, mattermost.org"',isHidden:Uo.isnt(Uo.licensed)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableOpenServer",label:Object(M.b)("admin.team.openServerTitle"),label_default:"Enable Open Server: ",help_text:Object(M.b)("admin.team.openServerDescription"),help_text_default:"When true, anyone can signup for a user account on this server without the need to be invited.",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableEmailInvitations",label:Object(M.b)("admin.team.emailInvitationsTitle"),label_default:"Enable Email Invitations: ",help_text:Object(M.b)("admin.team.emailInvitationsDescription"),help_text_default:"When true users can invite others to the system using email."},{type:O.j.SettingsTypes.TYPE_BUTTON,key:"InvalidateEmailInvitesButton",action:_.u,label:Object(M.b)("admin.team.invalidateEmailInvitesTitle"),label_default:"Invalidate pending email invites",help_text:Object(M.b)("admin.team.invalidateEmailInvitesDescription"),help_text_default:"This will invalidate active email invitations that have not been accepted by the user.  By default email invitations expire after 48 hours.",error_message:Object(M.b)("admin.team.invalidateEmailInvitesFail"),error_message_default:"Unable to invalidate pending email invites: {error}",success_message:Object(M.b)("admin.team.invalidateEmailInvitesSuccess"),success_message_default:"Pending email invitations invalidated successfully"}]}},email:{url:"authentication/email",title:Object(M.b)("admin.sidebar.email"),title_default:"Email",schema:{id:"EmailSettings",name:Object(M.b)("admin.authentication.email"),name_default:"Email",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSignUpWithEmail",label:Object(M.b)("admin.email.allowSignupTitle"),label_default:"Enable account creation with email:",help_text:Object(M.b)("admin.email.allowSignupDescription"),help_text_default:"When true, Mattermost allows account creation using email and password. This value should be false only when you want to limit sign up to a single sign-on service like AD/LDAP, SAML or GitLab."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.RequireEmailVerification",label:Object(M.b)("admin.email.requireVerificationTitle"),label_default:"Require Email Verification: ",help_text:Object(M.b)("admin.email.requireVerificationDescription"),help_text_default:"Typically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false to skip sending verification emails for faster development."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSignInWithEmail",label:Object(M.b)("admin.email.allowEmailSignInTitle"),label_default:"Enable sign-in with email:",help_text:Object(M.b)("admin.email.allowEmailSignInDescription"),help_text_default:"When true, Mattermost allows users to sign in using their email and password."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSignInWithUsername",label:Object(M.b)("admin.email.allowUsernameSignInTitle"),label_default:"Enable sign-in with username:",help_text:Object(M.b)("admin.email.allowUsernameSignInDescription"),help_text_default:"When true, users with email login can sign in using their username and password. This setting does not affect AD/LDAP login."}]}},password:{url:"authentication/password",title:Object(M.b)("admin.sidebar.password"),title_default:"Password",searchableStrings:["user.settings.security.passwordMinLength","admin.security.password",["admin.password.minimumLength",{max:"",min:""}],["admin.password.minimumLengthDescription",{max:"",min:""}],"passwordRequirements","admin.password.lowercase","admin.password.uppercase","admin.password.number","admin.password.symbol","admin.password.preview","admin.service.attemptTitle","admin.service.attemptDescription"],schema:{id:"PasswordSettings",component:class extends Ee{constructor(e){super(e),no(this,"getConfigFromState",e=>(e.PasswordSettings.MinimumLength=this.parseIntNonZero(this.state.passwordMinimumLength,O.Q.MIN_PASSWORD_LENGTH),e.PasswordSettings.Lowercase=this.refs.lowercase.checked,e.PasswordSettings.Uppercase=this.refs.uppercase.checked,e.PasswordSettings.Number=this.refs.number.checked,e.PasswordSettings.Symbol=this.refs.symbol.checked,e.ServiceSettings.MaximumLoginAttempts=this.parseIntNonZero(this.state.maximumLoginAttempts),e)),no(this,"getSampleErrorMsg",e=>{if(this.props.config.PasswordSettings.MinimumLength>O.Q.MAX_PASSWORD_LENGTH||this.props.config.PasswordSettings.MinimumLength<O.Q.MIN_PASSWORD_LENGTH)return x.a.createElement(w.a,{id:"user.settings.security.passwordMinLength",default:"Invalid minimum length, cannot show preview."});let t="user.settings.security.passwordError";return this.refs.lowercase.checked&&(t+="Lowercase"),this.refs.uppercase.checked&&(t+="Uppercase"),this.refs.number.checked&&(t+="Number"),this.refs.symbol.checked&&(t+="Symbol"),x.a.createElement(w.a,{id:t,default:"Your password must contain between {min} and {max} characters.",values:{min:e||O.Q.MIN_PASSWORD_LENGTH,max:O.Q.MAX_PASSWORD_LENGTH}})}),no(this,"handlePasswordLengthChange",(e,t)=>{this.sampleErrorMsg=this.getSampleErrorMsg(t),this.handleChange(e,t)}),no(this,"handleCheckboxChange",(e,t)=>{this.sampleErrorMsg=this.getSampleErrorMsg(this.state.passwordMinimumLength),this.handleChange(e,t)}),no(this,"renderSettings",()=>x.a.createElement(Oe,null,x.a.createElement("div",null,x.a.createElement(je,{id:"passwordMinimumLength",label:x.a.createElement(w.a,{id:"admin.password.minimumLength",defaultMessage:"Minimum Password Length:"}),placeholder:U.jb("admin.password.minimumLengthExample",'E.g.: "5"'),helpText:x.a.createElement(w.a,{id:"admin.password.minimumLengthDescription",defaultMessage:"Minimum number of characters required for a valid password. Must be a whole number greater than or equal to {min} and less than or equal to {max}.",values:{min:O.Q.MIN_PASSWORD_LENGTH,max:O.Q.MAX_PASSWORD_LENGTH}}),value:this.state.passwordMinimumLength,onChange:this.handlePasswordLengthChange,setByEnv:this.isSetByEnv("PasswordSettings.MinimumLength")}),x.a.createElement(Te,{label:x.a.createElement(w.a,{id:"passwordRequirements",defaultMessage:"Password Requirements:"})},x.a.createElement("div",null,x.a.createElement("label",{className:"checkbox-inline"},x.a.createElement("input",{type:"checkbox",ref:"lowercase",defaultChecked:this.state.passwordLowercase,name:"admin.password.lowercase",onChange:this.handleCheckboxChange}),x.a.createElement(w.a,{id:"admin.password.lowercase",defaultMessage:"At least one lowercase letter"}))),x.a.createElement("div",null,x.a.createElement("label",{className:"checkbox-inline"},x.a.createElement("input",{type:"checkbox",ref:"uppercase",defaultChecked:this.state.passwordUppercase,name:"admin.password.uppercase",onChange:this.handleCheckboxChange}),x.a.createElement(w.a,{id:"admin.password.uppercase",defaultMessage:"At least one uppercase letter"}))),x.a.createElement("div",null,x.a.createElement("label",{className:"checkbox-inline"},x.a.createElement("input",{type:"checkbox",ref:"number",defaultChecked:this.state.passwordNumber,name:"admin.password.number",onChange:this.handleCheckboxChange}),x.a.createElement(w.a,{id:"admin.password.number",defaultMessage:"At least one number"}))),x.a.createElement("div",null,x.a.createElement("label",{className:"checkbox-inline"},x.a.createElement("input",{type:"checkbox",ref:"symbol",defaultChecked:this.state.passwordSymbol,name:"admin.password.symbol",onChange:this.handleCheckboxChange}),x.a.createElement(w.a,{id:"admin.password.symbol",defaultMessage:'At least one symbol (e.g. "~!@#$%^&*()")'}))),x.a.createElement("div",null,x.a.createElement("br",null),x.a.createElement("label",null,x.a.createElement(w.a,{id:"admin.password.preview",defaultMessage:"Error message preview:"})),x.a.createElement("br",null),this.sampleErrorMsg))),x.a.createElement(je,{id:"maximumLoginAttempts",label:x.a.createElement(w.a,{id:"admin.service.attemptTitle",defaultMessage:"Maximum Login Attempts:"}),placeholder:U.jb("admin.service.attemptExample",'E.g.: "10"'),helpText:x.a.createElement(w.a,{id:"admin.service.attemptDescription",defaultMessage:"Login attempts allowed before user is locked out and required to reset password via email."}),value:this.state.maximumLoginAttempts,onChange:this.handleChange,setByEnv:this.isSetByEnv("ServiceSettings.MaximumLoginAttempts")}))),this.state=Object.assign(this.state,{passwordMinimumLength:e.config.PasswordSettings.MinimumLength,passwordLowercase:e.config.PasswordSettings.Lowercase,passwordNumber:e.config.PasswordSettings.Number,passwordUppercase:e.config.PasswordSettings.Uppercase,passwordSymbol:e.config.PasswordSettings.Symbol,maximumLoginAttempts:e.config.ServiceSettings.MaximumLoginAttempts}),Object(M.b)("user.settings.security.passwordErrorLowercase"),Object(M.b)("user.settings.security.passwordErrorLowercaseUppercase"),Object(M.b)("user.settings.security.passwordErrorLowercaseUppercaseNumber"),Object(M.b)("user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol"),Object(M.b)("user.settings.security.passwordErrorLowercaseUppercaseSymbol"),Object(M.b)("user.settings.security.passwordErrorLowercaseNumber"),Object(M.b)("user.settings.security.passwordErrorLowercaseNumberSymbol"),Object(M.b)("user.settings.security.passwordErrorLowercaseSymbol"),Object(M.b)("user.settings.security.passwordErrorUppercase"),Object(M.b)("user.settings.security.passwordErrorUppercaseNumber"),Object(M.b)("user.settings.security.passwordErrorUppercaseNumberSymbol"),Object(M.b)("user.settings.security.passwordErrorUppercaseSymbol"),Object(M.b)("user.settings.security.passwordErrorNumber"),Object(M.b)("user.settings.security.passwordErrorNumberSymbol"),Object(M.b)("user.settings.security.passwordErrorSymbol");let t="user.settings.security.passwordError";e.config.PasswordSettings.Lowercase&&(t+="Lowercase"),e.config.PasswordSettings.Uppercase&&(t+="Uppercase"),e.config.PasswordSettings.Number&&(t+="Number"),e.config.PasswordSettings.Symbol&&(t+="Symbol"),this.sampleErrorMsg=x.a.createElement(w.a,{id:t,default:"Your password must contain between {min} and {max} characters.",values:{min:this.state.passwordMinimumLength||O.Q.MIN_PASSWORD_LENGTH,max:O.Q.MAX_PASSWORD_LENGTH}})}getStateFromConfig(e){return{passwordMinimumLength:e.PasswordSettings.MinimumLength,passwordLowercase:e.PasswordSettings.Lowercase,passwordNumber:e.PasswordSettings.Number,passwordUppercase:e.PasswordSettings.Uppercase,passwordSymbol:e.PasswordSettings.Symbol,maximumLoginAttempts:e.ServiceSettings.MaximumLoginAttempts}}renderTitle(){return x.a.createElement(w.a,{id:"admin.security.password",defaultMessage:"Password"})}}}},mfa:{url:"authentication/mfa",title:Object(M.b)("admin.sidebar.mfa"),title_default:"MFA",schema:{id:"ServiceSettings",name:Object(M.b)("admin.authentication.mfa"),name_default:"Multi-factor Authentication",settings:[{type:O.j.SettingsTypes.TYPE_BANNER,label:Object(M.b)("admin.mfa.bannerDesc"),label_default:"[Multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is available for accounts with AD/LDAP or email login. If other login methods are used, MFA should be configured with the authentication provider.",label_markdown:!0,banner_type:"info"},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableMultifactorAuthentication",label:Object(M.b)("admin.service.mfaTitle"),label_default:"Enable Multi-factor Authentication:",help_text:Object(M.b)("admin.service.mfaDesc"),help_text_default:"When true, users with AD/LDAP or email login can add multi-factor authentication to their account using Google Authenticator."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnforceMultifactorAuthentication",label:Object(M.b)("admin.service.enforceMfaTitle"),label_default:"Enforce Multi-factor Authentication:",help_text:Object(M.b)("admin.service.enforceMfaDesc"),help_text_markdown:!0,help_text_default:"When true, [multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is required for login. New users will be required to configure MFA on signup. Logged in users without MFA configured are redirected to the MFA setup page until configuration is complete.\n \nIf your system has users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Mattermost.",isDisabled:Uo.stateIsFalse("ServiceSettings.EnableMultifactorAuthentication"),isHidden:Uo.isnt(Uo.licensedForFeature("MFA"))}]}},ldap:{url:"authentication/ldap",title:Object(M.b)("admin.sidebar.ldap"),title_default:"AD/LDAP",isHidden:Uo.isnt(Uo.licensedForFeature("LDAP")),schema:{id:"LdapSettings",name:Object(M.b)("admin.authentication.ldap"),name_default:"AD/LDAP",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"LdapSettings.Enable",label:Object(M.b)("admin.ldap.enableTitle"),label_default:"Enable sign-in with AD/LDAP:",help_text:Object(M.b)("admin.ldap.enableDesc"),help_text_default:"When true, Mattermost allows login using AD/LDAP"},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LdapSettings.EnableSync",label:Object(M.b)("admin.ldap.enableSyncTitle"),label_default:"Enable Synchronization with AD/LDAP:",help_text:Object(M.b)("admin.ldap.enableSyncDesc"),help_text_default:"When true, Mattermost periodically synchronizes users from AD/LDAP. When false, user attributes are updated from AD/LDAP during user login only."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LdapServer",label:Object(M.b)("admin.ldap.serverTitle"),label_default:"AD/LDAP Server:",help_text:Object(M.b)("admin.ldap.serverDesc"),help_text_default:"The domain or IP address of AD/LDAP server.",placeholder:Object(M.b)("admin.ldap.serverEx"),placeholder_default:'E.g.: "10.0.0.23"',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.LdapPort",label:Object(M.b)("admin.ldap.portTitle"),label_default:"AD/LDAP Port:",help_text:Object(M.b)("admin.ldap.portDesc"),help_text_default:"The port Mattermost will use to connect to the AD/LDAP server. Default is 389.",placeholder:Object(M.b)("admin.ldap.portEx"),placeholder_default:'E.g.: "389"',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"LdapSettings.ConnectionSecurity",label:Object(M.b)("admin.connectionSecurityTitle"),label_default:"Connection Security:",help_text:Po,options:[{value:"",display_name:Object(M.b)("admin.connectionSecurityNone"),display_name_default:"None"},{value:"TLS",display_name:Object(M.b)("admin.connectionSecurityTls"),display_name_default:"TLS (Recommended)"},{value:"STARTTLS",display_name:Object(M.b)("admin.connectionSecurityStart"),display_name_default:"STARTTLS"}],isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LdapSettings.SkipCertificateVerification",label:Object(M.b)("admin.ldap.skipCertificateVerification"),label_default:"Skip Certificate Verification:",help_text:Object(M.b)("admin.ldap.skipCertificateVerificationDesc"),help_text_default:"Skips the certificate verification step for TLS or STARTTLS connections. Skipping certificate verification is not recommended for production environments where TLS is required.",isDisabled:Uo.stateIsFalse("LdapSettings.ConnectionSecurity")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.BaseDN",label:Object(M.b)("admin.ldap.baseTitle"),label_default:"BaseDN:",help_text:Object(M.b)("admin.ldap.baseDesc"),help_text_default:"The Base DN is the Distinguished Name of the location where Mattermost should start its search for user and group objects in the AD/LDAP tree.",placeholder:Object(M.b)("admin.ldap.baseEx"),placeholder_default:'E.g.: "ou=Unit Name,dc=corp,dc=example,dc=com"',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.BindUsername",label:Object(M.b)("admin.ldap.bindUserTitle"),label_default:"Bind Username:",help_text:Object(M.b)("admin.ldap.bindUserDesc"),help_text_default:"The username used to perform the AD/LDAP search. This should typically be an account created specifically for use with Mattermost. It should have access limited to read the portion of the AD/LDAP tree specified in the BaseDN field.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.BindPassword",label:Object(M.b)("admin.ldap.bindPwdTitle"),label_default:"Bind Password:",help_text:Object(M.b)("admin.ldap.bindPwdDesc"),help_text_default:'Password of the user given in "Bind Username".',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.UserFilter",label:Object(M.b)("admin.ldap.userFilterTitle"),label_default:"User Filter:",help_text:Object(M.b)("admin.ldap.userFilterDisc"),help_text_default:"(Optional) Enter an AD/LDAP filter to use when searching for user objects. Only the users selected by the query will be able to access Mattermost. For Active Directory, the query to filter out disabled users is (&(objectCategory=Person)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))).",placeholder:Object(M.b)("admin.ldap.userFilterEx"),placeholder_default:'Ex. "(objectClass=user)"',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.GuestFilter",label:Object(M.b)("admin.ldap.guestFilterTitle"),label_default:"Guest Filter:",help_text:Object(M.b)("admin.ldap.guestFilterFilterDesc"),help_text_default:"(Optional) Requires Guest Access to be enabled before being applied. Enter an AD/LDAP filter to use when searching for guest objects. Only the users selected by the query will be able to access Mattermost as Guests. Guests are prevented from accessing teams or channels upon logging in until they are assigned a team and at least one channel.\n \nNote: If this filter is removed/changed, active guests will not be promoted to a member and will retain their Guest role. Guests can be promoted in **System Console > User Management**.\n \n \nExisting members that are identified by this attribute as a guest will be demoted from a member to a guest when they are asked to login next. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to guests in **System Console > User Management ** to ensure access is restricted immediately.",help_text_markdown:!0,placeholder:Object(M.b)("admin.ldap.guestFilterEx"),placeholder_default:'E.g.: "(objectClass=guests)"',isDisabled:Uo.either(Uo.configIsFalse("GuestAccountsSettings","Enable"),Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync")))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"LdapSettings.EnableAdminFilter",label:Object(M.b)("admin.ldap.enableAdminFilterTitle"),label_default:"Enable Admin Filter:",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.AdminFilter",label:Object(M.b)("admin.ldap.adminFilterTitle"),label_default:"Admin Filter:",help_text:Object(M.b)("admin.ldap.adminFilterFilterDesc"),help_text_default:"(Optional) Enter an AD/LDAP filter to use for designating System Admins. The users selected by the query will have access to your Mattermost server as System Admins. By default, System Admins have complete access to the Mattermost System Console.\n \nExisting members that are identified by this attribute will be promoted from member to System Admin upon next login. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to members in **System Console > User Management** to ensure access is restricted immediately.\n \nNote: If this filter is removed/changed, System Admins that were promoted via this filter will be demoted to members and will not retain access to the System Console. When this filter is not in use, System Admins can be manually promoted/demoted in **System Console > User Management**.",help_text_markdown:!0,placeholder:Object(M.b)("admin.ldap.adminFilterEx"),placeholder_default:'E.g.: "(objectClass=admins)"',isDisabled:Uo.either(Uo.stateIsFalse("LdapSettings.EnableAdminFilter"),Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync")))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.GroupFilter",label:Object(M.b)("admin.ldap.groupFilterTitle"),label_default:"Group Filter:",help_text:Object(M.b)("admin.ldap.groupFilterFilterDesc"),help_text_markdown:!0,help_text_default:"(Optional) Enter an AD/LDAP filter to use when searching for group objects. Only the groups selected by the query will be available to Mattermost. From [User Management > Groups]({siteURL}/admin_console/user_management/groups), select which AD/LDAP groups should be linked and configured.",help_text_values:{siteURL:Object(C.f)()},placeholder:Object(M.b)("admin.ldap.groupFilterEx"),placeholder_default:'E.g.: "(objectClass=group)"',isDisabled:Uo.stateIsFalse("LdapSettings.EnableSync"),isHidden:Uo.isnt(Uo.licensedForFeature("LDAPGroups"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.GroupDisplayNameAttribute",label:Object(M.b)("admin.ldap.groupDisplayNameAttributeTitle"),label_default:"Group Display Name Attribute:",help_text:Object(M.b)("admin.ldap.groupDisplayNameAttributeDesc"),help_text_default:"The attribute in the AD/LDAP server used to populate the group display names.",placeholder:Object(M.b)("admin.ldap.groupDisplayNameAttributeEx"),placeholder_default:'E.g.: "cn"',isDisabled:Uo.stateIsFalse("LdapSettings.EnableSync"),isHidden:Uo.isnt(Uo.licensedForFeature("LDAPGroups"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.GroupIdAttribute",label:Object(M.b)("admin.ldap.groupIdAttributeTitle"),label_default:"Group ID Attribute:",help_text:Object(M.b)("admin.ldap.groupIdAttributeDesc"),help_text_default:"The attribute in the AD/LDAP server used as a unique identifier for Groups. This should be a AD/LDAP attribute with a value that does not change such as `entryUUID` for LDAP or `objectGUID` for Active Directory.",help_text_markdown:!0,placeholder:Object(M.b)("admin.ldap.groupIdAttributeEx"),placeholder_default:'E.g.: "objectGUID" or "entryUUID"',isDisabled:Uo.stateIsFalse("LdapSettings.EnableSync"),isHidden:Uo.isnt(Uo.licensedForFeature("LDAPGroups"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.FirstNameAttribute",label:Object(M.b)("admin.ldap.firstnameAttrTitle"),label_default:"First Name Attribute:",placeholder:Object(M.b)("admin.ldap.firstnameAttrEx"),placeholder_default:'E.g.: "givenName"',help_text:Object(M.b)("admin.ldap.firstnameAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the first name of users in Mattermost. When set, users cannot edit their first name, since it is synchronized with the LDAP server. When left blank, users can set their first name in Account Settings.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LastNameAttribute",label:Object(M.b)("admin.ldap.lastnameAttrTitle"),label_default:"Last Name Attribute:",placeholder:Object(M.b)("admin.ldap.lastnameAttrEx"),placeholder_default:'E.g.: "sn"',help_text:Object(M.b)("admin.ldap.lastnameAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the last name of users in Mattermost. When set, users cannot edit their last name, since it is synchronized with the LDAP server. When left blank, users can set their last name in Account Settings.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.NicknameAttribute",label:Object(M.b)("admin.ldap.nicknameAttrTitle"),label_default:"Nickname Attribute:",placeholder:Object(M.b)("admin.ldap.nicknameAttrEx"),placeholder_default:'E.g.: "nickname"',help_text:Object(M.b)("admin.ldap.nicknameAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the nickname of users in Mattermost. When set, users cannot edit their nickname, since it is synchronized with the LDAP server. When left blank, users can set their nickname in Account Settings.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.PositionAttribute",label:Object(M.b)("admin.ldap.positionAttrTitle"),label_default:"Position Attribute:",placeholder:Object(M.b)("admin.ldap.positionAttrEx"),placeholder_default:'E.g.: "title"',help_text:Object(M.b)("admin.ldap.positionAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the position field in Mattermost. When set, users cannot edit their position, since it is synchronized with the LDAP server. When left blank, users can set their position in Account Settings.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.EmailAttribute",label:Object(M.b)("admin.ldap.emailAttrTitle"),label_default:"Email Attribute:",placeholder:Object(M.b)("admin.ldap.emailAttrEx"),placeholder_default:'E.g.: "mail" or "userPrincipalName"',help_text:Object(M.b)("admin.ldap.emailAttrDesc"),help_text_default:"The attribute in the AD/LDAP server used to populate the email address field in Mattermost.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.UsernameAttribute",label:Object(M.b)("admin.ldap.usernameAttrTitle"),label_default:"Username Attribute:",placeholder:Object(M.b)("admin.ldap.usernameAttrEx"),placeholder_default:'E.g.: "sAMAccountName"',help_text:Object(M.b)("admin.ldap.usernameAttrDesc"),help_text_default:"The attribute in the AD/LDAP server used to populate the username field in Mattermost. This may be the same as the Login ID Attribute.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.IdAttribute",label:Object(M.b)("admin.ldap.idAttrTitle"),label_default:"ID Attribute: ",placeholder:Object(M.b)("admin.ldap.idAttrEx"),placeholder_default:'E.g.: "objectGUID" or "uid"',help_text:Object(M.b)("admin.ldap.idAttrDesc"),help_text_markdown:!0,help_text_default:"The attribute in the AD/LDAP server used as a unique identifier in Mattermost. It should be an AD/LDAP attribute with a value that does not change such as `uid` for LDAP or `objectGUID` for Active Directory. If a user's ID Attribute changes, it will create a new Mattermost account unassociated with their old one.\n \nIf you need to change this field after users have already logged in, use the [mattermost ldap idmigrate](!https://about.mattermost.com/default-mattermost-ldap-idmigrate) CLI tool.",isDisabled:Uo.both(Uo.stateEquals("LdapSettings.Enable",!1),Uo.stateEquals("LdapSettings.EnableSync",!1))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginIdAttribute",label:Object(M.b)("admin.ldap.loginAttrTitle"),label_default:"Login ID Attribute: ",placeholder:Object(M.b)("admin.ldap.loginIdAttrEx"),placeholder_default:'E.g.: "sAMAccountName"',help_text:Object(M.b)("admin.ldap.loginAttrDesc"),help_text_markdown:!0,help_text_default:'The attribute in the AD/LDAP server used to log in to Mattermost. Normally this attribute is the same as the "Username Attribute" field above.\n \nIf your team typically uses domain/username to log in to other services with AD/LDAP, you may enter domain/username in this field to maintain consistency between sites.',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginFieldName",label:Object(M.b)("admin.ldap.loginNameTitle"),label_default:"Sign-in Field Default Text:",placeholder:Object(M.b)("admin.ldap.loginNameEx"),placeholder_default:'E.g.: "AD/LDAP Username"',help_text:Object(M.b)("admin.ldap.loginNameDesc"),help_text_default:'The placeholder text that appears in the login field on the login page. Defaults to "AD/LDAP Username".',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.SyncIntervalMinutes",label:Object(M.b)("admin.ldap.syncIntervalTitle"),label_default:"Synchronization Interval (minutes):",help_text:Object(M.b)("admin.ldap.syncIntervalHelpText"),help_text_default:'AD/LDAP Synchronization updates Mattermost user information to reflect updates on the AD/LDAP server. For example, when a user\'s name changes on the AD/LDAP server, the change updates in Mattermost when synchronization is performed. Accounts removed from or disabled in the AD/LDAP server have their Mattermost accounts set to "Inactive" and have their account sessions revoked. Mattermost performs synchronization on the interval entered. For example, if 60 is entered, Mattermost synchronizes every 60 minutes.',isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.MaxPageSize",label:Object(M.b)("admin.ldap.maxPageSizeTitle"),label_default:"Maximum Page Size:",placeholder:Object(M.b)("admin.ldap.maxPageSizeEx"),placeholder_default:'E.g.: "2000"',help_text:Object(M.b)("admin.ldap.maxPageSizeHelpText"),help_text_default:"The maximum number of users the Mattermost server will request from the AD/LDAP server at one time. 0 is unlimited.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.QueryTimeout",label:Object(M.b)("admin.ldap.queryTitle"),label_default:"Query Timeout (seconds):",placeholder:Object(M.b)("admin.ldap.queryEx"),placeholder_default:'E.g.: "60"',help_text:Object(M.b)("admin.ldap.queryDesc"),help_text_default:"The timeout value for queries to the AD/LDAP server. Increase if you are getting timeout errors caused by a slow AD/LDAP server.",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_BUTTON,action:_.v,key:"LdapSettings.LdapTest",label:Object(M.b)("admin.ldap.ldap_test_button"),label_default:"AD/LDAP Test",help_text:Object(M.b)("admin.ldap.testHelpText"),help_text_markdown:!0,help_text_default:'Tests if the Mattermost server can connect to the AD/LDAP server specified. Please review "System Console > Logs" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.',error_message:Object(M.b)("admin.ldap.testFailure"),error_message_default:"AD/LDAP Test Failure: {error}",success_message:Object(M.b)("admin.ldap.testSuccess"),success_message_default:"AD/LDAP Test Successful",isDisabled:Uo.both(Uo.stateIsFalse("LdapSettings.Enable"),Uo.stateIsFalse("LdapSettings.EnableSync"))},{type:O.j.SettingsTypes.TYPE_JOBSTABLE,job_type:O.j.JobTypes.LDAP_SYNC,label:Object(M.b)("admin.ldap.sync_button"),label_default:"AD/LDAP Synchronize Now",help_text:Object(M.b)("admin.ldap.syncNowHelpText"),help_text_markdown:!0,help_text_default:'Initiates an AD/LDAP synchronization immediately. See the table below for status of each synchronization. Please review "System Console > Logs" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.',isDisabled:Uo.stateIsFalse("LdapSettings.EnableSync"),render_job:e=>{let t,a=0,n=0,s=0,i=0,r=0,o=0,l=0;return e&&e.data&&(e.data.ldap_users_count&&e.data.ldap_users_count.length>0&&(a=e.data.ldap_users_count),e.data.delete_count&&e.data.delete_count.length>0&&(n=e.data.delete_count),e.data.update_count&&e.data.update_count.length>0&&(s=e.data.update_count),e.data.ldap_groups_count&&(t=e.data.ldap_groups_count),e.data.total_ldap_groups_count&&(i=e.data.total_ldap_groups_count),e.data.group_delete_count&&(r=e.data.group_delete_count),e.data.group_member_delete_count&&(o=e.data.group_member_delete_count),e.data.group_member_add_count&&(l=e.data.group_member_add_count)),x.a.createElement("span",null,x.a.createElement(w.a,{id:t?"admin.ldap.jobExtraInfo":"admin.ldap.jobExtraInfoTotal",defaultMessage:t?"Scanned {ldapUsers, number} LDAP users and {ldapGroups, number} linked groups.":"Scanned {ldapUsers, number} LDAP users and {ldapGroups, number} groups.",values:{ldapUsers:a,ldapGroups:t||i}}),x.a.createElement("ul",null,s>0&&x.a.createElement("li",null,x.a.createElement(w.a,{id:"admin.ldap.jobExtraInfo.updatedUsers",defaultMessage:"Updated {updateCount, number} users.",values:{updateCount:s}})),n>0&&x.a.createElement("li",null,x.a.createElement(w.a,{id:"admin.ldap.jobExtraInfo.deactivatedUsers",defaultMessage:"Deactivated {deleteCount, number} users.",values:{deleteCount:n}})),r>0&&x.a.createElement("li",null,x.a.createElement(w.a,{id:"admin.ldap.jobExtraInfo.deletedGroups",defaultMessage:"Deleted {groupDeleteCount, number} groups.",values:{groupDeleteCount:r}})),o>0&&x.a.createElement("li",null,x.a.createElement(w.a,{id:"admin.ldap.jobExtraInfo.deletedGroupMembers",defaultMessage:"Deleted {groupMemberDeleteCount, number} group members.",values:{groupMemberDeleteCount:o}})),l>0&&x.a.createElement("li",null,x.a.createElement(w.a,{id:"admin.ldap.jobExtraInfo.addedGroupMembers",defaultMessage:"Added {groupMemberAddCount, number} group members.",values:{groupMemberAddCount:l}}))))}}]}},saml:{url:"authentication/saml",title:Object(M.b)("admin.sidebar.saml"),title_default:"SAML 2.0",isHidden:Uo.isnt(Uo.licensedForFeature("SAML")),schema:{id:"SamlSettings",name:Object(M.b)("admin.authentication.saml"),name_default:"SAML 2.0",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.Enable",label:Object(M.b)("admin.saml.enableTitle"),label_default:"Enable Login With SAML 2.0:",help_text:Object(M.b)("admin.saml.enableDescription"),help_text_default:"When true, Mattermost allows login using SAML 2.0. Please see [documentation](!http://docs.mattermost.com/deployment/sso-saml.html) to learn more about configuring SAML for Mattermost.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.EnableSyncWithLdap",label:Object(M.b)("admin.saml.enableSyncWithLdapTitle"),label_default:"Enable Synchronizing SAML Accounts With AD/LDAP:",help_text:Object(M.b)("admin.saml.enableSyncWithLdapDescription"),help_text_default:"When true, Mattermost periodically synchronizes SAML user attributes, including user deactivation and removal, from AD/LDAP. Enable and configure synchronization settings at **Authentication > AD/LDAP**. When false, user attributes are updated from SAML during user login. See [documentation](!https://about.mattermost.com/default-saml-ldap-sync) to learn more.",help_text_markdown:!0,isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.EnableSyncWithLdapIncludeAuth",label:Object(M.b)("admin.saml.enableSyncWithLdapIncludeAuthTitle"),label_default:"Override SAML bind data with AD/LDAP information:",help_text:Object(M.b)("admin.saml.enableSyncWithLdapIncludeAuthDescription"),help_text_default:"When true, Mattermost will override the SAML ID attribute with the AD/LDAP ID attribute if configured or override the SAML Email attribute with the AD/LDAP Email attribute if SAML ID attribute is not present.  This will allow you automatically migrate users from Email binding to ID binding to prevent creation of new users when an email address changes for a user. Moving from true to false, will remove the override from happening.\n \n**Note:** SAML IDs must match the LDAP IDs to prevent disabling of user accounts.  Please review [documentation](!https://docs.mattermost.com/deployment/sso-saml-ldapsync.html) for more information.",help_text_markdown:!0,isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Enable"),Uo.stateIsFalse("SamlSettings.EnableSyncWithLdap"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdpMetadataUrl",label:Object(M.b)("admin.saml.idpMetadataUrlTitle"),label_default:"Identity Provider Metadata URL:",help_text:Object(M.b)("admin.saml.idpMetadataUrlDesc"),help_text_default:"The Metadata URL for the Identity Provider you use for SAML requests",placeholder:Object(M.b)("admin.saml.idpMetadataUrlEx"),placeholder_default:'E.g.: "https://idp.example.org/SAML2/saml/metadata"',isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_BUTTON,key:"getSamlMetadataFromIDPButton",action:_.q,label:Object(M.b)("admin.saml.getSamlMetadataFromIDPUrl"),label_default:"Get SAML Metadata from IdP",loading:Object(M.b)("admin.saml.getSamlMetadataFromIDPFetching"),loading_default:"Fetching...",error_message:Object(M.b)("admin.saml.getSamlMetadataFromIDPFail"),error_message_default:"SAML Metadata URL did not connect and pull data successfully",success_message:Object(M.b)("admin.saml.getSamlMetadataFromIDPSuccess"),success_message_default:"SAML Metadata retrieved successfully. Two fields below have been updated",isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Enable"),Uo.stateEquals("SamlSettings.IdpMetadataUrl","")),sourceUrlKey:"SamlSettings.IdpMetadataUrl"},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdpUrl",label:Object(M.b)("admin.saml.idpUrlTitle"),label_default:"SAML SSO URL:",help_text:Object(M.b)("admin.saml.idpUrlDesc"),help_text_default:"The URL where Mattermost sends a SAML request to start login sequence.",placeholder:Object(M.b)("admin.saml.idpUrlEx"),placeholder_default:'E.g.: "https://idp.example.org/SAML2/SSO/Login"',isDisabled:Uo.stateIsFalse("SamlSettings.Enable"),setFromMetadataField:"idp_url"},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdpDescriptorUrl",label:Object(M.b)("admin.saml.idpDescriptorUrlTitle"),label_default:"Identity Provider Issuer URL:",help_text:Object(M.b)("admin.saml.idpDescriptorUrlDesc"),help_text_default:"The issuer URL for the Identity Provider you use for SAML requests.",placeholder:Object(M.b)("admin.saml.idpDescriptorUrlEx"),placeholder_default:'E.g.: "https://idp.example.org/SAML2/issuer"',isDisabled:Uo.stateIsFalse("SamlSettings.Enable"),setFromMetadataField:"idp_descriptor_url"},{type:O.j.SettingsTypes.TYPE_FILE_UPLOAD,key:"SamlSettings.IdpCertificateFile",label:Object(M.b)("admin.saml.idpCertificateFileTitle"),label_default:"Identity Provider Public Certificate:",help_text:Object(M.b)("admin.saml.idpCertificateFileDesc"),help_text_default:"The public authentication certificate issued by your Identity Provider.",remove_help_text:Object(M.b)("admin.saml.idpCertificateFileRemoveDesc"),remove_help_text_default:"Remove the public authentication certificate issued by your Identity Provider.",remove_button_text:Object(M.b)("admin.saml.remove.idp_certificate"),remove_button_text_default:"Remove Identity Provider Certificate",removing_text:Object(M.b)("admin.saml.removing.certificate"),removing_text_default:"Removing Certificate...",uploading_text:Object(M.b)("admin.saml.uploading.certificate"),uploading_text_default:"Uploading Certificate...",isDisabled:Uo.stateIsFalse("SamlSettings.Enable"),fileType:".crt,.cer,.cert,.pem",upload_action:_.L,set_action:_.F,remove_action:_.B,setFromMetadataField:"idp_public_certificate"},{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.Verify",label:Object(M.b)("admin.saml.verifyTitle"),label_default:"Verify Signature:",help_text:Object(M.b)("admin.saml.verifyDescription"),help_text_default:"When false, Mattermost will not verify that the signature sent from a SAML Response matches the Service Provider Login URL. Disabling verification is not recommended for production environments.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.AssertionConsumerServiceURL",label:Object(M.b)("admin.saml.assertionConsumerServiceURLTitle"),label_default:"Service Provider Login URL:",help_text:Object(M.b)("admin.saml.assertionConsumerServiceURLPopulatedDesc"),help_text_default:"This field is also known as the Assertion Consumer Service URL.",placeholder:Object(M.b)("admin.saml.assertionConsumerServiceURLEx"),placeholder_default:'E.g.: "https://<your-mattermost-url>/login/sso/saml"',isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Enable"),Uo.stateIsFalse("SamlSettings.Verify")),onConfigLoad:(e,t)=>{const a=t.ServiceSettings.SiteURL;if(a.length>0&&0===e.length){const e="/"===a[a.length-1]?"":"/";return"".concat(a).concat(e,"login/sso/saml")}return e}},{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.Encrypt",label:Object(M.b)("admin.saml.encryptTitle"),label_default:"Enable Encryption:",help_text:Object(M.b)("admin.saml.encryptDescription"),help_text_default:"When false, Mattermost will not decrypt SAML Assertions encrypted with your Service Provider Public Certificate. Disabling encryption is not recommended for production environments.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_FILE_UPLOAD,key:"SamlSettings.PrivateKeyFile",label:Object(M.b)("admin.saml.privateKeyFileTitle"),label_default:"Service Provider Private Key:",help_text:Object(M.b)("admin.saml.privateKeyFileFileDesc"),help_text_default:"The private key used to decrypt SAML Assertions from the Identity Provider.",remove_help_text:Object(M.b)("admin.saml.privateKeyFileFileRemoveDesc"),remove_help_text_default:"Remove the private key used to decrypt SAML Assertions from the Identity Provider.",remove_button_text:Object(M.b)("admin.saml.remove.privKey"),remove_button_text_default:"Remove Service Provider Private Key",removing_text:Object(M.b)("admin.saml.removing.privKey"),removing_text_default:"Removing Private Key...",uploading_text:Object(M.b)("admin.saml.uploading.privateKey"),uploading_text_default:"Uploading Private Key...",isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Enable"),Uo.stateIsFalse("SamlSettings.Encrypt")),fileType:".key",upload_action:_.M,remove_action:_.C},{type:O.j.SettingsTypes.TYPE_FILE_UPLOAD,key:"SamlSettings.PublicCertificateFile",label:Object(M.b)("admin.saml.publicCertificateFileTitle"),label_default:"Service Provider Public Certificate:",help_text:Object(M.b)("admin.saml.publicCertificateFileDesc"),help_text_default:"The certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.",remove_help_text:Object(M.b)("admin.saml.publicCertificateFileRemoveDesc"),remove_help_text_default:"Remove the certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.",remove_button_text:Object(M.b)("admin.saml.remove.sp_certificate"),remove_button_text_default:"Remove Service Provider Certificate",removing_text:Object(M.b)("admin.saml.removing.certificate"),removing_text_default:"Removing Certificate...",uploading_text:Object(M.b)("admin.saml.uploading.certificate"),uploading_text_default:"Uploading Certificate...",isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Enable"),Uo.stateIsFalse("SamlSettings.Encrypt")),fileType:".crt,.cer",upload_action:_.N,remove_action:_.D},{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.SignRequest",label:Object(M.b)("admin.saml.signRequestTitle"),label_default:"Sign Request:",help_text:Object(M.b)("admin.saml.signRequestDescription"),help_text_default:"When true, Mattermost will sign the SAML request using your private key. When false, Mattermost will not sign the SAML request.",isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Encrypt"),Uo.stateIsFalse("SamlSettings.PrivateKeyFile"),Uo.stateIsFalse("SamlSettings.PublicCertificateFile"))},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"SamlSettings.SignatureAlgorithm",label:Object(M.b)("admin.saml.signatureAlgorithmTitle"),label_default:"Signature Algorithm",isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Encrypt"),Uo.stateIsFalse("SamlSettings.SignRequest")),options:[{value:"RSAwithSHA1",display_name:Object(M.b)("admin.saml.signatureAlgorithmDisplay.sha1"),display_name_default:"RSAwithSHA1",help_text:Object(M.b)("admin.saml.signatureAlgorithmDescription.sha1"),help_text_default:"Specify the Signature algorithm used to sign the request (RSAwithSHA1). Please see more information provided at http://www.w3.org/2000/09/xmldsig#rsa-sha1"},{value:"RSAwithSHA256",display_name:Object(M.b)("admin.saml.signatureAlgorithmDisplay.sha256"),display_name_default:"RSAwithSHA256",help_text:Object(M.b)("admin.saml.signatureAlgorithmDescription.sha256"),help_text_default:"Specify the Signature algorithm used to sign the request (RSAwithSHA256). Please see more information provided at http://www.w3.org/2001/04/xmldsig-more#rsa-sha256 [section 6.4.2 RSA (PKCS#1 v1.5)]"},{value:"RSAwithSHA512",display_name:Object(M.b)("admin.saml.signatureAlgorithmDisplay.sha512"),display_name_default:"RSAwithSHA512",help_text:Object(M.b)("admin.saml.signatureAlgorithmDescription.sha512"),help_text_default:"Specify the Signature algorithm used to sign the request (RSAwithSHA512). Please see more information provided at http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"}]},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"SamlSettings.CanonicalAlgorithm",label:Object(M.b)("admin.saml.canonicalAlgorithmTitle"),label_default:"Canonicalization Algorithm",isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.Encrypt"),Uo.stateIsFalse("SamlSettings.SignRequest")),options:[{value:"Canonical1.0",display_name:Object(M.b)("admin.saml.canonicalAlgorithmDisplay.n10"),display_name_default:"Exclusive XML Canonicalization 1.0 (omit comments)",help_text:Object(M.b)("admin.saml.canonicalAlgorithmDescription.exc"),help_text_default:"Specify the Canonicalization algorithm (Exclusive XML Canonicalization 1.0).  Please see more information provided at http://www.w3.org/2001/10/xml-exc-c14n#"},{value:"Canonical1.1",display_name:Object(M.b)("admin.saml.canonicalAlgorithmDisplay.n11"),display_name_default:"Canonical XML 1.1 (omit comments)",help_text:Object(M.b)("admin.saml.canonicalAlgorithmDescription.c14"),help_text_default:"Specify the Canonicalization algorithm (Canonical XML 1.1).  Please see more information provided at http://www.w3.org/2006/12/xml-c14n11"}]},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.EmailAttribute",label:Object(M.b)("admin.saml.emailAttrTitle"),label_default:"Email Attribute:",placeholder:Object(M.b)("admin.saml.emailAttrEx"),placeholder_default:'E.g.: "Email" or "PrimaryEmail"',help_text:Object(M.b)("admin.saml.emailAttrDesc"),help_text_default:"The attribute in the SAML Assertion that will be used to populate the email addresses of users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.UsernameAttribute",label:Object(M.b)("admin.saml.usernameAttrTitle"),label_default:"Username Attribute:",placeholder:Object(M.b)("admin.saml.usernameAttrEx"),placeholder_default:'E.g.: "Username"',help_text:Object(M.b)("admin.saml.usernameAttrDesc"),help_text_default:"The attribute in the SAML Assertion that will be used to populate the username field in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdAttribute",label:Object(M.b)("admin.saml.idAttrTitle"),label_default:"Id Attribute:",placeholder:Object(M.b)("admin.saml.idAttrEx"),placeholder_default:'E.g.: "Id"',help_text:Object(M.b)("admin.saml.idAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to bind users from SAML to users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.GuestAttribute",label:Object(M.b)("admin.saml.guestAttrTitle"),label_default:"Guest Attribute:",placeholder:Object(M.b)("admin.saml.guestAttrEx"),placeholder_default:'E.g.: "usertype=Guest" or "isGuest=true"',help_text:Object(M.b)("admin.saml.guestAttrDesc"),help_text_default:"(Optional) Requires Guest Access to be enabled before being applied. The attribute in the SAML Assertion that will be used to apply a guest role to users in Mattermost. Guests are prevented from accessing teams or channels upon logging in until they are assigned a team and at least one channel.\n \nNote: If this attribute is removed/changed from your guest user in SAML and the user is still active, they will not be promoted to a member and will retain their Guest role. Guests can be promoted in **System Console > User Management**.\n \n \nExisting members that are identified by this attribute as a guest will be demoted from a member to a guest when they are asked to login next. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to guests in **System Console > User Management ** to ensure access is restricted immediately.",help_text_markdown:!0,isDisabled:Uo.either(Uo.configIsFalse("GuestAccountsSettings","Enable"),Uo.stateIsFalse("SamlSettings.Enable"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"SamlSettings.EnableAdminAttribute",label:Object(M.b)("admin.saml.enableAdminAttrTitle"),label_default:"Enable Admin Attribute:",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.AdminAttribute",label:Object(M.b)("admin.saml.adminAttrTitle"),label_default:"Admin Attribute:",placeholder:Object(M.b)("admin.saml.adminAttrEx"),placeholder_default:'E.g.: "usertype=Admin" or "isAdmin=true"',help_text:Object(M.b)("admin.saml.adminAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion for designating System Admins. The users selected by the query will have access to your Mattermost server as System Admins. By default, System Admins have complete access to the Mattermost System Console.\n \nExisting members that are identified by this attribute will be promoted from member to System Admin upon next login. The next login is based upon Session lengths set in **System Console > Session Lengths.** It is highly recommend to manually demote users to members in **System Console > User Management** to ensure access is restricted immediately.\n \nNote: If this filter is removed/changed, System Admins that were promoted via this filter will be demoted to members and will not retain access to the System Console. When this filter is not in use, System Admins can be manually promoted/demoted in **System Console > User Management**.",help_text_markdown:!0,isDisabled:Uo.either(Uo.stateIsFalse("SamlSettings.EnableAdminAttribute"),Uo.stateIsFalse("SamlSettings.Enable"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.FirstNameAttribute",label:Object(M.b)("admin.saml.firstnameAttrTitle"),label_default:"First Name Attribute:",placeholder:Object(M.b)("admin.saml.firstnameAttrEx"),placeholder_default:'E.g.: "FirstName"',help_text:Object(M.b)("admin.saml.firstnameAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the first name of users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LastNameAttribute",label:Object(M.b)("admin.saml.lastnameAttrTitle"),label_default:"Last Name Attribute:",placeholder:Object(M.b)("admin.saml.lastnameAttrEx"),placeholder_default:'E.g.: "LastName"',help_text:Object(M.b)("admin.saml.lastnameAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the last name of users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.NicknameAttribute",label:Object(M.b)("admin.saml.nicknameAttrTitle"),label_default:"Nickname Attribute:",placeholder:Object(M.b)("admin.saml.nicknameAttrEx"),placeholder_default:'E.g.: "Nickname"',help_text:Object(M.b)("admin.saml.nicknameAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the nickname of users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.PositionAttribute",label:Object(M.b)("admin.saml.positionAttrTitle"),label_default:"Position Attribute:",placeholder:Object(M.b)("admin.saml.positionAttrEx"),placeholder_default:'E.g.: "Role"',help_text:Object(M.b)("admin.saml.positionAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the position of users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LocaleAttribute",label:Object(M.b)("admin.saml.localeAttrTitle"),label_default:"Preferred Language Attribute:",placeholder:Object(M.b)("admin.saml.localeAttrEx"),placeholder_default:'E.g.: "Locale" or "PrimaryLanguage"',help_text:Object(M.b)("admin.saml.localeAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the language of users in Mattermost.",isDisabled:Uo.stateIsFalse("SamlSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LoginButtonText",label:Object(M.b)("admin.saml.loginButtonTextTitle"),label_default:"Login Button Text:",placeholder:Object(M.b)("admin.saml.loginButtonTextEx"),placeholder_default:'E.g.: "OKTA"',help_text:Object(M.b)("admin.saml.loginButtonTextDesc"),help_text_default:'(Optional) The text that appears in the login button on the login page. Defaults to "SAML".',isDisabled:Uo.stateIsFalse("SamlSettings.Enable")}]}},gitlab:{url:"authentication/gitlab",title:Object(M.b)("admin.sidebar.gitlab"),title_default:"GitLab",isHidden:Uo.licensed,schema:{id:"GitLabSettings",name:Object(M.b)("admin.authentication.gitlab"),name_default:"GitLab",onConfigLoad:e=>{const t={};return t["GitLabSettings.Url"]=e.GitLabSettings.UserApiEndpoint.replace("/api/v4/user",""),t},onConfigSave:e=>{const t=Io({},e);return t.GitLabSettings.UserApiEndpoint=e.GitLabSettings.Url.replace(/\/$/,"")+"/api/v4/user",t},settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"GitLabSettings.Enable",label:Object(M.b)("admin.gitlab.enableTitle"),label_default:"Enable authentication with GitLab: ",help_text:Object(M.b)("admin.gitlab.enableDescription"),help_text_default:'When true, Mattermost allows team creation and account signup using GitLab OAuth.\n \n1. Log in to your GitLab account and go to Profile Settings -> Applications.\n2. Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete".\n3. Then use "Application Secret Key" and "Application ID" fields from GitLab to complete the options below.\n4. Complete the Endpoint URLs below.',help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Id",label:Object(M.b)("admin.gitlab.clientIdTitle"),label_default:"Application ID:",help_text:Object(M.b)("admin.gitlab.clientIdDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(M.b)("admin.gitlab.clientIdExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isDisabled:Uo.stateIsFalse("GitLabSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Secret",label:Object(M.b)("admin.gitlab.clientSecretTitle"),label_default:"Application Secret Key:",help_text:Object(M.b)("admin.gitlab.clientSecretDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(M.b)("admin.gitlab.clientSecretExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isDisabled:Uo.stateIsFalse("GitLabSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Url",label:Object(M.b)("admin.gitlab.siteUrl"),label_default:"GitLab Site URL:",help_text:Object(M.b)("admin.gitlab.siteUrlDescription"),help_text_default:"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.",placeholder:Object(M.b)("admin.gitlab.siteUrlExample"),placeholder_default:"E.g.: https://",isDisabled:Uo.stateIsFalse("GitLabSettings.Enable")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.UserApiEndpoint",label:Object(M.b)("admin.gitlab.userTitle"),label_default:"User API Endpoint:",dynamic_value:(e,t,a)=>a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/api/v4/user":"",isDisabled:!0},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.AuthEndpoint",label:Object(M.b)("admin.gitlab.authTitle"),label_default:"Auth Endpoint:",dynamic_value:(e,t,a)=>a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/authorize":"",isDisabled:!0},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.TokenEndpoint",label:Object(M.b)("admin.gitlab.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:(e,t,a)=>a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/token":"",isDisabled:!0}]}},oauth:{url:"authentication/oauth",title:Object(M.b)("admin.sidebar.oauth"),title_default:"OAuth 2.0",isHidden:Uo.isnt(Uo.licensed),schema:{id:"OAuthSettings",name:Object(M.b)("admin.authentication.oauth"),name_default:"OAuth 2.0",onConfigLoad:e=>{const t={};return e.GitLabSettings&&e.GitLabSettings.Enable&&(t.oauthType=O.j.GITLAB_SERVICE),e.Office365Settings&&e.Office365Settings.Enable&&(t.oauthType=O.j.OFFICE365_SERVICE),e.GoogleSettings&&e.GoogleSettings.Enable&&(t.oauthType=O.j.GOOGLE_SERVICE),t["GitLabSettings.Url"]=e.GitLabSettings.UserApiEndpoint.replace("/api/v4/user",""),t},onConfigSave:e=>{const t=Io({},e);return t.GitLabSettings=e.GitLabSettings||{},t.Office365Settings=e.Office365Settings||{},t.GoogleSettings=e.GoogleSettings||{},t.GitLabSettings.Enable=!1,t.Office365Settings.Enable=!1,t.GoogleSettings.Enable=!1,t.GitLabSettings.UserApiEndpoint=e.GitLabSettings.Url.replace(/\/$/,"")+"/api/v4/user",e.oauthType===O.j.GITLAB_SERVICE&&(t.GitLabSettings.Enable=!0),e.oauthType===O.j.OFFICE365_SERVICE&&(t.Office365Settings.Enable=!0),e.oauthType===O.j.GOOGLE_SERVICE&&(t.GoogleSettings.Enable=!0),delete t.oauthType,t},settings:[{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"oauthType",label:Object(M.b)("admin.oauth.select"),label_default:"Select OAuth 2.0 Service Provider:",options:[{value:"off",display_name:Object(M.b)("admin.oauth.off"),display_name_default:"Do not allow sign-in via an OAuth 2.0 provider."},{value:O.j.GITLAB_SERVICE,display_name:Object(M.b)("admin.oauth.gitlab"),display_name_default:"GitLab",help_text:Object(M.b)("admin.gitlab.EnableMarkdownDesc"),help_text_default:'1. Log in to your GitLab account and go to Profile Settings -> Applications.\n2. Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete".\n3. Then use "Application Secret Key" and "Application ID" fields from GitLab to complete the options below.\n4. Complete the Endpoint URLs below.',help_text_markdown:!0},{value:O.j.GOOGLE_SERVICE,display_name:Object(M.b)("admin.oauth.google"),display_name_default:"Google Apps",isHidden:Uo.isnt(Uo.licensedForFeature("GoogleOAuth")),help_text:Object(M.b)("admin.google.EnableMarkdownDesc"),help_text_default:'1. [Log in](!https://accounts.google.com/login) to your Google account.\n2. Go to [https://console.developers.google.com](!https://console.developers.google.com), click **Credentials** in the left hand sidebar and enter "Mattermost - your-company-name" as the **Project Name**, then click **Create**.\n3. Click the **OAuth consent screen** header and enter "Mattermost" as the **Product name shown to users**, then click **Save**.\n4. Under the **Credentials** header, click **Create credentials**, choose **OAuth client ID** and select **Web Application**.\n5. Under **Restrictions** and **Authorized redirect URIs** enter **your-mattermost-url/signup/google/complete** (example: http://localhost:8065/signup/google/complete). Click **Create**.\n6. Paste the **Client ID** and **Client Secret** to the fields below, then click **Save**.\n7. Go to the [Google People API](!https://console.developers.google.com/apis/library/people.googleapis.com) and click *Enable*.',help_text_markdown:!0},{value:O.j.OFFICE365_SERVICE,display_name:Object(M.b)("admin.oauth.office365"),display_name_default:"Office 365",isHidden:Uo.isnt(Uo.licensedForFeature("Office365OAuth")),help_text:Object(M.b)("admin.office365.EnableMarkdownDesc"),help_text_default:'1. [Log in](!https://login.microsoftonline.com/) to your Microsoft or Office 365 account. Make sure it`s the account on the same [tenant](!https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#Anchor_0) that you would like users to log in with.\n2. Go to [https://apps.dev.microsoft.com](!https://apps.dev.microsoft.com), click **Go to app list** > **Add an app** and use "Mattermost - your-company-name" as the **Application Name**.\n3. Under **Application Secrets**, click **Generate New Password** and paste it to the **Application Secret Password** field below.\n4. Under **Platforms**, click **Add Platform**, choose **Web** and enter **your-mattermost-url/signup/office365/complete** (example: http://localhost:8065/signup/office365/complete) under **Redirect URIs**. Also uncheck **Allow Implicit Flow**.\n5. Finally, click **Save** and then paste the **Application ID** below.',help_text_markdown:!0}]},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Id",label:Object(M.b)("admin.gitlab.clientIdTitle"),label_default:"Application ID:",help_text:Object(M.b)("admin.gitlab.clientIdDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(M.b)("admin.gitlab.clientIdExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","gitlab"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Secret",label:Object(M.b)("admin.gitlab.clientSecretTitle"),label_default:"Application Secret Key:",help_text:Object(M.b)("admin.gitlab.clientSecretDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(M.b)("admin.gitlab.clientSecretExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","gitlab"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Url",label:Object(M.b)("admin.gitlab.siteUrl"),label_default:"GitLab Site URL:",help_text:Object(M.b)("admin.gitlab.siteUrlDescription"),help_text_default:"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.",placeholder:Object(M.b)("admin.gitlab.siteUrlExample"),placeholder_default:"E.g.: https://",isHidden:Uo.isnt(Uo.stateEquals("oauthType","gitlab"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.UserApiEndpoint",label:Object(M.b)("admin.gitlab.userTitle"),label_default:"User API Endpoint:",dynamic_value:(e,t,a)=>a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/api/v4/user":"",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","gitlab"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.AuthEndpoint",label:Object(M.b)("admin.gitlab.authTitle"),label_default:"Auth Endpoint:",dynamic_value:(e,t,a)=>a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/authorize":"",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","gitlab"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.TokenEndpoint",label:Object(M.b)("admin.gitlab.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:(e,t,a)=>a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/token":"",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","gitlab"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.Id",label:Object(M.b)("admin.google.clientIdTitle"),label_default:"Client ID:",help_text:Object(M.b)("admin.google.clientIdDescription"),help_text_default:"The Client ID you received when registering your application with Google.",placeholder:Object(M.b)("admin.google.clientIdExample"),placeholder_default:'E.g.: "7602141235235-url0fhs1mayfasbmop5qlfns8dh4.apps.googleusercontent.com"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","google"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.Secret",label:Object(M.b)("admin.google.clientSecretTitle"),label_default:"Client Secret:",help_text:Object(M.b)("admin.google.clientSecretDescription"),help_text_default:"The Client Secret you received when registering your application with Google.",placeholder:Object(M.b)("admin.google.clientSecretExample"),placeholder_default:'E.g.: "H8sz0Az-dDs2p15-7QzD231"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","google"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.UserApiEndpoint",label:Object(M.b)("admin.google.userTitle"),label_default:"User API Endpoint:",dynamic_value:()=>"https://people.googleapis.com/v1/people/me?personFields=names,emailAddresses,nicknames,metadata",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","google"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.AuthEndpoint",label:Object(M.b)("admin.google.authTitle"),label_default:"Auth Endpoint:",dynamic_value:()=>"https://accounts.google.com/o/oauth2/v2/auth",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","google"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.TokenEndpoint",label:Object(M.b)("admin.google.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:()=>"https://www.googleapis.com/oauth2/v4/token",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","google"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"Office365Settings.Id",label:Object(M.b)("admin.office365.clientIdTitle"),label_default:"Application ID:",help_text:Object(M.b)("admin.office365.clientIdDescription"),help_text_default:"The Application/Client ID you received when registering your application with Microsoft.",placeholder:Object(M.b)("admin.office365.clientIdExample"),placeholder_default:'E.g.: "adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","office365"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"Office365Settings.Secret",label:Object(M.b)("admin.office365.clientSecretTitle"),label_default:"Application Secret Password:",help_text:Object(M.b)("admin.office365.clientSecretDescription"),help_text_default:"The Application Secret Password you generated when registering your application with Microsoft.",placeholder:Object(M.b)("admin.office365.clientSecretExample"),placeholder_default:'E.g.: "shAieM47sNBfgl20f8ci294"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","office365"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"Office365Settings.DirectoryId",label:Object(M.b)("admin.office365.directoryIdTitle"),label_default:"Directory (tenant) ID:",help_text:Object(M.b)("admin.office365.directoryIdDescription"),help_text_default:"The Directory (tenant) ID you received when registering your application with Microsoft.",placeholder:Object(M.b)("admin.office365.directoryIdExample"),placeholder_default:'E.g.: "adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq"',isHidden:Uo.isnt(Uo.stateEquals("oauthType","office365"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"Office365Settings.UserApiEndpoint",label:Object(M.b)("admin.office365.userTitle"),label_default:"User API Endpoint:",dynamic_value:()=>"https://graph.microsoft.com/v1.0/me",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","office365"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"Office365Settings.AuthEndpoint",label:Object(M.b)("admin.office365.authTitle"),label_default:"Auth Endpoint:",dynamic_value:(e,t,a)=>a["Office365Settings.DirectoryId"]?"https://login.microsoftonline.com/"+a["Office365Settings.DirectoryId"]+"/oauth2/v2.0/authorize":"https://login.microsoftonline.com/{directoryId}/oauth2/v2.0/authorize",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","office365"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"Office365Settings.TokenEndpoint",label:Object(M.b)("admin.office365.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:(e,t,a)=>a["Office365Settings.DirectoryId"]?"https://login.microsoftonline.com/"+a["Office365Settings.DirectoryId"]+"/oauth2/v2.0/token":"https://login.microsoftonline.com/{directoryId}/oauth2/v2.0/token",isDisabled:!0,isHidden:Uo.isnt(Uo.stateEquals("oauthType","office365"))}]}},guest_access:{url:"authentication/guest_access",title:Object(M.b)("admin.sidebar.guest_access"),title_default:"Guest Access (Beta)",isHidden:Uo.isnt(Uo.licensed),schema:{id:"GuestAccountsSettings",name:Object(M.b)("admin.authentication.guest_access"),name_default:"Guest Access (Beta)",settings:[{type:O.j.SettingsTypes.TYPE_CUSTOM,component:ta,key:"GuestAccountsSettings.Enable"},{type:O.j.SettingsTypes.TYPE_TEXT,key:"GuestAccountsSettings.RestrictCreationToDomains",label:Object(M.b)("admin.guest_access.whitelistedDomainsTitle"),label_default:"Whitelisted Guest Domains:",help_text:Object(M.b)("admin.guest_access.whitelistedDomainsDescription"),help_text_default:"(Optional) Guest accounts can be created at the system level from this list of allowed guest domains.",help_text_markdown:!0,placeholder:Object(M.b)("admin.guest_access.whitelistedDomainsExample"),placeholder_default:'E.g.: "company.com, othercorp.org"'},{type:O.j.SettingsTypes.TYPE_BOOL,key:"GuestAccountsSettings.EnforceMultifactorAuthentication",label:Object(M.b)("admin.guest_access.mfaTitle"),label_default:"Enforce Multi-factor Authentication: ",help_text:Object(M.b)("admin.guest_access.mfaDescriptionMFANotEnabled"),help_text_default:"[Multi-factor authentication](./mfa) is currently not enabled.",help_text_markdown:!0,isDisabled:()=>!0,isHidden:Uo.configIsTrue("ServiceSettings","EnableMultifactorAuthentication")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"GuestAccountsSettings.EnforceMultifactorAuthentication",label:Object(M.b)("admin.guest_access.mfaTitle"),label_default:"Enforce Multi-factor Authentication: ",help_text:Object(M.b)("admin.guest_access.mfaDescriptionMFANotEnforced"),help_text_default:"[Multi-factor authentication](./mfa) is currently not enforced.",help_text_markdown:!0,isDisabled:()=>!0,isHidden:Uo.either(Uo.configIsFalse("ServiceSettings","EnableMultifactorAuthentication"),Uo.configIsTrue("ServiceSettings","EnforceMultifactorAuthentication"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"GuestAccountsSettings.EnforceMultifactorAuthentication",label:Object(M.b)("admin.guest_access.mfaTitle"),label_default:"Enforce Multi-factor Authentication: ",help_text:Object(M.b)("admin.guest_access.mfaDescription"),help_text_default:"When true, [multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) for guests is required for login. New guest users will be required to configure MFA on signup. Logged in guest users without MFA configured are redirected to the MFA setup page until configuration is complete.\n \nIf your system has guest users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Mattermost.",help_text_markdown:!0,isHidden:Uo.either(Uo.configIsFalse("ServiceSettings","EnableMultifactorAuthentication"),Uo.configIsFalse("ServiceSettings","EnforceMultifactorAuthentication"))}]}}},plugins:{icon:"fa-plug",sectionTitle:Object(M.b)("admin.sidebar.plugins"),sectionTitleDefault:"Plugins (Beta)",id:"plugins",plugin_management:{url:"plugins/plugin_management",title:Object(M.b)("admin.plugins.pluginManagement"),title_default:"Plugin Management",searchableStrings:["admin.plugin.management.title","admin.plugins.settings.enable","admin.plugins.settings.enableDesc","admin.plugin.uploadTitle","admin.plugin.installedTitle","admin.plugin.installedDesc","admin.plugin.uploadDesc","admin.plugin.uploadDisabledDesc","admin.plugins.settings.enableMarketplace","admin.plugins.settings.enableMarketplaceDesc","admin.plugins.settings.enableRemoteMarketplace","admin.plugins.settings.enableRemoteMarketplaceDesc","admin.plugins.settings.automaticPrepackagedPlugins","admin.plugins.settings.automaticPrepackagedPluginsDesc","admin.plugins.settings.marketplaceUrl","admin.plugins.settings.marketplaceUrlDesc"],schema:{id:"PluginManagementSettings",component:Ie}},custom:{url:"plugins/plugin_:plugin_id",schema:{id:"CustomPluginSettings",component:Bt}}},integrations:{icon:"fa-sitemap",sectionTitle:Object(M.b)("admin.sidebar.integrations"),sectionTitleDefault:"Integrations",id:"integrations",integration_management:{url:"integrations/integration_management",title:Object(M.b)("admin.integrations.integrationManagement"),title_default:"Integration Management",schema:{id:"CustomIntegrationSettings",name:Object(M.b)("admin.integrations.integrationManagement.title"),name_default:"Integration Management",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableIncomingWebhooks",label:Object(M.b)("admin.service.webhooksTitle"),label_default:"Enable Incoming Webhooks: ",help_text:Object(M.b)("admin.service.webhooksDescription"),help_text_default:"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag. See [documentation](!http://docs.mattermost.com/developer/webhooks-incoming.html) to learn more.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableOutgoingWebhooks",label:Object(M.b)("admin.service.outWebhooksTitle"),label_default:"Enable Outgoing Webhooks: ",help_text:Object(M.b)("admin.service.outWebhooksDesc"),help_text_default:"When true, outgoing webhooks will be allowed. See [documentation](!http://docs.mattermost.com/developer/webhooks-outgoing.html) to learn more.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableCommands",label:Object(M.b)("admin.service.cmdsTitle"),label_default:"Enable Custom Slash Commands: ",help_text:Object(M.b)("admin.service.cmdsDesc"),help_text_default:"When true, custom slash commands will be allowed. See [documentation](!http://docs.mattermost.com/developer/slash-commands.html) to learn more.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableOAuthServiceProvider",label:Object(M.b)("admin.oauth.providerTitle"),label_default:"Enable OAuth 2.0 Service Provider: ",help_text:Object(M.b)("admin.oauth.providerDescription"),help_text_default:"When true, Mattermost can act as an OAuth 2.0 service provider allowing Mattermost to authorize API requests from external applications. See [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) to learn more.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_PERMISSION,key:"ServiceSettings.EnableOnlyAdminIntegrations",label:Object(M.b)("admin.service.integrationAdmin"),label_default:"Restrict managing integrations to Admins:",help_text:Object(M.b)("admin.service.integrationAdminDesc"),help_text_default:"When true, webhooks and slash commands can only be created, edited and viewed by Team and System Admins, and OAuth 2.0 applications by System Admins. Integrations are available to all users after they have been created by the Admin.",permissions_mapping_name:"enableOnlyAdminIntegrations",isHidden:Uo.licensed},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnablePostUsernameOverride",label:Object(M.b)("admin.service.overrideTitle"),label_default:"Enable integrations to override usernames:",help_text:Object(M.b)("admin.service.overrideDescription"),help_text_default:"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the username they are posting as. Note: Combined with allowing integrations to override profile picture icons, users may be able to perform phishing attacks by attempting to impersonate other users.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnablePostIconOverride",label:Object(M.b)("admin.service.iconTitle"),label_default:"Enable integrations to override profile picture icons:",help_text:Object(M.b)("admin.service.iconDescription"),help_text_default:"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the profile picture they post with. Note: Combined with allowing integrations to override usernames, users may be able to perform phishing attacks by attempting to impersonate other users.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableUserAccessTokens",label:Object(M.b)("admin.service.userAccessTokensTitle"),label_default:"Enable User Access Tokens: ",help_text:Object(M.b)("admin.service.userAccessTokensDescription"),help_text_default:"When true, users can create [user access tokens](!https://about.mattermost.com/default-user-access-tokens) for integrations in **Account Settings > Security**. They can be used to authenticate against the API and give full access to the account.\n\n To manage who can create personal access tokens or to search users by token ID, go to the **User Management > Users** page.",help_text_markdown:!0}]}},bot_accounts:{url:"integrations/bot_accounts",title:Object(M.b)("admin.integrations.botAccounts"),title_default:"Bot Accounts",schema:{id:"BotAccountSettings",name:Object(M.b)("admin.integrations.botAccounts.title"),name_default:"Bot Accounts",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableBotAccountCreation",label:Object(M.b)("admin.service.enableBotTitle"),label_default:"Enable Bot Account Creation: ",help_text:Object(M.b)("admin.service.enableBotAccountCreation"),help_text_default:"When true, System Admins can create bot accounts for integrations in [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots). Bot accounts are similar to user accounts except they cannot be used to log in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.",help_text_markdown:!0,help_text_values:{siteURL:Object(C.f)()}},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.DisableBotsWhenOwnerIsDeactivated",label:Object(M.b)("admin.service.disableBotOwnerDeactivatedTitle"),label_default:"Disable bot accounts when owner is deactivated:",help_text:Object(M.b)("admin.service.disableBotWhenOwnerIsDeactivated"),help_text_default:"When a user is deactivated, disables all bot accounts managed by the user. To re-enable bot accounts, go to [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots).",help_text_markdown:!0,help_text_values:{siteURL:Object(C.f)()}}]}},gif:{url:"integrations/gif",title:Object(M.b)("admin.sidebar.gif"),title_default:"GIF (Beta)",schema:{id:"GifSettings",name:Object(M.b)("admin.integrations.gif"),name_default:"GIF (Beta)",settings:[{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableGifPicker",label:Object(M.b)("admin.customization.enableGifPickerTitle"),label_default:"Enable GIF Picker:",help_text:Object(M.b)("admin.customization.enableGifPickerDesc"),help_text_default:"Allow users to select GIFs from the emoji picker via a Gfycat integration."},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.GfycatApiKey",label:Object(M.b)("admin.customization.gfycatApiKey"),label_default:"Gfycat API Key:",help_text:Object(M.b)("admin.customization.gfycatApiKeyDescription"),help_text_default:"Request an API key at [https://developers.gfycat.com/signup/#](!https://developers.gfycat.com/signup/#). Enter the client ID you receive via email to this field. When blank, uses the default API key provided by Gfycat.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.GfycatApiSecret",label:Object(M.b)("admin.customization.gfycatApiSecret"),label_default:"Gfycat API Secret:",help_text:Object(M.b)("admin.customization.gfycatApiSecretDescription"),help_text_default:"The API secret generated by Gfycat for your API key. When blank, uses the default API secret provided by Gfycat."}]}},cors:{url:"integrations/cors",title:Object(M.b)("admin.sidebar.cors"),title_default:"CORS",isHidden:Uo.configIsTrue("ExperimentalSettings","RestrictSystemAdmin"),schema:{id:"CORS",name:Object(M.b)("admin.integrations.cors"),name_default:"CORS",settings:[{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.AllowCorsFrom",label:Object(M.b)("admin.service.corsTitle"),label_default:"Enable cross-origin requests from:",placeholder:Object(M.b)("admin.service.corsEx"),placeholder_default:"http://example.com",help_text:Object(M.b)("admin.service.corsDescription"),help_text_default:'Enable HTTP Cross origin request from a specific domain. Use "*" if you want to allow CORS from any domain or leave it blank to disable it. Should not be set to "*" in production.'},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.CorsExposedHeaders",label:Object(M.b)("admin.service.corsExposedHeadersTitle"),label_default:"CORS Exposed Headers:",placeholder:Object(M.b)("admin.service.corsHeadersEx"),placeholder_default:"X-My-Header",help_text:Object(M.b)("admin.service.corsExposedHeadersDescription"),help_text_default:"Whitelist of headers that will be accessible to the requester."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.CorsAllowCredentials",label:Object(M.b)("admin.service.corsAllowCredentialsLabel"),label_default:"CORS Allow Credentials:",help_text:Object(M.b)("admin.service.corsAllowCredentialsDescription"),help_text_default:"When true, requests that pass validation will include the Access-Control-Allow-Credentials header."},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.CorsDebug",label:Object(M.b)("admin.service.CorsDebugLabel"),label_default:"CORS Debug:",help_text:Object(M.b)("admin.service.corsDebugDescription"),help_text_default:'When true, prints messages to the logs to help when developing an integration that uses CORS. These messages will include the structured key value pair "source":"cors".'}]}}},compliance:{icon:"fa-list",sectionTitle:Object(M.b)("admin.sidebar.compliance"),sectionTitleDefault:"Compliance",data_retention:{url:"compliance/data_retention",title:Object(M.b)("admin.sidebar.dataRetentionPolicy"),title_default:"Data Retention Policy",isHidden:Uo.isnt(Uo.licensedForFeature("DataRetention")),searchableStrings:["admin.data_retention.title","admin.data_retention.messageRetentionDays.description","admin.data_retention.fileRetentionDays.description",["admin.data_retention.note.description",{documentationLink:""}],"admin.data_retention.enableMessageDeletion.title","admin.data_retention.enableMessageDeletion.description","admin.data_retention.enableFileDeletion.title","admin.data_retention.enableFileDeletion.description","admin.data_retention.deletionJobStartTime.title","admin.data_retention.deletionJobStartTime.description","admin.data_retention.createJob.title","admin.data_retention.createJob.help"],schema:{id:"DataRetentionSettings",component:class extends Ee{constructor(...e){super(...e),io(this,"getConfigFromState",e=>(e.DataRetentionSettings.EnableMessageDeletion="true"===this.state.enableMessageDeletion,e.DataRetentionSettings.EnableFileDeletion="true"===this.state.enableFileDeletion,e.DataRetentionSettings.MessageRetentionDays=parseInt(this.state.messageRetentionDays,10),e.DataRetentionSettings.FileRetentionDays=parseInt(this.state.fileRetentionDays,10),e.DataRetentionSettings.DeletionJobStartTime=this.state.deletionJobStartTime,e)),io(this,"handleSubmit",e=>{e.preventDefault(),this.setState({showConfirmModal:!0})}),io(this,"handleSaveConfirmed",()=>{this.setState({showConfirmModal:!1}),this.doSubmit()}),io(this,"handleSaveCanceled",()=>{this.setState({showConfirmModal:!1})}),io(this,"renderConfirmModal",()=>{const e=x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.title",defaultMessage:"Confirm data retention policy"}),t=[];"true"===this.state.enableMessageDeletion?t.push(x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.description.itemMessageDeletion",defaultMessage:"All messages will be permanently deleted after {days} days.",values:{days:x.a.createElement("strong",null,this.state.messageRetentionDays)}})):t.push(x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.description.itemMessageIndefinite",defaultMessage:"All messages will be retained indefinitely."})),"true"===this.state.enableFileDeletion?t.push(x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.description.itemFileDeletion",defaultMessage:"All files will be permanently deleted after {days} days.",values:{days:x.a.createElement("strong",null,this.state.fileRetentionDays)}})):t.push(x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.description.itemFileIndefinite",defaultMessage:"All files will be retained indefinitely."}));const a=x.a.createElement("div",null,x.a.createElement("p",null,x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.description",defaultMessage:"Are you sure you want to apply the following data retention policy:"})),x.a.createElement("ul",null,t.map((e,t)=>x.a.createElement("li",{key:t},e))),x.a.createElement("p",null,x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.clarification",defaultMessage:"Once deleted, messages and files cannot be retrieved."}))),n=x.a.createElement(w.a,{id:"admin.data_retention.confirmChangesModal.confirm",defaultMessage:"Confirm Settings"});return x.a.createElement(ge.a,{show:this.state.showConfirmModal,title:e,message:a,confirmButtonText:n,onConfirm:this.handleSaveConfirmed,onCancel:this.handleSaveCanceled})}),io(this,"renderSettings",()=>{const e=[{value:"false",text:U.jb("admin.data_retention.keepMessagesIndefinitely","Keep all messages indefinitely")},{value:"true",text:U.jb("admin.data_retention.keepMessageForTime","Keep messages for a set amount of time")}],t=[{value:"false",text:U.jb("admin.data_retention.keepFilesIndefinitely","Keep all files indefinitely")},{value:"true",text:U.jb("admin.data_retention.keepFilesForTime","Keep files for a set amount of time")}];let a="";"true"===this.state.enableMessageDeletion&&(a=x.a.createElement(je,{id:"messageRetentionDays",label:x.a.createElement("span",null),placeholder:U.jb("admin.data_retention.messageRetentionDays.example",'E.g.: "60"'),helpText:x.a.createElement(w.a,{id:"admin.data_retention.messageRetentionDays.description",defaultMessage:"Set how many days messages are kept in Mattermost. Messages, including file attachments older than the duration you set will be deleted nightly. The minimum time is one day."}),value:this.state.messageRetentionDays,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.MessageRetentionDays")}));let n="";"true"===this.state.enableFileDeletion&&(n=x.a.createElement(je,{id:"fileRetentionDays",label:x.a.createElement("span",null),placeholder:U.jb("admin.data_retention.fileRetentionDays.example",'E.g.: "60"'),helpText:x.a.createElement(w.a,{id:"admin.data_retention.fileRetentionDays.description",defaultMessage:"Set how many days file uploads are kept in Mattermost. Files older than the duration you set will be deleted nightly. The minimum time is one day."}),value:this.state.fileRetentionDays,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.FileRetentionDays")}));const s=this.renderConfirmModal();return x.a.createElement(Oe,null,s,x.a.createElement("div",{className:"banner"},x.a.createElement("div",{className:"banner__content"},x.a.createElement(w.a,{id:"admin.data_retention.note.description",defaultMessage:"Caution: Once a message or a file is deleted, the action is irreversible. Please be careful when setting up a custom data retention policy. See {documentationLink} to learn more.",values:{documentationLink:x.a.createElement("a",{href:"https://about.mattermost.com/default-dataretention-documentation/",rel:"noopener noreferrer",target:"_blank"},x.a.createElement(w.a,{id:"admin.data_retention.note.description.documentationLinkText",defaultMessage:"documentation"}))}}))),x.a.createElement(Ye,{id:"enableMessageDeletion",values:e,label:x.a.createElement(w.a,{id:"admin.data_retention.enableMessageDeletion.title",defaultMessage:"Message Retention:"}),helpText:x.a.createElement(w.a,{id:"admin.data_retention.enableMessageDeletion.description",defaultMessage:"Set how long Mattermost keeps messages in channels and direct messages."}),value:this.state.enableMessageDeletion,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.EnableMessageDeletion")}),a,x.a.createElement(Ye,{id:"enableFileDeletion",values:t,label:x.a.createElement(w.a,{id:"admin.data_retention.enableFileDeletion.title",defaultMessage:"File Retention:"}),helpText:x.a.createElement(w.a,{id:"admin.data_retention.enableFileDeletion.description",defaultMessage:"Set how long Mattermost keeps file uploads in channels and direct messages."}),value:this.state.enableFileDeletion,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.EnableFileDeletion")}),n,x.a.createElement(je,{id:"deletionJobStartTime",label:x.a.createElement(w.a,{id:"admin.data_retention.deletionJobStartTime.title",defaultMessage:"Data Deletion Time:"}),placeholder:U.jb("admin.data_retention.deletionJobStartTime.example",'E.g.: "02:00"'),helpText:x.a.createElement(w.a,{id:"admin.data_retention.deletionJobStartTime.description",defaultMessage:"Set the start time of the daily scheduled data retention job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM."}),value:this.state.deletionJobStartTime,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.DeletionJobStartTime")}),x.a.createElement(_t,{jobType:O.r.DATA_RETENTION,disabled:"true"!==this.state.enableMessageDeletion&&"true"!==this.state.enableFileDeletion,createJobButtonText:x.a.createElement(w.a,{id:"admin.data_retention.createJob.title",defaultMessage:"Run Deletion Job Now"}),createJobHelpText:x.a.createElement(w.a,{id:"admin.data_retention.createJob.help",defaultMessage:"Initiates a Data Retention deletion job immediately."})}))})}getStateFromConfig(e){return{enableMessageDeletion:String(e.DataRetentionSettings.EnableMessageDeletion),enableFileDeletion:String(e.DataRetentionSettings.EnableFileDeletion),messageRetentionDays:e.DataRetentionSettings.MessageRetentionDays,fileRetentionDays:e.DataRetentionSettings.FileRetentionDays,deletionJobStartTime:e.DataRetentionSettings.DeletionJobStartTime,showConfirmModal:!1}}renderTitle(){return x.a.createElement(w.a,{id:"admin.data_retention.title",defaultMessage:"Data Retention Policy"})}}}},message_export:{url:"compliance/export",title:Object(M.b)("admin.sidebar.complianceExport"),title_default:"Compliance Export (Beta)",isHidden:Uo.isnt(Uo.licensedForFeature("MessageExport")),searchableStrings:["admin.service.complianceExportTitle","admin.service.complianceExportDesc","admin.complianceExport.exportJobStartTime.title","admin.complianceExport.exportJobStartTime.description","admin.complianceExport.exportFormat.title",["admin.complianceExport.exportFormat.description",{siteURL:""}],"admin.complianceExport.createJob.title","admin.complianceExport.createJob.help","admin.complianceExport.globalRelayCustomerType.title","admin.complianceExport.globalRelayCustomerType.description","admin.complianceExport.globalRelaySmtpUsername.title","admin.complianceExport.globalRelaySmtpUsername.description","admin.complianceExport.globalRelaySmtpPassword.title","admin.complianceExport.globalRelaySmtpPassword.description","admin.complianceExport.globalRelayEmailAddress.title","admin.complianceExport.globalRelayEmailAddress.description"],schema:{id:"MessageExportSettings",component:class extends Ee{constructor(...e){super(...e),ro(this,"getConfigFromState",e=>(e.MessageExportSettings.EnableExport=this.state.enableComplianceExport,e.MessageExportSettings.ExportFormat=this.state.exportFormat,e.MessageExportSettings.DailyRunTime=this.state.exportJobStartTime,this.state.exportFormat===co&&(e.MessageExportSettings.GlobalRelaySettings={CustomerType:this.state.globalRelayCustomerType,SmtpUsername:this.state.globalRelaySmtpUsername,SmtpPassword:this.state.globalRelaySmtpPassword,EmailAddress:this.state.globalRelayEmailAddress}),e)),ro(this,"getJobDetails",e=>e.data&&e.data.messages_exported?x.a.createElement(w.a,{id:"admin.complianceExport.messagesExportedCount",defaultMessage:"{count} messages exported.",values:{count:e.data.messages_exported}}):null),ro(this,"renderSettings",()=>{const e=[{value:lo,text:U.jb("admin.complianceExport.exportFormat.actiance","Actiance XML")},{value:oo,text:U.jb("admin.complianceExport.exportFormat.csv","CSV")},{value:co,text:U.jb("admin.complianceExport.exportFormat.globalrelay","GlobalRelay EML")}];let t;if(this.state.exportFormat===co){const e=x.a.createElement(Qe,{id:"globalRelayCustomerType",values:[{value:"A9",text:U.jb("admin.complianceExport.globalRelayCustomerType.a9.description","A9/Type 9")},{value:"A10",text:U.jb("admin.complianceExport.globalRelayCustomerType.a10.description","A10/Type 10")}],label:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelayCustomerType.title",defaultMessage:"Customer Type:"}),helpText:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelayCustomerType.description",defaultMessage:"The type of GlobalRelay customer account that your organization has."}),value:this.state.globalRelayCustomerType?this.state.globalRelayCustomerType:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.CustomerType")}),a=x.a.createElement(je,{id:"globalRelaySmtpUsername",label:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelaySmtpUsername.title",defaultMessage:"SMTP Username:"}),placeholder:U.jb("admin.complianceExport.globalRelaySmtpUsername.example",'E.g.: "globalRelayUser"'),helpText:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelaySmtpUsername.description",defaultMessage:"The username that is used to authenticate against the GlobalRelay SMTP server."}),value:this.state.globalRelaySmtpUsername?this.state.globalRelaySmtpUsername:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.SmtpUsername")}),n=x.a.createElement(je,{id:"globalRelaySmtpPassword",label:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelaySmtpPassword.title",defaultMessage:"SMTP Password:"}),placeholder:U.jb("admin.complianceExport.globalRelaySmtpPassword.example",'E.g.: "globalRelayPassword"'),helpText:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelaySmtpPassword.description",defaultMessage:"The password that is used to authenticate against the GlobalRelay SMTP server."}),value:this.state.globalRelaySmtpPassword?this.state.globalRelaySmtpPassword:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.SmtpPassword")}),s=x.a.createElement(je,{id:"globalRelayEmailAddress",label:x.a.createElement(w.a,{id:"admin.complianceExport.globalRelayEmailAddress.title",defaultMessage:"Email Address:"}),placeholder:U.jb("admin.complianceExport.globalRelayEmailAddress.example",'E.g.: "globalrelay@mattermost.com"'),helpText:x.a.createElement(ce.a,{id:"admin.complianceExport.globalRelayEmailAddress.description",defaultMessage:"The email address that your GlobalRelay server monitors for incoming Compliance Exports."}),value:this.state.globalRelayEmailAddress?this.state.globalRelayEmailAddress:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.EmailAddress")});t=x.a.createElement(Oe,{id:"globalRelaySettings"},e,a,n,s)}const a=x.a.createElement(P.b,{id:"admin.complianceExport.exportFormat.description",defaultMessage:'Format of the compliance export. Corresponds to the system that you want to import the data into.\\n \\nFor Actiance XML, compliance export files are written to the \\"exports\\" subdirectory of the configured [Local Storage Directory]({siteURL}/admin_console/environment/file_storage). For Global Relay EML, they are emailed to the configured email address.',values:{siteURL:Object(C.f)()}});return x.a.createElement(Oe,null,x.a.createElement(we,{id:"enableComplianceExport",label:x.a.createElement(w.a,{id:"admin.service.complianceExportTitle",defaultMessage:"Enable Compliance Export:"}),helpText:x.a.createElement(P.b,{id:"admin.service.complianceExportDesc",defaultMessage:"When true, Mattermost will export all messages that were posted in the last 24 hours. The export task is scheduled to run once per day. See [the documentation](!https://about.mattermost.com/default-compliance-export-documentation) to learn more."}),value:this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.EnableExport")}),x.a.createElement(je,{id:"exportJobStartTime",label:x.a.createElement(w.a,{id:"admin.complianceExport.exportJobStartTime.title",defaultMessage:"Compliance Export Time:"}),placeholder:U.jb("admin.complianceExport.exportJobStartTime.example",'E.g.: "02:00"'),helpText:x.a.createElement(ce.a,{id:"admin.complianceExport.exportJobStartTime.description",defaultMessage:"Set the start time of the daily scheduled compliance export job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM."}),value:this.state.exportJobStartTime,disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.DailyRunTime")}),x.a.createElement(Ye,{id:"exportFormat",values:e,label:x.a.createElement(w.a,{id:"admin.complianceExport.exportFormat.title",defaultMessage:"Export Format:"}),helpText:a,value:this.state.exportFormat,disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.ExportFormat")}),t,x.a.createElement(_t,{jobType:O.r.MESSAGE_EXPORT,disabled:!this.state.enableComplianceExport,createJobButtonText:x.a.createElement(w.a,{id:"admin.complianceExport.createJob.title",defaultMessage:"Run Compliance Export Job Now"}),createJobHelpText:x.a.createElement(w.a,{id:"admin.complianceExport.createJob.help",defaultMessage:"Initiates a Compliance Export job immediately."}),getExtraInfoText:this.getJobDetails}))})}getStateFromConfig(e){const t={enableComplianceExport:e.MessageExportSettings.EnableExport,exportFormat:e.MessageExportSettings.ExportFormat,exportJobStartTime:e.MessageExportSettings.DailyRunTime};return e.MessageExportSettings.GlobalRelaySettings&&(t.globalRelayCustomerType=e.MessageExportSettings.GlobalRelaySettings.CustomerType,t.globalRelaySmtpUsername=e.MessageExportSettings.GlobalRelaySettings.SmtpUsername,t.globalRelaySmtpPassword=e.MessageExportSettings.GlobalRelaySettings.SmtpPassword,t.globalRelayEmailAddress=e.MessageExportSettings.GlobalRelaySettings.EmailAddress),t}renderTitle(){return x.a.createElement(w.a,{id:"admin.complianceExport.title",defaultMessage:"Compliance Export (Beta)"})}}}},audits:{url:"compliance/monitoring",title:Object(M.b)("admin.sidebar.complianceMonitoring"),title_default:"Compliance Monitoring",isHidden:Uo.isnt(Uo.licensed),searchableStrings:["admin.audits.title","admin.audits.reload"],schema:{id:"Audits",name:Object(M.b)("admin.compliance.complianceMonitoring"),name_default:"Compliance Monitoring",component:Qt,isHidden:Uo.isnt(Uo.licensedForFeature("Compliance")),settings:[{type:O.j.SettingsTypes.TYPE_BANNER,label:Object(M.b)("admin.compliance.newComplianceExportBanner"),label_markdown:!0,label_default:"This feature is replaced by a new [Compliance Export]({siteURL}/admin_console/compliance/export) feature, and will be removed in a future release. We recommend migrating to the new system.",label_values:{siteURL:Object(C.f)()},isHidden:Uo.isnt(Uo.licensedForFeature("Compliance")),banner_type:"info"},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ComplianceSettings.Enable",label:Object(M.b)("admin.compliance.enableTitle"),label_default:"Enable Compliance Reporting:",help_text:Object(M.b)("admin.compliance.enableDesc"),help_text_default:"When true, Mattermost allows compliance reporting from the **Compliance and Auditing** tab. See [documentation](!https://docs.mattermost.com/administration/compliance.html) to learn more.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensedForFeature("Compliance"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ComplianceSettings.Directory",label:Object(M.b)("admin.compliance.directoryTitle"),label_default:"Compliance Report Directory:",help_text:Object(M.b)("admin.compliance.directoryDescription"),help_text_default:"Directory to which compliance reports are written. If blank, will be set to ./data/.",placeholder:Object(M.b)("admin.compliance.directoryExample"),placeholder_default:'E.g.: "./data/"',isDisabled:Uo.stateIsFalse("ComplianceSettings.Enable"),isHidden:Uo.isnt(Uo.licensedForFeature("Compliance"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ComplianceSettings.EnableDaily",label:Object(M.b)("admin.compliance.enableDailyTitle"),label_default:"Enable Daily Report:",help_text:Object(M.b)("admin.compliance.enableDailyDesc"),help_text_default:"When true, Mattermost will generate a daily compliance report.",isDisabled:Uo.stateIsFalse("ComplianceSettings.Enable"),isHidden:Uo.isnt(Uo.licensedForFeature("Compliance"))}]}},custom_terms_of_service:{url:"compliance/custom_terms_of_service",title:Object(M.b)("admin.sidebar.customTermsOfService"),title_default:"Custom Terms of Service (Beta)",isHidden:Uo.isnt(Uo.licensedForFeature("CustomTermsOfService")),searchableStrings:["admin.support.termsOfServiceTitle","admin.support.enableTermsOfServiceTitle","admin.support.enableTermsOfServiceHelp","admin.support.termsOfServiceTextTitle","admin.support.termsOfServiceTextHelp","admin.support.termsOfServiceReAcceptanceTitle","admin.support.termsOfServiceReAcceptanceHelp"],schema:{id:"TermsOfServiceSettings",component:Oo}}},experimental:{icon:"fa-flask",sectionTitle:Object(M.b)("admin.sidebar.experimental"),sectionTitleDefault:"Experimental",experimental_features:{url:"experimental/features",title:Object(M.b)("admin.sidebar.experimentalFeatures"),title_default:"Features",schema:{id:"ExperimentalSettings",name:Object(M.b)("admin.experimental.experimentalFeatures"),name_default:"Experimental Features",settings:[{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginButtonColor",label:Object(M.b)("admin.experimental.ldapSettingsLoginButtonColor.title"),label_default:"AD/LDAP Login Button Color:",help_text:Object(M.b)("admin.experimental.ldapSettingsLoginButtonColor.desc"),help_text_default:"Specify the color of the AD/LDAP login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensedForFeature("LDAP"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginButtonBorderColor",label:Object(M.b)("admin.experimental.ldapSettingsLoginButtonBorderColor.title"),label_default:"AD/LDAP Login Button Border Color:",help_text:Object(M.b)("admin.experimental.ldapSettingsLoginButtonBorderColor.desc"),help_text_default:"Specify the color of the AD/LDAP login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensedForFeature("LDAP"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginButtonTextColor",label:Object(M.b)("admin.experimental.ldapSettingsLoginButtonTextColor.title"),label_default:"AD/LDAP Login Button Text Color:",help_text:Object(M.b)("admin.experimental.ldapSettingsLoginButtonTextColor.desc"),help_text_default:"Specify the color of the AD/LDAP login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensedForFeature("LDAP"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.ExperimentalEnableAuthenticationTransfer",label:Object(M.b)("admin.experimental.experimentalEnableAuthenticationTransfer.title"),label_default:"Allow Authentication Transfer:",help_text:Object(M.b)("admin.experimental.experimentalEnableAuthenticationTransfer.desc"),help_text_default:"When true, users can change their sign-in method to any that is enabled on the server, either via Account Settings or the APIs. When false, Users cannot change their sign-in method, regardless of which authentication options are enabled.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensed)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.CloseUnusedDirectMessages",label:Object(M.b)("admin.experimental.closeUnusedDirectMessages.title"),label_default:"Autoclose Direct Messages in Sidebar:",help_text:Object(M.b)("admin.experimental.closeUnusedDirectMessages.desc"),help_text_default:"When true, direct message conversations with no activity for 7 days will be hidden from the sidebar. When false, conversations remain in the sidebar until they are manually closed.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ExperimentalSettings.LinkMetadataTimeoutMilliseconds",label:Object(M.b)("admin.experimental.linkMetadataTimeoutMilliseconds.title"),label_default:"Link Metadata Timeout:",help_text:Object(M.b)("admin.experimental.linkMetadataTimeoutMilliseconds.desc"),help_text_default:"The number of milliseconds to wait for metadata from a third-party link. Used with Post Metadata.",help_text_markdown:!1,placeholder:Object(M.b)("admin.experimental.linkMetadataTimeoutMilliseconds.example"),placeholder_default:'E.g.: "5000"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"EmailSettings.EmailBatchingBufferSize",label:Object(M.b)("admin.experimental.emailBatchingBufferSize.title"),label_default:"Email Batching Buffer Size:",help_text:Object(M.b)("admin.experimental.emailBatchingBufferSize.desc"),help_text_default:"Specify the maximum number of notifications batched into a single email.",help_text_markdown:!1,placeholder:Object(M.b)("admin.experimental.emailBatchingBufferSize.example"),placeholder_default:'E.g.: "256"'},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"EmailSettings.EmailBatchingInterval",label:Object(M.b)("admin.experimental.emailBatchingInterval.title"),label_default:"Email Batching Interval:",help_text:Object(M.b)("admin.experimental.emailBatchingInterval.desc"),help_text_default:"Specify the maximum frequency, in seconds, which the batching job checks for new notifications. Longer batching intervals will increase performance.",help_text_markdown:!1,placeholder:Object(M.b)("admin.experimental.emailBatchingInterval.example"),placeholder_default:'E.g.: "30"'},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.LoginButtonColor",label:Object(M.b)("admin.experimental.emailSettingsLoginButtonColor.title"),label_default:"Email Login Button Color:",help_text:Object(M.b)("admin.experimental.emailSettingsLoginButtonColor.desc"),help_text_default:"Specify the color of the email login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.LoginButtonBorderColor",label:Object(M.b)("admin.experimental.emailSettingsLoginButtonBorderColor.title"),label_default:"Email Login Button Border Color:",help_text:Object(M.b)("admin.experimental.emailSettingsLoginButtonBorderColor.desc"),help_text_default:"Specify the color of the email login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_TEXT,key:"EmailSettings.LoginButtonTextColor",label:Object(M.b)("admin.experimental.emailSettingsLoginButtonTextColor.title"),label_default:"Email Login Button Text Color:",help_text:Object(M.b)("admin.experimental.emailSettingsLoginButtonTextColor.desc"),help_text_default:"Specify the color of the email login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableUserDeactivation",label:Object(M.b)("admin.experimental.enableUserDeactivation.title"),label_default:"Enable Account Deactivation:",help_text:Object(M.b)("admin.experimental.enableUserDeactivation.desc"),help_text_default:"When true, users may deactivate their own account from **Account Settings > Advanced**. If a user deactivates their own account, they will get an email notification confirming they were deactivated. When false, users may not deactivate their own account.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.ExperimentalEnableAutomaticReplies",label:Object(M.b)("admin.experimental.experimentalEnableAutomaticReplies.title"),label_default:"Enable Automatic Replies:",help_text:Object(M.b)("admin.experimental.experimentalEnableAutomaticReplies.desc"),help_text_default:"When true, users can enable Automatic Replies in **Account Settings > Notifications**. Users set a custom message that will be automatically sent in response to Direct Messages. When false, disables the Automatic Direct Message Replies feature and hides it from Account Settings.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableChannelViewedMessages",label:Object(M.b)("admin.experimental.enableChannelViewedMessages.title"),label_default:"Enable Channel Viewed WebSocket Messages:",help_text:Object(M.b)("admin.experimental.enableChannelViewedMessages.desc"),help_text_default:"This setting determines whether `channel_viewed` WebSocket events are sent, which synchronize unread notifications across clients and devices. Disabling the setting in larger deployments may improve server performance.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ExperimentalSettings.ClientSideCertEnable",label:Object(M.b)("admin.experimental.clientSideCertEnable.title"),label_default:"Enable Client-Side Certification:",help_text:Object(M.b)("admin.experimental.clientSideCertEnable.desc"),help_text_default:"Enables client-side certification for your Mattermost server. See [documentation](!https://docs.mattermost.com/deployment/certificate-based-authentication.html) to learn more.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensedForFeature("SAML"))},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"ExperimentalSettings.ClientSideCertCheck",label:Object(M.b)("admin.experimental.clientSideCertCheck.title"),label_default:"Client-Side Certification Login Method:",help_text:Object(M.b)("admin.experimental.clientSideCertCheck.desc"),help_text_default:"When **primary**, after the client side certificate is verified, user’s email is retrieved from the certificate and is used to log in without a password. When **secondary**, after the client side certificate is verified, user’s email is retrieved from the certificate and matched against the one supplied by the user. If they match, the user logs in with regular email/password credentials.",help_text_markdown:!0,options:[{value:"primary",display_name:"primary",display_name_default:"primary"},{value:"secondary",display_name:"secondary",display_name_default:"secondary"}],isDisabled:Uo.stateIsFalse("ExperimentalSettings.ClientSideCertEnable"),isHidden:Uo.isnt(Uo.licensedForFeature("SAML"))},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.ExperimentalEnableDefaultChannelLeaveJoinMessages",label:Object(M.b)("admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.title"),label_default:"Enable Default Channel Leave/Join System Messages:",help_text:Object(M.b)("admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.desc"),help_text_default:"This setting determines whether team leave/join system messages are posted in the default town-square channel.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.ExperimentalEnableHardenedMode",label:Object(M.b)("admin.experimental.experimentalEnableHardenedMode.title"),label_default:"Enable Hardened Mode:",help_text:Object(M.b)("admin.experimental.experimentalEnableHardenedMode.desc"),help_text_default:"Enables a hardened mode for Mattermost that makes user experience trade-offs in the interest of security. See [documentation](!https://docs.mattermost.com/administration/config-settings.html#enable-hardened-mode-experimental) to learn more.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnablePreviewFeatures",label:Object(M.b)("admin.experimental.enablePreviewFeatures.title"),label_default:"Enable Preview Features:",help_text:Object(M.b)("admin.experimental.enablePreviewFeatures.desc"),help_text_default:"When true, preview features can be enabled from **Account Settings > Advanced > Preview pre-release features**. When false, disables and hides preview features from **Account Settings > Advanced > Preview pre-release features**.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ThemeSettings.EnableThemeSelection",label:Object(M.b)("admin.experimental.enableThemeSelection.title"),label_default:"Enable Theme Selection:",help_text:Object(M.b)("admin.experimental.enableThemeSelection.desc"),help_text_default:"Enables the **Display > Theme** tab in Account Settings so users can select their theme.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensed)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ThemeSettings.AllowCustomThemes",label:Object(M.b)("admin.experimental.allowCustomThemes.title"),label_default:"Allow Custom Themes:",help_text:Object(M.b)("admin.experimental.allowCustomThemes.desc"),help_text_default:"Enables the **Display > Theme > Custom Theme** section in Account Settings.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensed),isDisabled:Uo.stateIsFalse("ThemeSettings.EnableThemeSelection")},{type:O.j.SettingsTypes.TYPE_TEXT,key:"ThemeSettings.DefaultTheme",label:Object(M.b)("admin.experimental.defaultTheme.title"),label_default:"Default Theme:",help_text:Object(M.b)("admin.experimental.defaultTheme.desc"),help_text_default:"Set a default theme that applies to all new users on the system.",help_text_markdown:!0,options:[{value:"default",display_name:"default",display_name_default:"default"},{value:"organization",display_name:"organization",display_name_default:"organization"},{value:"mattermostDark",display_name:"mattermostDark",display_name_default:"mattermostDark"},{value:"windows10",display_name:"windows10",display_name_default:"windows10"}],isHidden:Uo.isnt(Uo.licensed)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableTutorial",label:Object(M.b)("admin.experimental.enableTutorial.title"),label_default:"Enable Tutorial:",help_text:Object(M.b)("admin.experimental.enableTutorial.desc"),help_text_default:"When true, users are prompted with a tutorial when they open Mattermost for the first time after account creation. When false, the tutorial is disabled, and users are placed in Town Square when they open Mattermost for the first time after account creation.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableUserTypingMessages",label:Object(M.b)("admin.experimental.enableUserTypingMessages.title"),label_default:"Enable User Typing Messages:",help_text:Object(M.b)("admin.experimental.enableUserTypingMessages.desc"),help_text_default:'This setting determines whether "user is typing..." messages are displayed below the message box. Disabling the setting in larger deployments may improve server performance.',help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.TimeBetweenUserTypingUpdatesMilliseconds",label:Object(M.b)("admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.title"),label_default:"User Typing Timeout:",help_text:Object(M.b)("admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.desc"),help_text_default:"The number of milliseconds to wait between emitting user typing websocket events.",help_text_markdown:!1,placeholder:Object(M.b)("admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.example"),placeholder_default:'E.g.: "5000"',isDisabled:Uo.stateIsFalse("ServiceSettings.EnableUserTypingMessages")},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableXToLeaveChannelsFromLHS",label:Object(M.b)("admin.experimental.enableXToLeaveChannelsFromLHS.title"),label_default:"Enable X to Leave Channels from Left-Hand Sidebar:",help_text:Object(M.b)("admin.experimental.enableXToLeaveChannelsFromLHS.desc"),help_text_default:"When true, users can leave Public and Private Channels by clicking the “x” beside the channel name. When false, users must use the **Leave Channel** option from the channel menu to leave channels.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_TEXT,key:"TeamSettings.ExperimentalPrimaryTeam",label:Object(M.b)("admin.experimental.experimentalPrimaryTeam.title"),label_default:"Primary Team:",help_text:Object(M.b)("admin.experimental.experimentalPrimaryTeam.desc"),help_text_default:"The primary team of which users on the server are members. When a primary team is set, the options to join other teams or leave the primary team are disabled.",help_text_markdown:!0,placeholder:Object(M.b)("admin.experimental.experimentalPrimaryTeam.example"),placeholder_default:'E.g.: "teamname"'},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ExperimentalSettings.UseNewSAMLLibrary",label:Object(M.b)("admin.experimental.experimentalUseNewSAMLLibrary.title"),label_default:"Use Improved SAML Library (Beta):",help_text:Object(M.b)("admin.experimental.experimentalUseNewSAMLLibrary.desc"),help_text_default:"Enable an updated SAML Library, which does not require the XML Security Library (xmlsec1) to be installed. Warning: Not all providers have been tested. If you experience issues, please contact support: [https://about.mattermost.com/support/](!https://about.mattermost.com/support/). Changing this setting requires a server restart before taking effect.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensedForFeature("SAML"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LoginButtonColor",label:Object(M.b)("admin.experimental.samlSettingsLoginButtonColor.title"),label_default:"SAML Login Button Color:",help_text:Object(M.b)("admin.experimental.samlSettingsLoginButtonColor.desc"),help_text_default:"Specify the color of the SAML login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensedForFeature("SAML"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LoginButtonBorderColor",label:Object(M.b)("admin.experimental.samlSettingsLoginButtonBorderColor.title"),label_default:"SAML Login Button Border Color:",help_text:Object(M.b)("admin.experimental.samlSettingsLoginButtonBorderColor.desc"),help_text_default:"Specify the color of the SAML login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensedForFeature("SAML"))},{type:O.j.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LoginButtonTextColor",label:Object(M.b)("admin.experimental.samlSettingsLoginButtonTextColor.title"),label_default:"SAML Login Button Text Color:",help_text:Object(M.b)("admin.experimental.samlSettingsLoginButtonTextColor.desc"),help_text_default:"Specify the color of the SAML login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.",help_text_markdown:!1,isHidden:Uo.isnt(Uo.licensedForFeature("SAML"))},{type:O.j.SettingsTypes.TYPE_DROPDOWN,key:"ServiceSettings.ExperimentalChannelSidebarOrganization",label:Object(M.b)("admin.experimental.experimentalChannelSidebarOrganization.title"),label_default:"Experimental Sidebar Features",help_text:Object(M.b)("admin.experimental.experimentalChannelSidebarOrganization.desc"),help_text_default:"When enabled, users can access experimental channel sidebar features, including collapsible sections and unreads filtering. If default on, this enabled the new sidebar features by default for all users on this server. Users can disable the features in **Account Settings > Sidebar > Experimental Sidebar Features**. If default off, users must enable the experimental sidebar features in Account Settings. [Learn more](!https://about.mattermost.com/default-sidebar/) or [give us feedback](!https://about.mattermost.com/default-sidebar-survey/)",help_text_markdown:!0,options:[{value:"disabled",display_name:Object(M.b)("admin.experimental.experimentalChannelSidebarOrganization.disabled"),display_name_default:"Disabled"},{value:"default_on",display_name:Object(M.b)("admin.experimental.experimentalChannelSidebarOrganization.default_on"),display_name_default:"Enabled (Default On)"},{value:"default_off",display_name:Object(M.b)("admin.experimental.experimentalChannelSidebarOrganization.default_off"),display_name_default:"Enabled (Default Off)"}]},{type:O.j.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.ExperimentalChannelOrganization",label:Object(M.b)("admin.experimental.experimentalChannelOrganization.title"),label_default:"Channel Grouping and Sorting",help_text:Object(M.b)("admin.experimental.experimentalChannelOrganization.desc"),help_text_default:"Enables channel sidebar organization options in **Account Settings > Sidebar > Channel grouping and sorting** including options for grouping unread channels, sorting channels by most recent post and combining all channel types into a single list. These settings are not available if **Account Settings > Sidebar > Experimental Sidebar Features** are enabled.",help_text_markdown:!0},{type:O.j.SettingsTypes.TYPE_BOOL,key:"DisplaySettings.ExperimentalTimezone",label:Object(M.b)("admin.experimental.experimentalTimezone.title"),label_default:"Timezone:",help_text:Object(M.b)("admin.experimental.experimentalTimezone.desc"),help_text_default:"Select the timezone used for timestamps in the user interface and email notifications. When true, the Timezone setting is visible in the Account Settings and a time zone is automatically assigned in the next active session. When false, the Timezone setting is hidden in the Account Settings.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.ExperimentalHideTownSquareinLHS",label:Object(M.b)("admin.experimental.experimentalHideTownSquareinLHS.title"),label_default:"Town Square is Hidden in Left-Hand Sidebar:",help_text:Object(M.b)("admin.experimental.experimentalHideTownSquareinLHS.desc"),help_text_default:"When true, hides Town Square in the left-hand sidebar if there are no unread messages in the channel. When false, Town Square is always visible in the left-hand sidebar even if all messages have been read.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensed)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"TeamSettings.ExperimentalTownSquareIsReadOnly",label:Object(M.b)("admin.experimental.experimentalTownSquareIsReadOnly.title"),label_default:"Town Square is Read-Only:",help_text:Object(M.b)("admin.experimental.experimentalTownSquareIsReadOnly.desc"),help_text_default:"When true, only System Admins can post in Town Square. Other members are not able to post, reply, upload files, emoji react or pin messages to Town Square, nor are they able to change the channel name, header or purpose. When false, anyone can post in Town Square.",help_text_markdown:!0,isHidden:Uo.isnt(Uo.licensed)},{type:O.j.SettingsTypes.TYPE_BOOL,key:"EmailSettings.UseChannelInEmailNotifications",label:Object(M.b)("admin.experimental.useChannelInEmailNotifications.title"),label_default:"Use Channel Name in Email Notifications:",help_text:Object(M.b)("admin.experimental.useChannelInEmailNotifications.desc"),help_text_default:"When true, channel and team name appears in email notification subject lines. Useful for servers using only one team. When false, only team name appears in email notification subject line.",help_text_markdown:!1},{type:O.j.SettingsTypes.TYPE_NUMBER,key:"TeamSettings.UserStatusAwayTimeout",label:Object(M.b)("admin.experimental.userStatusAwayTimeout.title"),label_default:"User Status Away Timeout:",help_text:Object(M.b)("admin.experimental.userStatusAwayTimeout.desc"),help_text_default:'This setting defines the number of seconds after which the user’s status indicator changes to "Away", when they are away from Mattermost.',help_text_markdown:!1,placeholder:Object(M.b)("admin.experimental.userStatusAwayTimeout.example"),placeholder_default:'E.g.: "300"'}]}}}};Object(M.b)("admin.field_names.allowBannerDismissal"),Object(M.b)("admin.field_names.bannerColor"),Object(M.b)("admin.field_names.bannerText"),Object(M.b)("admin.field_names.bannerTextColor"),Object(M.b)("admin.field_names.enableBanner"),Object(M.b)("admin.field_names.enableCommands"),Object(M.b)("admin.field_names.enableConfirmNotificationsToChannel"),Object(M.b)("admin.field_names.enableIncomingWebhooks"),Object(M.b)("admin.field_names.enableOAuthServiceProvider"),Object(M.b)("admin.field_names.enableOutgoingWebhooks"),Object(M.b)("admin.field_names.enablePostIconOverride"),Object(M.b)("admin.field_names.enablePostUsernameOverride"),Object(M.b)("admin.field_names.enableUserAccessTokens"),Object(M.b)("admin.field_names.enableUserCreation"),Object(M.b)("admin.field_names.maxChannelsPerTeam"),Object(M.b)("admin.field_names.maxNotificationsPerChannel"),Object(M.b)("admin.field_names.maxUsersPerTeam"),Object(M.b)("admin.field_names.postEditTimeLimit"),Object(M.b)("admin.field_names.restrictCreationToDomains"),Object(M.b)("admin.field_names.restrictDirectMessage"),Object(M.b)("admin.field_names.teammateNameDisplay");var qo=Fo;const Go=Object(E.createSelector)(()=>qo,e=>e.plugins.adminConsoleReducers,(e,t)=>{let a=Object(S.cloneDeep)(qo);for(const e of Object.values(t))a=e(a);return a}),Ho=(e,t)=>e.plugins.adminConsoleCustomComponents[t]||{};var Wo=a(125),zo=(a(1459),a(1223)),Yo=a(1375),Vo=a(1531);class Jo extends x.a.Component{render(){const e=x.a.createElement(w.a,{id:"discard_changes_modal.title",defaultMessage:"Discard Changes?"}),t=x.a.createElement(w.a,{id:"discard_changes_modal.message",defaultMessage:"You have unsaved changes, are you sure you want to discard them?"}),a=x.a.createElement(w.a,{id:"discard_changes_modal.leave",defaultMessage:"Yes, Discard"}),{show:n,onConfirm:s,onCancel:i}=this.props;return x.a.createElement(ge.a,{show:n,title:e,message:t,modalClass:"discard-changes-modal",confirmButtonClass:"btn btn-primary",confirmButtonText:a,onConfirm:s,onCancel:i})}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Jo,"propTypes",{show:j.a.bool.isRequired,onConfirm:j.a.func.isRequired,onCancel:j.a.func.isRequired});var Xo=a(1218),Ko=a.n(Xo),Qo=a(1977),$o=a.n(Qo),Zo=a(1978),el=a.n(Zo),tl=a(83);function al(e){const t=nl(Nt(e));if(e.name&&t.push(e.name),e.id&&t.push(e.id),e.settings_schema&&(e.settings_schema.footer&&t.push(Object(tl.c)(e.settings_schema.footer)),e.settings_schema.header&&t.push(Object(tl.c)(e.settings_schema.header)),e.settings_schema.settings)){const a=Object.values(e.settings_schema.settings);for(const e of a){const a=nl(e);t.push(...a)}}return t}function nl(e){const t=[];return e.label&&t.push(e.label),e.display_name&&t.push(e.display_name),e.help_text&&t.push(Object(tl.c)(e.help_text)),e.key&&t.push(e.key),t}function sl(e,t){const a=[];if(e.title&&a.push(t.formatMessage({id:e.title,defaultMessage:e.title_default})),e.schema&&e.schema.name&&a.push(e.schema.name),e.searchableStrings)for(const n of e.searchableStrings)"string"==typeof n?a.push(t.formatMessage({id:n,defaultMessage:n})):a.push(t.formatMessage({id:n[0],defaultMessage:""},n[1]));if(e.schema&&e.schema.settings)for(const n of Object.values(e.schema.settings))n.label&&a.push(t.formatMessage({id:n.label,defaultMessage:n.label_default},n.label_values)),n.help_text&&"string"==typeof n.help_text&&a.push(t.formatMessage({id:n.help_text,defaultMessage:n.help_text_default},n.help_text_values)),n.remove_help_text&&a.push(t.formatMessage({id:n.remove_help_text,defaultMessage:n.remove_help_text_default})),n.remove_button_text&&a.push(t.formatMessage({id:n.remove_button_text,defaultMessage:n.remove_button_text_default}));return a}function il(e,t,a){const n=new el.a;return rl(function(e,t){const a={};for(const n of Object.values(e.about))a[n.url]=sl(n,t);for(const n of Object.values(e.reporting))a[n.url]=sl(n,t);for(const n of Object.values(e.user_management))a[n.url]=sl(n,t);for(const n of Object.values(e.environment))a[n.url]=sl(n,t);for(const n of Object.values(e.site))a[n.url]=sl(n,t);for(const n of Object.values(e.authentication))a[n.url]=sl(n,t);for(const n of Object.values(e.plugins))a[n.url]=sl(n,t);for(const n of Object.values(e.integrations))a[n.url]=sl(n,t);for(const n of Object.values(e.compliance))a[n.url]=sl(n,t);for(const n of Object.values(e.experimental))a[n.url]=sl(n,t);return a}(e,a),n),rl(function(e={}){const t={},a=e||{};for(const e of Object.keys(a)){t["plugin_".concat(e)]=al(a[e])}return t}(t),n),n}function rl(e,t){for(const a of Object.keys(e)){let n="";for(const t of e[a])n+=" "+t;t.add(a,n)}}class ol extends x.a.Component{static get propTypes(){return{name:j.a.string,title:j.a.node.isRequired,icon:j.a.string.isRequired,sectionClass:j.a.string,parentLink:j.a.string,children:j.a.node,action:j.a.node}}static get defaultProps(){return{parentLink:""}}render(){let e=this.props.parentLink,t=x.a.createElement("div",{className:"category-title category-title--active"},x.a.createElement("i",{className:"category-icon fa "+this.props.icon}),x.a.createElement("span",{className:"category-title__text"},this.props.title),this.props.action);this.props.name&&(e+="/"+name,t=x.a.createElement(de.b,{to:e,className:"category-title",activeClassName:"category-title category-title--active"},t));let a=null;return this.props.children&&(a=x.a.createElement(u.b,{path:e,render:()=>x.a.createElement("ul",{className:"sections "+this.props.sectionClass},x.a.Children.map(this.props.children,t=>null===t?null:x.a.cloneElement(t,{parentLink:e})))})),x.a.createElement("li",{className:"sidebar-category"},t,a)}}var ll=a(1286),cl=a(1534),dl=a(1246);const ul=e=>{const{to:t,text:a}=e;return x.a.createElement(xa,{to:t},a)};ul.propTypes={to:j.a.string.isRequired,text:j.a.oneOfType([j.a.string,j.a.node]).isRequired};const ml=Object(dl.a)(ul);ml.displayName="MenuItemBlockableLinkImpl";var hl=ml;function pl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class gl extends x.a.Component{constructor(...e){super(...e),pl(this,"handleLogout",e=>{this.props.navigationBlocked?(e.preventDefault(),this.props.actions.deferNavigation(Mn.e)):Mn.e()})}render(){const{locale:e,teams:t,siteName:a}=this.props,{formatMessage:n}=this.props.intl,s=[];let i;if(t&&t.length>0){const a=Object(In.a)(t,e);for(const e of a)s.push(x.a.createElement(hl,{key:"team_"+e.name,to:"/"+e.name,text:n({id:"navbar_dropdown.switchTo",defaultMessage:"Switch to "})+" "+e.display_name}))}else i=x.a.createElement(hl,{to:"/select_team",icon:x.a.createElement(w.a,{id:"select_team.icon",defaultMessage:"Select Team Icon"},e=>"string"==typeof e?x.a.createElement("i",{className:"fa fa-exchange",title:e}):e),text:n({id:"admin.nav.switch",defaultMessage:"Team Selection"})});return x.a.createElement(Bn.a,{ariaLabel:n({id:"admin.nav.menuAriaLabel",defaultMessage:"Admin Console Menu"})},x.a.createElement(Bn.a.Group,null,s,i),x.a.createElement(Bn.a.Group,null,x.a.createElement(Bn.a.ItemExternalLink,{onClick:()=>Object(Ut.d)("admin","click_administrators_guide"),url:"https://about.mattermost.com/administrators-guide/",text:n({id:"admin.nav.administratorsGuide",defaultMessage:"Administrator Guide"})}),x.a.createElement(Bn.a.ItemExternalLink,{onClick:()=>Object(Ut.d)("admin","click_administrators_forum"),url:"https://about.mattermost.com/troubleshooting-forum/",text:n({id:"admin.nav.troubleshootingForum",defaultMessage:"Troubleshooting Forum"})}),x.a.createElement(Bn.a.ItemExternalLink,{onClick:()=>Object(Ut.d)("admin","click_administrators_support"),url:"https://about.mattermost.com/commercial-support/",text:n({id:"admin.nav.commercialSupport",defaultMessage:"Commercial Support"})}),x.a.createElement(Bn.a.ItemToggleModalRedux,{onClick:()=>Object(Ut.d)("admin","click_administrators_about"),modalId:O.u.ABOUT,dialogType:cl.a,text:n({id:"navbar_dropdown.about",defaultMessage:"About {appTitle}"},{appTitle:a||"Mattermost"})})),x.a.createElement(Bn.a.Group,null,x.a.createElement(Bn.a.ItemAction,{onClick:this.handleLogout,text:n({id:"navbar_dropdown.logout",defaultMessage:"Log Out"})})))}}pl(gl,"propTypes",{intl:j.a.any.isRequired,locale:j.a.string.isRequired,siteName:j.a.string,navigationBlocked:j.a.bool,teams:j.a.arrayOf(j.a.any).isRequired,actions:j.a.shape({deferNavigation:j.a.func.isRequired}).isRequired});var fl=Object(pt.c)(gl);var bl=Object(r.connect)((function(e){return{locale:Object($.a)(e),teams:Object(b.getMyTeams)(e),siteName:Object(m.getConfig)(e).SiteName,navigationBlocked:Object(y.a)(e)}}),(function(e){return{actions:Object(o.bindActionCreators)({deferNavigation:_.f},e)}}))(fl);class vl extends x.a.Component{render(){const e=this.props.currentUser;let t=null;return e?(e.last_picture_update&&(t=x.a.createElement(Pn.a,{username:e.username,url:Ft.Client4.getProfilePictureUrl(e.id,e.last_picture_update),size:"lg"})),x.a.createElement(Ln.a,{className:"AdminSidebarHeader"},x.a.createElement("div",null,t,x.a.createElement("div",{className:"header__info"},x.a.createElement("div",{className:"team__name"},x.a.createElement(w.a,{id:"admin.sidebarHeader.systemConsole",defaultMessage:"System Console"})),x.a.createElement("div",{className:"user__name overflow--ellipsis whitespace--nowrap"},"@"+e.username)),x.a.createElement("button",{className:"style--none"},x.a.createElement(ll.a,{className:"menu-icon"}))),x.a.createElement(bl,null))):null}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(vl,"propTypes",{currentUser:j.a.oneOfType([j.a.any,j.a.shape({last_picture_update:j.a.number})]).isRequired});var _l=Object(r.connect)((function(e){return{currentUser:Object(f.getCurrentUser)(e)}}))(vl);class yl extends x.a.Component{static get propTypes(){return{name:j.a.string.isRequired,title:j.a.node.isRequired,type:j.a.string,parentLink:j.a.string,subsection:j.a.bool,children:j.a.node,action:j.a.node}}static get defaultProps(){return{parentLink:"",subsection:!1,children:[]}}getLink(){return this.props.parentLink+"/"+this.props.name}render(){const e=this.getLink();let t=null;this.props.children&&(t=x.a.createElement("ul",{className:"nav nav__sub-menu subsections"},x.a.Children.map(this.props.children,t=>null===t?null:x.a.cloneElement(t,{parentLink:e,subsection:!0}))));let a="sidebar-section";this.props.subsection&&(a+=" sidebar-subsection");const n=U.h(this.props.name);let s=x.a.createElement(xa,{id:n,className:"".concat(a,"-title"),activeClassName:"".concat(a,"-title ").concat(a,"-title--active"),to:e,onClick:()=>Object(Ut.d)("admin",n)},x.a.createElement("span",{className:"".concat(a,"-title__text")},this.props.title),this.props.action);return"text"===this.props.type&&(s=x.a.createElement("div",{className:"".concat(a,"-title")},x.a.createElement("span",{className:"".concat(a,"-title__text")},this.props.title),this.props.action)),x.a.createElement("li",{className:a},s,t)}}var El=a(1979),Sl=a.n(El),Tl=a(1217),xl=a.n(Tl);function wl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ol extends x.a.Component{constructor(e){super(e),wl(this,"markInstance",void 0),wl(this,"ref",void 0),wl(this,"redrawHighlight",xl()(()=>{this.markInstance&&this.markInstance.unmark(),this.props.filter&&this.ref.current&&(this.markInstance=new Sl.a(this.ref.current),this.markInstance.mark(this.props.filter,{accuracy:"complementary"}))},100,{leading:!0,trailing:!0})),this.ref=x.a.createRef()}render(){return setTimeout(this.redrawHighlight,0),x.a.createElement("div",{ref:this.ref},this.props.children)}}wl(Ol,"propTypes",{filter:j.a.string.isRequired,children:j.a.node.isRequired});var Cl=a(1242);function Ml(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const kl=e=>x.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"})),jl=e=>x.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"})),Pl=e=>x.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}));class Al extends x.a.Component{constructor(e){super(e),Ml(this,"onFilterChange",e=>{const t=e.target.value;if(""===t)return this.setState({sections:null,filter:t}),void this.props.onFilterChange(t);null===this.idx&&(this.idx=il(this.props.adminDefinition,this.props.plugins,this.props.intl));let a="";for(const e of t.split(" "))e.trim(),""!==e&&(a+=e+" ",a+=e+"* ");const n=this.idx.search(a);if(!(this.setState({sections:n,filter:t}),this.props.onFilterChange(t),this.props.navigationBlocked||-1!==n.indexOf(ya.a.location.pathname.replace("/admin_console/","")))){const e=this.visibleSections();for(const t of n)if(e.has(t)){ya.a.replace("/admin_console/"+t);break}}}),Ml(this,"updateTitle",()=>{let e="";this.props.siteName&&(e=" - "+this.props.siteName),document.title=U.jb("sidebar_right_menu.console","System Console")+e}),Ml(this,"visibleSections",()=>{const e=e=>!!e.schema&&(!!e.title&&(!e.isHidden||!e.isHidden(this.props.config,{},this.props.license,this.props.buildEnterpriseReady))),t=new Set;for(const a of Object.values(this.props.adminDefinition))for(const n of Object.values(a))e(n)&&t.add(n.url);return t}),Ml(this,"renderRootMenu",e=>{const t=[];return Object.values(e).forEach((e,a)=>{const n=[];Object.values(e).forEach((e,t)=>{if(e.title&&(!e.isHidden||!e.isHidden(this.props.config,{},this.props.license,this.props.buildEnterpriseReady))){if(null!==this.state.sections){let t=!1;for(const a of this.state.sections)a===e.url&&(t=!0);if(!t)return}n.push(x.a.createElement(yl,{key:t,name:e.url,title:x.a.createElement(w.a,{id:e.title,defaultMessage:e.title_default})}))}});let s=[];return"plugins"===e.id&&(s=this.renderPluginsMenu()),0===n.length&&0===s.length||(n.length||s.length)&&t.push(x.a.createElement(ol,{key:a,parentLink:"/admin_console",icon:e.icon,sectionClass:"",title:x.a.createElement(w.a,{id:e.sectionTitle,defaultMessage:e.sectionTitleDefault})},n,s)),null}),t}),Ml(this,"renderPluginsMenu",()=>{const e=[];return this.props.config.PluginSettings.Enable&&Object.values(this.props.plugins).sort((e,t)=>{const a=e.name.localeCompare(t.name);return 0!==a?a:e.id.localeCompare(t.id)}).forEach(t=>{t.settings_schema&&(t.settings_schema.header||t.settings_schema.footer||t.settings_schema.settings)&&(t.settings_schema.settings&&!t.settings_schema.header&&!t.settings_schema.footer&&t.settings_schema.settings.hasOwnProperty("length")&&0===t.settings_schema.settings.length||null!==this.state.sections&&-1===this.state.sections.indexOf("plugin_".concat(t.id))||e.push(x.a.createElement(yl,{key:"customplugin"+t.id,name:"plugins/plugin_"+t.id,title:t.name})))}),e}),Ml(this,"handleClearFilter",()=>{this.setState({sections:null,filter:""}),this.props.onFilterChange("")}),this.state={sections:null,filter:""},this.idx=null,this.searchRef=x.a.createRef()}componentDidMount(){this.props.config.PluginSettings.Enable&&this.props.actions.getPlugins(),this.searchRef.current&&this.searchRef.current.focus(),this.updateTitle()}componentDidUpdate(e){null===this.idx||$o()(this.props.plugins,e.plugins)&&$o()(this.props.adminDefinition,e.adminDefinition)||(this.idx=il(this.props.adminDefinition,this.props.plugins,this.props.intl))}render(){return x.a.createElement("div",{className:"admin-sidebar"},x.a.createElement(_l,null),x.a.createElement("div",{className:"filter-container"},x.a.createElement(ni.a,{className:"search__icon","aria-hidden":"true"}),x.a.createElement(Cl.a,{className:"filter "+(this.state.filter?"active":""),type:"text",onChange:this.onFilterChange,value:this.state.filter,placeholder:U.jb("admin.sidebar.filter","Find settings"),ref:this.searchRef,id:"adminSidebarFilter",clearable:!0,onClear:this.handleClearFilter})),x.a.createElement(Ko.a,{ref:"scrollbar",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:jl,renderThumbVertical:Pl,renderView:kl},x.a.createElement("div",{className:"nav-pills__container"},x.a.createElement(Ol,{filter:this.state.filter},x.a.createElement("ul",{className:"nav nav-pills nav-stacked"},this.renderRootMenu(this.props.adminDefinition))))))}}Ml(Al,"propTypes",{license:j.a.object.isRequired,config:j.a.object,plugins:j.a.object,adminDefinition:j.a.object,buildEnterpriseReady:j.a.bool,siteName:j.a.string,onFilterChange:j.a.func.isRequired,navigationBlocked:j.a.bool.isRequired,intl:gt.a.isRequired,actions:j.a.shape({getPlugins:j.a.func.isRequired}).isRequired}),Ml(Al,"defaultProps",{plugins:{}});var Rl=Object(pt.c)(Al);var Nl=Object(r.connect)((function(e){const t=Object(m.getLicense)(e),a=Object(m.getConfig)(e),n="true"===a.BuildEnterpriseReady,s=a.SiteName,i=Go(e);return{license:t,config:e.entities.admin.config,plugins:e.entities.admin.plugins,navigationBlocked:Object(y.a)(e),buildEnterpriseReady:n,siteName:s,adminDefinition:i}}),(function(e){return{actions:Object(o.bindActionCreators)({getPlugins:l.getPlugins},e)}}),null,{pure:!1})(Rl);function Dl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Il extends x.a.Component{constructor(e){super(e),Dl(this,"onFilterChange",e=>{this.setState({filter:e})}),Dl(this,"renderRoutes",e=>{const t=Object.values(this.props.adminDefinition).reduce((e,t)=>{const a=Object.values(t).filter(e=>(!e.isHidden||!e.isHidden(this.props.config,{},this.props.license,this.props.buildEnterpriseReady))&&!!e.schema);return e.concat(a)},[]),a=t.map(t=>x.a.createElement(u.b,{key:t.url,path:"".concat(this.props.match.url,"/").concat(t.url),render:a=>x.a.createElement(At,Object.assign({},e,a,{schema:t.schema}))})),n=t[0].url;return x.a.createElement(u.d,null,a,x.a.createElement(u.a,{to:"".concat(this.props.match.url,"/").concat(n)}))}),this.state={filter:""}}componentDidMount(){this.props.actions.getConfig(),this.props.actions.getEnvironmentConfig(),this.props.actions.loadRolesIfNeeded(["channel_user","team_user","system_user","channel_admin","team_admin","system_admin"]),this.props.actions.selectChannel(""),this.props.actions.selectTeam("")}mainRolesLoaded(e){return e&&e.channel_admin&&e.channel_user&&e.team_admin&&e.team_user&&e.system_admin&&e.system_user}render(){const{license:e,config:t,environmentConfig:a,showNavigationPrompt:n,roles:s}=this.props,{setNavigationBlocked:i,cancelNavigation:r,confirmNavigation:o,editRole:l,updateConfig:c}=this.props.actions;if(!this.props.isCurrentUserSystemAdmin)return x.a.createElement(u.a,{to:this.props.unauthorizedRoute});if(!this.mainRolesLoaded(this.props.roles))return null;if(0===Object.keys(t).length)return x.a.createElement("div",null);if(t&&0===Object.keys(t).length&&t.constructor===Object)return x.a.createElement("div",{className:"admin-console__wrapper"},x.a.createElement(zo.a,null),x.a.createElement("div",{className:"admin-console"}));const d=x.a.createElement(Jo,{show:n,onConfirm:o,onCancel:r}),m={license:e,config:t,environmentConfig:a,setNavigationBlocked:i,roles:s,editRole:l,updateConfig:c};return x.a.createElement("div",{className:"admin-console__wrapper",id:"adminConsoleWrapper"},x.a.createElement(zo.a,null),x.a.createElement(Yo.a,null),x.a.createElement(Nl,{onFilterChange:this.onFilterChange}),x.a.createElement("div",{className:"admin-console"},x.a.createElement(Ol,{filter:this.state.filter},this.renderRoutes(m))),d,x.a.createElement(Vo.a,null))}}Dl(Il,"propTypes",{config:j.a.any.isRequired,adminDefinition:j.a.any.isRequired,environmentConfig:j.a.any,license:j.a.any.isRequired,unauthorizedRoute:j.a.string.isRequired,buildEnterpriseReady:j.a.bool.isRequired,roles:j.a.objectOf(j.a.oneOfType([j.a.string,j.a.object])).isRequired,match:j.a.shape({url:j.a.string.isRequired}).isRequired,showNavigationPrompt:j.a.bool.isRequired,isCurrentUserSystemAdmin:j.a.bool.isRequired,actions:j.a.shape({getConfig:j.a.func.isRequired,getEnvironmentConfig:j.a.func.isRequired,setNavigationBlocked:j.a.func.isRequired,confirmNavigation:j.a.func.isRequired,cancelNavigation:j.a.func.isRequired,loadRolesIfNeeded:j.a.func.isRequired,selectChannel:j.a.func.isRequired,selectTeam:j.a.func.isRequired,editRole:j.a.func.isRequired,updateConfig:j.a.func}).isRequired});t.default=Object(u.g)(Object(r.connect)((function(e){const t="true"===Object(m.getConfig)(e).BuildEnterpriseReady,a=Go(e),n=Wo.a.getPreviousTeamId(Object(f.getCurrentUserId)(e)),s=Object(b.getTeam)(e,n||""),i=s?"/".concat(s.name,"/channels/").concat(v.General.DEFAULT_CHANNEL):"/";return{config:d.getConfig(e),environmentConfig:d.getEnvironmentConfig(e),license:Object(m.getLicense)(e),buildEnterpriseReady:t,unauthorizedRoute:i,navigationBlocked:Object(y.a)(e),showNavigationPrompt:Object(y.c)(e),isCurrentUserSystemAdmin:Object(f.isCurrentUserSystemAdmin)(e),roles:Object(h.getRoles)(e),adminDefinition:a}}),(function(e){return{actions:Object(o.bindActionCreators)({getConfig:l.getConfig,getEnvironmentConfig:l.getEnvironmentConfig,updateConfig:l.updateConfig,setNavigationBlocked:_.E,deferNavigation:_.f,cancelNavigation:_.d,confirmNavigation:_.e,loadRolesIfNeeded:c.loadRolesIfNeeded,editRole:c.editRole,selectChannel:p.selectChannel,selectTeam:g.selectTeam},e)}}))(Il))}}]);
//# sourceMappingURL=6.d14f672d47563ea50911.js.map